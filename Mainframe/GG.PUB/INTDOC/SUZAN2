options:  unnum  ind 6  dest sysl  flash memo  fcb mem6
                                            Date: January 24, 1988

To:       Distribution

From:     Jim Nisbet

Subject:  New SUZAN SVC "SETINFO" and extended "INFO" calls


A privileged program (e.g. WYLBUR) can now set "path information"
which can be sensed by the path partner.  WYLBUR uses this
capability to provide account information when a Wylbur user opens a
path.  (The partner will want to know which Wylbur user opened the
path, not just that the program "WYLBUR" opened a path.)

There is a new SCOM call as follows:

       SCOM  SETINFO,area,path-address

where "area" is:
         4 bytes     length of information which follows.
         x bytes     path information (if over 96 bytes, only
                       the first 96 bytes will be saved).

The "path information" is binary zeros if not explicitly set.  If
less than 96 bytes is set, then the area is padded with binary
zeros.

In addition the existing "INFO" call has been extended to provide
more information.  The INFO SCOM call is as follows:

   INFO              Pointer to list of buffer addresses and
                     lengths, each entry is 8 bytes long.  The end
                     of the list is signified by turning on the
                     high-order bit.  As much of the following
                     information as will fit is placed into the
                     buffer area(s):

                         Partner's ASCB Address (4 Bytes)
                         Partner's Buffer Size (4 Bytes)
                         Partner's Path Name (8 Bytes)
                         Input Transaction Chain Pointer (4 Bytes)
                n -->    Zeros/reserved (16 bytes)
                e -->    Partner's path info (96 bytes)
                w -->    Your path info (96 bytes)

--------------------------------

The Suzan SVC treats the "path information" as user data--it can be
anything.

The format Wylbur uses for this user data is described in the DSECT
called "PINFO" in SYS3.IS.MACLIB#PINFO.  The following is a copy of
the PINFO DSECT.

*box
*
*  USER PATH INFORMATION
*
*
*  Subsystems provides this information whenever they open user
*  paths.  The information is set with the Suzan SVC
*  "SETINFO" call (a 1/88 Suzan SVC extension).
*
*  Once a path is opened, a program can sense this information
*  for the partner's side of the path.
*
PINFO    RECORD BEGIN
         DC    CL4'PINF'           Self identification
         DC    F'0'                Reserved
PINFOSYS DC    CL8' '              Subsystem name ("WYLBUR", etc.)
PINFOACC DC    CL8' '              User account ("gg.uuu")
PINFOPRJ DC    CL8' '              Project (subgroup)
         DC    CL8' '              Reserved
         DC    2F'0'               Reserved
PINFOFL1 FLAG
PINFOFL2 FLAG
PINFOLNO DC    H'-1'               Milten line-number (or -1)
PINFOID  DC    F'0'                Milten session id
PINFONAM DC    CL20' '             User name
         END
