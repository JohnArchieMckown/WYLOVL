This document is meant to be printed on the IBM 3800 printer in
Forsythe Hall rather than read online.  However, if you are looking
for specific information, reading a few lines on the screen may be
satisfactory.  Printing on other than the IBM 3800 printer may
require adjustments to the PRINT command.  You may need to delete
the OPTIONS: line and add options suitable for your printer.  To
print from the IBM 3800, type the PRINT 1/LAST command.
OPTIONS: CC UNN IND 9 FORMS=9511 CHARS=(U003,BD10)
 DOC#APLDA PUBLIC                            Document number:     408
 Center for Information Technology           Latest update:     05/79
 Stanford University                         Length:        610 lines
1                                                                 #408
                                                              May 1979


  PRINT FROM DOC#APLDA PUBLIC
  THIS DATA SET WILL BE PRINTED WITH THE FOLLOWING OPTIONS:
  CC UNN IND=9 FORMS=9511 CHARS=(U003,BD10)
  NOT FOR TERMINAL LISTING










                  Using APL DATA ANALYSIS at Stanford
+                 ___________________________________





 1                            INTRODUCTION

  This  document  describes  the  APL  DATA  ANALYSIS  package,  which
  provides an easy method for entering raw data into an APL workspace.
  This package was developed by Eagle Berns, Geraldine  MacDonald  and
  Carol  Link.   It  is  part one of a two-part process to enhance the
  interactive statistics facility available in  APL.   Part  two  (not
  currently available) will attach existing APL statistical programs.

  The  data  entry  step  is  complete.   This  phase  can   be   used
  independently by any APL user needing to access large amounts of raw
  data.























 1 C.I.T.  stanford center for information processing
11                         APL DATA ANALYSIS


  The APL DATA ANALYSIS package provides an easy method  for  entering
  raw data into an APL workspace on the Stanford APL system.  The user
  is  required  to  provide  the location of the data set as well as a
  description of the data in raw form.  While the system is written in
  APL, no knowledge of APL is required to  use  it  (persons  familiar
  with APL, however, may use their skills in conjunction with APL DATA
  ANALYSIS  to  do more advanced data processing).  Access and command
  usage for APL DATA ANALYSIS are described below.





 1                     ENTERING APL DATA ANALYSIS


  APL DATA ANALYSIS is accessed by issuing the WYLBUR EXEC command  in
  the following way:

 1                     exec from lib#aplda public

  This will initialize APL DATA ANALYSIS and start you  off  with  the
  first APL DATA ANALYSIS prompt.

  Using APL DATA ANALYSIS  with  the  above  method  requires  no  APL
  typeball  or  APL terminal.  Users already familiar with APL may use
  APL DATA ANALYSIS with an APL typeball by specifying SET  UPPER  and
  SET APL before entering the system.  APL DATA ANALYSIS can be loaded
  by an APL user by typing )LOAD 1 APLDA followed by BEGIN to initiate
  processing.




 1********************************************************************
 1*                                                                  *
     In the following sections of  this  document,  user  responses
+1*                                                                  *
     which  must  be  typed exactly as indicated, appear in capital
+1*                                                                  *
     letters.  Lower case items indicate responses  for  which  the
+1*                                                                  *
     user must supply the appropriate values.
+1*                                                                  *
 1*                                                                  *
 1********************************************************************
11                 APL DATA ANALYSIS PROMPTS/COMMANDS


            This  command requests you to inform the system of the lo-
+1DATASET:
  cation of the raw data.  The data may be in the WYLBUR active  file,
  an  ORVYL  file, APL workspace, or WYLBUR data set.  The response to
  this command may be one of the following:   (NOTE -  The  colon,  as
  used  below,  is  required  syntax  in  the  response to the DATASET
  command.)

                                  - the data is in the  WYLBUR  active
+1<carriage return>
   or                               file.
 1ACTIVE

                                  - the raw data  is  in  a  data  set
+1WYL:<dsname> <options>
                                    accessible   from   WYLBUR.   This
                                    causes  execution  of  the  WYLBUR
                                    command USE <dsname>  <options>  .
                                    For example:
                                          wyl:wyl.gg.uuu.data
                                          wyl:#libmem
                                          wyl:(libmem)

                                  - the raw data is in an  ORVYL  file
+1ORV:<filename> <assign options>
                                    and  the  file  format,  etc.  are
                                    given  by the URAM assign options.
                                    See the  document  URAM for Inter-
+                                                      _______________
                                    active Languages:
+                                   ________________
                                      use wyl.si.apl.doc#uram on cat

                                  - the  data  has   been   previously
+1APL:<workspacename>
   or                               entered  using  APL  DATA ANALYSIS
                                    and  has  been  saved   (see  SAVE
+1APL:
                                    command  below)  with   the   name
                                    <workspacename>.    The   data  is
                                    brought in directly with  no  need
                                    to describe its format.  Execution
                                    goes  directly to the RUN command.
                                    Note, just entering APL:   implies
                                    <workspacename>  is  the name used
                                    for  a  SAVE  in  the  last   save
                                    operation  during  the current APL
                                    DATA ANALYSIS session.

1          This will be the next prompt, except when  "APL:"  was  the
+1FORMAT:
  response to the DATASET:  prompt.  At this point  you  describe  the
  data in one of two ways; either by use of a simple data list or by a
  restricted  form of a FORTRAN format.  A carriage return response to
  the FORMAT prompt will read the active  file  as  one  variable  and
  store the data as a character matrix in APL.

  1. Data List Statement

  NOTE - The  DATA  LIST  STATEMENT  option  for  data  entry uses the
  smallest amount of computer time.

  In this form, the variable name  and type (alphanumeric or numeric),
  the columns in which data appears,  and the implied decimal location
  are all given at once.  The form is:

 1<var name> <alphanumeric> <first col-last col> <implied decimal>

                                  - variable name
+1<var name>

                                  - the dollar sign character ($).  It
+1<alphanumeric>
                                    is present ONLY  if  the  data  is
                                    alphanumeric.

                                  - two  numbers  separated  by a dash
+1<first col-last col>
                                    that specify in which columns  the
                                    data exists.   If the data is only
                                    one column wide,  a  single number
                                    (the starting column)  is all that
                                    is required.

                                  - only applicable to  numeric  data:
+1<implied decimal>
                                    a single number describing where a
                                    decimal point  is  to  be  implied
                                    counting   from   the   right-most
                                    position of the number.

  For example:

  FORMAT:  name $ 1-6 age 8-10 sex 12 ht 18-20 wt 21-23 2

  A single observation may be spread out  over  more  than  one  line;
  hence  we  need  a  mechanism to describe this in our format.  It is
  done by using a pound sign (#) or a slash (/) followed by a  number.

  For example:

  FORMAT:  name $ 1-6 age 8-10 #2 ht 1-3 wt 4-6

  means read the name and age from the first card using columns 1 to 6
  and 8 to 10 respectively, and then read ht from columns 1  to  3  of
  the second card, and wt from columns 4 to 6 of the second card.

1 Abbreviations are allowed for  multiple  variable  names  that  have
  succeeding  incremental numbers in their names, i.e., v1 v2 v3 v4 v5
  v6 which may be written as v1-v6@x*y.   The  @x*y  means  read  data
  starting  at  (@) column x, with y columns for each item ( :  may be
  used if no @ is available on the terminal).   Thus  v1-v6@1*3  means
  the same as v1 1-3 v2 4-6 v3 7-9 etc.  The *y may be omitted if each
  variable is only 1 position wide.

  2. Free Form Input

  In the data list statement,  any or all column specifications may be
  left out if the data items under consideration are separated  by  at
  least one blank.  HOWEVER, THIS METHOD MAKES PROCESSING  QUITE  SLOW
  AND  VERY  COSTLY,  and  you  are advised against using it if at all
  possible.  Spending some time editing the data in  WYLBUR,  so fixed
  column  input  may  be used would be less costly in the long run, if
  the data were to be used several times.

  3. FORTRAN Format Statement

  You may use any of the following formats:

                                  - n  fields  of  data,  w  positions
+1nFw.d
                                    long,  with  an  implied   decimal
                                    point  d  positions  in  from  the
                                    right; the items must be numeric

                                  - n  alphanumeric  fields,  w  posi-
+1nAw
                                    tions long

                                  - no data; just pass over n  columns
+1nX
                                    of the input

                                  - no  data;  just  skip  this  input
+1/
                                    record and go to the next

  The FORMAT specification must be enclosed  in  parentheses  and  the
  items separated by commas (except for the slash).

                     Sample formats:    (f3.0,2x,3a4)
                                        (4f6.2,5x/3f2.0,a6)
                                        (2x,2a3//4a3)

  Once the FORTRAN format has been specified, a prompt for the list of
  variable  names will follow.

1        You must issue  a  name  for  the  variables  for  which  the
+1LIST:
  positions  have  been  described in the format.  The names may be of
  any length and must be separated by at least one blank.  There  must
  be one name and one name only for each data item.

  When there  is a series of variables  with  a  name  followed  by  a
  number  which  increases  by  one  for each succeeding variable, for
  example, TYP1 TYP2 TYP3  TYP4  TYP5,  you  may  abbreviate  this  by
  entering TYP1-TYP5 [NO BLANKS ALLOWED AROUND THE DASH SYMBOL (-)].

  Following are some examples of formats and variable descriptors:

                        FORMAT: (f3.0,a4,2x,3f3.0)
                        LIST: age name p q r

                        FORMAT: (f3.0,a4,2x,3f3.0)
                        LIST: age name p1-p3

                        FORMAT: (f3.0,a4,2x,3f3.0)
                        LIST: p1-p5

  NOTE - Of the three examples above, the second will  use  the  least
  amount  of  cpu  time when processed by APL DATA ANALYSIS - that is,
  when the n of nFw.d or of nAw matches up with the  number  of  items
  in an abbreviated variable list.


         Once the data has been described, APL DATA ANALYSIS  proceeds
+1READ:
  to  the  READ  prompt.   The responses to the READ prompt can be one
  of the following:

                                  - the read is to take place and  the
+1YES <groupname>
   or                               <groupname>  indicates  a  name to
                                    be associated  with all data read.
+1OK <groupname>
                                    If <groupname>  is  not given, the
                                    name TEMP is used.

                                  - implies YES TEMP
+1<carriage return>

                                  - do not read the data; just  go  to
+1NO
                                    the  next  command.   (This  would
                                    allow   for  re-specification   of
                                    FORMAT   or   DATASET  options  if
                                    necessary, or  the  correction  of
                                    errors detected before  continuing
                                    with processing.)
1       At this point the data has been read in and is  available  for
+1RUN:
  further processing.  The user may  respond  with  the  command  SAVE
  <workspacename> which will cause an APL workspace to be created with
  the  name <workspacename> containing only those variables created by
  the data entry methods described above.  (The  saved  workspace  may
  later  be used in the APL:<workspacename> response  to  DATASET:  as
  described in the section on the DATASET prompt.)  SAVE  will  always
  save the most recently created data set.

  You may respond to the RUN prompt with the TYPE command to list  the
  current data set at the terminal.  The syntax is as follows:

 1                TYPE <range> <NAME=groupname> <vars>

                                  - a  number  to  specify  the obser-
+1range
                                    vation(s) to be listed.  It may be
                                    a single number or  a  range  like
                                    number1-number2.    If   range  is
                                    specified as 0, a list of variable
                                    names will  be  provided.   If  no
                                    range  is  specified, all observa-
                                    tions are listed.

                                  - groupname is a  name  assigned  by
+1NAME=groupname
                                    the  READ  prompt.  Groupname  de-
                                    faults to the most  recently  cre-
                                    ated data set.

                                  - variable name  (or  names)  to  be
+1vars
                                    listed.  If the variable  list  is
                                    age  sex  ht  wt,  then  age-ht is
                                    equivalent  to  age  sex  ht;   in
                                    reverse,  wt-sex  is equivalent to
                                    wt ht sex.   The  default  is  the
                                    listing of all variables.

                            Examples:    RUN: type
                                         RUN: type 5
                                         RUN: type 2-5 name=temp v s

  NOTE - Specifying PRINT instead of TYPE with the above options  will
  send the list to the WYLBUR active file.
11                           OTHER COMMANDS


  Other than the responses described above for  the  command  prompts,
  several other options are available as responses to any prompt:

                                  - implies you are not sure  of  what
+1?
                                    to do at this  point,  and  causes
                                    the   system  to  provide  a  help
                                    message.

                                  - causes the system to  back-up  one
+1?/
                                    prompt  in the prompting sequence.
                                    Thus:  FORMAT:  ?/ causes DATASET:

     or                           - causes a  return  to  the  DATASET
+1?T    ?TOP
                                    prompt   (top line of processing),
                                    no matter where you may be in  the
                                    prompt sequence.

           or                     - causes   the  system  to  pass  on
+1?W <cmd>    ?WYL <cmd>
                                    the command to WYLBUR/ORVYL/MILTEN
                                    for processing,
                                    e.g., ?w show users

     or                           - causes you to exit  from  the  APL
+1?E    ?EXIT
                                    DATA ANALYSIS system  immediately.
                                    Note,  data  which  has  not  been
                                    saved will not be retained in  any
                                    form.

     or                           - causes you  to  be  sent  directly
+1?A    ?APL
                                    into APL (used, of course, only if
                                    you are familiar with APL).   Once
                                    in APL you may return to your non-
                                    APL session by entering  the  word
                                    RETURN or R.

     or                           - shows responses  to  all  prompts.
+1?S    ?STATUS
                                    This  is  re-initialized  at every
                                    return to the DATASET prompt.

                                  - can be used to continue any  line.
+1...
                                    Example:     FORMAT: x y ...
                                                 z

1
                                  - any response preceded by a  period
+1<.response>
                                    saves the contents of the response
                                    for later use.  (This  is  helpful
                                    for reading more than one data set
                                    with the same format.)

                                  - restores and uses the  command  if
+1<.carriage return>
                                    you are at the correct prompt.

                            Examples:    FORMAT: .name 1-8 age 10-12
                                         READ: ok
                                         RUN: ?top
                                         DATASET: active
                                         FORMAT: <.carriage return>

  NOTE - If an error occurs or a BREAK interrupts  processing,  typing
  "R"  or  "RETURN" will return you to the prompt you were at when the
  break occurred.


  Missing Values

  Missing numeric values are stored as -7.237005577E75;
  missing character values are stored as periods.




 1                          APL CONVENTIONS


  For users familiar with APL, who intend to use the data  created  by
  APL DATA ANALYSIS, the following naming  convention  exists  in  the
  current workspace or the saved workspace.

  If no name is given to the group in response to the READ prompt, the
  name TEMP is used.  Then, assuming the user variable list  contained
  NAME, SEX  and  AGE, the data points would be stored in vectors with
  the name TEMPûNAME; TEMPûSEX; and TEMPûAGE.  If they  were  given  a
  name  in the READ command, that name replaces TEMP in the above.  If
  the del symbol is unavailable (as  with  a  non-APL  terminal),  the
  variable may be accessed with a function called VAR as follows:

 1                        VAR 'variable name'
11                    SAMPLE TERMINAL SESSIONS

  NOTE - All prompts from the system are typed in bold face.

 1 ?
+    use #data clear
 1 ?
+    list
       1.     JOHN        M 14 69 112     <--- sample input data
       2.     GRACE       F 12 56  98
       3.     JANE        F 13 62  96
       4.     BARBARA     F 12 60  84

 1 ?
+    exec from lib#aplda public

   APL DATA ANALYSIS
            <CR>                          <--- <CR> indicates
+1 DATASET:
           <CR>                                <carriage return>, the
+1 FORMAT:
                                               default response
         <CR>
+1 READ:
        type                              <--- TYPE response produces
+1 RUN:
   VARIABLE LIST:                              the following listing

   TEMP                                   <--- default - creates one
                                               variable

   VARIABLE VALUES:


   JOHN     M   14   69  112
   GRACE    F   12   56   98
   JANE     F   13   62   96
   BARBARA  F   12   60   84

                                          <--- awaiting next command
+1 RUN:



   ___________________________________________________________________



            active
+1 DATASET:
           name  $  1-11  sex  $  ...     <--- data list statement
+1 FORMAT:
   12  age 14-15 ht 17-18 wt 20-21             with continued line

         ok testdata                      <--- TESTDATA is the
+1 READ:
        type                                   groupname for this data
+1 RUN:
   VARIABLE LIST:

   NAME   SEX   AGE   HT   WT

   VARIABLE VALUES:                       <--- variable values will
                                               list here

        save study1                       <--- data will be saved in
+1 RUN:
                                               an APL workspace named
                                               STUDY1
   SAVED 10:34:38    04/06/79
1       ?a                                <--- exit to APL environment
+1 RUN:

         )load study1
   SAVED 10:34:38    04/06/79
         )vars t                          <--- variables will be
                                               associated with the
                                               groupname TESTDATA

   TESTDATAûAGE TESTDATAûHT TESTDATAûNAME TESTDATAûSEX TESTDATAûWT

         )load 1 aplda                    <--- to invoke APL DATA
   SAVED 09:15:25    04/01/79                  ANALYSIS from APL
         begin
   APL DATA ANALYSIS
            wyl: #case1                   <--- member of WYLBUR
+1 DATASET:
                                               library

           name $ sex $ age ht wt         <--- free format input
+1 FORMAT:
                                               statement
   WARNING: READING FREE FORMAT DATA IS COSTLY
         ok
+1 READ:
        type 1-4
+1 RUN:
   VARIABLE LIST:

   NAME   SEX   AGE   HT   WT

   VARIABLE VALUES:                       <--- variable values will
                                               list here

        ?t                                <--- return to DATASET
+1 RUN:
                                               prompt


            wyl: #case1                   <--- member of WYLBUR
+1 DATASET:
                                               library

           (a10,a2,3f3.0)                 <--- FORTRAN format
+1 FORMAT:
                                               statement
         name sex age ht wt
+1 LIST:
         ok
+1 READ:
        type 1-4
+1 RUN:
   VARIABLE LIST:

   NAME SEX  AGE  HT   WT

   VARIABLE VALUES:

   JOHN     M   14   69  112
   GRACE    F   12   56   98
   JANE     F   13   62   96
   BARBARA  F   12   60   84
        ?exit
+1 RUN:
