; PART OF "SPIRES MAIL FILE" SYSTEM
; SEE "SETTING UP AN ONLINE MAIL FILE" (DOCUMENT #151)
;
; Last revision 07/26/83 by Mark Lawrence
;
WRI 'MAILFILE  version of 07/26/83 -- set up a SPIRES mail file'
IF (LINES EQ 0) EXE 20 ; IF CLEAR
REA STR S0 UPP PRO 'OK to clear active file? '
IF (S0 EQ '') EXE 80
IF (IND('YESOK',S0) NE 0) CLR ACT
ELSE EXE 80 ; NO--ABORT

USE LIBDATA#FILEDEF PUB
CALL SPIRES(BW)
SELECT FILEDEF
/CHANGE ' FILE =       ' TO ' FILE = $ACCOUNT.MAIL.LIST;' NOLIST
/CHANGE 'ACCOUNTS =      ' TO 'ACCOUNTS = $ACCOUNT;' NOLIST
ADD
COMM Your file definition has been successfully added.
CALL SPICOMP(W) CLR
COMPILE MAIL.LIST
CALL SPIRES(BW) CLR
SELECT FORMATS
USE LIBDATA#FORDEF CLR PUB NOW
/CHANGE 'ID =       ' TO 'ID = $ACCOUNT.MAIL.LIST;' NOLIST
/CHANGE 'FILE =       ' TO 'FILE = $ACCOUNT.MAIL.LIST;' NOLIST
ADD
COMM Your format has been added to the formats subfile.
CALL SPICOMP(W) CLR
FORMAT MAIL.LIST
CLEAR EXEC
; ABORT
COMM Exiting MAILFILE--no action taken.
CLR EXEC
