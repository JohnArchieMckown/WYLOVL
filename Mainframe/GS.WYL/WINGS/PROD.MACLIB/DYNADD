         MACRO                                                          00001000
&L       DYNADD &TABLE=TVTDYNBF,&RTNTYPE=X                              00002000
.*                                                                      00003000
.*  MACRO TO CALL THE DYNAMIC ALLOCATION ADD TEXT UNIT                  00004000
.*                                                                      00005000
.*  ADDED  12/14/90, PJG                                                00006000
         GBLB  &$OK                GENERAL HIBAL SWITCH                 00006010
.*                                                                      00006020
         LCLC  &UNIT               SVC99 UNIT TYPE                      00006030
         LCLC  &COUNT              NUMBER OF PARAMETERS                 00006040
         LCLC  &LENGTH             LENGTH OF PARAMETERS                 00006050
         LCLC  &PARM               PARAMETER VALUE                      00006060
         LCLA  &STACK              REQUIRED STACK SPACE                 00006070
.*                                                                      00006080
         AIF   (T'&SYSLIST(1) EQ 'O').NOLIST1                           00006090
&UNIT    SETC  '&SYSLIST(1,1)'                                          00006100
&COUNT   SETC  '&SYSLIST(1,2)'                                          00006110
&LENGTH  SETC  '&SYSLIST(1,3)'                                          00006120
         AIF   (&COUNT EQ 0).SKIP00                                     00006130
         AIF   (T'&SYSLIST(2) EQ 'O').NOLIST2                           00006140
&PARM    SETC  '&SYSLIST(2)'                                            00006160
.SKIP00  ANOP  ,                                                        00006170
&STACK   SETA  6+&LENGTH                                                00006830
&L       XPUSH ,,&STACK,PTR=R1                                          00006840
         MVC   @R1(6),=AL2(&UNIT,&COUNT,&LENGTH)                        00006850
         AIF   (&COUNT EQ 0).SKIP01                                     00006860
         MVC   @R1+6(&LENGTH),&PARM                                     00006870
.SKIP01  ANOP  ,                                                        00006880
        $LA    R15,&TABLE          LOAD ADDRESS OF TABLE POINTER        00006900
         &RTNTYPE.CALL DYNADD      CALL TEXT UNIT ADD MODULE            00006910
         XPOP  ,,&STACK                                                 00006920
         MEXIT ,                                                        00006930
.NOLIST1 ANOP  ,                                                        00006940
         MNOTE 8,'SVC 99 UNIT REQUIRED.'                                00006950
         MEXIT ,                                                        00006960
.NOLIST2 ANOP  ,                                                        00006970
         MNOTE 8,'SVC 99 PARAMETER REQUIRED.'                           00006980
         MEXIT ,                                                        00006990
         MEND                                                           00007000
