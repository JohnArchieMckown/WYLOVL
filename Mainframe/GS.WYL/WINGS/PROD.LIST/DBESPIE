1         High Level Assembler Option Summary                   (PTF UQ57391)                                               Page    1
-                                                                                            HLASM R4.0  2002/06/06 10.01
0  No Overriding ASMAOPT Parameters
   Overriding Parameters-  TERM,RENT,NOXREF,NODXREF,LINECOUNT(32767),NORLD,USING(WARN(11))
   No Process Statements


   Options for this Assembly
0  NOADATA
     ALIGN
   NOASA
     BATCH
     CODEPAGE(047C)
   NOCOMPAT
   NODBCS
   NODECK
 3 NODXREF
     ESD
   NOEXIT
     FLAG(0,ALIGN,CONT,NOIMPLEN,NOPAGE0,PUSH,RECORD,NOSUBSTR,USING0)
   NOFOLD
   NOGOFF
   NOINFO
     LANGUAGE(EN)
   NOLIBMAC
 3   LINECOUNT(32767)
     LIST(121)
     MXREF(SOURCE)
     OBJECT
     OPTABLE(UNI,NOLIST)
   NOPCONTROL
   NOPESTOP
   NOPROFILE
   NORA2
 3   RENT
 3 NORLD
     RXREF
     SIZE(MAX)
     SYSPARM()
 3   TERM(WIDE)
   NOTEST
     THREAD
   NOTRANSLATE
 3   USING(NOLIMIT,MAP,WARN(11))
 3 NOXREF

   No Overriding DD Names

1DBESPIE  External Symbol Dictionary                                                                                        Page    2
-Symbol   Type   Id     Address  Length     LD ID  Flags Alias-of                            HLASM R4.0  2002/06/06 10.01
0DBESPIE   SD 00000001 00000000 00000620             00
 XDBESPIE  LD          00000022           00000001
 SYMDBSPI  LD          00000608           00000001

1DBESPIE  Debugging stuff                                                                                                   Page    3
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement                    (Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                      2    00002000  ********************************************************************
                                       3    00003000  *** %%Module: wings asm dbespie;                                   *
                                       4    00004000  ********************************************************************
                                       5    00005000  ***                                                                *
                                       6    00006000  ***                                                                *
                                       7    00007000  ***  WINGS -- DBESPIE                                              *
                                       8    00008000  ***                                                                *
                                       9    00009000  ***    DEBUGGER ESPE exit routine.  This module must be linked     *
                                      10    00010000  ***    with subtask to be debugged.  Also XDBESPIE routine must    *
                                      11    00011000  ***    be called to setup Debugger ESPIE exit in subtask to be     *
                                      12    00012000  ***    debugged.                                                   *
                                      13    00013000  ***                                                                *
                                      14    00014000  ***    Created, 01/01/92, CH                                       *
                                      15    00015000  ***                                                                *
                                      16    00016000  ***                                                                *
                                      17    00017000  ***  Modifications:                                                *
                                      18    00018000  ***    01/01/92  CH   Initial version.                             *
                                      19    00019000  ***                                                                *
                                      20    00020000  ***                                                                *
                                      21    00021000  ***                                                                *
                                      22    00022000  ********************************************************************
                                      23    00023000  DBESPIE  HIBAL ASSOC=YES
                                    1007    00024000           REGS  FSR,,,,,,,BR,WAR,,,TVTR,(GVTR,LSR),SPR,RAR
                                    1117    00025000
                                    1118    00026000           SYSDEFN
                                    1119    00027000
1DBESPIE  Wings work areas                                                                                                  Page    4
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   1122    00030000           COPY  TPENTRY             TRAP ENTRY
                                    1123=   00001000 =¿þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþÜ
                                    1124=   00002000 =Ÿ                                                                     Ÿ
                                    1125=   00003000 =Ÿ  TRAP ENTRY                                                         Ÿ
                                    1126=   00004000 =Ÿ                                                                     Ÿ
                                    1127=   00005000 =Ÿ                                                                     Ÿ
                                    1128=   00006000 =Ÿ  NOTE:                                                              Ÿ
                                    1129=   00007000 =Ÿ  BECAUSE WE MAY BE DEBUGGING SHARED CODE (EXECUTED BY OTHER         Ÿ
                                    1130=   00008000 =Ÿ  SUBTASKS) WE NEVER DELETE TRAP ENTRIES.  WE MERELY MARK THEM       Ÿ
                                    1131=   00009000 =Ÿ  AS OFF.  WE ALLOW A TOTAL OF TPMAXCNT TRAPS.  CLEARED TRAPS        Ÿ
                                    1132=   00010000 =Ÿ  STILL COUNT.                                                       Ÿ
                                    1133=   00011000 =Ÿ                                                                     Ÿ
                                                      ¾þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþ»
0                                   1134    00012000 =TPMAXCNT EQU   128
                                    1135    00013000 =TRAPCODE EQU   X'00A9'             TRAP OPCODE, CAUSES 0C1
                                    1136    00014000 =
 000000                00000 00008  1137    00015000 =TPENTRY  RECORD BEGIN
 000000                             1145  1 00016000 =TPADDR     DS    F
 000004                             1146  1 00017000 =TPOPCODE   DS    H
 000006 00                          1147  1 00018000 =TPFLAG1    FLAG
 TPFLAG1.TPFOFF    80 ONES          1151  1 00019000 =           FLAG  TPFOFF              TRAP NOT ACTIVE
 000007 00                          1156  1 00020000 =TPFLAG2    FLAG
 000008                             1160  1 00021000 =TPNEXT     DS    0F
 000008                00008 00008  1161    00022000 =         END
1DBESPIE  Wings work areas                                                                                                  Page    5
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   1171    00032000           COPY  DVWA                GLOBAL DEBUG AREA
                                    1172=   00001000 =¿þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþÜ
                                    1173=   00002000 =Ÿ                                                                     Ÿ
                                    1174=   00003000 =Ÿ  DVWA - debug work area                                             Ÿ
                                    1175=   00004000 =Ÿ                                                                     Ÿ
                                    1176=   00004500 =Ÿ  Revised 1994/06/06 mcl                                             Ÿ
                                    1177=   00005000 =Ÿ                                                                     Ÿ
                                    1178=   00006000 =Ÿ  notes:                                                             Ÿ
                                    1179=   00007000 =Ÿ  work area should be initialized to zero by monitor.                Ÿ
                                    1180=   00008000 =Ÿ  debugger and debuggee should re-initialize fields                  Ÿ
                                    1181=   00009000 =Ÿ  they control as is appropriate. (in case there has                 Ÿ
                                    1182=   00010000 =Ÿ  been previous debugging session, now cleared.)                     Ÿ
                                    1183=   00011000 =Ÿ                                                                     Ÿ
                                    1184=   00012000 =Ÿ  We must be careful about multi-processor environment.              Ÿ
                                    1185=   00013000 =Ÿ  Lock rules are complicated.  A simpler rules would                 Ÿ
                                    1186=   00014000 =Ÿ  be nice, but for now they are:                                     Ÿ
                                    1187=   00015000 =Ÿ                                                                     Ÿ
                                    1188=   00016000 =Ÿ  Simple rules are:                                                  Ÿ
                                    1189=   00017000 =Ÿ  DebuggER must obtain DBERTCBP lock (R).  Debugger can              Ÿ
                                    1190=   00018000 =Ÿ  change all fields that belong to debugger.  Debugger               Ÿ
                                    1191=   00019000 =Ÿ  can set DebuggEE at any time, unless DebuggEE is                   Ÿ
                                    1192=   00020000 =Ÿ  locked (E).  Debuggee can change any debuggEE fields               Ÿ
                                    1193=   00021000 =Ÿ  while it holds Debuggee lock (E).                                  Ÿ
                                    1194=   00022000 =Ÿ                                                                     Ÿ
                                    1195=   00023000 =Ÿ  A bit more complex is that if there is no debuggee,                Ÿ
                                    1196=   00024000 =Ÿ  any task can jump in and become the debuggee by setting            Ÿ
                                    1197=   00025000 =Ÿ  itself as the DVEETCBP and obtaining the debuggEE lock (E).        Ÿ
                                    1198=   00026000 =Ÿ                                                                     Ÿ
                                    1199=   00027000 =Ÿ  Also note that either Debugger/Debuggee can set the SYMBOL         Ÿ
                                    1200=   00028000 =Ÿ  Table pointer if it owns the respective lock, they should          Ÿ
                                    1201=   00029000 =Ÿ  be setting it to the same thing.  Also POST/WAIT stuff is          Ÿ
                                    1202=   00030000 =Ÿ  shared between Debugger/Debuggee in a obvious fashion.             Ÿ
                                    1203=   00031000 =Ÿ                                                                     Ÿ
                                    1204=   00032000 =Ÿ  notes:                                                             Ÿ
                                    1205=   00033000 =Ÿ    [cs] - compare and swap field                                    Ÿ
                                    1206=   00034000 =Ÿ    [cds] - compare and swap double fields                           Ÿ
                                    1207=   00035000 =Ÿ                                                                     Ÿ
                                    1208=   00036000 =Ÿ    R   - debuggeR lock                                              Ÿ
                                    1209=   00037000 =Ÿ          this lock may be obtained by any debuger [cs]              Ÿ
                                    1210=   00038000 =Ÿ    E   - debuggeE lock                                              Ÿ
                                    1211=   00039000 =Ÿ          this lock may be obtained only by debuggee [cds]           Ÿ
                                    1212=   00040000 =Ÿ    r   - may be set by debuger (owner of R)                         Ÿ
                                    1213=   00041000 =Ÿ    e   - may be set by debugee (owner of E)                         Ÿ
                                    1214=   00042000 =Ÿ  x r   - may be set by debugger (owner of R); also if               Ÿ
                                    1215=   00043000 =Ÿ          no debugger/debuggee it may be set by any subtask          Ÿ
                                    1216=   00044000 =Ÿ          needing to be debugged                                     Ÿ
                                    1217=   00045000 =Ÿ                                                                     Ÿ
                                                      ¾þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþ»
0000000                00000 00434  1218    00046000 =DVWA     RECORD BEGIN
 000000                             1226  1 00047000 =DVERTCBP   DS    F                 R CURRENT DEBUGGER TCB PTR  [cs]
 000004                             1227  1 00048000 =DVERTVTP   DS    A                   Current debuggee TVT PTR
 000008                             1228  1 00049000 =DSALIGN    DS    0D                  ALIGN ON DWORD FOR CDS
 000008                             1229  1 00050000 =DVEETCBP   DS    F               x r CURRENT DEBUGGEE TCB PTR  [cds]
 00000C                             1230  1 00051000 =DVEEACTV   DS    F                 E DEBUGEE ACTIVE (TCB PTR)  [cds !]
 000010                             1231  1 00052000 =DVERECB    DS    F               r,e POST BY DEBUGGEE, POST TO BREAK
1DBESPIE  Wings work areas                                                                                                  Page    6
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0000014                             1232  1 00053000 =DVEEECB    DS    F               r,e POST BY DEBUGGER, POST BREAK DONE
 000018 00                          1233  1 00054000 =DVFLAGS    FLAG  ,
 DVFLAGS.DVFNEWIA  80 ONES          1237  1 00055000 =           FLAG  DVFNEWIA          r NEW IA SET WITH PIA INSTRUCTION
 DVFLAGS.DVFIRUPT  40 ONES          1242  1 00056000 =           FLAG  DVFIRUPT          e INTERRUPT, NOT TRAP
 00001C                             1247  1 00057000 =DVEPIEP    DS    F                 e EPIE PTR
 000020                             1248  1 00058000 =DVSYMP     DS    F               r,e SYMBOL TABLE PTR
                                    1249  1 00059000 =*                                r TRAP AREA (next line)
 000024                             1250  1 00060000 =DVTRAPS    DS    XL(L'TPENTRY*(TPMAXCNT+2))
 000434                00434 00434  1251    00061000 =         END
1DBESPIE  Wings work areas                                                                                                  Page    7
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   1261    00034000           COPY  LCLDBWA             LOCAL (ESPIE) DEBUG AREA
                                    1262=   00001000 =¿þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþÜ
                                    1263=   00002000 =Ÿ                                                                     Ÿ
                                    1264=   00003000 =Ÿ  LCLDBWA - local work area for espie routine                        Ÿ
                                    1265=   00004000 =Ÿ                                                                     Ÿ
                                    1266=   00005000 =Ÿ                                                                     Ÿ
                                    1267=   00006000 =Ÿ  NOTE: LDBBKPP may not be set, BKWA may need to be loaded           Ÿ
                                    1268=   00007000 =Ÿ      in another (global) manner. Work in progress.                  Ÿ
                                    1269=   00008000 =Ÿ                                                                     Ÿ
                                                      ¾þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþ»
0000000                00000 00168  1270    00009000 =LCLDBWA  RECORD BEGIN
 000000                             1278  1 00010000 =LDBTCBP    DS    F                   TCB ADDRESS
 000004                             1279  1 00011000 =LDBEPIEP   DS    F                   EPIE PTR
 000008                             1280  1 00012000 =LDBDVWAP   DS    F                   GLOBAL DEBUG WORK AREA PTR
 00000C                             1281  1 00012100 =LDBSYMP    DS    F                   SYMBOL TABLE POINTER
 000010 00                          1282  1 00012200 =LDBFLAGS   FLAG  ,
 LDBFLAGS.LDBFNEWI 80 ONES          1286  1 00012300 =           FLAG  LDBFNEWIA           NEW INSTRUCTION ADDRESS
 000014                             1291  1 00012400 =           DS    0F                  ALIGNMENT
 000014                             1292  1 00013000 =LDBINST1   DS    XL6                 INSTR EXECUTION AREA1 (CURR)
 00001A                             1293  1 00014000 =LDBINST2   DS    XL6                 INSTR EXECUTION AREA2 (CONT)
 000020                             1294  1 00015000 =LDBCURR    DS    A                   CURRENT INSTR ADDR (AS IN PIE)
 000024                             1295  1 00016000 =LDBNEXT    DS    A                   NEXT INSTR (AS TO CONTINUE)
 000028                             1296  1 00017000 =LDBSREGS   DS    16F                 SAVE REGS (0-15)
 000068                             1297  1 00018000 =LDBSTACK   DS    XL256               SPIE STACK AREA (SMALL)
 000168                00168 00168  1298    00019000 =         END
                                    1307    00035000  *
 000000                00000 00620  1308    00036000           PUSH  DSECTS              Common DSECTS
                                    1808    00045000  *
                                    1809    00046000  *
 000000                00000 00120  1810    00047000           IHAEPIE
                                    1973    00048000  *
 USING  GVT,R12                     1974    00049000           USING GVT                 Universal assumption
 USING  TVT,R11                     1983    00050000           USING TVT                 Universal assumption
                                    1992    00051000
1DBESPIE  DEBUG stuff                                                                                                       Page    8
0Current Usings:  (TVT,R11) (GVT,R12)
0D-Loc  Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+_____  ______ ____    _____ _____  ____ __ ______    ______ _________
0000000                00000 00620  1995    00054000  DBESPIE  CSECT
 000000 E2C8D6E640C3D6D9            1997    00055000           DC    C'SHOW CORE, SCOTTY, THEN BEAM ME UP'
                                    1998    00056000  *
                                    1999    00057000  *    This module is the DEBUGGER interface to the
                                    2000    00058000  *    TASK (SUBTASK) being debugged.  Work in progress.
                                    2001    00059000  *
1DBESPIE  DEBUG stuff                                                                                                       Page    9
0Current Usings:  (TVT,R11) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   2003    00061000  *
                                    2004    00062000  *
                                    2005    00063000  *  CODE GOES HERE
                                    2006    00064000  *
                                    2007    00065000  *
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   10
0Current Usings:  (TVT,R11) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   2009    00067000  ¿þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþÜ
                                    2010    00068000  Ÿ                                                                     Ÿ
                                    2011    00069000  Ÿ                                                                     Ÿ
                                    2012    00070000  Ÿ  SET ESPIE -    XDBESPIE routine                                    Ÿ
                                    2013    00071000  Ÿ                                                                     Ÿ
                                    2014    00072000  Ÿ  CAUTION:                                                           Ÿ
                                    2015    00073000  Ÿ  DO not set exit for program exception 15.                          Ÿ
                                    2016    00074000  Ÿ  This can cause an infinit loop if a program                        Ÿ
                                    2017    00075000  Ÿ  exception 15 happens.                                              Ÿ
                                    2018    00076000  Ÿ                                                                     Ÿ
                                    2019    00077000  Ÿ  CAUTION:                                                           Ÿ
                                    2020    00078000  Ÿ  The SYMBOL table should exist prior to this call.                  Ÿ
                                    2021    00079000  Ÿ  (as we set the symbol table pointer up at this time)               Ÿ
                                    2022    00080000  Ÿ                                                                     Ÿ
                                    2023    00081000  Ÿ                                                                     Ÿ
                                                      ¾þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþ»
0000000                00000 00010  2024    00082000  SETSPWA  RECORD BEGIN              GENERATE ESPIE PARAMETER LIST
                                    2032  1 00083000             ESPIE  SET,*-*,MF=L
                                    2033  1          +*        MACDATE = 08/15/81
 000000                             2034  1 01-ESPIE +           DS    0F
 000000 00000000                    2035  1 01-ESPIE +           DC    A(*-*)             USER EXIT ROUTINE ADDRESS
 000004 00000000                    2036  1 01-ESPIE +           DC    A(0)               USER PARAMETER LIST ADDRESS
 000008 0000                        2037  1 01-ESPIEC+           DC    B'0000000000000000'
                                          1          +                                    INTERRUPTION MASK
 00000A 0000                        2038  1 01-ESPIE +           DC    B'0000000000000000'
 00000C 00000000                    2039  1 01-ESPIE +           DC    A(0)               RESERVED
 000010                00010 00010  2040    00084000           END
                                    2049    00085000  *
                                    2050    00086000  *
 000022 90DF B0D4            000D4  2051    00087000  XDBESPIE XPROC SETSPWA
 000026 58F0 C014/0DEF       00014  2064             +
 00002C E7C4C2C5E2D7C9C5            2066             +
 000034 98DF B0D4            000D4  2067             +
 000038 50E0 D000            00000  2070             +
 00003C 900C D004/188D       00004  2073             +
 000042 41D0 D048/0D70       00048  2076             +
 000048 4160 B218            00218  2108    00088000           LA    R6,TVTLCLDB
 USING  *,R7
 USING  SETSPWA-(4+52),R8
 USING  LCLDBWA,R6                  2109    00089000           USING LCLDBWA,R6
                                    2118    00090000  *
                                    2119    00091000  *                                  SET UP LOCAL ESPIE (DEBUG) WA
 00004C 5810 B098            00098  2120    00092000           L     R1,TVTTCBP
 000050 5010 6000            00000  2121    00093000           ST    R1,LDBTCBP
 000054 4110 C208            00208  2122    00094000           LA    R1,GVTDVWA
 000058 5010 6008            00008  2123    00095000           ST    R1,LDBDVWAP
 00005C 5810 B0E0            000E0  2124    00096000           L     R1,TVTSYMTB
 000060 5010 600C            0000C  2125    00097000           ST    R1,LDBSYMP
                                    2126    00098000  *
                                    2127    00099000  *                                  SET ESPIE EXIT, WORK AREA PTR
 000064 5810 7588            005D0  2128    00100000           L     R1,=A(PROTESP)      LOAD ADCON FOR ESPIE PARM LIST
 000068 D20F 8038 1000 00000 00000  2129    00101000           MVC   SETSPWA(L'PROTESP),@R1  MOVE IN MODEL ESPIE PARM LIST
 00006E 4130 6000            00000  2130    00102000           LA    R3,LCLDBWA
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   11
0Current Usings:  (LCLDBWA,R6) (*,R7) (SETSPWA-(4+52),R8) (TVT,R11) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   2132    00104000           ESPIE SET,ESPIERTN,((1,14)),PARAM=(R3),MF=(E,SETSPWA)
                                    2133             +*        MACDATE = 08/15/81
 000072 4110 8038            00000  2135    02-IHBIN +         LA    1,SETSPWA                         LOAD PARAMETER REG 1
 000076 4100 705E            000A6  2136    01-ESPIE +         LA    0,ESPIERTN         MOVE EXIT ROUTINE ADDRESS
 00007A 5000 1000            00000  2137    01-ESPIE +         ST    0,0(,1)            INTO PARAMETER LIST
 00007E 5030 1004            00004  2138    01-ESPIE +         ST    R3,4(,1)           USER PARAMETER LIST ADDRESS
 000082 927F 1008      00008        2139    01-ESPIE +         MVI   8(1),B'01111111'
 000086 92FE 1009      00009        2140    01-ESPIE +         MVI   9(1),B'11111110'
 00008A 9200 100A      0000A        2141    01-ESPIE +         MVI   10(1),B'00000000'
 00008E 4100 0004            00004  2142    01-ESPIE +         LA    0,4                SET FUNCTION CODE
 000092 41F0 001C            0001C  2143    01-ESPIE +         LA    15,28              SVC ROUTER CODE
 000096 0A6D                        2144    01-ESPIE +         SVC   109
 000098 18D8/980C D004       00004  2146    00106000           PEND
 DROP   SETSPWA-(4+52),R8
 DROP   *,R7
 00009E 58E0 D000/12FF       00000  2167             +
 0000A4 07FE                        2170             +
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   12
0Current Usings:  (LCLDBWA,R6) (TVT,R11) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   2172    00108000  ¿þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþÜ
                                    2173    00109000  Ÿ                                                                     Ÿ
                                    2174    00110000  Ÿ  ESPIE routine                                                      Ÿ
                                    2175    00111000  Ÿ                                                                     Ÿ
                                    2176    00112000  Ÿ  SET THIS ROUTINE AS FOLLOWS:                                       Ÿ
                                    2177    00113000  Ÿ     ESPIE  SET,ESPIERTN,(1-14)                                      Ÿ
                                    2178    00114000  Ÿ                                                                     Ÿ
                                    2179    00115000  Ÿ  CAUTION: DO NOT SET (15) AS A 15 MAY RESULT IN AN INFINITE LOOP    Ÿ
                                    2180    00116000  Ÿ                                                                     Ÿ
                                    2181    00117000  Ÿ  This routine is more or less as follows:                           Ÿ
                                    2182    00118000  Ÿ     * stop and establish addressability, stack, get common          Ÿ
                                    2183    00119000  Ÿ       debug work area.                                              Ÿ
                                    2184    00120000  Ÿ     * if debugging this tcb, post debugger to process this          Ÿ
                                    2185    00121000  Ÿ       trap (or interrupt)                                           Ÿ
                                    2186    00122000  Ÿ     * resume execution                                              Ÿ
                                    2187    00123000  Ÿ       trapped instructions are simulated                            Ÿ
                                    2188    00124000  Ÿ                                                                     Ÿ
                                    2189    00125000  Ÿ  Note:                                                              Ÿ
                                    2190    00126000  Ÿ  work in progress...                                                Ÿ
                                    2191    00127000  Ÿ                                                                     Ÿ
                                    2192    00128000  Ÿ  CAUTION !  CAUTION !!                                              Ÿ
                                    2193    00129000  Ÿ  ESPIE stack area is VERY SMALL!  Nesting more than 2 calls         Ÿ
                                    2194    00130000  Ÿ  or using the stack for more than register save area will           Ÿ
                                    2195    00131000  Ÿ  probably cause program to fail in most miserably hard to           Ÿ
                                    2196    00132000  Ÿ  to debug way !!  This code once debugged should not need           Ÿ
                                    2197    00133000  Ÿ  any (yeah right) changes.  Change code in the Debugger!            Ÿ
                                    2198    00134000  Ÿ                                                                     Ÿ
                                    2199    00135000  Ÿ  NOTE:                                                              Ÿ
                                                      ¾þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþ»
0DROP   TVT,R11                     2200    00136000           DROP  TVT
                                    2208    00137000  *  we do not allow addressing to TVT (other than LCLDBWA,
                                    2209    00138000  *  which is in TVT) during TRAP processing; ie. espie routine.
                                    2210    00139000  *  This insures that we are not trashing any user TVT fields.
                                    2211    00140000  *  This is not a requirement.  It should be ok to look at TVT
                                    2212    00141000  *  fields. But it helps us avoid bugs like the PROC macro
                                    2213    00142000  *  clobbering the TVT trace registers.
                                    2214    00143000  *
                                    2215    00144000  *
 0000A6                             2216    00145000  ESPIERTN LABEL ,
                                    2218    00146000  *
                                    2219    00147000  *                                  GET ADDRESSABILITY, ETC..
                                    2220    00148000  *                                  DANCE, BUT DON'T STEP ON OWN FEET
 USING  *,R15                       2221    00149200           WITH  (*,R15),BEGIN
 0000A6 0700/0ADE/0108              2236  1 00149300             QSNAP 'ESPIERTN'
 0000AC 4100 F51A            005C0  2240  1          +
 0000B0 0ADE                        2241  1 00149400             QSNAP @R1,128
 0000B2 088000001000                2244  1          +
 0000B8 1801                        2245  1 00150000             LR    R0,R1
 USING  EPIE,R1                     2246  1 00151000             WITH  (EPIE,R1),BEGIN
 0000BA 5810 1004            00004  2260  2 00152000               L     R1,EPIEPARM
 DROP   EPIE,R1                     2261  1 00153000             END   , WITH EPIE,R1
 DROP   LCLDBWA,R6                  2269  1 00154000             WITH  (LCLDBWA,R1),BEGIN
 USING  LCLDBWA,R1
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   13
0Current Usings:  (LCLDBWA,R1) (GVT,R12) (*,R15)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
00000BE 5000 1004            00004  2291  2 00155000               ST    R0,LDBEPIEP
 0000C2 900F 1028            00028  2292  2 00156000               STM   R0,R15,LDBSREGS
 0000C6 41D0 1068            00068  2293  2 00157000               LA    R13,LDBSTACK
 0000CA 4160 1000            00000  2294  2 00158000               LA    R6,LCLDBWA
                                    2295  1 00159000             END   , WITH LCLDVWA,R1
 ** ASMA301W Prior active USING on statement number 2286 overridden by this USING
 ** ASMA435I Record 142 in WYL.GG.SYS.MACLIB(USING) on volume: STR210
 USING  LCLDBWA,R6                  2312  1 00160000             USING LCLDBWA,R6
 DROP   LCLDBWA,R1
 0000CE 0570                        2314  1 00161000             BALR  BR,0                BR ?? (R10??, BR NOT DEFINED)
 DROP   *,R15                       2315    00162000           END   , WITH *,R15
 USING  *,R7                        2323    00163000           USING *,BR
 0000D0 5850 6008            00008  2333    00164000           L     R5,LDBDVWAP         DVWA POINTER
 USING  DVWA,R5                     2334    00165000           USING DVWA,R5
 0000D4 5840 6004            00004  2343    00166000           L     R4,LDBEPIEP
 USING  EPIE,R4                     2344    00167000           USING EPIE,R4
                                    2353    00168000  *
                                    2354    00169000  *                                  FIX INTERRUPT ADDRESS
 0000D8 5810 404C            0004C  2355    00170000           GETIA R1,EPIEPSW          ACTUAL ADDR = ADDR - ILC
 0000DC 4111 0000            00000  2357             +
 0000E0 4820 4050            00050  2358    00171000           LH    R2,EPIEINT          (ILC - INSTRUCTION LEN CODE)
 0000E4 1B12                        2359    00172000           SR    R1,R2
 0000E6 5410 7504            005D4  2360    00173000           SETIA R1,EPIEPSW
 0000EA D403 404C 7508 0004C 005D8  2362             +
 0000F0 5610 404C            0004C  2363             +
 0000F4 5010 404C            0004C  2364             +
 0000F8 1B22                        2365    00174000           CLEAR R2                  CLEAR ILC AFTER FIX
 0000FA 4020 4050            00050  2369    00175000           STH   R2,EPIEINT
                                    2370    00180000  *
                                    2371    00181000  *                                  IF CONTINUE TRAP,,, OUT OF HERE !
 0000FE 5810 404C            0004C  2372    00182000           GETIA R1,EPIEPSW
 000102 4111 0000            00000  2374             +
 000106 4120 601A            0001A  2375    00183000           LA    R2,LDBINST2
 00010A 1912/4770 7066       00136  2376    00184000           IF    (R1,EQ,R2),BEGIN
 000110 5810 6024            00024  2391  1 00185000             L     R1,LDBNEXT
 000114 5410 7504            005D4  2392  1 00186000             SETIA R1,EPIEPSW
 000118 D403 404C 7508 0004C 005D8  2394  1          +
 00011E 5610 404C            0004C  2395  1          +
 000122 5010 404C            0004C  2396  1          +
 000126                             2397  1 00187000             CLEAR LDBCURR
 000126 D703 6020 6020 00020 00020  2403  1          +
 00012C                             2404  1 00188000             CLEAR LDBNEXT
 00012C D703 6024 6024 00024 00024  2410  1          +
 000132 47F0 7112            001E2  2411  1 00189000             B     SPIEEXIT
 000136                             2412    00190000           END
                                    2416    00191000  *
                                    2417    00192000  *                                  ARE WE CURRENT DEBUGGEE ??
 000136 5810 6000            00000  2418    00193000           L     R1,LDBTCBP
 00013A 5820 5008            00008  2419    00194000           L     R2,DVEETCBP
 00013E 5830 500C            0000C  2420    00195000           L     R3,DVEEACTV
 000142 1222/4780 707E       0014E  2421    00196000           IF    ((R2,Z),OR,(R2,EQ,R1)),BEGIN
 000148 1921/4770 7104       001D4  2443             +
 00014E 1233/4780 708A       0015A  2449  1 00197000             IF    ((R3,Z),OR,(R3,EQ,R1)),BEGIN
 000154 1931/4770 7104       001D4  2471  1          +
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   14
0Current Usings:  (EPIE,R4) (DVWA,R5) (LCLDBWA,R6) (*,R7) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
000015A 18E1                        2477  2 00198000               LR    R14,R1              TCB ADDRESS
 00015C 18F1                        2478  2 00199000               LR    R15,R1
 00015E BB2E 5008            00008  2479  2 00200000               CDS   R2,R14,DVEETCBP     TRY TO BE DEBUGGEE, AND ACTIVE
                                    2480  2 00201000  *
                                    2481  2 00202000  *                                  IF CURRENT DEBUGGEE AND ACTIVE
 000162 4770 7104            001D4  2482  2 00203000               IF    Z,BEGIN               LOAD EPIE AND SYMBOL TABLE PTRS
 000166 5800 6004            00004  2493  3 00204000                 L     R0,LDBEPIEP           POST DEBUGER AND WAIT
 00016A 5000 501C            0001C  2494  3 00205000                 ST    R0,DVEPIEP
 00016E 5800 600C            0000C  2495  3 00206000                 L     R0,LDBSYMP
 000172 5000 5020            00020  2496  3 00207000                 ST    R0,DVSYMP
 000176 4100 6000            00000  2497  3 00208000                 LA    R0,LCLDBWA
 00017A 4110 5000            00000  2498  3 00209000                 LA    R1,DVWA
 00017E 58E0 750C/0DEE       005DC  2499  3 00210000                 ACALL XFAILFIX            IF INSTR EXECUTION FAILED FIX
 000184                             2503  3 00213000                 CLEAR DVEEECB
 000184 D703 5014 5014 00014 00014  2509  3          +
 00018A 4110 5010            00010  2510  3 00214000                 LA    R1,DVERECB
 00018E 1B00/4110 1000       00000  2511  3 00215000                 POST  (R1),0
 000194 0A02                        2516  3          +
 000196 4110 5014            00014  2517  3 00216000                 LA    R1,DVEEECB
 00019A 4100 0001            00001  2518  3 00217000                 WAIT  ECB=(R1)
 00019E 4110 1000/0A01       00000  2522  3          +
                                    2524  3 00218000  *
                                    2525  3 00219000  *                                  IF NEW IA, SET LOCALWA FLAG
 0001A4 9180 5018      00018        2526  3 00220000                 IF    DVFNEWIA,BEGIN
 0001A8 47E0 70E4            001B4  2536  3          +
 0001AC 9680 6010      00010        2541  4 00221000                   SET   LDBFNEWIA
 0001B0 947F 5018      00018        2547  4 00222000                   CLEAR DVFNEWIA
 0001B4                             2554  3 00223000                 END
                                    2558  3 00224000  *
                                    2559  3 00225000  *                                  UNLOCK DVWA
 0001B4 5820 6000            00000  2560  3 00226000                 L     R2,LDBTCBP
 0001B8 5830 6000            00000  2561  3 00227000                 L     R3,LDBTCBP
 0001BC 58E0 6000            00000  2562  3 00228000                 L     R14,LDBTCBP
 0001C0 1BFF                        2563  3 00229000                 CLEAR R15
 0001C2 BB2E 5008            00008  2567  3 00230000                 CDS   R2,R14,DVEETCBP
 0001C6 4780 7104            001D4  2568  3 00231000                 IF    NZ,BEGIN
 0001CA 0700/0ADE/0115              2579  4 00232000                   QSNAP 'DVWA LOCK LOGIC ERROR'
 0001D0 4100 7522            005F2  2583  4          +
 0001D4                             2584  3 00233000                 END
 0001D4                             2588  2 00234000               END
 0001D4                             2592  1 00235000             END
 0001D4                             2596    00236000           END
                                    2600    00237000  *
                                    2601    00238000  *                                  IF TRAP, SIMUALATE INSTRUCTION..
 0001D4 4100 5000            00000  2602    00239000           LA    R0,DVWA             GLOBAL DEBUG AREA
 0001D8 4110 6000            00000  2603    00240000           LA    R1,LCLDBWA          LOCAL DEBUG AREA
 0001DC 58E0 7510/0DEE       005E0  2604    00241000           ACALL SETUPX              SET UP INSTRUCTION EXECUTION
                                    2608    00242000
 0001E2                             2609    00243000  SPIEEXIT LABEL ,
                                    2611    00248000
 0001E2 980F 6028            00028  2612    00249000           LM    R0,R15,LDBSREGS
 0001E6 07FE                        2613    00250000           BR    R14
                                    2614    00251000
 DROP   *,R7                        2615    00252000           DROP  BR
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   15
0Current Usings:  (DVWA,R5) (LCLDBWA,R6) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0DROP   EPIE,R4                     2622    00253000           DROP  R4
 DROP   DVWA,R5                     2629    00254000           DROP  R5
 DROP   LCLDBWA,R6                  2636    00255000           DROP  R6
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   16
0Current Usings:  (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   2644    00257000  *
                                    2645    00258000  *  IF TRAPPED INSTURCTION EXECUTION FAILED
                                    2646    00259000  *  SET INTERRUPT (AS OPPOSED TO TRAP) AND TRY AGAIN
                                    2647    00260000  *
                                    2648    00261000  *  ON ENTRY:
                                    2649    00262000  *        R0 - LCLDBWA
                                    2650    00263000  *        R1 - DVWA
                                    2651    00264000  *
 0001E8 50E0 D000            00000  2652    00265000  XFAILFIX PROC  TRACE=NO
 0001EC 900C D004/188D       00004  2664             +
 0001F2 41D0 D038/0D70       00038  2666             +
 0001F8 1860                        2689    00266000           LR    R6,R0
 USING  *,R7
 USING  LCLDBWA,R6                  2690    00267000           USING LCLDBWA,R6
 0001FA 1851                        2699    00268000           LR    R5,R1
 USING  DVWA,R5                     2700    00269000           USING DVWA,R5
 0001FC 5840 6004            00004  2709    00270000           L     R4,LDBEPIEP
 USING  EPIE,R4                     2710    00271000           USING EPIE,R4
                                    2719    00272000  *
                                    2720    00273000  *                                  IF INSTRUCTION EXECUTION FAILED
 000200 5810 404C            0004C  2721    00274000           GETIA R1,EPIEPSW
 000204 4111 0000            00000  2723             +
 000208 4120 6014            00014  2724    00275000           LA    R2,LDBINST1
 00020C 1912/4770 7034       0022C  2725    00276000           IF    (R1,EQ,R2),BEGIN
 000212 5810 6020            00020  2740  1 00277000             L     R1,LDBCURR
 000216 5410 73DC            005D4  2741  1 00278000             SETIA R1,EPIEPSW
 00021A D403 404C 73E0 0004C 005D8  2743  1          +
 000220 5610 404C            0004C  2744  1          +
 000224 5010 404C            0004C  2745  1          +
 000228 9640 5018      00018        2746  1 00279000             SET   DVFIRUPT            SIGNAL INTERRUPT
 00022C                             2752    00280000           END
                                    2756    00281000
 00022C 18D8/980C D004       00004  2757    00282000           PEND
 DROP   *,R7
 000232 58E0 D000/12FF       00000  2773             +
 000238 07FE                        2776             +
 DROP   EPIE,R4                     2777    00283000           DROP  R4
 DROP   DVWA,R5                     2784    00284000           DROP  R5
 DROP   LCLDBWA,R6                  2791    00285000           DROP  R6
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   17
0Current Usings:  (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   2799    00287000  ¿þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþÜ
                                    2800    00288000  Ÿ                                                                     Ÿ
                                    2801    00289000  Ÿ  SETUPX - SETUP TRAPPED INSTRUCTION EXECUTION                       Ÿ
                                    2802    00290000  Ÿ                                                                     Ÿ
                                    2803    00291000  Ÿ  ON ENTRY:                                                          Ÿ
                                    2804    00292000  Ÿ     R0 - DVWA                                                       Ÿ
                                    2805    00293000  Ÿ     R1 - LCLDBWA                                                    Ÿ
                                    2806    00294000  Ÿ                                                                     Ÿ
                                    2807    00295000  Ÿ  NOTE:                                                              Ÿ
                                    2808    00296000  Ÿ  WE HANDLE TRAPS BY MOVING THE TRAPPED INSTRUCTION INTO             Ÿ
                                    2809    00297000  Ÿ  THE LCLDBWA.  WE FOLLOW THE INSTRUCTION WITH A TRAP (WE CALL       Ÿ
                                    2810    00298000  Ÿ  IT A CONTINUATION TRAP, IT IS NOT IN THE TRAP TABLES)              Ÿ
                                    2811    00299000  Ÿ  IF A CONTINUATION TRAP IS HIT WE SIMPLY RESUME EXECUTION           Ÿ
                                    2812    00300000  Ÿ  AT THE ACTUAL NEXT INSTRUCTION ADDRESS.                            Ÿ
                                    2813    00301000  Ÿ                                                                     Ÿ
                                                      ¾þþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþþ»
000023A 50E0 D000            00000  2814    00302000  SETUPX   PROC  TRACE=NO
 00023E 900C D004/188D       00004  2826             +
 000244 41D0 D038/0D70       00038  2828             +
 00024A 1861                        2851    00303000           LR    R6,R1
 USING  *,R7
 00024C 1850                        2852    00304000           LR    R5,R0
 USING  LCLDBWA,R6                  2853    00305000           USING LCLDBWA,R6
 USING  DVWA,R5                     2862    00306000           USING DVWA,R5
 00024E 5840 501C            0001C  2871    00307000           L     R4,DVEPIEP
 USING  EPIE,R4                     2872    00308000           USING EPIE,R4
                                    2881    00309000  *
                                    2882    00310000  *                                  IF NEW PSW ADDR (IE. PIA)
 000252 9180 6010      00010        2883    00311000           IF    LDBFNEWIA,BEGIN
 000256 47E0 7018            00262  2893             +
 00025A 947F 6010      00010        2898  1 00312000             CLEAR LDBFNEWIA
 00025E 47F0 70E8            00332  2905  1 00313000             B     SETXEXIT
 000262                             2906    00314000           END
                                    2910    00315000  *
                                    2911    00316000  *                                  IF TRAP HIT,,,
 000262 4100 5000            00000  2912    00317000           LA    R0,DVWA
 000266 5810 404C            0004C  2913    00318000           GETIA R1,EPIEPSW
 00026A 4111 0000            00000  2915             +
 00026E 58E0 739A/0DEE       005E4  2916    00319000           ACALL FINDTRAP
 000274 4770 70B2            002FC  2920    00320000           IF    Z,BEGIN
 000278 1831                        2931  1 00321000             LR    R3,R1
 USING  TPENTRY,R3                  2932  1 00322000             USING TPENTRY,R3
                                    2941  1 00323000  *                                  SAVE CURRENT, NEXT INSTR ADDRS
 00027A 5820 3000            00000  2942  1 00324000             L     R2,TPADDR
 00027E 5020 6020            00020  2943  1 00325000             ST    R2,LDBCURR
 000282 4120 2002            00002  2944  1 00326000             LA    R2,@R2+2
 000286 9540 3004      00004        2945  1 00327000             CLI   TPOPCODE,X'40'
 00028A 4750 7048            00292  2946  1 00328000             IF    GE,'LA R2,@R2+2'
 00028E 4120 2002            00002  2958  1          +
 000292 95D0 3004      00004        2963  1 00329000             CLI   TPOPCODE,X'D0'
 000296 4750 7054            0029E  2964  1 00330000             IF    GE,'LA R2,@R2+2'
 00029A 4120 2002            00002  2976  1          +
 00029E 5020 6024            00024  2981  1 00331000             ST    R2,LDBNEXT
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   18
0Current Usings:  (TPENTRY,R3) (EPIE,R4) (DVWA,R5) (LCLDBWA,R6) (*,R7) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   2982  1 00332000  *                                  SET UP CURRENT INSTR IN WORK AREA
 0002A2 D205 6014 737E 00014 005C8  2983  1 00333000             MVC   LDBINST1,=X'0700070007000700'  NOPS
 0002A8 D201 6014 3004 00014 00004  2984  1 00334000             MVC   LDBINST1(2),TPOPCODE  OPCODE
 0002AE 5820 3000            00000  2985  1 00335000             L     R2,TPADDR           ACTUAL INSTR
 0002B2 9540 3004      00004        2986  1 00336000             CLI   TPOPCODE,X'40'      MOVE MORE INSTR IF MORE NEEDED
 0002B6 4750 7076            002C0  2987  1 00337000             IF    GE,BEGIN
 0002BA D201 6016 2002 00016 00002  2998  2 00338000               MVC   LDBINST1+2(2),@R2+2
 0002C0                             2999  1 00339000             END
 0002C0 95D0 3004      00004        3003  1 00340000             CLI   TPOPCODE,X'D0'
 0002C4 4750 7084            002CE  3004  1 00341000             IF    GE,BEGIN
 0002C8 D201 6018 2004 00018 00004  3015  2 00342000               MVC   LDBINST1+4(2),@R2+4
 0002CE                             3016  1 00343000             END
 0002CE D201 601A 73A6 0001A 005F0  3020  1 00344000             MVC   LDBINST2(2),=AL2(TRAPCODE) SET CONTINUE TRAP
 0002D4 4110 6014            00014  3021  1 00345000             LA    R1,LDBINST1
 0002D8 5410 738A            005D4  3022  1 00346000             SETIA R1,EPIEPSW          EXECUTE TRAPED INSTR IN WORK AREA
 0002DC D403 404C 738E 0004C 005D8  3024  1          +
 0002E2 5610 404C            0004C  3025  1          +
 0002E6 5010 404C            0004C  3026  1          +
 0002EA 4100 4000            00000  3027  1 00347000             LA    R0,EPIE
 0002EE 4110 6000            00000  3028  1 00348000             LA    R1,LCLDBWA
 0002F2 58E0 739E/0DEE       005E8  3029  1 00349000             ACALL FIXBLINK            IF NEEDED, FIX BAL, BAS TYPE INSTR
 0002F8 47F0 70E8            00332  3033  1 00350000             B     SETXEXIT
 0002FC                             3034    00351000           END
 DROP   TPENTRY,R3                  3038    00352000           DROP  R3
                                    3045    00353000  *
                                    3046    00354000  *                                  IF NOT TRAP,, IT IS INTERRUPT
                                    3047    00355000  *
 0002FC                             3048    00356000           IF    (DVEETCBP,EQ,LDBTCBP),BEGIN  IF CURRENT DEBUGGEE
 0002FC D503 5008 6000 00008 00000  3060             +
 000302 4770 70C0            0030A  3061             +
 000306 47F0 70E8            00332  3066  1 00357000             B     SETXEXIT             WE CONTINUE TO INTERRUPT
 00030A                             3067    00358000           END
 00030A 70C4           0030A 00304  3071    00359000           ELSE  BEGIN               NOT DEBUGGEE, RETURN AND ABEND
 00030A 47F0 70E8            00332  3076             +
 00030E 0700/4D10 70DA       00324  3082  1 00360000             ESPIE SET,ESPIERTN,(15)   DO NOT CATCH INTERRUPT
 000314 000000A6                    3087  1          +
 000318 00000000/0001               3088  1          +
 00031E 0000/00000000               3090  1          +
 000324 4100 0004            00004  3092  1          +
 000328 41F0 001C/0A6D       0001C  3093  1          +
                                    3095  1 00361000  *                                  CAUTION: A 15 INTERRUPT CODE WILL
                                    3096  1 00362000  *                                  LOOP INFINITLY, DO NOT ALLOW 15
                                    3097  1 00363000  *                                  IN ORIGINAL 'ESPIE SET,RTN ..'
 00032E 47F0 70E8            00332  3098  1 00364000             B     SETXEXIT             RETURN AND ABEND !
 000332                             3099    00365000           END
                                    3103    00366000
 000332                             3104    00367000  SETXEXIT LABEL ,
 000332 18D8/980C D004       00004  3106    00368000           PEND
 DROP   *,R7
 000338 58E0 D000/12FF       00000  3122             +
 00033E 07FE                        3125             +
 DROP   LCLDBWA,R6                  3126    00369000           DROP  R6
 DROP   DVWA,R5                     3133    00370000           DROP  R5
 DROP   EPIE,R4                     3140    00371000           DROP  R4
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   19
0Current Usings:  (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   3148    00373000  *
                                    3149    00374000  *
                                    3150    00375000  *   FIX BRANCH AND LINK TYPE INSTRUCTIONS.
                                    3151    00376000  *
                                    3152    00377000  *   ON ENTRY:
                                    3153    00378000  *     R0 - EPIE WORK AREA
                                    3154    00379000  *     R1 - LOCAL DEBUG WORK AREA (LCLDBWA)
                                    3155    00380000  *
                                    3156    00381000  *   IF WE HAVE BAL, BALR, BAS, BASR, OR BASM WE MUST
                                    3157    00382000  *   SIMULATE THE INSTRUCTION.  WE PATCH THE CORRECT
                                    3158    00383000  *   BRANCH ADDRESS IN THE PSW AND WE PATCH THE CORRECT
                                    3159    00384000  *   RETURN (LINK/SAVE) ADDRESS IN THE THE REQUESTED
                                    3160    00385000  *   REGISTER.
                                    3161    00386000  *
                                    3162    00387000  *   THESE INSTRUCTIONS MUST BE SIMULATED BECAUSE
                                    3163    00388000  *   ALL TRAPPED INSTRUCTIONS ARE EXECUTED IN A LOCAL
                                    3164    00389000  *   WORK AREA.  THEY ARE **NOT** EXECUTED IN PLACE.
                                    3165    00390000  *   IF WE DO NOT SIMULATE THEM THE RETURN ADDRESS WILL
                                    3166    00391000  *   POINT INTO THE LOCAL WORK AREA, THIS IS A NO-NO.
                                    3167    00392000  *
                                    3168    00393000  *
                                    3169    00394000  *   CAUTION:
                                    3170    00395000  *   DO NOT CALL ANY MORE ROUTINES FROM THIS ROUTINE.
                                    3171    00396000  *   THE PROC/PEND STACK IS NOT LARGE ENOUGH !! AHH!!
                                    3172    00397000  *
                                    3173    00398000  *
 000340 50E0 D000            00000  3174    00399000  FIXBLINK PROC  TRACE=NO
 000344 900C D004/188D       00004  3186             +
 00034A 41D0 D038/0D70       00038  3188             +
 000350 1861                        3211    00400000           LR    R6,R1
 USING  *,R7
 000352 1850                        3212    00401000           LR    R5,R0
 USING  LCLDBWA,R6                  3213    00402000           USING LCLDBWA,R6
 USING  EPIE,R5                     3222    00403000           USING EPIE,R5
 000354 4140 6014            00014  3231    00404000           LA    R4,LDBINST1         R4 - TRAPPED INSTRUCTION OPCODE
                                    3232    00405000  *
                                    3233    00406000  *                                  IF BAS, BASR, BALR AND BAL
                                    3234    00407000  *
                                    3235    00408000C          IF    ((@R4,EQ,X'05'),OR,(@R4,EQ,X'0C'),OR,(@R4,EQ,X'0D'),
 000358 9505 4000      00000                00409000                 OR,(@R4,EQ,X'45'),OR,(@R4,EQ,X'47')),BEGIN
 00035C 4780 7030            00380  3250             +
 000360 950C 4000      00000        3260             +
 000364 4780 7030            00380  3263             +
 000368 950D 4000      00000        3273             +
 00036C 4780 7030            00380  3276             +
 000370 9545 4000      00000        3286             +
 000374 4780 7030            00380  3289             +
 000378 9547 4000      00000        3299             +
 00037C 4770 71E4            00534  3300             +
                                    3305  1 00410000  *
                                    3306  1 00411000  *                                  GET COMMON INFO
 000380 1BEE                        3307  1 00412000             CLEAR R14                 R14 - RETURN REG*4
 000382 43E0 6015            00015  3311  1 00413000             IC    R14,LDBINST1+1
 000386 88E0 0004            00004  3312  1 00414000             SRL   R14,4
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   20
0Current Usings:  (EPIE,R5) (LCLDBWA,R6) (*,R7) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
000038A 89E0 0002            00002  3313  1 00415000             SLL   R14,2
 00038E 1BFF                        3314  1 00416000             CLEAR R15                 R15 - BRANCH REG*4
 000390 43F0 6015            00015  3318  1 00417000             IC    R15,LDBINST1+1
 000394 89F0 001C            0001C  3319  1 00418000             SLL   R15,28
 000398 88F0 001A            0001A  3320  1 00419000             SRL   R15,26              (IE SRL R15,28; SLL R15,2)
                                    3321  1 00420000  *
                                    3322  1 00421000  *                                  BALR
 00039C 9505 4000      00000        3323  1 00422000             IF    (@R4,EQ,X'05'),BEGIN
 0003A0 4770 7092            003E2  3334  1          +
                                    3339  2 00423000  *                                  SET BRANCH ADDR
 0003A4 12FF/4780 7070       003C0  3340  2 00424000               IF    (R15,NZ),BEGIN
 0003AA 581F 5008            00008  3354  3 00425000                 L     R1,EPIEGPR(R15)
 0003AE 5410 7284            005D4  3355  3 00426000                 SETIA R1,EPIEPSW
 0003B2 D403 504C 7288 0004C 005D8  3357  3          +
 0003B8 5610 504C            0004C  3358  3          +
 0003BC 5010 504C            0004C  3359  3          +
 0003C0                             3360  2 00427000               END
 0003C0 7074           003C0 003A8  3364  2 00428000               ELSE  BEGIN (R15,Z)
 0003C0 47F0 708A            003DA  3369  2          +
 0003C4 5810 6024            00024  3375  3 00429000                 L     R1,LDBNEXT
 0003C8 5410 7284            005D4  3376  3 00430000                 SETIA R1,EPIEPSW
 0003CC D403 504C 7288 0004C 005D8  3378  3          +
 0003D2 5610 504C            0004C  3379  3          +
 0003D6 5010 504C            0004C  3380  3          +
 0003DA                             3381  2 00431000               END
                                    3385  2 00432000  *                                  SET RETURN ADDRESS
 0003DA 5810 6024            00024  3386  2 00433000               L     R1,LDBNEXT
 0003DE 501E 5008            00008  3387  2 00434000               ST    R1,EPIEGPR(R14)
 0003E2                             3388  1 00435000             END
                                    3392  1 00436000  *
                                    3393  1 00437000  *                                  BASSM
 0003E2 950C 4000      00000        3394  1 00438000             IF    (@R4,EQ,X'0C'),BEGIN
 0003E6 4770 70D2            00422  3405  1          +
                                    3410  2 00439000  *                                  SET BRANCH ADDR
 0003EA 12FF/4780 70A8       003F8  3411  2 00440000               IF    (R15,NZ),BEGIN
 0003F0 581F 5008            00008  3425  3 00441000                 L     R1,EPIEGPR(R15)
 0003F4 5010 504C            0004C  3426  3 00442000                 ST    R1,EPIEPSW+4
 0003F8                             3427  2 00443000               END
 0003F8 70AC           003F8 003EE  3431  2 00444000               ELSE  BEGIN (R15,Z)
 0003F8 47F0 70C2            00412  3436  2          +
 0003FC 5810 6024            00024  3442  3 00445000                 L     R1,LDBNEXT
 000400 5410 7284            005D4  3443  3 00446000                 SETIA R1,EPIEPSW
 000404 D403 504C 7288 0004C 005D8  3445  3          +
 00040A 5610 504C            0004C  3446  3          +
 00040E 5010 504C            0004C  3447  3          +
 000412                             3448  2 00447000               END
                                    3452  2 00448000  *                                  SET RETURN ADDRESS
 000412 5810 504C            0004C  3453  2 00449000               L     R1,EPIEPSW+4
 000416 5410 7288            005D8  3454  2 00450000               N     R1,=X'80000000'
 00041A 5610 6024            00024  3455  2 00451000               O     R1,LDBNEXT
 00041E 501E 5008            00008  3456  2 00452000               ST    R1,EPIEGPR(R14)
 000422                             3457  1 00453000             END
                                    3461  1 00454000  *
                                    3462  1 00455000  *                                  BASR
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   21
0Current Usings:  (EPIE,R5) (LCLDBWA,R6) (*,R7) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0000422 950D 4000      00000        3463  1 00456000             IF    (@R4,EQ,X'0D'),BEGIN
 000426 4770 7120            00470  3474  1          +
                                    3479  2 00459000  *                                  SET BRANCH ADDR
 00042A 12FF/4780 70F6       00446  3480  2 00460000               IF    (R15,NZ),BEGIN
 000430 581F 5008            00008  3494  3 00461000                 L     R1,EPIEGPR(R15)
 000434 5410 7284            005D4  3495  3 00464000                 SETIA R1,EPIEPSW
 000438 D403 504C 7288 0004C 005D8  3497  3          +
 00043E 5610 504C            0004C  3498  3          +
 000442 5010 504C            0004C  3499  3          +
 000446                             3500  2 00466000               END
 000446 70FA           00446 0042E  3504  2 00467000               ELSE  BEGIN (R15,Z)
 000446 47F0 7110            00460  3509  2          +
 00044A 5810 6024            00024  3515  3 00468000                 L     R1,LDBNEXT
 00044E 5410 7284            005D4  3516  3 00469000                 SETIA R1,EPIEPSW
 000452 D403 504C 7288 0004C 005D8  3518  3          +
 000458 5610 504C            0004C  3519  3          +
 00045C 5010 504C            0004C  3520  3          +
 000460                             3521  2 00470000               END
                                    3525  2 00471000  *                                  SET RETURN ADDRESS
 000460 5810 504C            0004C  3526  2 00472000               L     R1,EPIEPSW+4
 000464 5410 7288            005D8  3527  2 00473000               N     R1,=X'80000000'
 000468 5610 6024            00024  3528  2 00474000               O     R1,LDBNEXT
 00046C 501E 5008            00008  3529  2 00475000               ST    R1,EPIEGPR(R14)
 000470                             3530  1 00476000             END
                                    3534  1 00477000  *
                                    3535  1 00478000  *                                  BAL
 000470 9545 4000      00000        3536  1 00479000             IF    (@R4,EQ,X'45'),BEGIN
 000474 4770 717E            004CE  3547  1          +
                                    3552  2 00480000  *                                  SET BRANCH ADDR
 000478 1B11                        3553  2 00481000               CLEAR R1
 00047A 12FF/4780 7138       00488  3557  2 00482000               IF    (R15,NZ),BEGIN      BASE REG
 000480 581F 5008            00008  3571  3 00483000                 L     R1,EPIEGPR(R15)
 000484 4113 0000            00000  3572  3 00484000                 LA    R1,0(R3)
 000488                             3573  2 00485000               END
 000488 1B33                        3577  2 00486000               CLEAR R3                  OTHER BASE REG
 00048A 4330 6016            00016  3581  2 00487000               IC    R3,LDBINST1+2
 00048E 8830 0004            00004  3582  2 00488000               SRL   R3,4
 000492 1233/4780 7156       004A6  3583  2 00489000               IF    (R3,NZ),BEGIN
 000498 8930 0002            00002  3597  3 00490000                 SLL   R3,2
 00049C 5823 5008            00008  3598  3 00491000                 L     R2,EPIEGPR(R3)
 0004A0 4122 0000            00000  3599  3 00492000                 LA    R2,0(R2)
 0004A4 1A12                        3600  3 00493000                 AR    R1,R2
 0004A6                             3601  2 00494000               END
 0004A6 5820 6014            00014  3605  2 00495000               L     R2,LDBINST1         DISPLACEMENT
 0004AA 8920 0014            00014  3606  2 00496000               SLL   R2,20
 0004AE 8820 0014            00014  3607  2 00497000               SRL   R2,20
 0004B2 1A12                        3608  2 00498000               AR    R1,R2
 0004B4 5410 7284            005D4  3609  2 00499000               SETIA R1,EPIEPSW
 0004B8 D403 504C 7288 0004C 005D8  3611  2          +
 0004BE 5610 504C            0004C  3612  2          +
 0004C2 5010 504C            0004C  3613  2          +
                                    3614  2 00500000  *                                  SET RETURN ADDRESS
 0004C6 5810 6024            00024  3615  2 00501000               L     R1,LDBNEXT
 0004CA 501E 5008            00008  3616  2 00502000               ST    R1,EPIEGPR(R14)
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   22
0Current Usings:  (EPIE,R5) (LCLDBWA,R6) (*,R7) (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
00004CE                             3617  1 00503000             END
                                    3621  1 00504000  *
                                    3622  1 00505000  *                                  BAS
 0004CE 954D 4000      00000        3623  1 00506000             IF    (@R4,EQ,X'4D'),BEGIN
 0004D2 4770 71E4            00534  3634  1          +
                                    3639  2 00507000  *                                  SET BRANCH ADDR
 0004D6 1B11                        3640  2 00508000               CLEAR R1
 0004D8 12FF/4780 7196       004E6  3644  2 00509000               IF    (R15,NZ),BEGIN      BASE REG
 0004DE 581F 5008            00008  3658  3 00510000                 L     R1,EPIEGPR(R15)
 0004E2 4113 0000            00000  3659  3 00511000                 LA    R1,0(R3)
 0004E6                             3660  2 00512000               END
 0004E6 1B33                        3664  2 00513000               CLEAR R3                  OTHER BASE REG
 0004E8 4330 6016            00016  3668  2 00514000               IC    R3,LDBINST1+2
 0004EC 8830 0004            00004  3669  2 00515000               SRL   R3,4
 0004F0 1233/4780 71B4       00504  3670  2 00516000               IF    (R3,NZ),BEGIN
 0004F6 8930 0002            00002  3684  3 00517000                 SLL   R3,2
 0004FA 5823 5008            00008  3685  3 00518000                 L     R2,EPIEGPR(R3)
 0004FE 4122 0000            00000  3686  3 00519000                 LA    R2,0(R2)
 000502 1E12                        3687  3 00520000                 ALR   R1,R2
 000504                             3688  2 00521000               END
 000504 5820 6014            00014  3692  2 00522000               L     R2,LDBINST1         DISPLACEMENT
 000508 8920 0014            00014  3693  2 00523000               SLL   R2,20
 00050C 8820 0014            00014  3694  2 00524000               SRL   R2,20
 000510 1E12                        3695  2 00525000               ALR   R1,R2
 000512 5410 7284            005D4  3696  2 00526000               SETIA R1,EPIEPSW
 000516 D403 504C 7288 0004C 005D8  3698  2          +
 00051C 5610 504C            0004C  3699  2          +
 000520 5010 504C            0004C  3700  2          +
                                    3701  2 00527000  *                                  SET RETURN ADDRESS
 000524 5810 504C            0004C  3702  2 00528000               L     R1,EPIEPSW+4
 000528 5410 7288            005D8  3703  2 00529000               N     R1,=X'80000000'
 00052C 5610 6024            00024  3704  2 00530000               O     R1,LDBNEXT
 000530 501E 5008            00008  3705  2 00531000               ST    R1,EPIEGPR(R14)
 000534                             3706  1 00532000             END
                                    3710  1 00533000
 000534                             3711    00534000           END   , OF BALR, BASSM, BASR, BAL, BAS
 000534 18D8/980C D004       00004  3715    00535000           PEND  ,
 DROP   *,R7
 00053A 58E0 D000/12FF       00000  3731             +
 000540 07FE                        3734             +
 DROP   EPIE,R5                     3735    00536000           DROP  R5
 DROP   LCLDBWA,R6                  3742    00537000           DROP  R6
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   23
0Current Usings:  (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   3750    00539000  *
                                    3751    00540000  *  FINDTRAP -
                                    3752    00541000  *
                                    3753    00542000  *  ON ENTRY:
                                    3754    00543000  *        R0 - DVWA
                                    3755    00544000  *        R1 - INSTURCTION ADDRESS (OR ZERO)
                                    3756    00545000  *
                                    3757    00546000  *  ON EXIT:
                                    3758    00547000  *        R0 - TRAP NUMBER (STARTS AT 1)
                                    3759    00548000  *        R1 - TRAP ADDRESS
                                    3760    00549000  *        R15=0 - TRAP FOUND
                                    3761    00550000  *        R15=NZ - TRAP NOT FOUND
                                    3762    00551000  *
 000542 50E0 D000            00000  3763    00552000  FINDTRAP PROC  TRACE=NO
 000546 900C D004/188D       00004  3775             +
 00054C 41D0 D038/0D70       00038  3777             +
 USING  *,R7                        3800    00553000  *
 000552 1860                        3801    00554000           LR    R6,R0
 USING  DVWA,R6                     3802    00555000           USING DVWA,R6
 000554 4150 6024            00024  3811    00556000           LA    R5,DVTRAPS
 000558 4140 6024            00024  3812    00557000           LA    R4,DVTRAPS          TRAP NDX
 USING  TPENTRY,R4                  3813    00558000           USING TPENTRY,R4
                                    3822    00559000  *
                                    3823    00560000  *                                  FIND TRAP
 00055C 4110 1000            00000  3824    00561000           LA    R1,@R1
 000560 4130 0001            00001  3825    00562000           LA    R3,1
 000564 5910 4000            00000  3826    00563000           WHILE ((R1,NE,TPADDR),AND,(TPADDR,NZ)),BEGIN
 000568 4780 7030            00582  3842             +
 00056C D603 4000 4000 00000 00000  3854             +
 000572 4780 7030            00582  3855             +
 000576 4140 4008            00008  3860  1 00564000             LA    R4,TPNEXT
 00057A 5E30 709A            005EC  3861  1 00565000             INCR  R3
 00057E 47F0 7012            00564  3864    00566000           END
                                    3869    00567000  *
                                    3870    00568000  *                                  SET RETURNS
 000582 5910 4000            00000  3871    00569000           IF    (R1,EQ,TPADDR),BEGIN TRAP FOUND
 000586 4770 7042            00594  3883             +
 00058A 1814                        3888  1 00570000             LR    R1,R4
 00058C 1803                        3889  1 00571000             LR    R0,R3
 00058E 9001 8004            00004  3890  1 00572000             PRETURN (R0,R1)
 000592 1BFF                        3892  1 00573000             CLEAR R15
 000594                             3896    00574000           END
 000594 7046           00594 00588  3900    00575000           ELSE  BEGIN               NOT FOUND
 000594 47F0 704A            0059C  3905             +
 000598 41F0 0004            00004  3911  1 00576000             LA    R15,4
 00059C                             3912    00577000           END
                                    3916    00578000
 00059C 18D8/980C D004       00004  3917    00579000           PEND
 DROP   *,R7
 0005A2 58E0 D000/12FF       00000  3933             +
 0005A8 07FE                        3936             +
 DROP   DVWA,R6                     3937    00580000           DROP  R6
 DROP   TPENTRY,R4                  3944    00581000           DROP  R4
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   24
0Current Usings:  (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0
                                    3954    00613000  PROTESP# ESPIE SET,*-*,MF=L
                                    3955             +*        MACDATE = 08/15/81
 0005AC                             3956    01-ESPIE +PROTESP# DS    0F
 0005AC 00000000                    3957    01-ESPIE +         DC    A(*-*)             USER EXIT ROUTINE ADDRESS
 0005B0 00000000                    3958    01-ESPIE +         DC    A(0)               USER PARAMETER LIST ADDRESS
 0005B4 0000                        3959    01-ESPIEC+         DC    B'0000000000000000'
                                                     +                                  INTERRUPTION MASK
 0005B6 0000                        3960    01-ESPIE +         DC    B'0000000000000000'
 0005B8 00000000                    3961    01-ESPIE +         DC    A(0)               RESERVED
                                    3962    00614000  PROTESP  EQU   PROTESP#,*-PROTESP#,C'C'
1DBESPIE  DEBUG interface; ESPIE routine.                                                                                   Page   25
0Current Usings:  (GVT,R12)
0Loc    Object Code    Addr1 Addr2  Stmt Lv Lineno    Source Statement           (Hibal 5, Asmedit 3.3)  HLASM R4.0  2002/06/06 10.01
+___    ______ ____    _____ _____  ____ __ ______    ______ _________
0                                   3965    00617000           USING TVT
 USING  TVT,R11                     3972    01-00195 +       $$USING TVT,TVTR
                                    3974    00618000           QLTORG
                                    3976    02-00331 +       $$PUSH  PRINT
                                    3978    02-00296 +       $$PRINT OFF
                                    3997    02-00436 +       $$POP   PRINT
0                                   3999    00620000  *
                                    4000    00621000  *
                                    4001    00622000  DBESPIEX EQU   *-DBESPIE           Module length
                                    4002    00623000
 000607 00
 000608                             4003    00624000           DC    0D'0'               FORCE OUT TO DOUBLE WORD
                                    4004    00625000           ENTRY SYMDBSPI            DEFINE SYMBOL ENTRY FOR
 000608 C4C2C5E2D7C9C540            4005    00626000  SYMDBSPI DC    CL8'DBESPIE',A(DBESPIE),A(DBESPIEX)
 000618 00000000                    4006    00627000           DC    A(0)                End of symbols
                                    4007    00628000           END   .
 000620                             4009    02-00657 +       $$LTORG
 000620                00620 00620  4010    02-00659 +$$$C2DBESPIE      LOCTR
 000620                00620 00620  4011    02-00660 +$$$D2DBESPIE      LOCTR
 000620                00620 00620  4012    02-00661 +$$$C2DBESPIE      LOCTR
                                    4013    01-00628 +       $$END

1DBESPIE  Macro and Copy Code Source Summary                                                                                Page   26
- Con Source                                        Volume    Members                        HLASM R4.0  2002/06/06 10.01
0     PRIMARY INPUT                                           CSECT    DROP     END      EX       LTORG    POP
                                                              PRINT    PUSH     START    USING
   L1 WYL.GA.MCL.WINGS.MACLIB                       STR211    DVWA     GETIA    GVT      LCLDBWA  PROC     PTRACE   REG
                                                              SETIA    TPENTRY  TVT      XPROC
   L2 WYL.GG.SYS.MACLIB                             STR210    $BC      $BFLKUP  $BV      $CCLKUP  $CRS     $CSS
                                                              $LBLAD   $LEXP    $LOR     $REL     $RGLKUP  $USLKUP
                                                              ACALL    BASE     BEGIN    CLEAR    CSECT    DEFCC    DROP
                                                              ELSE     END      EX       FLAG     GEN      HIBAL
                                                              IDENT    IF       INCR     LABEL    LTORG    PEND     POP
                                                              PRETURN  PRINT    PUSH     QLTORG   RECORD   REGS     SET
                                                              START    USING    WHILE    WITH
   L3 SYS3.IS.MACLIB                                SYSA03    SYSDEFN
   L4 SYS3.MACLIB                                   SYSA03    QSNAP
   L5 SYS1.MACLIB                                   OS02AD    ESPIE    IHAEPIE  IHBINNRA POST     SYSSTATE WAIT

1DBESPIE  Using Map                                                                                                         Page   27
-                                                                                            HLASM R4.0  2002/06/06 10.01
   Stmt  -----Location----- Action ----------------Using----------------- Reg Max    Last  Label and Using Text
           Count      Id           Type          Value    Range     Id        Disp   Stmt
0   941  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF0  15 000          @R15,15
    945  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF1  14 000          @R14,14
    949  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF2  13 000          @R13,13
    953  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF3  12 000          @R12,12
    957  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF4  11 000          @R11,11
    961  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF5  10 000          @R10,10
    965  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF6   9 000          @R9,9
    969  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF7   8 000          @R8,8
    973  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF8   7 000          @R7,7
    977  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF9   6 000          @R6,6
    981  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFA   5 000          @R5,5
    985  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFB   4 000          @R4,4
    989  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFC   3 000          @R3,3
    993  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFD   2 004    3015  @R2,2
    997  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFE   1 000    2129  @R1,1
   1001  00000000  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFF   0 000          @R0,0
   1002  00000000  00000001 DROP                                            0              0
   1981  00000120  FFFFFFEA USING  ORDINARY    00000000 00001000 FFFFFFEC  12 208    2122  GVT,GVTR
   1990  00000120  FFFFFFEA USING  ORDINARY    00000000 00001000 FFFFFFEB  11 218    2124  TVT,TVTR
   2090  00000048  00000001 USING  ORDINARY    00000048 00001000 00000001   7 588    2136  $$$4B,7
   2104  00000048  00000001 USING  ORDINARY    FFFFFFC8 00001000 FFFFFFE9   8 038    2135  SETSPWA-(4+52),R8
   2116  0000004C  00000001 USING  ORDINARY    00000000 00001000 FFFFFFED   6 00C    2130  LCLDBWA,R6
   2152  00000098  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF7   8 000          @R8,8
   2157  00000098  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF8   7 000          @R7,7
   2206  000000A6  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF4  11 000          @R11,11
   2231  000000A6  00000001 USING  ORDINARY    000000A6 00001000 00000001  15 51A    2240  $$$6B,R15
   2255  000000BA  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEA   1 004    2260  EPIE,R1
   2267  000000BE  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFE   1 000          @R1,1
   2283  000000BE  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF9   6 000          @R6,6
   2286  000000BE  00000001 USING  ORDINARY    00000000 00001000 FFFFFFED   1 068    2294  LCLDBWA,R1
   2305  000000CE  00000001 USING  ORDINARY    00000000 00001000 FFFFFFED   6 028    2612  LCLDBWA,6
   2310  000000CE  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFE   1 000    3824  @R1,1
   2321  000000D0  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF0  15 000          @R15,15
   2331  000000D0  00000001 USING  ORDINARY    000000D0 00001000 00000001   7 522    2606  $$$7B,BR
   2341  000000D4  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEE   5 020    2602  DVWA,R5
   2351  000000D8  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEA   4 050    2396  EPIE,R4
   2620  000001E8  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF8   7 000          @R7,7
   2627  000001E8  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFB   4 000          @R4,4
   2634  000001E8  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFA   5 000          @R5,5
   2641  000001E8  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF9   6 000          @R6,6
   2680  000001F8  00000001 USING  ORDINARY    000001F8 00001000 00000001   7 3E0    2743  $$$17B,7
   2697  000001FA  00000001 USING  ORDINARY    00000000 00001000 FFFFFFED   6 020    2740  LCLDBWA,R6
   2707  000001FC  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEE   5 018    2751  DVWA,R5
   2717  00000200  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEA   4 04C    2745  EPIE,R4
   2763  0000022C  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF8   7 000          @R7,7
   2782  0000023A  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFB   4 000          @R4,4
   2789  0000023A  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFA   5 000          @R5,5
   2796  0000023A  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF9   6 000          @R6,6
   2842  0000024A  00000001 USING  ORDINARY    0000024A 00001000 00000001   7 3A6    3098  $$$21B,7
   2860  0000024E  00000001 USING  ORDINARY    00000000 00001000 FFFFFFED   6 024    3060  LCLDBWA,R6
   2869  0000024E  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEE   5 01C    3060  DVWA,R5
   2879  00000252  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEA   4 04C    3027  EPIE,R4
   2939  0000027A  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEF   3 004    3003  TPENTRY,R3
1DBESPIE  Using Map                                                                                                         Page   28
   3043  000002FC  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFC   3 000          @R3,3
   3112  00000332  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF8   7 000          @R7,7
   3131  00000340  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF9   6 000          @R6,6
   3138  00000340  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFA   5 000          @R5,5
   3145  00000340  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFB   4 000    3633  @R4,4
   3202  00000350  00000001 USING  ORDINARY    00000350 00001000 00000001   7 288    3703  $$$32B,7
   3220  00000354  00000001 USING  ORDINARY    00000000 00001000 FFFFFFED   6 024    3704  LCLDBWA,R6
   3229  00000354  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEA   5 04C    3705  EPIE,R5
   3721  00000534  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF8   7 000          @R7,7
   3740  00000542  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFA   5 000          @R5,5
   3747  00000542  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF9   6 000          @R6,6
   3791  00000552  00000001 USING  ORDINARY    00000552 00001000 00000001   7 09A    3905  $$$55B,7
   3809  00000554  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEE   6 024    3812  DVWA,R6
   3820  0000055C  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEF   4 008    3882  TPENTRY,R4
   3923  0000059C  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF8   7 000          @R7,7
   3942  000005AA  00000001 USING  ORDINARY    00000000 00001000 FFFFFFF9   6 000          @R6,6
   3949  000005AA  00000001 USING  ORDINARY    00000000 00001000 FFFFFFFB   4 000          @R4,4
   3972  000005BC  00000001 USING  ORDINARY    00000000 00001000 FFFFFFEB  11 000          TVT,TVTR

1         General Purpose Register Cross Reference                                                                          Page   29
- Register  References (M=modified, B=branch, U=USING, D=DROP, N=index)                      HLASM R4.0  2002/06/06 10.01
0    0(0)    1001U 1002D 2073  2136M 2137  2142M 2165M 2240M 2245M 2291  2292  2493M 2494  2495M 2496  2497M 2514M 2514
             2521M 2583M 2602M 2612M 2664  2689  2771M 2826  2852  2912M 3027M 3092M 3120M 3186  3212  3729M 3775  3801
             3889M 3891  3931M
     1(1)     997U 2073  2120M 2121  2122M 2123  2124M 2125  2128M 2135M 2137  2138  2139  2140  2141  2165M 2245  2255U
             2260M 2267U 2286U 2292  2310U 2356M 2357M 2357N 2359M 2361M 2363M 2364  2373M 2374M 2374N 2385  2391M 2393M
             2395M 2396  2418M 2443  2471  2477  2478  2498M 2510M 2515M 2515  2517M 2522M 2522  2603M 2612M 2664  2699
             2722M 2723M 2723N 2734  2740M 2742M 2744M 2745  2771M 2826  2851  2914M 2915M 2915N 2931  3021M 3023M 3025M
             3026  3028M 3085M 3120M 3186  3211  3354M 3356M 3358M 3359  3375M 3377M 3379M 3380  3386M 3387  3425M 3426
             3442M 3444M 3446M 3447  3453M 3454M 3455M 3456  3494M 3496M 3498M 3499  3515M 3517M 3519M 3520  3526M 3527M
             3528M 3529  3556M 3556  3571M 3572M 3600M 3608M 3610M 3612M 3613  3615M 3616  3643M 3643  3658M 3659M 3687M
             3695M 3697M 3699M 3700  3702M 3703M 3704M 3705  3729M 3775  3824M 3841  3882  3888M 3891  3931M
     2(2)     993U 2073  2165M 2292  2358M 2359  2368M 2368  2369  2375M 2385  2419M 2431M 2431  2443  2479M 2560M 2567M
             2612M 2664  2724M 2734  2771M 2826  2942M 2943  2944M 2958M 2976M 2981  2985M 3120M 3186  3598M 3599M 3599N
             3600  3605M 3606M 3607M 3608  3685M 3686M 3686N 3687  3692M 3693M 3694M 3695  3729M 3775  3931M
     3(3)     989U 2073  2130M 2138  2165M 2292  2420M 2459M 2459  2471  2479M 2561M 2567M 2612M 2664  2771M 2826  2931M
             2939U 3043U 3120M 3186  3572N 3580M 3580  3581M 3582M 3591M 3591  3597M 3598N 3659N 3667M 3667  3668M 3669M
             3678M 3678  3684M 3685N 3729M 3775  3825M 3863M 3889  3931M
     4(4)     985U 2073  2165M 2292  2343M 2351U 2612M 2627U 2664  2709M 2717U 2771M 2782U 2826  2871M 2879U 3120M 3145U
             3186  3231M 3729M 3775  3812M 3820U 3860M 3888  3931M 3949U
     5(5)     981U 2073  2165M 2292  2333M 2341U 2612M 2634U 2664  2699M 2707U 2771M 2789U 2826  2852M 2869U 3120M 3138U
             3186  3212M 3229U 3729M 3740U 3775  3811M 3931M
     6(6)     977U 2073  2108M 2116U 2165M 2283U 2292  2294M 2305U 2612M 2641U 2664  2689M 2697U 2771M 2796U 2826  2851M
             2860U 3120M 3131U 3186  3211M 3220U 3729M 3747U 3775  3801M 3809U 3931M 3942U
     7(7)     973U 2073  2079M 2090U 2157U 2165M 2292  2314M 2331U 2612M 2620U 2664  2669M 2680U 2763U 2771M 2826  2831M
             2842U 3112U 3120M 3186  3191M 3202U 3721U 3729M 3775  3780M 3791U 3923U 3931M
     8(8)     969U 2073  2075M 2104U 2152U 2161  2165M 2292  2612M 2664  2665M 2767  2771M 2826  2827M 3116  3120M 3186
             3187M 3725  3729M 3775  3776M 3891  3927  3931M
     9(9)     965U 2073  2165M 2292  2612M 2664  2771M 2826  3120M 3186  3729M 3775  3931M
    10(A)     961U 2073  2165M 2292  2612M 2664  2771M 2826  3120M 3186  3729M 3775  3931M
    11(B)     957U 1990U 2063  2067  2073  2165M 2206U 2292  2612M 2664  2771M 2826  3120M 3186  3729M 3775  3931M 3972U
    12(C)     953U 1981U 2064  2073  2165M 2292  2612M 2664  2771M 2826  3120M 3186  3729M 3775  3931M
    13(D)     949U 2063  2067M 2070  2073  2075  2076M 2076  2161M 2165  2167  2292  2293M 2612M 2661  2664  2665  2666M
             2666  2767M 2771  2773  2823  2826  2827  2828M 2828  3116M 3120  3122  3183  3186  3187  3188M 3188  3725M
             3729  3731  3772  3775  3776  3777M 3777  3927M 3931  3933
    14(E)     945U 2063  2065M 2067M 2070  2167M 2170B 2292  2477M 2479  2501M 2502M 2502B 2562M 2567  2606M 2607M 2607B
             2612M 2613B 2661  2773M 2776B 2823  2918M 2919M 2919B 3031M 3032M 3032B 3122M 3125B 3183  3310M 3310  3311M
             3312M 3313M 3387N 3456N 3529N 3616N 3705N 3731M 3734B 3772  3933M 3936B
    15(F)     941U 2063  2064M 2065B 2067M 2143M 2169M 2169  2231U 2292  2321U 2478M 2479  2566M 2566  2567  2612M 2775M
             2775  3093M 3124M 3124  3317M 3317  3318M 3319M 3320M 3348M 3348  3354N 3419M 3419  3425N 3488M 3488  3494N
             3565M 3565  3571N 3652M 3652  3658N 3733M 3733  3895M 3895  3911M 3935M 3935

1DBESPIE  Diagnostic Cross Reference and Assembler Summary                                                                  Page   30
-                                                                                            HLASM R4.0  2002/06/06 10.01
0Statements Flagged
0    2305(L2:USING,142)

       1 Statement  Flagged in this Assembly        4 was Highest Severity Code
0HIGH LEVEL ASSEMBLER, 5696-234, RELEASE 4.0, PTF UQ57391
0SYSTEM: OS/390 02.10.00            JOBNAME: WIN#DBES    STEPNAME: ASM        PROCSTEP: ASM
0Datasets Allocated for this Assembly
  Con DDname   Dataset Name                                 Volume  Member
   P1 SYSIN    SYS02157.T100158.RA000.WIN#DBES.SYSIN.H01
   L1 SYSLIB   WYL.GA.MCL.WINGS.MACLIB                      STR211
   L2          WYL.GG.SYS.MACLIB                            STR210
   L3          SYS3.IS.MACLIB                               SYSA03
   L4          SYS3.MACLIB                                  SYSA03
   L5          SYS1.MACLIB                                  OS02AD
   L6          SYS1.MODGEN                                  OS02AD
   L7          SYS4.MACLIB                                  SYSA04
      SYSLIN   WYL.GA.MCL.WINGS.OBJECT                      STR203  DBESPIE
      SYSPRINT SYS02157.T100158.RA000.WIN#DBES.PRINT.H01    SCR003
      SYSTERM  GA$MCL.WIN#DBES.JOB01105.D0000102.?

    9460K allocated to Buffer Pool,         1040K would be required for this to be an In-Storage Assembly
     587 Primary Input Records Read         5198 Library Records Read                  0 Work File Reads
       0 ASMAOPT Records Read               1867 Primary Print Records Written         0 Work File Writes
      39 Punch Records Written                 0 ADATA Records Written
0Assembly Start Time: 10.01.58 Stop Time: 10.01.59 Processor Time: 00.00.00.3588
 Return Code 004
