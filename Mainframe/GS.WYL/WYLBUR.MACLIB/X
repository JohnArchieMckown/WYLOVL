CPSTART  DC    CL4'CP'                                                          
*                                                                               
CPREGS   DS    16A                 Saved registers                              
*                                                                               
CPLEARNP DS    F                   Learned word pageno                          
*-                                                                              
*-       The seg buffer is allocated when the CP is allocated.                  
*-       CPSEGBP points to the buffer and CPSEGBSZ is the actual                
*-       size of the buffer.  This buffer is used both for terminal             
*-       read and write data.                                                   
*-                                                                              
*-       The maximum amount of terminal input we can accept is                  
*-       "CPSEGMX#".  It's ok if this is larger than the current                
*-       buffer size, because the terminal routines will check to               
*-       see if everything will fit and will allocate a larger                  
*-       buffer if it wont.                                                     
*-                                                                              
CPSEGDF# EQU   4096                Default seg buffer size                      
CPSEGMX# EQU   16384               Maximum allowed seg buffer size              
CPSEGBP  DS    A                   Terminal seg buffer pointer                  
CPSEGBSZ DS    H                   Terminal seg buffer size                     
         DS    H                   Reserved                                     
*                                                                               
CPSEG    SEGCB ,                   Seg buffer for terminal I/O                  
*                                                                               
CPNSCANP DS    A                   New SCANCB ptr (usually @CPNSCAN)            
CPNSCAN  DS    XL(L'NSCNCB)        New SCANCB area                              
         EJECT                                                                  
*-                                                                              
*-       ORVYL Interface Information                                            
*-                                                                              
         DS    0F                                                               
CPORVCMD FLAG                                                                   
         FLAG  CPFREDT             - Read  edit                                 
         FLAG  CPFWEDT             - Write edit                                 
         FLAG  CPFRTEXT            - Read  text                                 
         FLAG  CPFWTEXT            - Write text                                 
         FLAG  CPFCNTL             - Control                                    
         FLAG  CPFLKPP             - Locked page pass                           
         FLAG  CPFVRSV1            - Reserved                                   
         FLAG  CPFRCTRL            - Read  control (see MILTEN/SIFT)            
*                                                                               
         DS    XL7                 ORVYL info depending on CPORVCMD             
CPORVINF EQU   CPORVCMD,*-CPORVCMD,C'X'                                         
*                                                                               
CPORVMOD EQU   *,2,C'X'            WYLBUR/ORVYL mode word                       
CPORVCHR DS    C                   ORVYL prompt character                       
*                                                                               
CPORVFLG FLAG  ,                   ORVYL flags                                  
         FLAG  CPOFRSV             - Reserved                                   
         FLAG  CPOFNPAS            - Pass syntactly incorrect cmds              
         FLAG  CPOFNSES            - No changes in a session break              
         FLAG  CPOFNALN            - ALIGN/JUSTIFY are blocked                  
         FLAG  CPOFNNUM            - NUMBER is blocked                          
         FLAG  CPOFNCHG            - ACTIVE file changes are blocked            
         FLAG  CPOFNFRM            - Not used (was INFORM)                      
         FLAG  CPOFPRST            - Return pressed lines                       
*                                                                               
CPORVLNO DS    F                   Last READ EDIT lineno (or -1)                
CPORV    EQU   CPORVCMD,*-CPORVCMD,C'X'                                         
*-                                                                              
*-       The following flag byte is NOT reset by clearing CPORV.                
*-         They are flags for us to keep track of the last thing                
*-         we sent to ORVYL.                                                    
*-                                                                              
CPORVWF  FLAG                                                                   
         FLAG  CPOFRPASS           - RD EDIT sent because syn error             
*                                                                               
         DS    XL3                 Reserved                                     
*                                                                               
CPSYS    DS    CL8                 Last subsystem to give us control            
CPORGSYS DS    CL8                 Original subsystem we came from              
CPLGFSYS DS    CL8                 Subsystem name to transfer to                
         DS    CL8                 Reserved                                     
         EJECT                                                                  
CPINIT   EQU   *                   Start of fields zeroed at logon              
CPNAME   DS    CL20                User name (from KWRNAME)                     
CPWPROJ  DS    CL8                 Project id ("WPROJECT")                      
CPWAPP   DS    CL8                 Application info ("WAPP")                    
CPUID    DS    CL32                User id (from KEYS file)                     
*                                                                               
CPACCTSV DS    0CL5                Saved account                                
CPUSERSV DS    CL3                 .uuu                                         
CPGRPSV  DS    CL2                 .gg                                          
*                                                                               
CPHOST   DS    CL32                Current host name                            
*                                                                               
CPNCOM   DS    F                   Number of commands executed                  
CPNCOME  DS    F                   Number of commands in exec mode              
*                                                                               
CPVTWAP  DS    A                   VTAM terminal work area                      
*                                                                               
CPNMAIL  DS    F                   Number of mail commands                      
*                                                                               
CPSECCNT DS    H                   Security violation counter                   
CPSECCLK DS    F                   Security violation clock (STCK)              
*                                                                               
CPSOF    DS    X                   Source of funds (see KWRSOF)                 
CPAR     DS    X                   Accounts receivable (see KWRAR)              
CPSOF2   EQU   CPSOF,*-CPSOF,C'X'                                               
*                                                                               
         DS    H                   Number of interruptable paths                
*-                                                                              
*-       DS    F                   Used by CPRACF1 now (PJG)                    
*-                                                                              
CPRACF1  FLAG  ,                   Racf security interface flags                
         FLAG  CPRACDEF              -  User has been identified                
         FLAG  CPRACUND              -  User is undefined to racf               
         FLAG  CPRACPSW              -  User's password wrong                   
         FLAG  CPRACBAD              -  Undefined racinit error                 
         FLAG  ,                     -  Reserved                                
         FLAG  ,                     -  Reserved                                
         FLAG  ,                     -  Reserved                                
         FLAG  ,                     -  Reserved                                
         FLAG  (CPRACXT,CPRACUND+CPRACPSW+CPRACBAD,NZ)                          
*                                                                               
         DC    AL1(0)              Reserved field                               
CPRACFCI DC    AL1(0)              Initial return code from racinit             
CPRACFCF DC    AL1(0)              Final return code from racinit               
*                                                                               
CPACEE   DS    A                   RACF ACEE pointer                            
CPDENQP  DS    A                   DENQ'd dsname list ptr (DISK)                
*                                                                               
CPWPATH  DS    CL8                 Alternate Wings path name                    
*                                                                               
CPNPATHS DS    H                   Number of open UPATHs                        
CPNNETS  DS    H                   Number of open UNETs                         
*                                                                               
         DS    2A                  Reserved                                     
*                                                                               
CPQINFOQ DC    A(0)                Query info queue head                        
         DS    F'0'                Reserved                                     
*                                                                               
         DS    3A                  Reserved                                     
*                                                                               
CPCMDLEN DS    H                   CPCMD length                                 
CPCMD    DS    CL(&LINESZ)         Current command text                         
*                                                                               
CPHEAPCR DS    A                   Current end of heap                          
*                                                                               
CPCLCK   DS    D                   Clock at last dispatch                       
*                                                                               
CPCMDRTN DS    A                   Command exit routine addr                    
*                                                                               
         DS    0F                                                               
         EJECT                                                                  
CPS      SIB   ,                   Session information block                    
*                                                                               
         DS    0S(256-L'CPS)       Error if not enough room for sib             
         ORG   CPS+256             (fuzzy room, for expansion)                  
*                                                                               
CPSIB    EQU   CPS,*-CPS,C'X'                                                   
*                                                                               
CPSPFL   DS    X                   Privilege flags                              
         DS    XL3                 Reserved                                     
*                                                                               
CPWCHAR  DS    CL16                Current WCHARGE component                    
         DS    CL16                Reserved                                     
*                                                                               
CPTTYPEP DS    A                   TTYPE entry ptr                              
*                                                                               
CPREND   DS    CL8                 Current rendition                            
         EJECT                                                                  
*-                                                                              
*-       Global user flags                                                      
*-                                                                              
CPGFLG1  FLAG                                                                   
         FLAG  CPGFCPR             - CPROMPT has been set                       
         FLAG  CPFRCVY             - Recovery is in progress                    
         FLAG  CPFSEC              - Secure exec mode in effect                 
         FLAG  CPFSLOCK            - Secure and locked                          
         FLAG  CPFSYSMV            - Transferring to new subsystem              
*                                                                               
CPGFLG2  FLAG                                                                   
*        EQU   X'20'               - Reserved                                   
CPFACTSV EQU   X'01'               - Active file saved by rcvy                  
*                                                                               
CPLEXATO EQU   X'10'               - Local flag for show exec                   
CPFLIMIT EQU   X'08'               - Local flag for show exec                   
*                                                                               
CPGFLG3  FLAG                                                                   
CPFKWENT EQU   X'80'               - Keyword entered for set grp                
CPFCMDFX EQU   X'40'               - Prompt for mod of cmd lines                
CPFCMDED EQU   X'20'               - Edit cmd retry mode                        
*        EQU   X'10'               - Reserved                                   
CPF3IMED EQU   X'08'               - Implicit editing cmds ok                   
*        EQU   X'04'               - Reserved                                   
*        EQU   X'02'               - Reserved                                   
CPF3EXBK EQU   X'01'               - Break exec file at cmdprt                  
*                                                                               
CPGFLG4  FLAG                                                                   
CPFNPREP EQU   X'80'               - Do not preprocess command                  
CPFAUSET EQU   X'40'               - Authorized account set                     
CPF4TRUE EQU   X'20'               - Last exec if command true                  
         FLAG  (CPFTYPED,X'10')    - Command typed at terminal                  
         FLAG  (CPFEXNIN,X'08')    - Don't increment exec lineno                
         FLAG  (CPFNPARM,X'04')    - Exec "parm" not set                        
         FLAG  (CPFNDEF,X'02')     - Do not do define substitution              
         FLAG  (CPGFNLST,X'01')    - Global nolist option                       
*                                                                               
CPGFLG5  FLAG                                                                   
         FLAG  CPGFMULT            - Allow multiple cmds on a line              
         FLAG  CPGFCLR             - Assume clear if no changes                 
         FLAG  CPGFWR              - Write has occurred (for "@ok")             
         FLAG  CPGFNCMD            - New command waiting in CPCMD               
         FLAG  CPGFNATN            - Don't allow just attn for collect          
         FLAG  CPGFCMDA            - Command waiting ended with attn            
         FLAG  CPGFRSV1            - Reserved                                   
         FLAG  CPGFRSV2            - Reserved                                   
*                                                                               
CPGFLG6  FLAG  ,                   On Error flags                               
         FLAG  CPFONERR            On Error specified                           
         FLAG  CPFDDERR            On Error specified, disabled                 
         FLAG  CPFXXERR            Error has occurred                           
*                                                                               
CPGFLG7  FLAG  ,                   On Attn flags                                
         FLAG  CPFONATN            On Attn specified                            
         FLAG  CPFDDATN            On Attn specified, disabled                  
         FLAG  CPFINATN            On Attn ,commands interruptible              
         FLAG  CPFXXATN            Attn has occurred                            
*                                                                               
CPGFLG8  FLAG  ,                                                                
         FLAG  CPFTRY              TRY command                                  
         FLAG  CPFXXTRY            Special TRY flag, see CHECKTRY rtn           
         FLAG  CPFTATTN            Attn during last TRY                         
         FLAG  CPFTERR             Error during last TRY                        
*                                                                               
CPGFLG9  FLAG  ,                   SIGNON process flags                 **ISU** 
         FLAG  CPFSGNML            - Initial signon                     **ISU** 
*                                    (not from another system)          **ISU** 
         FLAG  CPFSGNCM            - First command has been provided    **ISU** 
*                                                                               
CPGFLG10 FLAG                                                                   
         FLAG  CPFVCMD             - Command for WYL from ORVYL                 
         FLAG  CPFVEXED            - Cmd from ORV, pushed exec mode             
         FLAG  CPGFSAMT            - Samson tracing turned on                   
         FLAG  CPGFSAMD            - Samson debug messages turned on            
         FLAG  CPGFSAMSLOW         - Samson force slow FTP                      
         FLAG  CPGFSAMNFTPCRYPT    - Samson never encrypt FTP                   
*                                                                               
CPGFLG11 FLAG  ,                                                                
         FLAG  CPFNIZ              - NIZ mode (used for debugging)              
         FLAG  CPFAPRILFOOL        - NIZ hacking                                
*                                                                               
CPGFLG12 FLAG  ,                                                                
         FLAG  CPFLEARN            - Words in user dictionary                   
         FLAG  CPFBIGXMON          - Big memory xmonitor user                   
*                                                                               
CPGFLG13 FLAG  ,                                                                
         FLAG  CPGFNOSPIEDIT       - Never do "SPIRES mode" read edit           
*                                                                               
CPGFLG14 FLAG  ,                                                                
CPGFLG15 FLAG  ,                                                                
CPGFLG16 FLAG  ,                                                                
*                                                                               
CPGFLGS  EQU   CPGFLG1,*-CPGFLG1,C'X'                                           
         EJECT                                                                  
*-                                                                              
*-       Record Groups.                                                         
*-                                                                              
CPTEXT   RG    ,                   ACTIVE files                                 
CPEXEC   RG    ,                   EXEC files                                   
CPFLOW   RG    ,                   EXEC file flow control info                  
CPVARS   RG    ,                   EXEC variables                               
CPDATA   RG    ,                   EXEC GETDATA/PUTDATA variables               
CPDATANL EQU   32                  Name len of CPDATA                           
CPRG16   RG    ,                   Misc RecGroup (name length=16)               
CPRG64   RG    ,                   Misc RecGroup (name length=64)               
CPRG16NL EQU   16                  Name length of CPRG16                        
CPRG64NL EQU   64                  Name length of CPRG64                        
CPNAMELN EQU   16                  Name len for vars, procs, labels,            
*                                    etc, CPNAMELN must be 16 !!                
*                                                                               
*        Exec Flow record group set numbers                                     
CP#XOLD  EQU   2                   Old type EXEC File                           
CP#XACT  EQU   3                   ACTIVE EXEC File                             
CP#XTEMP EQU   4                   Temp EXEC File                               
CP#XSTK  EQU   16                  EXEC File stack                              
CP#FEXEC EQU   CP#XSTK             First EXEC file in stack                     
CPMAXXCT EQU   128                 Number of EXEC files in stack                
*                                                                               
*        Miscelleneous record group set numbers                                 
*                                                                               
CP#SYSV  EQU   2                   System variables set                         
CP#DEF   EQU   3                   User define commands set                     
CP#ABBR  EQU   4                   User define commands ABBREV list             
CP#LRN   EQU   5                   Learned words                                
CP#XFILE EQU   6                   Exec file table                              
CP#OOPS  EQU   7                   OOPS (page mode undo) lines                  
CP#SESV  EQU   8                   Session (SES.) variables                     
CP#DEBUG EQU   9                   Exec Debug information                       
CP#DSTOP EQU   10                  Exec Debug stops info                        
CP#MRAW  EQU   11                  Exec Monitor raw data                        
CP#MSUM  EQU   12                  Exec Monitor summary data                    
CP#MNAME EQU   14                  Exec Monitor exec name data                  
CP#LTRAP EQU   15                  Line number traps                            
CP#NTRAP EQU   16                  Proc name traps                              
CP#RTRAP EQU   17                  Proc return traps                            
CP#HOSTI EQU   18                  Saved host user/password info                
CP#FSDEF EQU   19                  File System definitions                      
*-                                                                              
*-       Additional Active file information.                                    
*-                                                                              
CPATLIM# EQU   16*1024*1024        Absolute maximum Active size                 
CPATBIG# EQU   10*1024*1024        Large Active threshold                       
CPATMAX# EQU   1024*1024           Purge old cleared Actives thresh             
CPATMIN# EQU   512*1024            Purge until under this threshold             
CPATBYTS DS    F                   Total no. bytes in all Actives               
CPATCLR  DS    F                   Number of cleared   Active files             
CPATTEXT DS    F                   Number of text      Active files             
CPATTEMP DS    F                   Number of temporary Active files             
         DS    F                   Reserved                                     
*                                                                               
CPATLINS DS    F                   Total no. lines in all Actives               
*                                                                               
CPACTNO  DS    F                   Current Active file number                   
CPACTMAX DS    F                   Maximum Active file number                   
         DS    F                   Reserved                                     
*                                                                               
CPA      AINFO ,                   Current Active file information              
*                                                                               
CPRCVCUR DS    A                   Current recovery volume ptr                  
CPRCVEND DS    A                   Ending recovery volume ptr                   
CPRCV    EQU   CPRCVCUR,*-CPRCVCUR,C'X'                                         
*                                                                               
CPDELTA  DS    F                   Global delta                                 
*                                                                               
CPLCNO   DS    F                   Last located line-number                     
CPSTLNO  DS    F                   Last line-number stowed                      
*                                                                               
CPCOUNT  DS    F                   Number of lines in last COUNT                
*                                                                               
CPBLKACT DS    F                   BLOCK's Active file number                   
CPFBKLNO DS    F                   FBLOCK line-number                           
CPLBKLNO DS    F                   LBLOCK line-number                           
CPFBKCOL DS    H                   FBLOCK column number                         
CPLBKCOL DS    H                   LBLOCK column number (0=eol)                 
*-                                                                              
*-       Additional EXEC file information.                                      
*-                                                                              
CPEXFLG  FLAG  ,                                                                
         FLAG  CPFEXEC             - Exec Mode in effect                        
* note CPFXTEND, CPFXOLD flags are set only if CPFEXEC is set too!              
CPEXFLG2 FLAG  ,                                                                
         FLAG  (CPFXTEND,1,EQ)     - Extended exec file executing               
         FLAG  (CPFXOLD,2,EQ)      - Old exec file executing                    
* Caution: Authorized Execs MUST be well behaved!  That is, they                
* must not break or pause and must terminate via XRETURN command.               
CPEXFLG3 FLAG  ,                                                                
         FLAG  CPFXAUTHLIB         - Authorized Exec library                    
         FLAG  CPFXAUTH            - Authorized Exec                            
CPEXFLG4 FLAG  ,                   Not used                                     
*                                                                               
CPEXLINE DS    F                   Exec file line number                        
CPEXNEXT DS    F                   Next EXEC file line number                   
CPRETURN DS    F                   Exec file return variable                    
*                                                                               
CPSCOPE  DS    F                   Start of current scope                       
CPSCOPD  DS    F                   End of current scope                         
CPXSCOPE DS    F                   Start of current XPROC scope                 
CPXSCOPD DS    F                   End of current XPROC scope                   
*                                                                               
CP#XSET  DS    F                   Current EXEC file set number                 
CPRGEXEC DS    F                   Current EXEC RGroup info pointer             
CPRGFLOW DS    F                   Current FLOW RGroup info pointer             
*                                                                               
CP#XLOAD DS    F                   EXEC file set number for load                
CPRGLOAD DS    F                   EXEC RGroup info pointer for load            
CPRGFC   DS    F                   FLOW RGroup info pointer for load            
*                                                                               
CPXNAME  DS    CL(64)   not set !  EXEC, XPROC name (=L'XDSNAME)                
CPPROCNM DS    CL(CPNAMELN)        EXEC procedure name                          
*                                                                               
CPLIMIT  DS    H                   No. of cmds without waring                   
CPLLIMIT DS    H                   Local no. of cmds limit                      
*                                                                               
CPFXDFLG FLAG                                                                   
         FLAG  CPFXDUMP            exec dump flag                               
         FLAG  CPFXQT              exec quiet flag (not implemented)            
CPXDPLN  DS    F                   LAST LINE DUMPED (-1 IF NONE)                
CPXDPNLN DS    F                   NEXT LINE TO DUMP                            
CPXDPACT DS    F                   DUMP ACTIVE FILE                             
CPXDPDLT DS    F                   DUMP DELTA                                   
*-                                                                              
*-       Additional CP exec state info, initialized to zero and                 
*-       pushed, popped with the dynamic exec state info during                 
*-       execution, if you add anything to CPXSTATE area (ended by              
*-       CPXPUSH), you must reassemble XCALL module.                            
*-                                                                              
CPXSTATE DS    0F                  EXEC state info, pushed                      
CPPACCT  DS    0CL5                EXEC pseudo account                          
CPPUSER  DS    CL3                 .uuu                                         
CPPGRP   DS    CL2                 .gg                                          
CPXFLAG  FLAG  ,                                                                
         FLAG  CPFXOVER            - Overhead mode (no charging)                
CPXPUSH  EQU   CPXSTATE,*-CPXSTATE,C'X'                                         
*                                                                               
CPCPLEN  DS    H                   Command prompt length                        
CPCPRMT  DS    CL62                Command prompt text                          
*-                                                                              
*-       Additional VARS information.                                           
*-                                                                              
CPARRAY# DS    F                   Next Array ID #, Global counter              
CPVSET#  DS    F                   Variable stack set number                    
CPXVSET# DS    F                   Last XCALL var stack set number              
*                                                                               
CPPLIMIT EQU   8                   MAX # OF PARMS                               
CPSLIMIT EQU   3                   MAX # OF SUBSCRIPTS (MUST BE 3)              
*-                                                                              
*-       Debug/Monitor Information.                                             
*-                                                                              
CPDFLG   FLAG  ,                   Debug flags                                  
         FLAG  CPFDEBUG            Debugging mode on                            
         FLAG  CPFTRACE            Debug trace on                               
         FLAG  CPFTTRAP            Debug trace w/trap on                        
         FLAG  CPFXLOG             Log all exec/xproc commands                  
         FLAG  CPFLOG              Log all old exec commands (only)             
CPDFLG2  FLAG  ,                                                                
         FLAG  CPFDNEXT            Exec trap next command                       
         FLAG  CPFDSTOP            Exec trap this command                       
         FLAG  CPFDSTPD            Exec command stopped                         
         FLAG  CPFISTOP            Immediate stop at this command               
         FLAG  CPFISTPD            Immediate stop stopped                       
         FLAG  CPFIDONE            Immediate stopped done                       
CPDFLG3  FLAG  ,                                                                
CPMFLG   FLAG  ,                   Exec monitor flags                           
         FLAG  CPFMON              Monitor exec execution                       
CPTRAPSQ DS    F                   Unique debug trap identfier                  
CPMONPTR DS    F                   Ptr to monitor memory block                  
CPMONCPU DS    F                   Monitor cmd timer in tu's                    
CPMONMAX DS    F                   Max memory to get for monitor                
         EJECT                                                                  
*-                                                                              
*-       Miscelleneous info                                                     
*-                                                                              
CPLOCLCP DS    F                   CP extension (Getmain'd area)                
*                                                                               
CPGETSTK DS    F                   Pointer to GETSTACK (GETMAINed)              
CPGETLN  DS    H                   Size of GETSTACK                             
*                                                                               
CPHCMD#  EQU   100                 Maximum number of saved cmds                 
CPHCMDNO DS    H                   Current command number                       
CPHCMDMX DS    H                   No. of saved commands to display             
CPHCMDCR DS    H                   Current no. of saved commands                
CPHCMDQH DS    A                   History command list queue head              
CPHCMDQT DS    A                   History command list queue tail              
*                                                                               
CPKWRID  DS    F                   Logged on user's kwr record no.              
CPLGNCT  DS    H                   No. of logon attempts                        
*                                                                               
CPLENGTH DS    H                   Line length                                  
CPVOLUME DS    CL6                 Volume                                       
CPERRID  DS    CL8                 Error id                                     
CPOERRID DS    CL8                 Prev cmds error id                           
*                                                                               
CPEXABRT DS    F                   EXEC "ON ABORT" line#                        
CPEXATTN DS    F                   EXEC "ON ATTN" line#                         
CPATTNCT DS    H                   Attention count                              
*                                                                               
         DS    H                   Reserved  (what is this Niz ??)              
*                                                                               
CPAUTHUS DS    CL3                 Authorized user                              
CPAUTHGP DS    CL2                 Authorized group                             
*                                                                               
CPAUTFLG FLAG  ,                   Logon flags                                  
         FLAG  CPFAUSE             - Doing use of active                        
         FLAG  CPFGREET            - Greetings msg given                        
         FLAG  CPFWORD             - User knows the word                        
         FLAG  CPFLMSG             - Logon msgs displayed                       
*                                                                               
CPRFLG   FLAG                                                                   
         FLAG  CPRFEXT             - External (disk) path is owned              
         FLAG  CPRFSUB             - Submit path is owned                       
         FLAG  CPRFJES             - Jes command path is owned                  
         FLAG  CPRFKWR             - Kwr resource is owned                      
         FLAG  CPRFKEYS            - Keys resource is owned                     
         FLAG  CPRFDICT            - Dictionary is owned                        
*                                                                               
CPLIB    DS    CL8                 Default library                              
CPEXCMCT DS    H                   Exec command loop count                      
CPWRNCNT DS    H                   Warn chng cnt on clear rqst                  
CPRSCNVL DS    H                   Rescan limit for pre-proc                    
CPESCAPE DS    C                   Current escape character                     
CPSKIP   DS    C                   Current skip character                       
CPORVYL  DS    CL8                 ORVYL subsystem name                         
         DS    F                   Reserved                                     
CPXCMDP  DS    A                   ???? delete next time around                 
CPTIOCLK DS    F                   Clock at last terminal I/O                   
*                                                                               
CPCHAZ   DS    F                   Charley Hoyt's word                          
CPCHAZF  DS    F                   Charley's full word                          
         DS    2F                  Charley is greedy                            
CPOHYEAH DS    XL64                Yes, this too is Charley's                   
*                                                                               
         DS    0F                                                               
CPTEMPP# EQU   95                  Max. no of temp pages                        
CPTEMPNP DS    H                   Offset to next free pageno                   
CPTEMPPG DS    (CPTEMPP#)H         Pageno's of temporary pages                  
         EJECT                                                                  
         DS    0F                                                               
*  Note that for the JES interface, the CPJESHFL must be                        
*  defined the same as the HCBFGBL flag byte in the HCB.                        
CPJESHFL FLAG                                                                   
         FLAG  CPJFTER             - Jes terse mode                             
         FLAG  CPJFPRIV            - Privd jes use allowed                      
*                                                                               
CPJESFLG FLAG                                                                   
         FLAG  CPJFNRUN            - Norun                                      
         FLAG  CPJFHOLD            - Hold                                       
         FLAG  CPJFXHLD            - Xhold                                      
         FLAG  CPJFNTFY            - Notify                                     
         FLAG  CPJFFRCE            - Force                                      
         FLAG  CPJFNOPT            - Numbering options explicit                 
         FLAG  CPJFUNN             - Unnumbered                                 
         FLAG  CPJFDBUG            - Debug mode                                 
*                                                                               
CPSYSAFF DS    CL8                 Sysaff                                       
CPDEST   DS    CL8                 Destination                                  
CPBIN    DS    CL3                 Bin                                          
CPFORMS  DS    CL8                 Forms                                        
*                                                                               
CPJESFLY FLAG  ,                                                                
         FLAG  CPJFNTFX            - Notify option explict                      
         FLAG  CPJFHOLX            - Hold print option explicit                 
         FLAG  CPJFXHOX            - Hold execution option explicit             
*                                                                               
         DS    XL3                 Reserved                                     
*                                                                               
CPJPFX   DS    CL8                 Job prefix                                   
CPJNO    DS    H                   User job count                               
CPJNACCT DS    CL5                 Notify account (uuugg)                       
CPJESINF EQU   CPJESHFL,*-CPJESHFL,C'X'                                         
*                                                                               
CPJOBNM  DS    CL8                 Last jobname of job submitted                
CPJOBS   DS    XL8                 Last four jobno's (2 bytes ea)               
*-                                                                              
*-       Samson terminal information (obtained from Samson).                    
*-                                                                              
CPSAMFLG FLAG                                                                   
         FLAG  CPSAMFDEF           - Samson information defined                 
         FLAG  CPSAMFBADECHO       - Echo test failed                           
         FLAG  CPSAMFDEBUG         - Debugging mode                             
         FLAG  CPSAMFUBUFFER       - Buffer value is explicit                   
         FLAG  CPSAMFUTMOUT        - Timeout value is explicit                  
         FLAG  CPSAMFUENCODE       - Encoding value is explicit                 
         FLAG  CPSAMFUCHECK        - Checking value is explicit                 
*                                                                               
CPSAMCOD FLAG  ,                   Samson encoding options                      
         FLAG  (CPSAMFEMASK,12)    - Encoding mask:                             
         FLAG  (CPSAMF8BIT,12,OFF)   . 8-bit transfer mode                      
         FLAG  (CPSAMF7BIT,12,ONES)  . 7-bit transfer mode                      
         FLAG  (CPSAMFHEX,8)         . Hex transfer mode                        
         FLAG  (CPSAMFPCK,4)         . Send data in packed format               
         FLAG  (CPSAMFCMASK,3)     - Error checking mask:                       
         FLAG  (CPSAMFCNONE,3,OFF)   . No checksum                              
         FLAG  (CPSAMFCKS,2)         . Send one byte checksum                   
         FLAG  (CPSAMFCRC,1)         . Send two byte CRC                        
*                                                                               
CPSAMTYP DS    CL16                Samson type                                  
CPSAMVER DS    CL16                Samson version                               
CPSAMOS  DS    CL16                Samson operating system                      
CPSAMTRM DS    CL8                 Samson terminal type                         
CPSAMLPR DS    CL24                Samson printer name                          
CPSAMFONT DS   CL16                Samson font name                             
         DS    XL16                Reserved                                     
CPSAMPRO DS    H                   Samson protocol version                      
         DS    H                   Reserved                                     
CPSAMTMO DS    H                   Samson re-transmission timeout               
CPSAMHEI DS    H                   Samson screen height                         
CPSAMWID DS    H                   Samson screen width                          
CPSAMALH DS    H                   Samson alt screen height                     
CPSAMALW DS    H                   Samson alt screen width                      
CPSAMSPD DS    H                   Samson speed                                 
CPSAMDV  DS    H                   Samson dialog support version                
         DS    H                   Reserved                                     
CPSAMBUFF DS   F                   Samson buffer size                           
CPSAM    EQU   CPSAMFLG,*-CPSAMFLG,C'X'                                         
         EJECT                                                                  
*-                                                                              
*-       User Device Table.                                                     
*-                                                                              
DEVMAX#  EQU   2                   Maximum number of devices                    
*                                                                               
DEV      RECORD BEGIN              User device information                      
DEVFLAG  FLAG                                                                   
*                                                                               
DEVTYPE  FLAG                                                                   
         FLAG  (DEVTSAM,1,EQ)      - SAMSON device                              
         FLAG  (DEVTNET,2,EQ)      - NETWORK device                             
*                                                                               
DEVNAME  DS    CL8                 Device name                                  
*                                                                               
DEVNEXT  DS    0F                                                               
         END                                                                    
*                                                                               
*                                                                               
CPDEVCNT DS    H                   No. of user devices                          
*                                                                               
         DS    0F                                                               
CPDEVTBL DS    XL(DEVMAX#*L'DEV)   User device table                            
         EJECT                                                                  
*-                                                                              
*-       Page Mode Information                                                  
*-                                                                              
CPVFLAG  FLAG                                                                   
         FLAG  CPVFPAGE            - Page mode                                  
         FLAG  CPVFPEND            - Page mode is pending                       
         FLAG  CPVFSPEC            - Specific lines on the page                 
         FLAG  CPVFCH              - File changes have occurred                 
         FLAG  CPVFHIDE            - Block is hidden                            
*                                                                               
CPVFLAG2 FLAG                                                                   
         FLAG  CPVFCLR             - Clear page and re-write lines              
         FLAG  CPVFREWR            - Rewrite all lines on the page              
         FLAG  CPVFFMT             - Format all fields on the page              
         FLAG  CPVFRTRY            - Command retry entry                        
         FLAG  CPVFMARK            - Block marks have changed                   
         FLAG  CPVFREN             - Renumbered linenos on page                 
*                                                                               
CPVFLAG3 FLAG                                                                   
         FLAG  CPVFWRAP            - Wordwrap mode                              
         FLAG  CPVFUNN             - Unnumbered mode                            
         FLAG  CPVFTRC             - Trace mode                                 
         FLAG  CPVFBUG             - Debug mode                                 
         FLAG  CPVFSPEL            - Do spelling checking                       
         FLAG  CPVFFORMAT          - Formatted mode                             
*                                                                               
CPVFLAG4 FLAG                                                                   
         FLAG  CPVFVTAM            - VTAM format    (for 3270s)                 
         FLAG  CPVFPREP            - Prepare mode   (for 3270s)                 
         FLAG  CPVFESC             - Escape mode    (for 3270s)                 
*-                                                                              
*-       The CPVMODE byte is the editing mode sent to the front-end.            
*-                                                                              
CPVMODE  FLAG                                                                   
         FLAG  CPVFWYL             - WYLBUR mode                                
         FLAG  CPVFRSV2            - Reserved                                   
         FLAG  CPVFRSV3            - Reserved                                   
         FLAG  CPVFRSV4            - Reserved                                   
         FLAG  CPVFRSV5            - Reserved                                   
         FLAG  CPVFRSV6            - Reserved                                   
         FLAG  CPVFRSV7            - Reserved                                   
         FLAG  CPVFINS             - Insert mode                                
*                                                                               
CPVWCHAR DS    C                   Word character (for front-end)               
*                                                                               
CPVLFLAG FLAG                                                                   
         FLAG  CPVFEXIT            - Exit page mode                             
         FLAG  CPVFBRK             - Break out of page mode                     
         FLAG  CPVFBELL            - Ring the bell                              
*                                                                               
         DS    X                   Reserved                                     
*                                                                               
CPVTWID  DS    H                   Total (buffer) width                         
CPVWID   DS    H                   Displayed width                              
CPVHEI   DS    H                   Page height                                  
CPVDIM   EQU   CPVTWID,*-CPVTWID,C'X'                                           
*                                                                               
CPVWCUR  DS    H                   Current window number                        
CPVWCNT  DS    H                   No. of windows on page                       
*                                                                               
CPVCOL   DS    H                   Current column for page lineno               
CPVLNO   DS    F                   Current line-number on page                  
CPVCURS  DS    D                   Current cursor position                      
CPVCURR  EQU   CPVCURS,4,C'F'      .Current row                                 
CPVCURC  EQU   CPVCURS+4,4,C'F'    .Current column                              
*                                                                               
CPVACOL  DS    H                   Column for alternate page lineno             
CPVALNO  DS    F                   Alternate line-number on page                
CPVACURS DS    D                   Alternate cursor position                    
CPVACURR EQU   CPVACURS,4,C'F'     .alternate row                               
CPVACURC EQU   CPVACURS+4,4,C'F'   .alternate column                            
*                                                                               
CPVMCLK  DS    F                   View message clock                           
CPVMSG   DS    CL80                Message text                                 
*                                                                               
CPVCMDR  DS    H                   Row number of command line                   
CPVMSGR  DS    H                   Row number of message line                   
*                                                                               
CPVIND   DS    H                   Default indentation (left margin)            
CPVMARG  DS    H                   Right margin                                 
*                                                                               
CPVNMSG  DS    H                   Number of pending messages                   
         DS    H                   Reserved                                     
         SPACE 2                                                                
CPWINDP  DS    A                   WIND ptr (View/Window info)                  
CPXWIND  DS    A                   WIND-(1 entry) ptr                           
*                                                                               
CPLINTP  DS    A                   LINT ptr (View/Line info)                    
CPXLINT  DS    A                   LINT-(1 entry) ptr                           
         EJECT                                                                  
*-                                                                              
*-       Charging Information.                                                  
*-                                                                              
CPCHFLAG FLAG                                                                   
         FLAG  CPFFLAT             - Flat rate for non-prime time               
*                                                                               
         DS    5F                  Reserved                                     
         EJECT                                                                  
*********************************************************************           
**                                                                 **           
**  The following space is allocated for non-Stanford use.         **           
**                                                                 **           
*********************************************************************           
         COPY  CPLOCAL                                                          
         EJECT                                                                  
*********************************************************************           
**                                                                 **           
**  Start of local fields, initialized at the start of a command.  **           
**                                                                 **           
*********************************************************************           
*                                                                               
CPCACCT  DS    0CL5                Command account (when needed)                
CPCUSER  DS    CL3                 .uuu                                         
CPCGRP   DS    CL2                 .gg                                          
*                                                                               
CPFCOL   DS    H          [Order]  Starting column (-1)                         
CPLCOL   DS    H          [Order]  Last column                                  
*                                                                               
CPLLEN   DS    H                   Local line warning len                       
         DS    H                   Reserved                                     
*                                                                               
CPLWCHAR DS    CL16                Local charging component override            
*                                                                               
CPDMPLST DS    F                   Next lineno for dump                         
CPDMPDLT DS    F                   Delta for dump                               
CPDMPMAX DS    F                   Line that stops dump                         
*                                                                               
CPMODNEX DS    F                   Assume next existing lineno                  
*                                                                               
CPMODFLG FLAG  ,                   Modify/edit flags                            
         FLAG  CPFCMDMD            - Command retry                              
         FLAG  CPFMODXP            - Modify/edit is explicit                    
         FLAG  CPFNUMXP            - Number options are explicit                
         FLAG  CPFMODCD            - Modify mode (modify/edit)                  
         FLAG  CPFLISXP            - List options are explicit                  
*                                                                               
CPNUMFLG FLAG  ,                   Number options                               
*        flag  cpnfopt             - Number option explicit                     
*        flag  cpnfunn             - Unnumbered                                 
*        flag  cpnfnon             - Nonumber                                   
*        flag  cpnfint             - Integer                                    
         FLAG  (CPNFRNUM,X'08')    - Rnumber                                    
*                                                                               
CPTRMFL1 FLAG                                                                   
         FLAG  CPFNONL             - Don't append NL on writes                  
         FLAG  CPFWTO              - WTO seg buffer                             
         FLAG  CPFIATTN            - Intermediate attn occurred                 
*                                                                               
CPTRMFL2 FLAG                                                                   
         FLAG  CPFCLEAN            - Don't allow other terminal I/O             
         FLAG  CPFNECHO            - Noecho on reads                            
         FLAG  CPFSLOW             - Don't use tabs                             
         FLAG  CPFDISP             - Display mode I/O                           
         FLAG  CPFNOCURS           - Don't move input cursor (VTAM)             
*                                                                               
CPTRMFL3 FLAG                                                                   
         FLAG  CPFTRAN             - Transparent I/O                            
         FLAG  CPFNTYPE            - No typeahead I/O                           
         FLAG  CPFRUND             - Count rundown I/O (read)                   
         FLAG  CPFNMOD             - Nomodel I/O                                
         FLAG  CPFUFMT             - Unformatted I/O                            
         FLAG  CPFFORCE            - Force I/O (override quiet)                 
         FLAG  CPFBUFIO            - Buffered I/O                               
*                                                                               
CPTRMFL4 FLAG                                                                   
         FLAG  CPFNPAU             - Don't pause at end of page                 
         FLAG  CPFNPT              - Don't allow read text at p/p               
         FLAG  CPFTINT             - Terminal I/O interruptible                 
         FLAG  CPFNSTAR            - No stars on read attention                 
         FLAG  CPFSTMSG            - Status msg needs erasing                   
         FLAG  CPFNLF              - No LF on read CR                           
         FLAG  CPFDATTN            - Disallow ATTN on reads                     
*                                                                               
CPTRMPAU DS    H                   Page/pause line count                        
*                                                                               
CPTRMIN  DS    H                   Input read count                             
*                                                                               
         DS    F                   Reserved                                     
CPTRM    EQU   CPTRMFL1,*-CPTRMFL1,C'X'                                         
*                                                                               
CPDOUB   DS    D                   Double-word work area                        
CPHFWRD  DS    H                   Used to extend cpdoub to 10 bytes            
CPBYTE   DS    X                   Work byte                                    
         DS    X                   Reserved                                     
CPTELL   DS    2F                                                               
CPSAVE   DS    2A                  Scan saves ptrs here                         
CPCWA    DS    F                   Command work area ptr                        
*-                                                                              
*-       Old Scanner work area                                                  
*-                                                                              
CPSCANSZ EQU   24                  Size of scan area                            
CPOSCANX DS    0F                  Scanner work area                            
CPSCNLOC DS    F                   Resume scan text ptr                         
CPSCNLEN DS    H                   Resume len                                   
CPSCNKW  DS    CL8                 Scan kw                                      
CPSCNPST DS    H                   Push rel ptr                                 
CPSCNRA  DS    A                   Scan return addr                             
CPSCNPRT DS    A                   Sckw prt addr                                
CPSCANBK DS    XL6                 Previous scan loc, len                       
CPSCNERT DS    A                   Scanner error routine addr                   
CPLSTSCK DS    F                   Last SCKW addr                               
*                                                                               
CPSCNFLG FLAG  ,                   Scanner control flag                         
CPFSBLK  EQU   X'80'               - Blanks tokens (for passed cmds)            
CPFRTNER EQU   X'40'               - Go to exit routine on error                
CPFSPRM  EQU   X'20'               - Parm scan in progress                      
         FLAG  (CPFSNSEP,X'10')    - Don't isolate *, /, +, -                   
         FLAG  (CPFSUPLO,X'08')    - Don't upcase the token                     
CPFSCNAS EQU   X'04'               - Scan asterisk(*) as token                  
CPFGSBLK EQU   X'02'               - Default is to blank tokens                 
         FLAG  (CPFSNRTN,X'01')    - Don't go to sckw rtn flag                  
CPSCNF2  FLAG  ,                                                                
         FLAG  CPFSRETN            - Always return from scan                    
CPSCNF3  FLAG  ,                   Flag byte (not used)                         
CPSCNF4  FLAG  ,                   Flag byte (not used)                         
*                                                                               
CPSCNMAX EQU   20                  Max scan PUSH depth                          
CPSCNSTK DS    (CPSCNMAX)F         Scan PUSH/POP stack                          
CPOSCAN  EQU   CPOSCANX,*-CPOSCANX,C'X'  Scanner control block                  
*                                                                               
CPCMNM   DS    CL3                 First 3 bytes of command name                
*                                                                               
         DS    0F                                                               
CPTOKEN  DS    CL16                Isolated token from SCANTOK                  
CPUPPTOK DS    CL16                Capitalized token from SCANTOK               
*                                                                               
CPSCNKLC DS    F                   Last keyword scanned location                
CPSCNKLN DS    F                   Last keyword scanned length                  
         EJECT                                                                  
*-                                                                              
*- Local user flags                                                             
*-                                                                              
CPLFLG1  FLAG                                                                   
CPFCPY   EQU   X'20'               - Copy flag                                  
CPFALL   EQU   X'10'               - Detrng flag -- default all                 
CPFALLV  EQU   X'04'               - ALL specified/defaulted                    
CPFDSN1  EQU   X'02'               - Dodsnm re-entry flag                       
CPFTODFT EQU   X'01'               - Default "to end" taken (copy)              
*                                                                               
CPLFLG2  FLAG                                                                   
CPFSCRTC EQU   X'40'               - Scratch flag (save-show dsn)               
CPFDSNMS EQU   X'20'               - No default ok on dsnames flag              
*        EQU   X'10'               - Reserved                                   
CPFCOMB  EQU   X'08'               - Combine flag for copy                      
CPFMERG  EQU   X'04'               - Merge option (copy/move/collect)           
CPFREP1  EQU   X'02'               - Replace option (copy/move/rep)             
CPFDITTO EQU   X'01'               - Ditto option (insert/replace)              
CPFSMALL EQU   X'01'               - Small data set saved (save)                
*------> exec usage                                                             
CPFEXSAV EQU   X'80'               - Save option on exec                        
*cpfdsnms equ  x'20'               - Null dsname flag                           
*cpfclear equ  x'10'               - Clear exec file flag                       
CPFEXLNE EQU   X'08'               - Explicit lineno was specified              
CPFEXRNG EQU   X'04'               - Exec line range specified                  
CPFEXPA  EQU   X'02'               - Exec pause was specified                   
CPFEXDEL EQU   X'01'               - Exec active has delete range               
*------> change usage                                                           
CPFCHTEX EQU   X'40'               - CHANGE C'XXXX' (case indep.)               
CPFCHLIM EQU   X'20'               - String positionally delimited              
CPFCHDEL EQU   X'10'               - Replacing string void flag                 
CPFCHNGD EQU   X'08'               - Something changed flag                     
CPFLNCHN EQU   X'04'               - At least 1 line changed flag               
CPFCHPOS EQU   X'02'               - Positional change                          
CPFCHND  EQU   X'01'               - Terminate change flag                      
*------> show dsnames usage                                                     
CPFSTOP  EQU   X'01'               - Stop typed list flag                       
*                                                                               
CPLFLG3  FLAG                                                                   
CPFSET   EQU   X'80'               - Set prefix after scan                      
CPFKWOP  EQU   X'10'               - Keyword option on usr/grp/name             
*------> show dsnames/directory usage                                           
CPFDATED EQU   X'10'               - Dated option flag                          
CPFEXCL  EQU   X'08'               - Exclude option flag                        
CPFSPACE EQU   X'04'               - Space option flag                          
CPFTYPE  EQU   X'02'               - Type/all option flag                       
CPFBLOCK EQU   X'01'               - Directory block info requested             
*------> show volumes usage                                                     
CPFINFO  EQU   X'80'               - Show volumes info                          
CPL3AATN EQU   X'40'               - Abort on attention                         
*------> change usage                                                           
CPFCHIN  EQU   X'80'               - Range specified                            
CPFCHUS  EQU   X'40'               - Change using                               
CPFCHTO  EQU   X'20'               - Change to                                  
CPFCHNM  EQU   X'10'               - Change to numbers                          
CPFCHNMI EQU   X'08'               - Increment number flag                      
CPFCHLN  EQU   X'04'               - Line option                                
CPFCHREP EQU   X'02'               - Repeat option for using range              
CPFCHCAS EQU   X'01'               - To upper/lower                             
*                                                                               
CPLFLG4  FLAG                                                                   
CPFSTINS EQU   X'40'               - Allow insert only flag                     
CPFDESET EQU   X'20'               - This flag signals despot                   
*                                     the value of cpnwln has been              
*                                     set for the next locate and               
*                                     should not be kicked up.                  
CPFDESRT EQU   X'10'               - Re-entry to despot -- don't reset          
*                                     range.  this option is                    
*                                     no longer used (it was                    
*                                     used by the old blpr run).                
CPFSTREP EQU   X'08'               - Allow repl only in stow                    
CPFRUNCK EQU   X'04'               - Submit check for run                       
CPFNOCUR EQU   X'02'               - No abort if cur, next, or prev             
*                                     do not exist                              
CPFNOINC EQU   X'01'               - No increment of lineno's                   
*                                                                               
CPLFLG5  FLAG                                                                   
* common flag bits of cplflg5 used by many commands                             
CPFUNUM  EQU   X'80'               - Unnumbered flag                            
CPFNTEX  EQU   X'40'               - Notext listing flag                        
CPFNONUM EQU   CPFUNUM+CPFNTEX     - Nonumber listing flag                      
CPFNLST  EQU   X'20'               - Nolist listing control flag                
CPFFOPT  EQU   X'10'               - Number option specified                    
CPNFINT  EQU   X'08'               - Integer (numbered) flag                    
CPFSING  EQU   X'01'               - Single option                              
*                                                                               
CPLFLG6  FLAG                                                                   
         FLAG  CPFDUMP             - Dump (collect options)                     
         FLAG  CPFQUIET            - Quiet                                      
         FLAG  CPFKOK              - Yes or ok needed for access                
         FLAG  CPFCLEAR            - Clear current Active file                  
         FLAG  CPFKEEP             - Keep current Active file                   
         FLAG  CPFNWARN            - NOWARN specified                           
*                                                                               
CPLFLG7  FLAG                                                                   
         FLAG  CPFSETP             - This command set the prefix                
         FLAG  CPFTRUNC            - Lines truncated when saved                 
         FLAG  CPFNOCAT            - Don't use the catalog                      
         FLAG  CPFUNCAT            - Uncatalog                                  
         FLAG  CPFRECAT            - Recatalog                                  
*                                                                               
CPLFLG8  FLAG                                                                   
         FLAG  CPLCOLXP            - Dump with explicit lineno                  
         FLAG  CPFNCUR             - Don't update current lineno                
         FLAG  CPFCASE             - Explicit case override                     
         FLAG  CPFUPPER            - Explicit case is upper case                
*                                                                               
CPLFLG9  FLAG                                                                   
         FLAG  CPLSTOWD            - Lines stowed with collect                  
         FLAG  CPFFIRST            - First time flag                            
         FLAG  CPFVER              - Verify option specified                    
         FLAG  CPFINT              - Internal format                            
         FLAG  CPFEXNOB            - "NOBREAK" specified on EXEC                
         FLAG  CPFGEN              - Generation dataset                         
*                                                                               
CPLFLG10 FLAG                                                                   
         FLAG  CPLFSPEL            - Force spell check in page mode             
*                                                                               
CPLFLG11 FLAG                                                                   
         FLAG  CPFABORT            - Abort command                              
         FLAG  CPFERROR            - Command error                              
         FLAG  CPFRETRY            - Force command retry                        
         FLAG  CPFRQUIT            - Quit range (see DESPOT in ACT)             
*                                                                               
CPLFLG12 FLAG                                                                   
         FLAG  CPFIDSET            - Attn ID already set                        
*                                                                               
CPLFLG14 FLAG                                                                   
         FLAG  CPFWFIX             - Fix W variable                             
         FLAG  CPFZAPIF            - Zap to fix YESNO mult fn calls             
         FLAG  CPFBDEST            - Bad DEST (see RJE and MAIL)                
         FLAG  CPFDSNNE            - Don't generate error on baddsn             
         FLAG  CPFDSNBD            - Bad dsname found                           
*                                                                               
CPLFLGND EQU   *                   End of local flags                           
         EJECT                                                                  
*-                                                                              
*-       Local work cells                                                       
*-                                                                              
CPWK1    DS    F                   Work cells                                   
CPWK2    DS    F                                                                
CPWK3    DS    F                                                                
CPWK4    DS    F                                                                
CPWK5    DS    F                                                                
CPWK6    DS    F                                                                
CPWK7    DS    F                                                                
CPWK8    DS    F                                                                
CPWK9    DS    F                                                                
*                                                                               
* CPWK1, CPWK2 & CPWK3 used by lxcate (external copy)                           
* CPWK4 used by move & copy                                                     
* CPWK4 & CPWK5 used by exec command (parm option)                              
*                                                                               
* as used by "change"                                                           
CPCHCST  EQU   CPWK1,4,C'F'        Disp. in line of change target fld           
CPCHCLN  EQU   CPWK2,4,C'F'        Length of field                              
CPCHLN1  EQU   CPWK3               Length of string to match                    
CPCHAD1  EQU   CPWK4               It's address                                 
CPCHMOD  EQU   CPWK7,1,C'X'        First byte for occurrence count              
CPCHLN2  EQU   CPWK5               String length to use as replace              
CPCHAD2  EQU   CPWK6               It's address                                 
*                                                                               
* as used by MOVE & COPY                                                        
*                                                                               
CPBGLN   EQU   CPWK5               1st line no. of copy-move                    
CPNDLN   EQU   CPWK6               Start of rep/interlv on copy-move            
*                                                                               
* as used by USE & SAVE                                                         
*                                                                               
CPNREC   EQU   CPWK2,4,C'F'        Blocking factor for use-save                 
CPRCSZ   EQU   CPWK3               Blocksize for use-save                       
CPNXAD   EQU   CPWK4               Work cell for use-save                       
CPNWCT   EQU   CPWK5               Work cell for use-save                       
CPUSCNT  EQU   CPWK6,4,C'F'        Use--max no of lines to use                  
CPUSLNS  EQU   CPWK7,4,C'F'        Use--no of lines stowed                      
*                                                                               
* as used by "read"                                                             
CPWKRD   EQU   CPWK1               Line number for read command                 
*                                                                               
* as used by "exec"                                                             
CPEXLNET EQU   CPWK6               Specified line no. for exec                  
*                                                                               
CPJWA    EQU   CPWK6               Address of jes work area                     
         EJECT                                                                  
*        range-processor information                                            
* CPDRPT is a relic of the past.  1/86, Niz   (Ha! CH 2/91)                     
CPDRPT   DS    F                   Addr directory entry of locate pg            
*                                  high byte is flags....                       
CPFNTYT  EQU   X'80'               - No active file flag                        
CPFHIGH  EQU   X'40'               - Higher than lineno in active               
CPFMTCH  EQU   X'08'               - Lineno matches pre-existing one            
*                                                                               
* detrng sets cpfsln-cplsln-cpstad-cpmdln-cpmdad                                
CPFRDRNG FLAG ,                    Read range flags                             
         FLAG  CPFEXPRG            Explicit range flag                          
         FLAG  CPFSTRRG            Associative range flag                       
         FLAG  CPFLSKIP            Line skipped since last rng line             
         FLAG  CPFONEL             Only one line-number specified               
         FLAG  CPFMODS             Mods specified flag                          
         FLAG  CPFDSJNT            Disjoint explicit range flag                 
         FLAG  CPFSOME             Non-void range flag                          
CPFRDSRC FLAG ,                    Read range source                            
         FLAG  (CPFRDACT,1,EQ)     Read from active                             
         FLAG  (CPFRDEXE,2,EQ)     Read from exec                               
         FLAG  (CPFRDEXT,3,EQ)     Read from external file                      
CPNWLN   DS    F                   For despot -- lineno it's at                 
CPFSLN   DS    F                   1st line no. in range                        
CPLSLN   DS    F                   Last line no. in range                       
CPOCCURS DS    F                   Cur occurrence count for mods                
CPLRCL   DS    F                   Lrecl for data set type                      
CPSEQFLD DS    H                   Seqfld start for numbered                    
CPSEQLN  DS    H                   Seqfld length for numbered                   
CPSTAD   DS    F                   String wa addr for assoc rng                 
CPMDLN   DS    F                   No. of mods or no explicit line nos          
CPMDAD   DS    10F                 The mods or line nos.                        
*                                                                               
* CPPRESSL used for locate, one of the last bastion of pressed lines            
*                                                                               
CPPRESSL DS    F                   Pressed line area ptr (in HEAP)              
*                                                                               
* CPDRED for use, save, copy                                                    
*                                                                               
CPDRED   DS    F                   Address of xtrnl buffer                      
*                                  flag used in cpdred                          
CPFSTART EQU   X'F0'               Signal 1st read or not                       
*                                                                               
CPIOWAP  DS    F                   IOWA ptr (or zero)                           
*                                                                               
CPEVLNO  DS    F                   EVAL command working lineno                  
CPEVLEN  DS    F                   EVAL command text len                        
CPEVLOC  DS    F                   EVAL command text loc                        
*                                                                               
         DS    10F                 Reserved                                     
*                                                                               
* CPWKPS & CPWKDL are used where required                                       
*                                                                               
CPWKPS   DS    F                   Work position                                
CPWKDL   DS    F                   Work delta                                   
*                                                                               
CPNUMLNO DS    F                   Working line-number                          
*                                  (Updated if a renumber occurs)               
*                                                                               
CPLENLNO DS    F                   First length warning lineno                  
CPLENWRN DS    H                   Number of over length warnings               
CPLENMAX DS    H                   Length of longest line                       
*                                                                               
CPEXTFLG FLAG                                                                   
         FLAG  CPFNEWED            - NEWEDIT option specified                   
         FLAG  CPF###R1            - Reserved                                   
         FLAG  CPFXPREF            - For PUTLINE: CPNEDPFX is set               
         FLAG  CPFXMULT            - For SAVE: MULTIPLE specified               
         FLAG  CPFXALL             - For USE: We want ALL lines                 
         FLAG  CPFNCOND            - For SAVE: Do not condense                  
*                                                                               
CPNEDPFX DS    XL10                NEWEDIT line prefix                          
CPNEDL   EQU   CPNEDPFX,8,C'X'     : Line's prefix info (see ACT)               
CPNEDSET EQU   CPNEDPFX+8,2,C'X'   : Active file set number                     
*                                                                               
CPSAVOLD DS    F                   For SAVE: last CPACTNO seen                  
CPSAVACT DS    F                   For SAVE: CPACTNO to stop at                 
*                                                                               
CPUSESET DS    H                   For USE: current ext. set number             
         DS    H                   Reserved                                     
*                                                                               
         DS    5F                  Reserved                                     
         EJECT                                                                  
*-                                                                              
*- Modern file work area                                                        
*-                                                                              
CPFINFOP DS    A                   FILE NAME, FILE INFO DSECT                   
CPDEVP   DS    A                   FILE WORK AREA                               
         SPACE 1                                                                
*-                                                                              
*- Data set work area.                                                          
*-                                                                              
CPDSNWA  DS    0F                                                               
DSNWADSN DS    CL44                Dsname                                       
DSNWAGRP EQU   DSNWADSN+4,2,C'X'   .gg                                          
DSNWAUSR EQU   DSNWADSN+7,3,C'X'   .uuu                                         
DSNWASTD EQU   DSNWADSN+11,33,C'X' .user part of standard dsname                
* offsets of dsname levels for standard WYLBUR dsnames...                       
DSNXG    EQU   4                   Offset of group id in std dsname             
DSNXGL   EQU   3                   Length of group level in std dsn             
DSNXU    EQU   DSNXG+DSNXGL        Offset of user id in std dsname              
DSNXUL   EQU   4                   Length of user level in std dsn              
DSNXN    EQU   DSNXU+DSNXUL        Offset after std dsn prefix                  
*                                                                               
DSNWAMBR DS    CL8                 Pds member name                              
DSNWACL2 EQU   *-DSNWADSN          2nd entry length to clear to blk             
DSNON    DS    CL40                ON volume name                               
DSNON6   EQU   DSNON,6,C'X'        6 char volume name for disks                 
DSNCATV  DS    CL6                 Cataloged volume name                        
DSNBADV  DS    CL6                 Volume name to avoid (for retry)             
DSNNUSER DS    CL32                Network user-id                              
DSNNPASS DS    CL32                Network user-id's password                   
DSNWLEN  DS    H                   File name length                             
DSNWACLR EQU   *-DSNWADSN          Length to be cleared to blanks               
DSNWANL  DS    H                   Dsname length                                
*                                                                               
DSNWFILE DS    CL44                File name (uplow)                            
*                                                                               
DSNWAF1  FLAG                                                                   
DSNFSTD  EQU   X'80'               - Dsname is standard WYLBUR name             
DSNFMYDS EQU   X'40'               - Dsname belongs to user                     
DSNFWLIB EQU   X'20'               - Data set is standard WYLBUR pds            
DSNFQDSN EQU   X'10'               - Dsname was specified in quotes             
DSNFREPL EQU   X'08'               - Replace this dataset                       
DSNFKEY  EQU   X'04'               - We have prompted for keyword               
DSNFBYPS EQU   X'02'               - Bypass protection                          
DSNFACCS EQU   X'01'               - Dsname access has been verified            
*                                                                               
DSNWAF2  FLAG                                                                   
DSNFSIMP EQU   X'FF'               - Simple dopen/dclose request                
DSNFWRT  EQU   X'80'               - Data set to be written                     
DSNFSCR  EQU   X'40'               - Scratch function flag                      
DSNFPDS  EQU   X'20'               - Command dealing with a pds                 
DSNFALLO EQU   X'10'               - Allocate command                           
DSNFSHOW EQU   X'08'               - Function is show                           
DSNFCAT  EQU   X'04'               - Command manipulating the catlg             
DSNFVALO EQU   X'02'               - *** not used ***                           
DSNFPROT EQU   X'01'               - Set/show protect command                   
*                                                                               
DSNWAF3  FLAG                                                                   
DSNFTYP  EQU   X'80'               - Show dsn/type,dir/all,cat/type             
DSNFLIN  EQU   X'80'               - Lines option on save                       
DSNFSPAC EQU   X'40'               - Show dsn/space                             
DSNFDATD EQU   X'20'               - Show dsn/dated                             
DSNFXCL  EQU   X'10'               - Exclude on show dsn/dir/cat                
DSNFCVOL EQU   X'08'               - Cvol option specified on cat op            
DSNFCHT  EQU   X'04'               - Type change ok on save                     
DSNFEXP  EQU   X'02'               - Expdt override ok on save/scr              
DSNFNOFL EQU   X'01'               - Bypass FASTLIB search                      
*                                                                               
DSNWAF4  FLAG                                                                   
         FLAG  DSNFMAIL            - Mail command                               
         FLAG  DSNFSML             - Show mail command                          
         FLAG  DSNFBADN            - Bad (non-os) dsname                        
         FLAG  DSNFENQ             - DOPEN ENQ'd on dsname                      
         FLAG  DSNFSTAT            - Give "in progress" messages                
         FLAG  DSNFRSV1            - Reserved                                   
         FLAG  DSNFRENA            - Rename command                             
         FLAG  DSNFFAST            - FASTLIB                                    
*                                                                               
DSNWAF5  FLAG                                                                   
         FLAG  DSNFUNC             - SHOW CATALOG UNCATALOG                     
         FLAG  DSNFTAB             - SHOW DIRECTORY TABLE option                
         FLAG  DSNFCODE            - Encoded dataset                            
         FLAG  DSNFNONQ            - No enqueue (privd)                         
         FLAG  DSNFONLY            - Do "OBTAIN" (SHOW DSN ONLY)                
         FLAG  DSNFCUNI            - UNIT specified on (RE)CATALOG              
         FLAG  DSNFCUIG            - UNIT ignored - volume known                
         FLAG  DSNFLIKE            - SHOW DIRECTORY LIKE option                 
*                                                                               
DSNWAF6  FLAG                                                                   
         FLAG  DSNFTRAN            - TRANSPARENT option                         
         FLAG  DSNFSTRM            - STREAM option                              
         FLAG  DSNFSPLT            - SPLIT option (see DSNWRAPL)                
         FLAG  DSNFAPP             - APPEND option                              
         FLAG  DSNFRETAIN          - RETAIN option                              
         FLAG  DSNFDTRAN           - DTRANSPARENT option                        
         FLAG  DSNFTABS            - TABS option                                
         FLAG  DSNFUFMT            - UNFORMATTED option                         
*                                                                               
DSNWAF7  FLAG                                                                   
         FLAG  DSNFTEXTONLY        - TEXTONLY option                            
         FLAG  DSNFASCII           - ASCII format                               
         FLAG  DSNFEBCDIC          - EBCDIC format                              
         FLAG  DSNFWRITE           - lines written                              
*                                                                               
DSNDTYPE DS    X                   Device type                                  
DSNDDISK EQU   1                   - Disk                                       
DSNDSAM  EQU   2                   - Samson                                     
DSNDNET  EQU   3                   - Network                                    
DSNDMAX  EQU   3                                                                
*                                                                               
DSNNTRK  DS    H                   No. of tracks (for allocate)                 
DSNNBLK  DS    H                   No. of dir blocks (for allocate)             
DSNIXLEN DS    H                   Length of pattern dsname                     
*                                                                               
DSNWRAPL DS    H                   Wrap length (or zero)                        
*                                                                               
DSNVOLCT DS    H                   Number of alt volumes picked                 
         DS    F                   Reserved                                     
*                                                                               
DSNCLCK  DS    F                   Clock at last status message                 
DSNLCNT  DS    F                   No. of lines read/written                    
DSNLTOT  DS    F                   Total number of lines (0=n/a)                
*                                                                               
DSNFLIB  DS    F                   FASTLIB entry pointer                        
DSNCODE  DS    F                   Dataset encoding value                       
*                                                                               
DSNDEVP  DS    A                   Device dependent work area ptr               
*                                                                               
         DS    0F                                                               
DSSIZ    EQU   *-DSNWADSN          Length of dsname work area                   
*                                                                               
* Offsets in dsname work area for SHOW DSNAMES...                               
SDSNQSZ  EQU   44                  Show dsnames bound area size                 
SDSNQLB  DS    CL(SDSNQSZ)         Show dsnames lower bound                     
SDSNQUB  DS    CL(SDSNQSZ)         Show dsnames upper bound                     
SDSNDSZ  EQU   *-DSNWADSN          Lngth of sdsn wk area                        
*                                                                               
         ORG   DSNWADSN+DSSIZ      Define area for save                         
DSAVTITL DS    H                   Title length                                 
DSAVTIT  DS    CL42                Title text                                   
DSAVSPA  DS    F                   Byte size for new data set                   
DSAVCNT  DS    H                   Line count for new data set                  
DSAVBLK  DS    H                   Block count for edit save                    
DSAVSIZ  EQU   *-DSNWADSN          Size of work area for save                   
*                                                                               
* DSN work area extension for CATALOG                                           
         ORG   DSNWADSN+DSSIZ                                                   
DCATUNIT DS    F                   Unit type for CATALOG                        
DCATSIZ  EQU   *-DSNWADSN                                                       
*                                                                               
* DSN work area extension for RENAME                                            
         ORG   DSNWADSN+DSSIZ      Define area for RENAME                       
DRENDSN  DS    CL44                Newname                                      
DRENMNAM DS    CL8                 Member name                                  
DRENCTRC DS    F                   Newname catalog return code                  
DRENDSNL DS    H                   Newname length                               
DRENPROT FLAG  ,                                                                
         FLAG  (DRENISP,X'10')     Dataset password protected                   
DRENCFLG FLAG  ,                                                                
         FLAG  DRENTODN            "TO" keyword found                           
         FLAG  DRENUNC             Old DSN uncat attempted                      
         FLAG  DRENCATF            New DSN cat failed                           
         FLAG  DRENUNCF            Old DSN uncat failed                         
         FLAG  DRENMBR             This is rename of pds member                 
DREN1OR  DS    CL2                 Newname 1st level override                   
DREN2OR  DS    CL3                 Newname 2nd level override                   
DRENSIZ  EQU   *-DSNWADSN          Size of work area for rename                 
         ORG   ,                                                                
*                                                                               
CPZERO   EQU   CPLOCALZ,*-CPLOCALZ,C'X'  Fields zeroed at cmd start             
*-                                                                              
*- Stuff that we don't need direct addressability to.                           
*-                                                                              
CPUSED   EQU   *-CPSTART           Actual size of CP                            
         DS    (4096-CPUSED)X      Slop space                                   
CPINITL  EQU   *-CPINIT,,C'N'                                                   
*                                                                               
CPXSIZE  EQU   *-CPSTART           Total CP size                                
         EJECT                                                                  
*-                                                                              
*- Flags for DESPOT callers.                                                    
*-                                                                              
DESRTRN  EQU   X'80'               Return from despot                           
DESNRTN  EQU   X'00'               Call cmdprt from despot                      
LEXATRTN EQU   X'40'               Use locateex                                 
LXCATRTN EQU   X'60'               Use lxcate                                   
LOCATRTN EQU   X'00'               Use locate                                   
UNPRST   EQU   X'01'               Return unpressed from despot                 
PREST    EQU   X'00'               Return pressed from despot                   
DESABORT EQU   X'04'               Attention can abort range                    
*                                                                               
FRNGTYP  EQU   X'C0'               Range type bits                              
*              x'00'               single line number range n                   
*              x'40'               count range n(m)                             
*              x'c0'               normal two line range n/m                    
*                                                                               
TALOCODE EQU   32                  Talo rc for ntgdopn routine                  
ABRTCODE EQU   36                  Abort rc for ntgdopn routine                 
*                                                                               
ENTL     EQU   44                  Open reg save size used in DISK              
