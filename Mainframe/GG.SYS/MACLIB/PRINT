         MACRO                                                                  
         PRINT                                                                  
.*       Added, 5/89, Niz                                                       
         GBLB  &$PRALL                                                          
.*                                                                              
.*  This version of the PRINT instruction can prevent a program                 
.*  from turning off the assembly output.  This is controlled by                
.*  the global SETB named $PRALL; if $PRALL is set to 1 then we                 
.*  won't do a real PRINT OFF, PRINT NOGEN, or a PRINT NODATA.                  
.*                                                                              
         LCLA  &I                                                               
&NOP     SETA  N'&SYSLIST                                                       
.NOPLOOP AIF   (&NOP LE 0).NOPERR,('&SYSLIST(&NOP)' NE '').LOOP                 
&NOP     SETA  &NOP-1                                                           
         AGO   .NOPLOOP                                                         
.NOPERR  MNOTE 8,'PRINT OPERANDS MISSING'                                       
         MEXIT                                                                  
.*                                                                              
.LOOP    AIF   (&I GE &NOP).EXIT                                                
&I       SETA  &I+1                                                             
&TOKEN   SETC  '&SYSLIST(&I)'                                                   
         AIF   (NOT &$PRALL).NEXT                                               
         AIF   ('&TOKEN' EQ 'OFF').OFF                                          
         AIF   ('&TOKEN' EQ 'NOGEN').NOGEN                                      
         AIF   ('&TOKEN' EQ 'NODATA').NDATA                                     
.*                                                                              
.NEXT  $$PRINT &TOKEN                                                           
         AGO   .LOOP                                                            
.*                                                                              
.OFF   $$PRINT ON                  (PRINT OFF is not allowed)                   
         AGO   .LOOP                                                            
.*                                                                              
.NOGEN $$PRINT GEN                 (PRINT NOGEN is not allowed)                 
         AGO   .LOOP                                                            
.*                                                                              
.NDATA $$PRINT DATA                (PRINT NODATA is not allowed)                
         AGO   .LOOP                                                            
.*                                                                              
.EXIT    MEND                                                                   
