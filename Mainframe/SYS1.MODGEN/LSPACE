*%GOTO LSPAPLS;   /* MACRO INTERFACE TO DADSM LSPACE (SVC 78)           00050000
         MACRO                                                          00100000
.*                                                                      00125000
&LABEL   LSPACE &MF=I,&MSG=,&EXPMSG=,&DATA=,&SMF=,&UCB=,&F4DSCB=   @02C 00150000
.*                                                                      00175000
.**** START OF SPECIFICATIONS ****************************************  00200000
.*                                                                      00250000
.*$MAC(LSPACE):      MACRO INTERFACE TO DADSM LSPACE (SVC 78)           00300000
.*                                                                      00350000
.* DESCRIPTIVE-NAME = MACRO INTERFACE TO DADSM LSPACE (SVC 78)          00400000
.*                                                                      00450000
.*PROPRIETARY V3 STATEMENT                                              00468700
.*LICENSED MATERIALS - PROPERTY OF IBM                                  00487400
.*"RESTRICTED MATERIALS OF IBM"                                         00506100
.*5695-DF1                                                              00524800
.*(C) COPYRIGHT 1989  IBM CORP.                                         00543500
.*END PROPRIETARY V3 STATEMENT                                          00571700
.*                                                                      00600000
.*STATUS = DFSMS/MVS 1.3.0                                         @P1C 00650000
.*                                                                      00700000
.*FUNCTION = THIS MACRO PROVIDES AN INTERFACE TO THE DADSM LSPACE  @L1C 00727700
.*     (SVC 78).  IT GENERATES PARAMETER LIST/RETURN AREA DEFINE   @L1C 00755400
.*     CONSTANTS (MF=L), GENERATES ASSEMBLER INSTRUCTIONS TO ISSUE @L1C 00783100
.*     AN SVC 78 (MF=E), GENERATES AN IN-LINE PARAMETER LIST AND   @L1C 00810800
.*     ASSEMBLER INSTRUCTIONS TO ISSUE AN SVC 78 (MF=I), AND       @L1C 00838500
.*     PROVIDES MAPPING OF PARAMETER LIST/RETURN AREAS (MF=D).     @L1C 00866200
.*     THIS MACRO ALSO PROVIDES PLS MAPPINGS OF PARAMETER LIST/    @L1C 00893900
.*     RETURN AREAS (%INCLUDE).                                    @L1C 00921600
.*                                                                      00950000
.*NOTES = THE LSPACE CALL IN DADSM IS USED TO ACCUMULATE INFORMATION    01000000
.*     ABOUT FREE SPACE ON A DASD VOLUME.                               01050000
.*                                                                      01100000
.*     LSPACE WILL SUPPORT BOTH INDEXED AND NON-INDEXED VTOCS.          01150000
.*                                                                      01200000
.*     THE CALLING PROGRAM:                                             01250000
.*       1. MAY PROVIDE THE PARAMETER LIST AND/OR MESSAGE AREA ABOVE    01300000
.*          THE 16MB LINE.                                              01350000
.*       2. MAY BE SET TO ANY STORAGE KEY.                              01400000
.*       3. MAY BE IN EITHER SUPERVISOR OR PROBLEM PROGRAM STATE.       01450000
.*                                                                      01500000
.*     'ADDR', IN KEYWORD=ADDR | MF=(E,ADDR)                            01550000
.*             MUST BE SPECIFIED AS A LABEL OF AN AREA.                 01600000
.*             THIS LABEL MUST REPRESENT A VALID RX-TYPE ADDRESS        01650000
.*             WHEN USED IN THE MACRO'S EXECUTE-FORM, AND A VALID       01700000
.*             A-TYPE ADDRESS WHEN USED IN THE MACRO'S STANDARD         01750000
.*             AND LIST FORMS.                                          01800000
.*                                                                      01850000
.*     'REG',  IN KEYWORD=(REG) | MF=(E,(REG))                          01900000
.*             MAY BE SPECIFIED AS ANY REGISTER, 0, 2 - 12.             01950000
.*             REGISTER 1 MAY BE SPECIFIED IN MF=(E,(1))                02000000
.*                                                                      02050000
.*                                                                      02100000
.*KEYWORDS APPLICABLE TO THE LSPACE MACRO ARE:                          02150000
.*                                                                      02200000
.*  MF=        THE 'MF' KEYWORD IS OPTIONAL.  IF IT IS NOT SPECIFIED,   02250000
.*             MF=I WILL BE THE DEFAULT.  THE FOLLOWING FORMATS ARE     02300000
.*             VALID FOR 'MF':                                          02350000
.*                                                                      02400000
.*  MF=D       THE SPECIFICATION OF MF=D WILL RESULT IN THE EXPANSION   02450000
.*             OF THE PARAMETER LIST AS A DSECT WITH LABELS FOR EACH OF 02500000
.*             THE FIELDS IN THE PARAMETER LIST.  IN THIS FORM, NO      02550000
.*             OTHER MACRO PARAMETERS WILL APPLY (IF TYEY ARE SPECI-    02600000
.*             FIED, THEY WILL BE IGNORED AND AN MNOTE ISSUED).  THIS   02650000
.*             FORM OF THE MACRO WILL NOT GENERATE THE LSPACE SVC (78). 02700000
.*             THIS SPECIFICATION IS CALLED THE DSECT-FORM OF THE       02750000
.*             MACRO.                                                   02800000
.*                                                                      02850000
.*  MF=(D,MSG) THE SPECIFICATION OF MF=(D,MSG) WILL RESULT IN THE  @L1A 02854100
.*             EXPANSION OF THE MESSAGE RETURN AREA AS A DSECT     @L1A 02858200
.*             WITH LABELS FOR EACH OF THE FIELDS IN THE MESSAGE   @L1A 02862300
.*             RETURN AREA.                                        @L1A 02866400
.*                                                                      02870500
.*                                                                      02870700
.*  MF=(D,EXPMSG) THE SPECIFICATION OF MF=(D,EXPMSG) WILL RESULT   @02A 02870900
.*                IN THE EXPANSION OF THE EXPANDED MESSAGE RETURN  @02A 02871100
.*                AREA AS A DSECT WITH LABELS FOR EACH OF THE      @02A 02871300
.*                FIELDS IN THE MESSAGE RETURN AREA.  EACH OF THE  @02A 02871500
.*                DATA FIELDS ARE NOW SIX BYTES LONG.              @02A 02871700
.*                MF=(D,MSG) CONTAINS DATA FIELDS WHICH ARE        @02A 02871900
.*                FOUR BYTES LONG.  THE POSITION AND THE FORMAT    @02A 02872100
.*                OF THE DATA FIELDS REMAIN THE SAME FOR BOTH      @02A 02872300
.*                MESSAGE FORMATS.                                 @02A 02872500
.*                                                                 @02A 02872700
.*                                                                      02872900
.*                                                                      02873100
.*  MF=(D,DATA)                                                    @L1A 02874600
.*             THE SPECIFICATION OF MF=(D,DATA) WILL RESULT IN THE @L1A 02878700
.*             EXPANSION OF THE DATA RETURN AREA AS A DSECT WITH   @L1A 02882800
.*             LABELS FOR EACH OF THE FIELDS IN THE DATA RETURN    @L1A 02886900
.*             AREA.                                               @L1A 02891000
.*                                                                      02895100
.*  MF=(E,ADDR) | MF=(E,(REG)) | MF=(E,(1))                             02900000
.*             THE SPECIFICATION OF ANY OF THE ABOVE FORMATS FOR THE    02950000
.*             'MF' KEYWORD WILL RESULT IN THE MODIFICATION OF AN       03000000
.*             EXISTING PARAMETER LIST AS REQUESTED BY ANY ADDITIONAL   03050000
.*             MACRO PARAMETERS, AND THE GENERATION OF THE LSPACE       03100000
.*             SVC (78).  THE SECOND SUB-PARAMETER ('ADDR', 'REG',      03150000
.*             OR '1') MUST PROVIDE THE ADDRESS OF THE SUBJECT          03200000
.*             PARAMETER LIST.  THIS SPECIFICATION IS CALLED THE        03250000
.*             THE EXECUTE-FORM OF THE MACRO.                           03300000
.*                                                                      03350000
.*  MF=I       THE SPECIFICATION OF MF=I WILL RESULT IN THE IN-LINE     03400000
.*             EXPANSION OF THE PARAMETER LIST WITH INITIALIZATION BY   03450000
.*             DEFINE CONSTANTS (DC) AS REQUESTED IN ANY ADDITIONAL     03500000
.*             MACRO PARAMETERS.  THE PARAMETER LIST WILL BE PRECEEDED  03550000
.*             BY A BAL INSTRUCTION TO DEFINE REGISTER 1 AS ITS ADDRESS 03600000
.*             AND WILL BE FOLLOWED BY INSTRUCTIONS TO UPDATE THE PARA- 03650000
.*             METER LIST AS SPECIFIED BY (REG) OPERANDS OF OTHER       03700000
.*             MACRO PARAMETERS, THEN BY A GENERATION OF THE LSPACE     03750000
.*             SVC (78).  THIS SPECIFICATION IS CALLED THE STANDARD-    03800000
.*             FORM OF THE MACRO.                                       03850000
.*                                                                      03900000
.*  MF=L       THE SPECIFICATION OF MF=L WILL RESULT IN THE EXPANSION   03950000
.*             OF THE PARAMETER LIST WITH INITIALIZATION BY DEFINE      04000000
.*             CONSTANTS (DC) AS REQUESTED IN ANY ADDITIONAL MACRO      04050000
.*             PARAMETERS.  IF A KEYWORD OPERAND IS SPECIFIED AS A      04100000
.*             REGISTER, KEYWORD=(REG), THE LIST WILL CONTAIN AN ADOCN  04150000
.*             SPECIFICATION OF ZERO AND A WARNING MNOTE WILL BE        04200000
.*             ISSUED.  THIS FORM OF THE MACRO WILL NOT GENERATE THE    04250000
.*             LSPACE SVC (78).  THIS SPECIFICATION IS CALLED THE       04300000
.*             LIST-FORM OF THE MACRO.                                  04350000
.*                                                                      04400000
.*  MF=(L,MSG) THE SPECIFICATION OF MF=(L,MSG) WILL RESULT IN      @L1A 04412500
.*             THE EXPANSION OF THE MESSAGE RETURN AREA WITH       @L1A 04425000
.*             INITIALIZATION BY DEFINE CONSTANTS (DC).            @L1A 04437500
.*                                                                      04450000
.*                                                                      04451500
.*  MF=(L,EXPMSG) THE SPECIFICATION OF MF=(L,EXPMSG) WILL RESULT   @02A 04453000
.*                IN THE EXPANSION OF THE EXPANDED MESSAGE RETURN  @02A 04454500
.*                AREA WITH INITIALIZATION BY DEFINE CONSTANTS     @02A 04456000
.*                (DC).  THE DATA FIELDS IN THE EXPANDED MESSAGE   @02A 04457500
.*                ARE SIX BYTES LONG COMPARED WITH FOUR BYTE       @02A 04459000
.*                DATA FIELDS FOR THE MESSAGE RETURN AREA.         @02A 04460500
.*                                                                 @02A 04462000
.*                                                                      04463500
.*                                                                      04465000
.*  MF=(L,DATA)                                                    @L1A 04466600
.*             THE SPECIFICATION OF MF=(L,DATA) WILL RESULT IN     @L1A 04483200
.*             THE EXPANSION OF THE DATA RETURN AREA WITH          @L1A 04499800
.*             INITIALIZATION BY DEFINE CONSTANTS (DC).            @L1A 04516400
.*                                                                      04533000
.*                                                                      04549600
.*  MSG=ADDR | MSG=(REG) | MSG=0                                   @L1C 04566200
.*             'MSG' KEYWORD MAY BE USED TO SPECIFY THE ADDRESS    @L1C 04582800
.*             OF A 30-BYTE AREA IN WHICH THE DISPLAY SPACE DATA SHOULD 04600000
.*             BE RETURNED.  A ZERO ADDRESS INDICATES THAT THE DISPLAY  04650000
.*             SPACE INFORMATION IS NOT REQUIRED.                       04700000
.*                                                                      04750000
.*             'ADDR', IN MSG=ADDR, MUST BE SPECIFIED AS THE LABEL @L1C 04800000
.*                   OF A 30-BYTE MESSAGE AREA OR MAY PROVIDE AN        04850000
.*                   EFFECTIVE VALUE OF ZERO.                           04900000
.*             'REG', IN MSG=(REG), MUST REPRESENT A REGISTER, 0,  @L1C 04950000
.*                   2 - 12.  THE REGISTER WILL CONTAIN THE ADDRESS     05000000
.*                   OF A 30-BYTE MESSAGE AREA OR WILL PROVIDE AN       05050000
.*                   EFFECTIVE VALUE OF ZERO.  NOTE:  MSG=(0) WILL @L1C 05100000
.*                   USE THE CONTENTS OF REGISTER ZERO AND MAY NOT BE   05150000
.*                   EQUIVALENT TO MSG=0.                          @L1C 05200000
.*                                                                      05250000
.*             DEFAULT FOR MSG WHEN MF=                            @L1C 05300000
.*                   D -- NONE, THE PARAMETER IS IGNORED                05350000
.*                   E -- THE CURRENT PARAMETER LIST'S CONTENTS         05400000
.*                   I -- MSG=0                                    @L1C 05450000
.*                   L -- MSG=0                                    @L1C 05500000
.*                                                                      05550000
.*                                                                      05550200
.*                                                                      05550400
.*  EXPMSG=ADDR | EXPMSG=(REG) | EXPMSG=0                          @02A 05550600
.*      'EXPMSG' KEYWORD MAY BE USED TO SPECIFY THE ADDRESS        @02A 05550800
.*      OF A 40-BYTE AREA IN WHICH THE DISPLAY SPACE DATA SHOULD   @02A 05551000
.*      BE RETURNED.  A ZERO ADDRESS INDICATES THAT THE EXPANDED   @02A 05551200
.*      DISPLAY SPACE INFORMATION IS NOT REQUIRED.                 @02A 05551400
.*                                                                 @02A 05551600
.*      'ADDR', IN EXPMSG=ADDR, MUST BE SPECIFIED AS THE LABEL     @02A 05551800
.*            OF A 40-BYTE EXPANDED MESSAGE AREA OR MAY PROVIDE AN @02A 05552000
.*            EFFECTIVE VALUE OF ZERO.                             @02A 05552200
.*      'REG', IN EXPMSG=(REG), MUST REPRESENT A REGISTER, 0,      @02A 05552400
.*            2 - 12.  THE REGISTER WILL CONTAIN THE ADDRESS       @02A 05552600
.*            OF A 40-BYTE EXPANDED MESSAGE AREA OR WILL PROVIDE   @02A 05552800
.*            AN EFFECTIVE VALUE OF ZERO.  NOTE:  EXPMSG=(0) WILL  @02A 05553000
.*            USE THE CONTENTS OF REGISTER ZERO AND MAY NOT BE     @02A 05553200
.*            EQUIVALENT TO EXPMSG=0.                              @02A 05553400
.*                                                                 @02A 05553600
.*      DEFAULT FOR EXPMSG WHEN MF=                                @02A 05553800
.*            D -- NONE, THE PARAMETER IS IGNORED                  @02A 05554000
.*            E -- THE CURRENT PARAMETER LIST'S CONTENTS           @02A 05554200
.*            I -- EXPMSG=0                                        @02A 05554400
.*            L -- EXPMSG=0                                        @02A 05554600
.*                                                                      05554800
.*                                                                      05555000
.*                                                                      05555200
.*  DATA=ADDR | DATA=(REG) | DATA=0                                @L1A 05557100
.*             'DATA' KEYWORD MAY BE USED TO SPECIFY THE ADDRESS   @L1A 05564200
.*             OF A 36-BYTE AREA IN WHICH A DATA RATHER THAN       @L1A 05571300
.*             MESSAGE FORMAT OF FREE SPACE/VOLUME INFORMATION IS  @L1A 05578400
.*             RETURNED.  A ZERO ADDRESS INDICATES THAT THE SPACE  @L1A 05585500
.*             INFORMATION IS NOT REQUIRED.                        @L1A 05592600
.*                                                                      05600000
.*             'ADDR', IN DATA=ADDR, MUST BE SPECIFIED AS THE      @L1A 05601200
.*                   LABEL OF A 36-BYTE RETURN AREA OR PROVIDE AN  @L1A 05602400
.*                   EFFECTIVE VALUE OF ZERO.                      @L1A 05603600
.*             'REG', IN DATA=(REG), MUST REPRESENT A REGISTER, 0, @L1A 05604800
.*                   2 - 12.  REGISTER WILL CONTAIN THE ADDRESS    @L1A 05606000
.*                   OF A 36-BYTE RETURN AREA OR WILL PROVIDE AN   @L1A 05607200
.*                   EFFECTIVE VALUE OF ZERO.                      @L1A 05608400
.*                   NOTE: DATA=(0) USE CONTENTS OF REGISTER ZERO  @L1A 05609600
.*                                                                      05610800
.*             DEFAULT FOR DATA WHEN MF=                           @L1A 05612000
.*                   D -- NONE, THE PARAMETER IS IGNORED           @L1A 05613200
.*                   E -- THE CURRENT PARAMETER LIST'S CONTENTS    @L1A 05614400
.*                   I -- MSG=0                                    @L1A 05615600
.*                   L -- MSG=0                                    @L1A 05616800
.*                                                                      05618000
.*             NOTE: 'MSG' AND 'DATA' KEYWORDS ARE MUTUALLY        @L1A 05619200
.*                   EXCLUSIVE, WITH 'MSG' BEING THE DEFAULT FOR   @L1A 05620400
.*                   MF=I AND MF=L.                                @L1A 05621600
.*                                                                      05622800
.*             NOTE: 'MSG', 'EXPMSG' AND 'DATA' KEYWORDS ARE       @02A 05623000
.*                   MUTUALLY EXCLUSIVE, WITH 'MSG' BEING THE      @02A 05623200
.*                   DEFAULT FOR MF=I AND MF=L.                    @02A 05623400
.*                                                                      05623600
.*  F4DSCB=ADDR | F4DSCB=(REG) | F4DSCB=0                               05624000
.*             'F4DSCB' KEYWORD MAY BE USED TO SPECIFY THE ADDRESS @L1A 05625200
.*             OF A 96-BYTE AREA IN WHICH THE DATA PORTION OF THE  @L1A 05626400
.*             FORMAT 4 DSCB IS RETURNED.  A ZERO ADDRESS          @L1A 05627600
.*             THAT THE SPACE INFORMATION IS NOT REQUIRED.         @L1A 05628800
.*                                                                      05630000
.*             'ADDR', IN F4DSCB=ADDR, MUST BE SPECIFIED AS THE    @L1A 05631200
.*                   LABEL OF A 96-BYTE RETURN AREA OR PROVIDE AN  @L1A 05632400
.*                   EFFECTIVE VALUE OF ZERO.                      @L1A 05633600
.*             'REG', IN F4DSCB=(REG), MUST REPRESENT A REGISTER,  @L1A 05634800
.*                   0, 2 - 12.  REGISTER WILL CONTAIN THE ADDRESS @L1A 05636000
.*                   OF A 96-BYTE RETURN AREA OR WILL PROVIDE AN   @L1A 05637200
.*                   EFFECTIVE VALUE OF ZERO.                      @L1A 05638400
.*                   NOTE: F4DSCB=(0) USE CONTENTS OF REGISTER 0   @L1A 05639600
.*                                                                      05640800
.*             DEFAULT FOR F4DSCB WHEN MF=                         @L1A 05642000
.*                   D -- NONE, THE PARAMETER IS IGNORED           @L1A 05643200
.*                   E -- THE CURRENT PARAMETER LIST'S CONTENTS    @L1A 05644400
.*                   I -- F4DSCB=0                                 @L1A 05645600
.*                   L -- F4DSCB=0                                 @L1A 05646800
.*                                                                      05648000
.*  SMF=       SPECIFIES THE REQUESTED PROCESSING OF AN SMF RECORD      05650000
.*             TYPE 19.  IF THE CALLING PROGRAM IS IN SUPERVISOR STATE, 05700000
.*             PROTECT KEY 0-7, OR IS APF AUTHORIZED -- SMF PROCESSING  05750000
.*             MAY BE REQUESTED.  OTHERWISE THE EFFECTIVE VALUE OF SMF  05800000
.*             MUST BE SMF=NONE.                                        05850000
.*                                                                      05900000
.*             DEFAULT FOR SMF WHEN MF=                                 05950000
.*                   D -- NONE, THE PARAMETER IS IGNORED                06000000
.*                   E -- THE CURRENT PARAMETER LIST'S CONTENTS         06050000
.*                   I -- SMF=NONE                                      06100000
.*                   L -- SMF=NONE                                      06150000
.*                                                                      06200000
.*             THE FOLLOWING SUB-PARAMETERS ARE VALID FOR THE 'SMF'     06250000
.*             KEYWORD:                                                 06300000
.*                                                                      06350000
.*  SMF=YES    BUILD AN SMF RECORD TYPE 19.                             06400000
.*                                                                      06450000
.*  SMF=TEST   TEST FOR THE SYSTEM'S SMF VOLUME INFORMATION REQUEST     06500000
.*             BEFORE BUILDING AN SMF RECORD TYPE 19.                   06550000
.*                                                                      06600000
.*  SMF=NONE   DO NOT BUILD AN SMF RECORD TYPE 19 FOR THIS REQUEST.     06650000
.*                                                                      06700000
.*                                                                      06750000
.*  UCB=ADDR | UCB=(REG)                                           @L1C 06783300
.*             THE 'UCB' KEYWORD MAY BE USED TO SPECIFY THE ADDRESS     06816600
.*             OF THE UCB OF THE SUBJECT VOLUME.                        06850000
.*                                                                      06900000
.*             'ADDR', IN UCB=ADDR, MUST BE SPECIFIED AS THE LABEL @L1A 06910000
.*                   OF A FULLWORD.  THE FULLWORD WILL CONTAIN THE @L1A 06920000
.*                   ADDRESS OF THE UCB.                           @L1A 06930000
.*                                                                      06940000
.*             'REG', IN UCB=(REG), MUST REPRESENT A REGISTER, 0,       06950000
.*                   2 - 12.  THE REGISTER WILL CONTAIN THE ADDRESS     07000000
.*                   OF THE UCB.                                        07050000
.*                                                                      07100000
.*             DEFAULT FOR UCB WHEN MF=                                 07150000
.*                   D -- NONE, THE PARAMETER IS IGNORED                07200000
.*                   E -- THE CURRENT PARAMETER LIST'S CONTENTS         07250000
.*                   I -- NONE, THE PARAMETER IS REQUIRED               07300000
.*                   L -- A DEFINE CONSTANT, DC, OF A(0)                07350000
.*                                                                      07400000
.*             AN EFFECTIVE VALUE FOR UCB MUST BE PROVIDED IN THE       07450000
.*             PARAMETER LIST PRIOR TO THE ISSUE OF SVC 78.             07500000
.*                                                                      07550000
.*                                                                      07600000
.*MODULE-TYPE = MACRO                                                   07650000
.*                                                                      07700000
.*PROCESSOR = ASSEMBLER OR PLS                                          07750000
.*                                                                      07800000
.*ATTRIBUTES =                                                          07850000
.*      ASSEMBLER - MACRO FORMATS:  DSECT, EXECUTE, LIST, AND STANDARD  07900000
.*      PLS - MAPPING MACRO                                             07950000
.*                                                                      08000000
.*ENTRY-POINT = MACRO STATEMENT.                                        08050000
.*                                                                      08100000
.*INPUT = SEE DESCRIPTION OF KEYWORDS UNDER 'FUNCTION'.                 08150000
.*                                                                      08200000
.*OUTPUT = LSPACE PARAMETER LIST WITH THE FLAGS AND THE ADDRESSES       08250000
.*         SET DEPENDING UPON THE KEYWORDS SPECIFIED AS DEFINED         08300000
.*         UNDER 'KEYWORDS' ABOVE.                                      08350000
.*                                                                      08400000
.*EXIT-NORMAL = MEND STATEMENT.                                         08450000
.*                                                                      08500000
.*EXIT-ERROR  = MNOTE AND MEND STATEMENT.                               08550000
.*   THE FOLLOWING MNOTES MAY BE ISSUED --                              08600000
.*                                                                      08650000
.*   MNOTE 4,'*** ONE OR MORE PARAMETERS IGNORED DUE TO MF=&MF'         08700000
.*   MNOTE 8,'*** MF=(E,ADDR) FORM: SUPPLY PARAMETER LIST ADDRESS'      08750000
.*   MNOTE 8,'*** INVALID OPERAND - MF=&MF'                             08800000
.*   MNOTE 8,'*** INVALID OPERAND - DATA=&DATA'                         08850000
.*   MNOTE 8,'*** INVALID OPERAND - SMF=&SMF'                           08900000
.*   MNOTE 8,'*** INVALID OPERAND - UCB=&UCB'                           08950000
.*   MNOTE 8,'*** UCB IS A REQUIRED PARAMETER'  (STANDARD FORM ONLY)    09000000
.*   MNOTE 8,'*** DATA AND MSG KEYWORDS ARE MUTUALLY EXCLUSIVE'    @L1A 09025000
.*   MNOTE 8,'*** DATA, MSG AND EXPMSG KEYWORDS ARE MUTUALLY  EXCL'@02A 09037500
.*                                                                      09050000
.*                                                                      09100000
.*EXTERNAL-REFERENCES = NONE                                            09150000
.*                                                                      09200000
.*TABLES = NONE                                                         09250000
.*                                                                      09300000
.*MACROS = IHBINNRA                                                     09350000
.*                                                                      09400000
.*CHANGE-ACTIVITY = NEW MACRO                                           09450000
.*                                                                      09500000
.*$L0=MVS/XA,HDP2230,T85050,STLAM:  MACRO INTERFACE TO DADSM LSPACE     09550000
.*$L1=MVS/XA,HDP2230,T85248,STLMC:  SUPPORT THE ISMF VOLUME APPL   @L1A 09575000
.*$01=OY03218,HDP2230,T86245,STLAM: REPLACE THE BAS FOR 370 EXEC   @01A 09587500
.*$02=OY19881,HDP3310,T88215,STLMKD:ADD EXPANDED MESSAGE SUPPORT   @02A 09593700
.*$L2=EUREKA,JDZ1110,T92210,STLTDW:> 64K TRACKS DEVICE SUPPORT     @L2A 09595800
.*$P1=K13    ,JDZ11C0,94MAR29,SJPLRPS: CLEAN UP DIAGNOSTICS        @P1A 09597900
.*$L3=UCBVSCR,HDZ11C0,94JUN10,SJPLTIW: UCB VSCR SUPPORT            @L3A 09598900
.*$L4=OW48527,HDZ11F0,01MAR08,SJPLJBC: TIMEOUT SUPPORT             @L4A 09599390
.*                                                                      09600000
.**** END OF SPECIFICATIONS ******************************************  09650000
.*                                                                      09700000
         LCLC  &L         LOCAL LABEL VARIABLE                          09900000
         LCLA  &NO        BRANCH INDEX NUMBER                      @L1M 09925000
         LCLB  &NFL1(8)   BITS TO 'AND' LSPACE FLAG1               @L1A 09950000
         LCLB  &OFL1(8)   BITS TO 'OR' LSPACE FLAG1                @L1A 09975000
         LCLA  &NMK1      USED TO RESET LSPACE FLAG1               @L1A 10000000
         LCLA  &OMK1      USED TO SET LSPACE FLAG1                 @L1A 10025000
         LCLB  &MFI       MF=I WAS SPECIFIED OR DEFAULTED               10050000
         LCLB  &MFE       MF=(E,..) WAS SPECIFIED                       10075000
         LCLB  &MFL       MF=L WAS SPECIFIED                            10100000
         LCLB  &MFLM      MF=(L,MSG) WAS SPECIFIED                 @L1A 10116600
.*                                                                      10120700
         LCLB  &MFLEM     MF=(L,EXPMSG) WAS SPECIFIED              @02A 10124800
.*                                                                      10128900
         LCLB  &MFLD      MF=(L,DATA) WAS SPECIFIED                @L1A 10133200
         LCLB  &MFD       MF=D WAS SPECIFIED                       @L1M 10149800
         LCLB  &MFDM      MF=(D,MSG) WAS SPECIFIED                 @L1A 10166400
.*                                                                      10170500
         LCLB  &MFDEM     MF=(D,EXPMSG) WAS SPECIFIED              @02A 10174600
.*                                                                      10178700
         LCLB  &MFDD      MF=(D,DATA) WAS SPECIFIED                @L1A 10183000
         LCLC  &SMFX      SMF VALUE FOR P.L. FLAG BYTE                  10200000
         LCLB  &SMFN      SMF= WAS NOT SPECIFIED                        10250000
         LCLB  &DATAA     DATA=ADDR WILL BE USED                   @L1M 10256200
         LCLB  &DATAR     DATA=(REG) WILL BE USED                  @L1M 10262400
         LCLB  &MSGA      MSG=ADDR WILL BE USED                    @L1A 10268600
         LCLB  &MSGR      MSG=(REG) WILL BE USED                   @L1A 10274800
.*                                                                      10276000
         LCLB  &EMSGA     EXPMSG=ADDR WILL BE USED                 @02A 10277200
         LCLB  &EMSGR     EXPMSG=(REG) WILL BE USED                @02A 10278400
.*                                                                      10279600
         LCLB  &FMT4A     F4DSCB=ADDR WILL BE USED                 @L1A 10281000
         LCLB  &FMT4R     F4DSCB=(REG) WILL BE USED                @L1A 10287200
         LCLB  &UCBA      UCB=ADDR WILL BE USED                    @L1A 10293400
         LCLB  &UCBR      UCB=(REG) WILL BE USED                        10300000
         LCLB  &WARNSW    A WARNING ERROR WAS DETECTED                  10350000
         LCLB  &ERRORSW   A MAJOR ERROR WAS DETECTED               @L1M 10375000
&NO      SETA  &SYSNDX                  SET BRANCH INDEX NUMBER         10400000
.*                                                                      10450000
.* ******************************************************************** 10500000
.* *  VERIFICATION 1: MF PARAMETER                                      10550000
.* ******************************************************************** 10600000
.*                                                                      10650000
.V1      AIF   ('&MF' EQ 'I').V1I       IF I FORM, BRANCH               10700000
         AIF   ('&MF'(1,2) EQ '(E').V1E IF E FORM, BRANCH               10750000
         AIF   ('&MF(1)' EQ 'L').V1L    IF L FORM, BRANCH          @L1C 10768700
         AIF   ('&MF(1)' NE 'D').V1ER1  IF NOT D FORM, ERROR       @L1C 10787400
.*                                                                 @L1A 10806100
&MFD     SETB  1                        SET MF=D SPECIFIED              10824800
         AIF   ('&MF' EQ 'D').V1X       IF MF=D, BRANCH            @L1C 10843500
         AIF   (N'&MF NE 2).V1ER1       IF NOT TWO PARMS, ERROR    @L1A 10862200
         AIF   ('&MF(2)' EQ 'MSG').V1DM IF MF=(D,MSG), BRANCH      @L1A 10880900
.*                                                                      10884600
         AIF   ('&MF(2)' EQ 'EXPMSG').V1DEM                        @02A 10888300
.*                                      IF MF=(D,EXPMSG), BRANCH   @02A 10892000
.*                                                                      10895700
         AIF   ('&MF(2)' NE 'DATA').V1ER1                          @L1A 10899600
.*                                      IF NOT MF=(D,DATA), ERROR  @L1A 10918300
&MFDD    SETB  1                        ELSE SET MF=(D,DATA) FOUND @L1A 10937000
         AGO   .V1X                       AND CONTINUE             @L1A 10955700
.V1DM    ANOP                                                      @L1A 10974400
.*                                                                      10978100
&MFDM    SETB  1                        SET MF=(D,MSG) FOUND       @L1A 10981800
.*                                                                      10985500
         AGO   .V1X                       AND CONTINUE             @02A 10989200
.*                                                                      10992900
.*                                                                 @02A 10996600
.V1DEM   ANOP                                                      @02A 11000300
&MFDEM   SETB  1                        SET MF=(D,EXPMSG) FOUND    @02A 11004000
.*                                                                      11007700
         AGO   .V1X                       AND CONTINUE             @L1A 11011800
.*                                                                 @L1A 11030500
.V1I     ANOP                                                           11050000
&MFI     SETB  1                        SET MF=I SPECIFIED OR DEFAULTED 11100000
         AGO   .V1X                     AND CONTINUE                    11150000
.*                                                                      11200000
.V1L     ANOP                                                           11250000
&MFL     SETB  1                        SET MF=L SPECIFIED              11300000
         AIF   ('&MF' EQ 'L').V1X       IF NOT MF=L, BRANCH        @L1C 11309000
         AIF   (N'&MF NE 2).V1ER1       IF NOT TWO PARMS, ERROR    @L1A 11318000
         AIF   ('&MF(2)' EQ 'MSG').V1LM IF MF=(L,MSG), BRANCH      @L1A 11327000
.*                                                                      11328800
         AIF   ('&MF(2)' EQ 'EXPMSG').V1LEM                        @02A 11330600
.*                                      IF MF=(L,EXPMSG), BRANCH   @02A 11332400
.*                                                                      11334200
         AIF   ('&MF(2)' NE 'DATA').V1ER1                          @L1A 11336000
.*                                      IF NOT MF=(L,DATA), ERROR  @L1A 11345000
&MFLD    SETB  1                        ELSE SET MF=(L,DATA) FOUND @L1A 11354000
         AGO   .V1X                       AND CONTINUE             @L1A 11363000
.V1LM    ANOP                                                      @L1A 11372000
.*                                                                      11376500
&MFLM    SETB  1                        SET MF=(L,MSG) FOUND       @L1A 11381000
.*                                                                      11385500
         AGO   .V1X                       AND CONTINUE             @L1A 11390000
.*                                                                      11400000
.*                                                                 @02A 11404100
.V1LEM   ANOP                                                      @02A 11408200
&MFLEM   SETB  1                        SET MF=(L,EXPMSG) FOUND    @02A 11412300
         AGO   .V1X                       AND CONTINUE             @02A 11416400
.*                                                                 @02A 11420500
.*                                                                      11425000
.V1E     ANOP                                                           11450000
&MFE     SETB  1                        SET MF=E SPECIFIED              11500000
         AIF   (N'&MF EQ 2).V1X         IF TWO PARMS ON MF, BRANCH      11550000
         AIF   (N'&MF EQ 1).V1ER2       IF ONE PARM, BRANCH, ERROR      11600000
.V1ER1   ANOP                                                           11650000
         SPACE 1                                                        11700000
         MNOTE 8,'*** INVALID OPERAND - MF=&MF'                         11750000
         AGO   .V1ERX                   GO SET ERROR FLAG               11800000
.*                                                                      11850000
.V1ER2   ANOP                                                           11900000
         SPACE 1                                                        11950000
         MNOTE 8,'*** MF=(E,ADDR) FORM: SUPPLY PARAMETER LIST ADDRESS'  12000000
.V1ERX   ANOP                                                           12050000
         SPACE 1                                                        12100000
&ERRORSW SETB  1                        SET ERROR SWITCH ON             12150000
.V1X     ANOP                                                           12200000
.*                                                                      12250000
.* ******************************************************************** 12300000
.* *  V2: DATA= PARAMETER                                               12350000
.* ******************************************************************** 12400000
.*                                                                      12450000
.V2      ANOP                                                           12475000
&NFL1(3) SETB  ('&DATA' EQ '')          SET 'AND' BIT              @L1A 12500000
         AIF   ('&DATA' EQ '').V2X      IF DATA NOT GIVEN, BRANCH  @L1C 12525000
         AIF   (&MFD).V2NOTE            IF D FORM, BRANCH, WARNING      12550000
         AIF   (&MFLM OR &MFLD).V2NOTE  IF MF=(L,_), WARNING       @L1A 12566600
.*                                                                      12570700
         AIF   (&MFLEM).V2NOTE          IF MF=(L,_), WARNING MSG   @02A 12574800
.*                                                                      12578900
&OFL1(3) SETB  1                        DATA RETURN AREA SPECIFIED @L1A 12583200
         AIF   ('&DATA'(1,1) EQ '(').V2R IF DATA=(REG), BRANCH          12600000
&DATAA   SETB  1                        ELSE SET DATA=ADDR              12650000
         AGO   .V2X                       AND CONTINUE                  12700000
.*                                                                      12750000
.V2R     AIF   (&MFL).V2NOTE            IF L FORM, BRANCH, WARNING      12800000
         AIF   (N'&DATA NE 1).V2ER1     IF NE ONE PARM, BRANCH, ERROR   12850000
&DATAR   SETB  1                        SET DATA=(REG)                  12900000
         AGO   .V2X                     AND CONTINUE                    12950000
.*                                                                      13000000
.V2ER1   ANOP                                                           13050000
         SPACE 1                                                        13100000
         MNOTE 8,'*** INVALID OPERAND - DATA=&DATA'                     13150000
         SPACE 1                                                        13200000
&ERRORSW SETB  1                        SET ERROR SWITCH ON             13250000
.V2NOTE  ANOP                                                           13300000
&WARNSW  SETB  1                        SET WARNING SWITCH ON           13350000
.V2X     ANOP                                                           13400000
.*                                                                      13450000
.* ******************************************************************** 13500000
.* *  V3: SMF=   PARAMETER                                              13550000
.* ******************************************************************** 13600000
.*                                                                      13650000
.V3      ANOP                                                           13700000
&NFL1(1) SETB  ('&SMF' EQ '')           SET 'AND' BIT              @L1C 13750000
&NFL1(2) SETB  (&NFL1(1))               SET 'AND' BIT              @L1C 13800000
         AIF   ('&SMF' EQ '').V3X       IF SMF NOT GIVEN, BRANCH        13850000
         AIF   (&MFD).V3NOTE            IF D FORM, BRANCH, WARNING      13900000
         AIF   (&MFLM OR &MFLD).V3NOTE  IF MF=(L,_), WARNING       @L1A 13933300
.*                                                                      13941600
         AIF   (&MFLEM).V3NOTE          IF MF=(L,_), WARNING MSG   @02A 13949900
.*                                                                      13958200
         AIF   ('&SMF' EQ 'NONE').V3X   IF SMF=NONE, BRANCH        @L1C 13966600
         AIF   ('&SMF' EQ 'TEST').V3T   IF SMF=TEST, BRANCH             14000000
         AIF   ('&SMF' NE 'YES').V3ER1  IF NOT SMF=YES, BRANCH, ERROR   14050000
&OFL1(1) SETB  1                        ELSE SET SMF=YES SPECIFIED @L1C 14100000
         AGO   .V3X                       AND CONTINUE                  14150000
.*                                                                      14200000
.V3T     ANOP                                                           14250000
&OFL1(2) SETB  1                        SET SMF=TEST SPECIFIED     @L1A 14300000
.*                                                                3@L1D 14350000
         AGO   .V3X                       AND CONTINUE                  14500000
.*                                                                      14550000
.V3ER1   ANOP                                                           14600000
         SPACE 1                                                        14650000
         MNOTE 8,'*** INVALID OPERAND - SMF=&SMF'                       14700000
         SPACE 1                                                        14750000
&ERRORSW SETB  1                        SET ERROR SWITCH ON             14800000
.V3NOTE  ANOP                                                           14850000
&WARNSW  SETB  1                        SET WARNING SWITCH ON           14900000
.V3X     ANOP                                                           14950000
.*                                                                      15000000
.* ******************************************************************** 15050000
.* *  V4: UCB= PARAMETER                                                15100000
.* ******************************************************************** 15150000
.*                                                                      15200000
.V4      AIF   ('&UCB' EQ '').V4N       IF UCB NOT GIVEN, BRANCH        15250000
         AIF   (&MFD OR &MFL).V4NOTE    IF D OR L FORM, GO SET WARNING  15300000
         AIF   ('&UCB'(1,1) NE '(').V4A IF UCB=ADDR, BRANCH        @L1C 15350000
         AIF   (N'&UCB NE 1).V4ER1      IF NE ONE PARM, BRANCH, ERROR   15400000
&UCBR    SETB   1                       ELSE SET UCB=(REG)              15450000
         AGO   .V4X                       AND CONTINUE                  15500000
.*                                                                      15550000
.V4N     AIF   (&MFI).V4ER2             IF STANDARD FORM, BRANCH, ERROR 15600000
         AGO   .V4X                     ELSE, BRANCH, CONTINUE          15650000
.*                                                                      15700000
.V4A     ANOP                                                      @L1A 15710000
&UCBA    SETB   1                       SET UCB=ADDR               @L1A 15720000
         AGO   .V4X                     BRANCH, CONTINUE           @L1A 15730000
.*                                                                      15740000
.V4ER1   ANOP                                                           15750000
         SPACE 1                                                        15800000
         MNOTE 8,'*** INVALID OPERAND - UCB=&UCB'                       15850000
         AGO   .V4ERX                   GO SET ERROR FLAG               15900000
.*                                                                      15950000
.V4ER2   ANOP                                                           16000000
         SPACE 1                                                        16050000
         MNOTE 8,'*** UCB IS A REQUIRED PARAMETER'                      16100000
.V4ERX   ANOP                                                           16150000
         SPACE 1                                                        16200000
&ERRORSW SETB  1                        SET ERROR SWITCH ON             16250000
.V4NOTE  ANOP                                                           16300000
&WARNSW  SETB  1                        SET WARNING SWITCH ON           16350000
.V4X     ANOP                                                           16400000
.*                                                                      16450000
.* ******************************************************************** 16500000
.* *  V5: MSG= PARAMETER                                                16500800
.* ******************************************************************** 16501600
.*                                                                      16502400
.V5      ANOP                                                      @L1A 16503200
&NFL1(4) SETB  ('&MSG' EQ '')           SET 'AND' BIT              @02A 16503700
         AIF   ('&MSG' EQ '').V4XA      IF MSG NOT SPECIFIED, BR   @02C 16504200
&NFL1(3) SETB  0                        RESET 'AND' BIT            @L1A 16504800
&NFL1(5) SETB  0                        RESET 'AND' BIT            @02A 16505200
         AIF   (&OFL1(3)).V5ER2         IF DATA SPECIFIED, ERROR   @L1A 16505600
         AIF   (&MFD).V5NOTE            IF D FORM, WARNING         @L1A 16506400
         AIF   (&MFLM OR &MFLD).V5NOTE  IF MF=(L,_), WARNING       @L1A 16507200
.*                                                                      16507300
         AIF   (&MFLEM).V5NOTE          IF MF=(L,_), WARNING       @02A 16507400
&OFL1(4) SETB 1                         MESSAGE AREA SPECIFIED     @02A 16507500
.*                                                                      16507600
         AIF   ('&MSG'(1,1) EQ '(').V5R IF MSG=(REG), BRANCH       @L1A 16508000
&MSGA   SETB  1                         ELSE SET MSG=ADDR          @L1A 16508800
         AGO   .V4XA                      AND CONTINUE             @02C 16509600
.*                                                                 @L1A 16510400
.V5R     AIF   (&MFL).V5NOTE            IF L FORM, WARNING         @L1A 16511200
         AIF   (N'&MSG NE 1).V5ER1      IF NE ONE PARM, ERROR      @L1A 16512000
&MSGR    SETB 1                         SET MSG=(REG)              @L1A 16512800
         AGO   .V4XA                      AND CONTINUE             @02C 16513600
.*                                                                 @L1A 16514400
.V5ER1   ANOP                                                      @L1A 16515200
         SPACE 1                                                   @L1A 16516000
         MNOTE 8,'*** INVALID OPERAND - MSG=&MSG'                  @L1A 16516800
         SPACE 1                                                   @L1A 16517600
&ERRORSW SETB  1                        SET ERROR SWITCH ON        @L1A 16518400
         AGO   .V5NOTE                    AND CONTINUE             @L1A 16519200
.V5ER2   ANOP                                                      @L1A 16520000
         SPACE 1                                                   @L1A 16520800
         MNOTE 8,'*** DATA AND MSG KEYWORDS ARE MUTUALLY EXCLUSIVE'     16522000
         SPACE 1                                                   @L1A 16523200
&ERRORSW SETB  1                        SET ERROR SWITCH ON        @L1A 16524000
.V5NOTE  ANOP                                                      @L1A 16524800
&WARNSW  SETB  1                        SET WARNING SWITCH ON      @L1A 16525600
.V4XA    ANOP                                                      @02A 16525700
.*                                                                 @02A 16525800
.* *************************************************************** @02A 16525900
.* *  V5A: EXPMSG= PARAMETER                                       @02A 16526000
.* *************************************************************** @02A 16526100
.*                                                                 @02A 16526200
.V5A     ANOP                                                      @02A 16526300
&NFL1(5) SETB  ('&EXPMSG' EQ '')        SET 'AND' BIT              @02A 16526400
         AIF   ('&EXPMSG' EQ '').V5X    EXPMSG NOT SPECIFIED, BR   @02A 16526500
&NFL1(3) SETB  0                        RESET 'AND' BIT            @02A 16526600
&NFL1(4) SETB  0                        RESET 'AND' BIT            @02A 16526700
         AIF   (&OFL1(3)).V5AER2        IF DATA SPECIFIED, ERROR   @02A 16526800
         AIF   (&OFL1(4)).V5AER2        IF MSG SPECIFIED,  ERROR   @02A 16526900
         AIF   (&MFD).V5ANOTE           IF D FORM, WARNING         @02A 16527000
         AIF   (&MFLM OR &MFLD).V5ANOTE IF MF=(L,_), WARNING       @02A 16527100
         AIF   (&MFLEM).V5ANOTE         IF MF=(L,_), WARNING       @02A 16527200
.*                                                                      16527300
&OFL1(5) SETB 1                EXPANDED MESSAGE AREA SPECIFIED     @02A 16527400
.*                                                                      16527500
         AIF   ('&EXPMSG'(1,1) EQ '(').V5AR   EXPMSG=(REG), BRANCH @02A 16527600
&EMSGA  SETB  1                         ELSE SET EXPMSG=ADDR       @02A 16527700
         AGO   .V5X                       AND CONTINUE             @02A 16527800
.*                                                                 @02A 16527900
.V5AR    AIF   (&MFL).V5ANOTE           IF L FORM, WARNING         @02A 16528000
         AIF   (N'&EXPMSG NE 1).V5AER1  IF NE ONE PARM, ERROR      @02A 16528100
&EMSGR  SETB  1                         SET EXPMSG=(REG)           @02A 16528200
         AGO   .V5X                       AND CONTINUE             @02A 16528300
.*                                                                 @02A 16528400
.V5AER1  ANOP                                                      @02A 16528500
         SPACE 1                                                   @02A 16528600
         MNOTE 8,'*** INVALID OPERAND - MSG=&MSG'                  @02A 16528700
         SPACE 1                                                   @02A 16528800
&ERRORSW SETB  1                        SET ERROR SWITCH ON        @02A 16528900
         AGO   .V5ANOTE                   AND CONTINUE             @02A 16529000
.V5AER2  ANOP                                                      @02A 16529100
         SPACE 1                                                   @02A 16529200
         MNOTE 8,'*** DATA, MSG, AND EXPMSG ARE MUTUALLY EXCLUSIVE'@02A 16529300
         SPACE 1                                                   @02A 16529400
&ERRORSW SETB  1                        SET ERROR SWITCH ON        @02A 16529500
.V5ANOTE ANOP                                                      @02A 16529600
&WARNSW  SETB  1                        SET WARNING SWITCH ON      @02A 16529700
.*                                                                      16529800
.V5X     ANOP                                                      @L1A 16529900
.*                                                                      16530000
.* ******************************************************************** 16530100
.* *  V6: F4DSCB= PARAMETER                                             16530200
.* ******************************************************************** 16530300
.*                                                                      16530400
.V6      ANOP                                                           16531200
         AIF   ('&F4DSCB' EQ '').V6X    IF F4DSCB=, BRANCH         @L1A 16532000
         AIF   (&MFD).V6NOTE            IF D FORM, WARNING         @L1A 16532800
         AIF   (&MFLM OR &MFLD).V6NOTE  IF MF=(L,_), WARNING       @L1A 16533600
.*                                                                      16533800
         AIF   (&MFLEM).V6NOTE          IF MF=(L,_), WARNING       @02A 16534000
.*                                                                      16534200
         AIF   ('&F4DSCB'(1,1) EQ '(').V6R IF F4DSCB=(REG), BRANCH @L1A 16534400
&FMT4A   SETB  1                        ELSE SET F4DSCB=ADDR       @L1A 16535200
         AGO   .V6X                       AND CONTINUE             @L1A 16536000
.*                                                                 @L1A 16536800
.V6R     AIF   (&MFL).V6NOTE            IF L FORM, WARNING         @L1A 16537600
         AIF   (N'&F4DSCB NE 1).V6ER1   IF NE ONE PARM, ERROR      @L1A 16538400
&FMT4R   SETB  1                        SET F4DSCB=(REG)           @L1A 16539200
         AGO   .V6X                       AND CONTINUE             @L1A 16540000
.*                                                                 @L1A 16540800
.V6ER1   ANOP                                                      @L1A 16541600
         SPACE 1                                                   @L1A 16542400
         MNOTE 8,'*** INVALID OPERAND - F4DSCB=&F4DSCB'            @L1A 16543200
         SPACE 1                                                   @L1A 16544000
&ERRORSW SETB  1                        SET ERROR SWITCH ON        @L1A 16544800
.V6NOTE  ANOP                                                      @L1A 16545600
&WARNSW  SETB  1                        SET WARNING SWITCH ON      @L1A 16546400
.V6X     ANOP                                                      @L1A 16547200
.*                                                                      16548000
.* ******************************************************************** 16548800
.* *  CHECK ERRORS                                                      16550000
.* ******************************************************************** 16600000
.*                                                                      16650000
         AIF   (&ERRORSW EQ 0).CONT     IF NO MAJOR ERROR, BRANCH       16700000
&LABEL   DS    0F  *** INVALID OPERAND(S) FOUND IN MACRO EXPANSION.***  16750000
         AGO   .FINISH                                                  16800000
.*                                                                      16850000
.CONT    AIF   (&WARNSW EQ 0).BLD       IF NO WARNING ERROR, BRANCH     16900000
         SPACE 1                                                        16950000
     MNOTE 4,'*** ONE OR MORE PARAMETERS IGNORED DUE TO MF=&MF'         17000000
         SPACE 1                                                        17050000
.BLD     ANOP                                                           17070000
&NMK1    SETA  128*&NFL1(1)+64*&NFL1(2)+32*&NFL1(3)                @L1A 17090000
&NMK1    SETA  &NMK1+16*&NFL1(4)+8*&NFL1(5)                        @02A 17096600
.*                                                                      17103200
&OMK1    SETA  128*&OFL1(1)+64*&OFL1(2)+32*&OFL1(3)                @L1A 17109800
&OMK1    SETA  &OMK1+16*&OFL1(4)+8*&OFL1(5)                        @02A 17116400
.*                                                                      17123000
         AIF   (&MFI).I1                IF I FORM, BRANCH               17130000
         AIF   (&MFE).E1                IF E FORM, BRANCH               17150000
&L       SETC  '&LABEL'                 ELSE ASSUME A LABEL WAS GIVEN   17200000
         AIF   ('&L' NE '').TSTDL         IF A LABEL WAS GIVEN, BRANCH  17250000
&L       SETC  'LSPA&NO.S'                ELSE CONSTRUCT A LABEL        17300000
.TSTDL   AIF   (&MFD).D1                    IF D FORM, BRANCH           17350000
         AGO   .L1                          ELSE GO BUILD L FORM        17400000
.*                                                                      17450000
.* ******************************************************************** 17500000
.* *  BEGIN BUILD FOR STANDARD FORM OF MACRO                            17550000
.* ******************************************************************** 17600000
.*                                                                      17650000
.I1      ANOP                                                           17700000
&L       SETC  'LSPA&NO.S'              CONSTRUCT A LABEL FOR P.L.      17750000
         CNOP  0,4                      STANDARD FORM OF LSPACE MACRO   17800000
&LABEL   LA    1,&L                     R1 -> PARAMETER LIST       @01C 17833300
         B     LSPA&NO.E                BRANCH AROUND PARAMETER LST@01A 17866600
         AGO   .L2                      GO TO LIST FORM FOR PARM LIST   17900000
.L1      ANOP                           START P.L. FOR LIST FORM   @L1M 17910000
         DS    0F                                                  @L1M 17920000
         AIF   (&MFLD).LDATA            BUILD DATA LIST FORM       @L1A 17930000
         AIF   (&MFLM).LMSG             BUILD MSG LIST FORM        @L1A 17940000
.*                                                                      17950000
         AIF   (&MFLEM).ELMSG           BUILD EXPANDED LIST FORM   @02A 17962500
.*                                                                      17975000
.*                                                                      17987500
.* ******************************************************************** 18000000
.* *  BEGIN BUILD FOR LIST FORM OF MACRO (PARAMETER LIST)               18050000
.* ******************************************************************** 18100000
.*                                                                      18150000
.L2      ANOP                           START P.L. FOR STANDARD FORM    18300000
&L       DC    CL4'LSPA'                EBCDIC 'LSPA' FOR LSPACE        18350000
         DC    AL2(LSPA&NO.E-&L)        LENGTH OF PARAMETER LIST        18400000
         DC    AL1(&OMK1)               PARAMETER FLAG BYTE        @L1C 18431200
         DC    XL1'00'                  TIMEOUT VAL 1ST LSPACE I/O @L4A 18462400
         DS    0F                       DIAGNOSTIC INFORMATION     @L1A 18478000
         DC    XL1'00'                  LSPACE RETURN CODE         @L1C 18493600
         DC    XL1'00'                  SUBFUNCTION ID             @L1A 18524800
         DC    XL1'00'                  SUBFUNCTION RETURN CODE    @L1A 18556000
         DC    XL1'00'                  SUBFUNCTION REASON CODE    @L1A 18587200
         DC    A(0)                     UCB ADDRESS                @L1C 18618400
.*                                                                      18650000
         AIF   (&DATAA).L3              IF DATA=ADDR, BRANCH            18700000
         AIF   (&MSGA).L4               IF MSG=ADDR, BRANCH        @L1A 18737500
         AIF   (&EMSGA).L4A                                             18765600
         DC    A(0)                     ADDR OF EXPMSG,MSG OR DATA @L1C 18793700
         AGO   .L5                      BRANCH AROUND              @L1C 18821800
.L3      ANOP                                                           18850000
         DC    A(&DATA)                 ADDRESS OF DATA            @L1A 18883300
         AGO   .L5                      BRANCH AROUND              @L1A 18916600
.L4      ANOP                                                           18950000
         DC    A(&MSG)                  ADDRESS OF MESSAGE         @L1A 18965000
         AGO   .L5                      BRANCH AROUND              @02A 18980000
.L4A     ANOP                                                      @02A 18995000
         DC    A(&EXPMSG)               ADDRESS OF EXPANDED MSG    @02A 19010000
.L5      ANOP                                                      @L1A 19025000
*                                         RETURN AREA (OR ZERO)    @L1C 19062500
.*                                                                      19100000
         AIF   (&FMT4A).L6              IF F4DSCB=ADDR, BRANCH     @L1A 19113600
         DC    A(0)                     ADDRESS OF FORMAT 4 DSCB   @L1A 19127200
         AGO   .L7                      BRANCH AROUND F4DSCB=ADDR  @L1A 19140800
.L6      ANOP                                                      @L1A 19154400
         DC    A(&F4DSCB)               ADDRESS OF FORMAT 4 DSCB   @L1A 19168000
.L7      ANOP                                                      @L1A 19181600
*                                         RETURN AREA (OR ZERO)    @L1A 19195200
.*                                                                      19208800
LSPA&NO.E EQU  *                        END OF PARAMETER LIST           19222400
         AIF   (&MFI).E4                IF MF=I, BRANCH            @L1C 19236000
         AGO   .FINISH                  ELSE LIST FORM IS DONE          19250000
.*                                                                      19300000
.* ******************************************************************** 19350000
.* *  BEGIN BUILD FOR LIST FORM OF MACRO (DATA RETURN AREA)             19351700
.* ******************************************************************** 19353400
.*                                                                      19355100
.LDATA   ANOP                           START OF DATA RETURN AREA  @L1A 19356800
&L       DC    XL1'00'                  RETURN AREA STATUS BYTE    @L1A 19358500
         DC    XL1'00'                  VOLUME STATUS BYTE         @L1A 19359900
         DC    XL2'00'                  RESERVED                   @L1A 19361300
         DC    F'0'                     NUMBER OF FREE EXTENTS     @L1A 19362700
         DC    F'0'                     TOTAL FREE CYLINDERS       @L1A 19364100
         DC    F'0'                     TOTAL ADDITIONAL FREE TRKS @L1A 19365500
         DC    F'0'                     NUMBER OF CYLINERS IN      @L1A 19366900
*                                        LARGEST FREE EXTENT       @L1A 19368700
         DC    F'0'                     NUMBER OF ADDL TRACKS IN   @L1A 19370400
*                                        LARGEST FREE EXTENT       @L1A 19372100
         DC    F'0'                     FORMAT 0 COUNT             @L1A 19373800
         DC    F'0'                     FREE VIR COUNT             @L1A 19375500
         DC    F'0'                     FRAGMENTATION INDEX        @L1A 19377200
         AGO   .FINISH                  LIST FORM IS DONE          @L1A 19378900
.*                                                                      19380600
.* ******************************************************************** 19382300
.* *  BEGIN BUILD FOR LIST FORM OF MACRO (MESSAGE RETURN AREA)          19384000
.* ******************************************************************** 19385700
.*                                                                      19387400
.LMSG    ANOP                           START OF MSG RETURN AREA   @L1A 19389100
&L       DC    CL30' '                  MESSAGE TEXT               @L1A 19390800
         AGO   .FINISH                  LIST FORM IS DONE          @L1A 19392500
.*                                                                      19394200
.*                                                                 @02A 19394300
.* ****************************************************************@02A 19394400
.* *  BEGIN BUILD FOR LIST FORM OF MACRO (EXPANDED MESSAGE AREA)   @02A 19394500
.* ****************************************************************@02A 19394600
.*                                                                 @02A 19394700
.ELMSG   ANOP                        START OF EXPMSG RETURN AREA   @02A 19394800
&L       DC    CL40' '               MESSAGE TEXT                  @02A 19394900
         AGO   .FINISH               LIST FORM IS DONE             @02A 19395000
.*                                                                      19395100
.*                                                                      19395200
.* ******************************************************************** 19395900
.* *  BEGIN BUILD FOR EXECUTE FORM OF MACRO                             19400000
.* ******************************************************************** 19450000
.*                                                                      19500000
.E1      AIF   ('&LABEL' EQ '').E2      IF NO LABEL GIVEN, BRANCH       19550000
&LABEL   DS    0H                                                       19600000
.E2      ANOP                                                           19650000
         AIF   ('&MF(2)' EQ '(1)').E3   IF MF=(E,(1)), BRANCH      @L1A 19675000
         IHBINNRA &MF(2)                GET PARM LIST ADDR IN REG 1     19700000
.E3      ANOP                           START P.L. MOD FOR STD FORM     19750000
.*                                                                2@L2D 19790000
         NI    6(1),&NMK1               SET FLAGS OFF              @L1A 19830000
         AIF   (&OMK1 EQ 0).E4          IF NO FLAGS TO SET, BRANCH @L1A 19870000
         OI    6(1),&OMK1               SET FLAGS ON               @L1A 19910000
.*                                                                      19950000
.E4      ANOP                                                      @L1C 20000000
         AIF   (&UCBR).E5               IF UCB=(REG), BRANCH       @L1A 20050000
         AIF   (&UCBA EQ 0).E6          IF NOT UCB=ADDR, BRANCH    @L1A 20100000
         L     15,&UCB                  GET VALUE OF UCB=          @L1A 20150000
         ST    15,12(,1)                AND STORE IN PARM LIST     @L1A 20200000
         AGO   .E6                                                 @L1A 20250000
.E5      ANOP                                                           20300000
         ST    &UCB(1),12(,1)           STORE UCB PTR IN PARM LIST @L1C 20350000
.*                                                                      20400000
.E6      ANOP                                                      @L1A 20416600
         AIF   (&DATAR).E7              IF DATA=(REG), BRANCH      @L1C 20433200
         AIF   (&MFI OR &DATAA EQ 0).E8 IF MF=I OR DATA=, BRANCH   @L1C 20449800
         LA    15,&DATA                 GET VALUE OF DATA=              20466400
         ST    15,16(,1)                AND STORE IN PARM LIST     @L1C 20483000
         AGO   .E8                      BRANCH AROUND DATA=(REG)   @L1C 20499600
.E7      ANOP                                                      @L1C 20516200
         ST    &DATA(1),16(,1)          STORE DATA VALUE IN P.L.   @L1C 20532800
.*                                                                      20550000
.E8      ANOP                                                      @L1A 20555000
         AIF   (&MSGR).E9               IF MSG=(REG), BRANCH       @L1A 20560000
         AIF   (&MFI OR &MSGA EQ 0).E8A IF MF=I OR MSG=, BRANCH    @02C 20565000
         LA    15,&MSG                  GET VALUE OF MSG=          @L1A 20570000
         ST    15,16(,1)                AND STORE IN PARM LIST     @L1A 20575000
         AGO   .E10                     BRANCH AROUND MSG=(REG)    @L1A 20580000
.E9      ANOP                                                      @L1A 20585000
         ST    &MSG(1),16(,1)           STORE MSG VALUE IN P.L.    @L1A 20590000
.*                                                                      20595000
.*                                                                      20595300
.*                                                                 @02A 20595600
.E8A     ANOP                                                      @02A 20595900
         AIF   (&EMSGR).E9A              IF EXPMSG=(REG), BRANCH   @02A 20596200
         AIF   (&MFI OR &EMSGA EQ 0).E10 IF MF=I OR EXPMSG=, BRANCH@02A 20596500
.*                                                                 @02A 20596800
         LA    15,&EXPMSG               GET VALUE OF EXPMSG=       @02A 20597100
         ST    15,16(,1)                AND STORE IN PARM LIST     @02A 20597400
         AGO   .E10                     BRANCH AROUND MSG=(REG)    @02A 20597700
.E9A     ANOP                                                      @02A 20598000
         ST    &EXPMSG(1),16(,1)        STORE EXPMSG VALUE IN P.L. @02A 20598300
.*                                                                 @02A 20598600
.*                                                                      20598900
.E10     ANOP                                                      @L1A 20600000
         AIF   (&FMT4R).E11             IF F4DSCB=(REG), BRANCH    @L1A 20605000
         AIF   (&MFI OR &FMT4A EQ 0).E12 IF MF=I OR DATA=, BRANCH  @L1A 20610000
         LA    15,&F4DSCB               GET VALUE OF F4DSCB=       @L1A 20615000
         ST    15,20(,1)                AND STORE IN PARM LIST     @L1A 20620000
         AGO   .E12                     BRANCH AROUND F4DSCB=(REG) @L1A 20625000
.E11     ANOP                                                      @L1A 20630000
         ST    &F4DSCB(1),20(,1)        STORE F4DSCB VALUE IN P.L. @L1A 20635000
.*                                                                      20640000
.E12     ANOP                                                      @L1A 20645000
         SLR   0,0                      INDENTIFY P.L. TO DADSM ENTRY   20650000
         SVC   78                       ISSUE THE LSPACE SVC            20700000
         AGO   .FINISH                  EXECUTE AND STANDARD FORMS DONE 20750000
.*                                                                      20800000
.* ******************************************************************** 20850000
.* *  BEGIN BUILD FOR DSECTS                                            20900000
.* ******************************************************************** 20950000
.*                                                                      21000000
.D1      ANOP                                                      @L1M 21011100
         AIF   (&MFDD).DDATA            IF MF=(D,DATA), BRANCH     @L1A 21022200
         AIF   (&MFDM).DMSG             IF MF=(D,MSG), BRANCH      @L1A 21033300
.*                                                                      21044400
         AIF   (&MFDEM).DEMSG           IF MF=(D,EXPMSG), BRANCH   @02A 21047100
.*                                                                      21049800
.*                                                                      21052500
.* ******************************************************************** 21055500
.* *  BEGIN BUILD FOR DSECT FORM OF MACRO (PARAMETER LIST)              21066600
.* ******************************************************************** 21077700
.*                                                                      21088800
&L       DSECT                          DSECT FOR PARAMETER LIST        21100000
LSPAPLID DS    CL4                      EBCDIC 'LSPA' FOR LSPACE        21150000
LSPANGTH DS    AL2                      LENGTH OF PARAMETER LIST        21200000
LSPAFLAG DS    XL1                      PARAMETER FLAG BYTE        @L1C 21250000
LSPASMFY EQU   X'80'                    BUILD SMF RECORD TYPE 19        21400000
LSPASMFT EQU   X'40'                    BUILD SMF RECORD TYPE 19   @L1C 21411500
*                                       IF SMF VOL INFO REQUESTED  @L1C 21423000
LSPADATA EQU   X'20'                    FREE SPACE DATA REQUEST    @L1A 21434500
*                                                                       21438300
LSPAMSG  EQU   X'10'                    MESSAGE DATA REQUESTED     @02A 21442100
LSPAEMSG EQU   X'08'                    EXPANDED MESSAGE DATA  REQ @02A 21445900
LSPARSVB EQU   X'07'                    RESERVED                   @02C 21449700
LSPAXTIM DS    XL1                      I/O TIMEOUT VALUE IN       @L4C 21456490
*                                         SECONDS FOR FIRST        @L4A 21459480
*                                         LSPACE CHANNEL PROGRAM   @L4A 21462470
LSPADIAG DS    0F                       DIAGNOSTIC INFORMATION     @L1A 21469000
LSPAERCD DS    XL1                      LSPACE RETURN CODE         @L1C 21480500
LSPASFID DS    XL1                      SUBFUNCTION ID             @L1A 21492000
LSPASF00 EQU   X'00'                    PROCESSING COMPLETE        @P1C 21504400
LSPASF01 EQU   X'01'                    VALIDATE PARAMETERS        @P1C 21516800
LSPASF02 EQU   X'02'                    CHECK UCB STATUS           @P1C 21529200
LSPASF03 EQU   X'03'                    ENQ ON SYSZDMNT            @P1C 21541600
LSPASF04 EQU   X'04'                    CAPTURE UCB                @L3A 21547800
*                                                                 2@L2D 21554000
LSPASF06 EQU   X'06'                    READ VOLUME LABEL          @P1C 21566400
LSPASF07 EQU   X'07'                    READ VOL LAB W/AOM TIMEOUT @L4A 21572390
LSPASF80 EQU   X'80'                    READ F4 DSCB & SPACE MAPS  @P1C 21578800
LSPASF81 EQU   X'81'                    GET FREE EXTENTS           @P1C 21591200
LSPASF82 EQU   X'82'                    GET F0 DSCB COUNT          @P1C 21603600
LSPASF83 EQU   X'83'                    GET VIR COUNT              @P1C 21616000
LSPASF84 EQU   X'84'                    CHECK FOR VRF DATA         @P1C 21628400
LSPASFRT DS    XL1                      SUBFUNCTION RETURN CODE    @L1A 21641500
LSPASFRS DS    XL1                      SUBFUNCTION REASON CODE    @L1A 21653000
LSPARS01 EQU   X'01'                    CHECK PARM LIST STORAGE KEY@L1A 21664500
LSPARS02 EQU   X'02'                    CHECK PARM LIST ID         @L1A 21676000
LSPARS03 EQU   X'03'                    CHECK LSPACE FLAG BYTE     @L1A 21687500
LSPARS04 EQU   X'04'                    CHECK AUTH FOR SMF FLAGS   @L1A 21699000
LSPARS05 EQU   X'05'                    CHECK MSG/DATA RETURN AREA @L1A 21710500
*                                         STORAGE KEY              @L1C 21722000
LSPARS06 EQU   X'06'                    CHECK F4 DSCB RETURN AREA  @L1A 21733500
*                                         STORAGE KEY              @L1C 21745000
LSPARS07 EQU   X'07'                    CHECK UCB ADDRESS          @L1A 21756500
LSPARS08 EQU   X'08'                    CHECK FOR VIRTUAL UCB ADDR @L1A 21768000
LSPARS09 EQU   X'09'                    CHECK FOR ZERO VTOC PTR    @L1A 21779500
LSPAUCB  DS    A                        UCB ADDRESS                @L1C 21791000
LSPAFRSP DS    A                        ADDRESS OF MESSAGE OR DATA @L1C 21802500
*                                         RETURN AREA              @L1C 21814000
LSPAFMT4 DS    A                        ADDRESS OF FORMAT 4 DSCB   @L1A 21825500
*                                         RETURN AREA              @L1A 21837000
LSPAEND  EQU   *                        END OF PARAMETER LIST           21850000
LSPALEN  EQU   LSPAEND-&L               LENGTH OF PARAMETER LIST        21900000
         AGO   .FINISH                                             @L1A 21925000
.*                                                                      21950000
.* ******************************************************************** 21951300
.* *  BEGIN BUILD FOR DSECT FORM OF MACRO (DATA RETURN AREA)            21952600
.* ******************************************************************** 21953900
.*                                                                      21955200
.DDATA   ANOP                                                      @L1A 21956500
&L       DSECT                          DSECT FOR DATA RETURN AREA @L1A 21957800
LSPDRETN DS    XL1                      RETURN AREA STATUS BYTE    @L1A 21959100
LSPDSPAC EQU   X'80'                    RETURNED SPACE INFORMATION @L1A 21960400
LSPDF0CN EQU   X'40'                    RETURNED F0 DSCB COUNT     @L1A 21961700
LSPDVRCN EQU   X'20'                    RETURNED FREE VIR COUNT    @L1A 21963000
LSPDRRES EQU   X'1F'                    RESERVED                   @L1A 21964300
LSPDSTAT DS    XL1                      VOLUME STATUS BYTE         @L1A 21965600
LSPDIXDS EQU   X'80'                    INDEX EXISTS FOR VTOC      @L1A 21966900
LSPDIXAC EQU   X'40'                    INDEX VTOC ACTIVE          @L1A 21968200
LSPDSRES EQU   X'2F'                    RESERVED                   @L1A 21969500
LSPDRSV1 DS    XL2                      RESERVED                   @L1A 21970800
LSPDNEXT DS    F                        NUMBER OF FREE EXTENTS     @L1A 21972100
LSPDTCYL DS    F                        TOTAL FREE CYLINDERS       @L1A 21973400
LSPDTTRK DS    F                        TOTAL ADDITIONAL FREE TRKS @L1A 21974700
LSPDLCYL DS    F                        NUMBER OF CYLINERS IN      @L1A 21976000
*                                        LARGEST FREE EXTENT       @L1A 21977300
LSPDLTRK DS    F                        NUMBER OF ADDL TRACKS IN   @L1A 21978600
*                                        LARGEST FREE EXTENT       @L1A 21979900
LSPDF0S  DS    F                        FORMAT 0 COUNT             @L1A 21981200
LSPDVIRS DS    F                        FREE VIR COUNT             @L1A 21982500
LSPDFRAG DS    F                        FRAGMENTATION INDEX        @L1A 21983800
         AGO   .FINISH                  LIST FORM IS DONE          @L1A 21985100
.*                                                                      21986400
.* ******************************************************************** 21987700
.* *  BEGIN BUILD FOR DSECT FORM OF MACRO (MESSAGE RETURN AREA)         21989000
.* ******************************************************************** 21990300
.*                                                                      21991600
.DMSG    ANOP                                                      @L1A 21992900
&L       DSECT                          DSECT FOR MSG RETURN AREA  @L1A 21994200
LSPMTEXT DS    CL30                     MESSAGE TEXT               @L1A 21995500
         AGO   .FINISH                  LIST FORM IS DONE          @02A 21995800
.*                                                                      21996100
.*                                                                 @02A 21996400
.* *************************************************************** @02A 21996700
.* *  BEGIN BUILD FOR DSECT FORM OF MACRO (MESSAGE RETURN AREA)    @02A 21997000
.* *************************************************************** @02A 21997300
.*                                                                 @02A 21997600
.DEMSG   ANOP                                                      @02A 21997900
&L       DSECT                       DSECT FOR EXPMSG RETURN AREA  @02A 21998200
LSPETEXT DS    CL40                  MESSAGE TEXT                  @02A 21998500
.*                                                                      21998800
.FINISH  ANOP                                                           22000000
         MEND                                                           22050000
*********************************************************************/  22100000
*/*                                                                 */  22102300
*/*             PL/S VERSION OF LSPACE                              */  22104600
*/*                                                                 */  22106900
*/*      *****************************************************      */  22109200
*/*                                                                 */  22111500
*/*      BEFORE THE INCLUDE STATEMENT FOR THIS MACRO, THE           */  22113800
*/*      VARIABLES CORRESPONDING TO THE AREA'S TO BE MAPPED         */  22116100
*/*      MUST BE INITIALIZED IN THE FOLLOWING MANNER -              */  22118400
*/*                                                                 */  22120700
*/*      FOR THE LSPACE PARAMETER LIST -                            */  22123000
*/*      LSPACEPL MUST BE A MACRO VARIABLE SET TO 'YES'.            */  22125300
*/*                                                                 */  22127600
*/*      FOR THE LSPACE DATA RETURN AREA -                          */  22129900
*/*      LSPACEDT MUST BE A MACRO VARIABLE SET TO 'YES'.            */  22132200
*/*                                                                 */  22134500
*/*      FOR THE LSPACE MESSAGE RETURN AREA -                       */  22136800
*/*      LSPACEMS MUST BE A MACRO VARIABLE SET TO 'YES'.            */  22139100
*/*                                                                 */  22141400
*/*      FOR THE LSPACE EXPANDED MESSAGE RETURN AREA -          @02A*/  22141900
*/*      LSPACEES MUST BE A MACRO VARIABLE SET TO 'YES'.        @02A*/  22142400
*/*                                                                 */  22142900
*/*      *****************************************************      */  22143700
*/*                                                                 */  22146000
*%LSPAPLS:;                                                             22150000
*%IF LSPACEPL ~= 'YES'            /* IF LSPACEPL = YES, THEN        */  22183300
*    %THEN %GOTO LSPMCR1;         /* BUILD A LSPACE PARM LIST       */  22216600
*/*******************************************************************/  22250000
*/*   PLS MAPPING OF THE PARAMETER LIST FOR DADSM LSPACE (SVC 78)   */  22300000
*/*******************************************************************/  22350000
* DCL 1 LSPAMFL BASED BDY(WORD),                                        22400000
*       2 LSPAPLID   CHAR(4),     /* EBCDIC 'LSPA' FOR LSPACE       */  22450000
*       2 LSPANGTH   FIXED(15),   /* LENGTH OF PARAMETER LIST       */  22500000
*       2 LSPAFLAG   BIT(8),      /* PARAMETER FLAG BYTE        @L1M*/  22550000
*         3 LSPASMFY   BIT(1),    /* BUILD SMF RECORD TYPE 19       */  22700000
*         3 LSPASMFT   BIT(1),    /* BUILD SMF RECODE TYPE 19 IF    */  22710900
*                                 /*   SMF VOL INFO REQUESTED       */  22721800
*         3 LSPADATA   BIT(1),    /* FREE SPACE DATA REQUEST    @L1A*/  22732700
*         3 LSPAMSG    BIT(1),    /* MESSAGE DATA REQUESTED     @02A*/  22738100
*         3 LSPAEMSG   BIT(1),    /* EXPANDED MESSAGE DATA REQ  @02A*/  22743500
*         3 LSPAFRES   BIT(3),    /* RESERVED                   @02C*/  22748900
*       2 LSPAXTIM   FIXED(8),    /* I/O TIMEOUT VALUE IN       @L4A*/  22756490
*                                 /*   SECONDS FOR FIRST        @L4A*/  22758480
*                                 /*   LSPACE CHANNEL PROGRAM   @L4A*/  22760470
*       2 LSPADIAG   FIXED(32),   /* DIAGNOSTIC INFORMATION     @L1A*/  22765400
*         3 LSPAERCD   FIXED(8),  /* LSPACE RETURN CODE         @L1C*/  22776300
*         3 LSPASFID   FIXED(8),  /* SUBFUNCTION ID             @L1A*/  22787200
*         3 LSPASFRT   FIXED(8),  /* SUBFUNCTION RETURN CODE    @L1A*/  22798100
*         3 LSPASFRS   FIXED(8),  /* SUBFUNCTION REASON CODE    @L1A*/  22809000
*       2 LSPAUCB    PTR(31),     /* UCB ADDRESS                @L1C*/  22819900
*       2 LSPAFRSP   PTR(31),     /* ADDRESS OF MESSAGE OR DATA @L1C*/  22830800
*                                 /*   RETURN AREA (OR ZERO)    @L1C*/  22841700
*       2 LSPAFMT4   PTR(31);     /* ADDRESS OF FORMAT 4 DSCB   @L1A*/  22852600
*                                 /*   RETURN AREA (OR ZERO)    @L1A*/  22863500
* DCL (                                                                 22874400
*   LSPASF00 CONSTANT('00'X),     /* PROCESSING COMPLETE        @P1C*/  22885700
*   LSPASF01 CONSTANT('01'X),     /* VALIDATE PARAMETERS        @P1C*/  22897000
*   LSPASF02 CONSTANT('02'X),     /* CHECK UCB STATUS           @P1C*/  22908300
*   LSPASF03 CONSTANT('03'X),     /* ENQ ON SYSZDMNT            @P1C*/  22919600
*   LSPASF06 CONSTANT('06'X),     /* READ VOLUME LABEL          @P1C*/  22930900
*   LSPASF07 CONSTANT('07'X),     /* READ VOL LAB W/AOM TIMEOUT @L4A*/  22935890
*   LSPASF80 CONSTANT('80'X),     /* READ F4 DSCB & SPACE MAPS  @P1C*/  22942200
*   LSPASF81 CONSTANT('81'X),     /* GET FREE EXTENTS           @P1C*/  22953500
*   LSPASF82 CONSTANT('82'X),     /* GET F0 DSCB COUNT          @P1C*/  22964800
*   LSPASF83 CONSTANT('83'X),     /* GET VIR COUNT              @P1C*/  22976100
*   LSPASF84 CONSTANT('84'X))     /* CHECK FOR VRF DATA         @P1C*/  22987400
*            BIT(8);                                                    22999300
* DCL (                                                                 23007400
*   LSPARS01 CONSTANT('01'X),     /* CHECK PARM LIST STORAGE KEY@L1A*/  23016100
*   LSPARS02 CONSTANT('02'X),     /* CHECK PARM LIST ID         @L1A*/  23027000
*   LSPARS03 CONSTANT('03'X),     /* CHECK LSPAC FLAG BYTE      @L1A*/  23037900
*   LSPARS04 CONSTANT('04'X),     /* CHECK AUTH FOR SMF FLAGS   @L1A*/  23048800
*   LSPARS05 CONSTANT('05'X),     /* CHECK MSG/DATA RETURN AREA @L1A*/  23059700
*                                 /*   STORAGE KEY              @L1A*/  23070600
*   LSPARS06 CONSTANT('06'X),     /* CHECK F4 DSCB RETURN AREA  @L1A*/  23081500
*                                 /*   STORAGE KEY              @L1A*/  23092400
*   LSPARS07 CONSTANT('07'X),     /* CHECK UCB ADDRESS          @L1A*/  23103300
*   LSPARS08 CONSTANT('08'X),     /* CHECK FOR VIRTUAL UCB ADDR @L1A*/  23114200
*   LSPARS09 CONSTANT('09'X))     /* CHECK FOR ZERO VTOC PTR    @L1A*/  23125100
*            BIT(8);                                                    23136000
*/*******************************************************************/  23150000
*%LSPMCR1:;                                                             23200000
*%IF LSPACEDT ~= 'YES'            /* IF LSPACEDT = YES, THEN    @L1A*/  23250000
*    %THEN %GOTO LSPMCR2;         /* BUILD A LSPACE DATA AREA   @L1A*/  23300000
*/*******************************************************************/  23350000
*/*   PLS MAPPING OF THE DATA RETURN AREA FOR DADSM LSPACE          */  23400000
*/*******************************************************************/  23450000
* DCL 1 LSPAMFLD BASED BDY(WORD),                                       23500000
*       2 LSPDRETN   BIT(8),      /* RETURN AREA STATUS BYTE    @L1A*/  23550000
*         3 LSPDSPAC   BIT(1),    /* RETURNED SPACE INFORMATION @L1A*/  23600000
*         3 LSPDF0CN   BIT(1),    /* RETURNED F0 DSCB COUNT     @L1A*/  23650000
*         3 LSPDVRCN   BIT(1),    /* RETURNED FREE VIR COUNT    @L1A*/  23700000
*         3 LSPDRRES   BIT(5),    /* RESERVED                   @L1A*/  23750000
*       2 LSPDSTAT   BIT(8),      /* VOLUME STATUS BYTE         @L1A*/  23800000
*         3 LSPDIXDX   BIT(1),    /* INDEX EXISTS FOR VTOC      @L1A*/  23850000
*         3 LSPDIXAC   BIT(1),    /* INDEX VTOC ACTIVE          @L1A*/  23900000
*         3 LSPDSRES   BIT(6),    /* RESERVED                   @L1A*/  23950000
*       2 LSPDRSV1   BIT(16),     /* RESERVED                   @L1A*/  23975000
*       2 LSPDNEXT   FIXED(31),   /* NUMBER OF FREE EXTENTS     @L1A*/  24000000
*       2 LSPDTCYL   FIXED(31),   /* TOTAL FREE CYLINDERS       @L1A*/  24050000
*       2 LSPDTTRK   FIXED(31),   /* TOTAL ADDL FREE TRACKS     @L1A*/  24100000
*       2 LSPDLCYL   FIXED(31),   /* NUMBER OF CYLINDERS        @L1A*/  24150000
*                                 /*   IN LARGEST FREE EXTENT   @L1A*/  24200000
*       2 LSPDLTRK   FIXED(31),   /* NUMBER OF ADDL FREE TRKS   @L1A*/  24250000
*                                 /*   IN LARGEST FREE EXTENT   @L1A*/  24300000
*       2 LSPDF0S    FIXED(31),   /* FORMAT 0 DSCB COUNT        @L1A*/  24350000
*       2 LSPDVIRS   FIXED(31),   /* FREE VIR COUNT             @L1A*/  24400000
*       2 LSPDFRAG   FIXED(31);   /* FRAGMENTATION INDEX        @L1A*/  24450000
*/*******************************************************************/  24500000
*%LSPMCR2:;                                                             24550000
*%IF LSPACEMS ~= 'YES'            /* IF LSPACEMS = YES, THEN    @L1A*/  24600000
*    %THEN %GOTO LSPMCR3;         /* BUILD A LSPACE MSG AREA    @02C*/  24650000
*/*******************************************************************/  24700000
*/*   PLS MAPPING OF THE MESSAGE RETURN AREA FOR DADSM LSPACE       */  24750000
*/*******************************************************************/  24800000
* DCL 1 LSPAMFLM BASED BDY(WORD),                                       24850000
*       2 LSPMTEXT   CHAR(30);    /* MESSAGE TEXT               @L1A*/  24900000
*/*******************************************************************/  24950000
*/*=============================================================@02A*/  24953800
*%LSPMCR3:;                                                             24957600
*%IF LSPACEES ~= 'YES'            /* IF LSPACEES = YES, THEN    @02A*/  24961400
*    %THEN %GOTO LSPMCRX;         /* BUILD A LSPACE             @02A*/  24965200
*                                 /* EXPANDED MESSAGE AREA      @02A*/  24969000
*/**************************************************************@02A*/  24972800
*/*   PLS MAPPING OF THE MESSAGE RETURN AREA FOR DADSM LSPACE   @02A*/  24976600
*/**************************************************************@02A*/  24980400
* DCL 1 LSPAEFLM BASED BDY(WORD),                                       24984200
*       2 LSPETEXT   CHAR(40);    /* EXPANDED MESSAGE TEXT      @02A*/  24988000
*/**************************************************************@02A*/  24991800
*/*=============================================================@02A*/  24995600
*%LSPMCRX:;                                                             25000000
