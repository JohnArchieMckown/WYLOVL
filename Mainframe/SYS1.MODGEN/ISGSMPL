* %GOTO SMPLPLS1;                                                    /* 00009900
         MACRO                                                          00017300
         ISGSMPL                                                        00024700
**/                                                                     00032100
*%SMPLPLS1:;                                                            00039600
*/*  START OF SPECIFICATIONS ****************************************** 00050000
*                                                                       00100000
*01*  DESCRIPTIVE-NAME = STORAGE MANAGEMENT PARAMETER LIST ENTRY        00350000
*02*    ACRONYM:  SMPL                                                  00366600
*                                                                       00383200
*01*  PROPRIETARY STATEMENT =                                           00433200
*                                                                       00496000
*      LICENSED MATERIALS - PROPERTY OF IBM                             00515200
*      THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                      00534400
*      5645-001 (C) COPYRIGHT IBM CORP. 1980, 1996                      00553600
*                                                                       00572800
*01*  STATUS = JBB6602                                                  00592000
*                                                                       00611200
*01* EXTERNAL CLASSIFICATION: DMTI                                      00624100
*01* END OF EXTERNAL CLASSIFICATION:                                    00637000
*                                                                       00650000
*01*  MACRO-NAME = ISGSMPL                                              00675000
*                                                                       00700000
*01*  MACRO-DATE = 02/22/94                                             00725000
*                                                                       00750000
*01*  FUNCTION = EACH STORAGE MANAGEMENT PARAMETER LIST ENTRY           00850000
*                REPRESENTS A REQUEST TO THE GRS STORAGE MANAGER.       00900000
*                                                                       00950000
*01* COMPONENT:  GLOBAL RESOURCE SERIALIZATION (SCSDS)                  00955500
*                                                                       00961000
*01* EYE-CATCHER:  NONE                                                 00966500
*                                                                       00972000
*02*   OFFSET:  N/A                                                     00977500
*                                                                       00983000
*02*   LENGTH:  N/A                                                     00988500
*                                                                       00994000
*01*  METHOD-OF-ACCESS =                                                01000000
*                        NON-BASED:                                     01016600
*                        PL/AS - %SMPLPARM = 'Y'                        01033200
*                                %INCLUDE SYSLIB(ISGSMPL)               01049800
*                                                                       01066400
*                        BASED:                                         01083000
*                        PL/AS - DECLARE SMPLPTR PTR(31)                01099600
*                                %INCLUDE SYSLIB(ISGSMPL)               01116200
*                                                                       01132800
*                        BAL   - DSECT IS PRODUCED REQUIRING            01171800
*                                A USING ON THE SMPL                    01210800
*                                                                       01250000
*01*  CREATED-BY = THE SMPL IS CREATED BY THE CALLER OF GRS             01300000
*                  STORAGE MANAGER.                                     01350000
*                                                                       01450000
*01* STORAGE ATTRIBUTES:                                                01475000
*02*    SUBPOOL = DETERMINED BY CALLER.                                 01500000
*                                                                       01550000
*02*    KEY     = 0                                                     01600000
*                                                                       01650000
*02*    SIZE    = 16 BYTES PER ENTRY                                    01700000
*                                                                       01750000
*                                                                       01800000
*01*  DELETED-BY = THE SMPL IS DELETED BY THE CALLER OF GRS             01850000
*                  STORAGE MANAGER.                                     01900000
*                                                                       01950000
*01*  POINTED-TO-BY = MAINTAINED BY CALLER OF GRS STORAGE MANAGER.      02000000
*                                                                       02100000
*01*  SERIALIZATION = NONE                                              02150000
*                                                                       02200000
*01*  DSECT NAME = SMPL                                                 02201300
*                                                                       02202600
*01*  CHANGE-ACTIVITY =                                                 02204100
*                                                                       02204300
*      Supports the following Line Items:                               02204500
*                                                                       02204700
* $L1=RSAENHAN,JBB2220,850603,PDR4: VARIABLE LENGTH QWB            @L1A 02204900
* $L2=POSIXGRS,HBB4430,920208,PDEL: GRS LATCH MANAGER SUPPORT      @L2A 02205100
* $L3=GRS32   ,JBB6602,930922,PDNW: GRS Star                       @L3A 02205300
* $L4=GRS32   ,JBB6602,940203,PDEL  GRS Star                       @L4A 02205500
*                                                                       02205700
*      Supports the following PTMs:                                     02205900
*                                                                       02206100
* $P1=PKB3818 ,HBB4430,920715,PDDV: ADD HEADINGS FOR SHOWHDR            02206300
* $P2=PSD0463 ,JBB6620,951013,PDBD: ShowHdr                             02206400
*                                                                       02206500
*      Supports the following APARs:                                    02206700
*                                                                       02208200
*             OZ78340 - GRS PERFORMANCE ENHANCEMENTS:                   02212800
*                       A) CHANGE QCB-2 RNAME CAPACITY FROM 44 TO       02217400
*                          52 BYTES.                                    02222000
*                       B) REQUEUE FULLY ALLOCATED PEXB ON THE END      02226600
*                          OF THE CURRENT ACTIVE PEXB QUEUE.            02231200
*                       C) ENHANCED VERSION OF THE GRS HASHING ROUTINE  02235800
*                          (ISGSHASH).                         @ZA78340 02240400
*                                                                       02242700
*                                                                       02245100
**** END OF SPECIFICATIONS **                                        */ 02250000
*/*A000000-999999                                            @G383P13*/ 02300000
*    %GOTO SMPLPLS2;                                                 /* 02301900
SMPL     DSECT                       STORAGE MANAGEMENT PARM LIST ENTRY 02307600
         DS    0F                                                       02309000
SMPFLAGS DS    B                     INDICATOR FLAGS                    02310400
SMPEOPL  EQU   X'80'                 END OF PARM LIST INDICATOR -       02311800
*                                    WHEN 1, THIS ENTRY IS LAST ENTRY   02313200
*                                    OF THE PARAMETER LIST              02314600
SMPGLIND EQU   X'40'                 GLOBAL/LOCAL INDICATOR -           02316000
*                                    0 = LOCAL CONTROL BLOCK,           02317400
*                                    1 = GLOBAL CONTROL BLOCK           02318800
*                                    Obsolete                      @L4C 02319900
SMPSTIND EQU   X'20'                 SIZE/TYPE INDICATOR -         @L3A 02321000
*                                    0 = REQUEST IS BY TYPE/INDEX  @L3A 02322100
*                                    1 = REQUEST IS BY SIZE        @L3A 02323200
SMPRSV2  EQU   X'01'                 RESERVED                           02324300
SMPRSV3  EQU   X'80'                 RESERVED                           02325400
SMPRSV4  EQU   X'04'                 RESERVED                           02326600
SMPRSV5  EQU   X'02'                 RESERVED                           02328500
SMPRSV6  EQU   X'01'                 RESERVED                           02330400
SMPRSV7  DS    CL1                   RESERVED                           02332300
SMPINDEX DS    H                     TYPE OF CELL REQUESTED (I.E.,      02332700
*                                    INDEX NUMBER OF THE RPTE FOR THE   02333100
*                                    TYPE OF CELL). VALID IF ALLOCATING 02333500
*                                    BY TYPE (I.E., SMPSTIND=0).   @L3A 02333900
         ORG   SMPINDEX                                            @L3A 02334300
SMPSIZE  DS    H                     MINIMUM SIZE CELL REQUESTED.  @L3A 02334700
*                                    VALID IF ALLOCATING BY SIZE   @L3A 02335100
*                                    (I.E., SMPSTIND=1).           @L3A 02335500
*                                                                  @L3A 02335900
SMPRSV8  DS    CL4                   RESERVED                           02336800
SMPCNUM  DS    F                     NUMBER OF CELLS TO BE ALLOCATED    02338100
SMPCADDR DS    A                     INPUT - ADDRESS OF FIRST CELL      02339400
*                                            TO BE DEALLOCATED,         02340700
*                                    OUTPUT- ADDRESS OF FIRST CELL      02342000
*                                            THAT WAS ALLOCATED         02343300
SMPEND   DS    0F                    END OF SMPL                        02344600
         SPACE                                                          02344700
SMPQCB1I EQU   X'01'                 INDEX FOR QCB WITH 24 BYTE RNAME   02344800
*                                                                  @L4A 02344900
SMPQCB2I EQU   X'02'                 INDEX FOR QCB WITH 52 BYTE RNAME   02345000
*                                                                  @L4A 02345100
SMPQCB3I EQU   X'03'                 INDEX FOR QCB WITH 256 BYTE RNAME  02345200
*                                                                  @L4A 02345300
SMPQELI  EQU   X'04'                 INDEX FOR QEL                 @L4A 02345400
SMPQXBI  EQU   X'05'                 INDEX FOR QXB                 @L4A 02345500
SMPQWBI  EQU   X'06'                 INDEX FOR QWB                 @L4A 02345600
SMPPQCBI EQU   X'07'                 INDEX FOR PQCB                @L4A 02345700
SMPMRBI  EQU   X'08'                 INDEX FOR MRB                 @L4A 02345800
SMPCRBI  EQU   X'09'                 INDEX FOR CRB                 @L4A 02345900
SMPLDEI  EQU   X'0A'                 INDEX FOR LDE                 @L4A 02346000
SMPLSCBI EQU   X'0B'                 INDEX FOR LSCB                @L4A 02346100
SMPHWKAI EQU   X'0C'                 INDEX FOR HUGE WORK AREA      @L4A 02346200
SMPTWKAI EQU   X'0D'                 INDEX FOR TINY WORK AREA      @L4A 02346300
         SPACE 3                                                        02346400
         MEND                                                           02346500
**/                                                                     02346600
*%SMPLPLS2:;                                                            02347500
*%IF SMPLPARM = 'Y' %THEN            /* NON BASED SMPL REQUESTED ?   */ 02350000
*   %GOTO NOTBASE;                   /* YES, GO GENERATE NON BASED DCL*/02384900
*%BASE:;                             /* GENERATE BASED DCL           */ 02419800
*DECLARE                                                                02454700
*  1 SMPL BASED(SMPLPTR) BDY(WORD),  /* STORAGE MANAGEMENT PARM LIST    02489600
*                                       ENTRY                        */ 02524500
*%GOTO BODY;                         /* GO GENERATE SMPL BODY        */ 02559400
*%NOTBASE:;                          /* GENERATE NON BASED DCL       */ 02594300
*DECLARE                                                                02629200
*  1 SMPL BDY(WORD),                 /* STORAGE MANAGEMENT PARM LIST    02664700
*                                       ENTRY                        */ 02698100
*%BODY:;                             /* GENERATE SMPL BODY           */ 02731500
*    3 SMPFLAGS FIXED(8),            /* INDICATOR FLAGS              */ 02764900
*      5 SMPEOPL  BIT(1),            /* END OF PARM LIST INDICATOR -    02798300
*                                       WHEN 1, THIS ENTRY IS LAST ENTRY02831700
*                                       OF THE PARAMETER LIST        */ 02865100
*      5 SMPGLIND BIT(1),            /* GLOBAL/LOCAL INDICATOR          02898500
*                                       0 = LOCAL CONTROL BLOCK,        02931900
*                                       1 = GLOBAL CONTROL BLOCK.       02946400
*                                       Obsolete                 @L4C*/ 02960900
*      5 SMPSTIND BIT(1),            /* SIZE/TYPE INDICATOR             02975400
*                                       0 = REQUEST IS BY TYPE/INDEX    02989900
*                                       1 = REQUEST IS BY SIZE   @L3A*/ 03004400
*      5 SMPRSV2  BIT(1),            /* RESERVED                     */ 03019200
*      5 SMPRSV3  BIT(1),            /* RESERVED                     */ 03038400
*      5 SMPRSV4  BIT(1),            /* RESERVED                     */ 03057600
*      5 SMPRSV5  BIT(1),            /* RESERVED                     */ 03076800
*      5 SMPRSV6  BIT(1),            /* RESERVED                     */ 03096000
*    3 SMPRSV7 CHAR(1),              /* RESERVED                     */ 03115200
*    3 SMPINDEX FIXED(16),           /* TYPE OF CELL REQUESTED (I.E.,   03134000
*                                       INDEX NUMBER OF THE RPTE FOR    03152800
*                                       THE TYPE OF CELL). VALID        03171600
*                                       IF ALLOCATING BY TYPE (I.E.,    03190400
*                                       IF SMPSTIND=0)           @L3C*/ 03209200
*      5 SMPSIZE FIXED(16),          /* MINIMUM SIZE CELL REQUESTED.    03228000
*                                       VALID IF ALLOCATING BY SIZE     03246800
*                                       (I.E., IF SMPSTIND=1)    @L3A*/ 03265600
*    3 SMPRSV8 CHAR(4),              /* RESERVED                     */ 03284400
*    3 SMPCNUM FIXED(32),            /* NUMBER OF CELLS REQUESTED TO    03334400
*                                       BE ALLOCATED.                   03384400
*                                       NOT USED FOR DEALLOCATION    */ 03434400
*    3 SMPCADDR PTR(31),             /* INPUT - ADDRESS OF FIRST CELL   03484400
*                                       TO BE DEALLOCATED,              03534400
*                                       OUTPUT - ADDRESS OF FIRST CELL  03584400
*                                       THAT WAS ALLOCATED           */ 03634400
*    3 SMPEND CHAR(0) BDY(WORD);     /* END OF SMPL                  */ 03684400
*@SPACE(5);                                                             03734400
*/********************************************************************/ 03784400
*/*                                                                  */ 03834400
*/*   THE FOLLOWING IS THE DECLARATION FOR THE CELL CHAINING         */ 03884400
*/*   WHEN MORE THAN ONE CELL OF THE SAME TYPE IS ALLOCATED          */ 03934400
*/*                                                                  */ 03984400
*/********************************************************************/ 04034400
*DCL                                                                    04084400
*  1 SMPCELL BASED,                  /* STORAGE MANAGER CELL         */ 04134400
*    3 SMPNCELL PTR(31),             /* ADDRESS OF NEXT CELL IN CHAIN*/ 04171900
*    3 * CHAR(*);                    /* REMAINDER OF CELL            */ 04209400
 @SPACE(3);                                                             04246900
*/********************************************************************/ 04284400
*/*                                                                  */ 04334400
*/*   THE FOLLOWING CONSTANTS ARE THE INDEX NUMBERS FOR              */ 04384400
*/*   EACH TYPE OF CONTROL BLOCK THAT GRS STORAGE MANAGER            */ 04434400
*/*   PROCESSES. THESES INDICES CORRESPOND TO THE ONE'S IN           */ 04484400
*/*   THE RPT.                                                       */ 04534400
*/*                                                                  */ 04584400
*/********************************************************************/ 04634400
*DECLARE                                                                04684400
   SMPQCB1I FIXED(8) CONSTANT(1),    /* INDEX FOR QCB WITH              04734400
                                        24 BYTE RNAME                */ 04784400
   SMPQCB2I FIXED(8) CONSTANT(2),    /* INDEX FOR QCB WITH              04834400
                                        52 BYTE RNAME        @ZA78340*/ 04884400
   SMPQCB3I FIXED(8) CONSTANT(3),    /* INDEX FOR QCB WITH              04934400
                                        256 BYTE RNAME               */ 04984400
   SMPQELI  FIXED(8) CONSTANT(4),    /* INDEX FOR QEL                */ 05034400
   SMPQXBI  FIXED(8) CONSTANT(5),    /* INDEX FOR QXB                */ 05084400
   SMPQWBI  FIXED(8) CONSTANT(6),    /* INDEX FOR QWB                */ 05124400
   SMPPQCBI FIXED(8) CONSTANT(7),    /* INDEX FOR PQCB               */ 05164400
   SMPMRBI  FIXED(8) CONSTANT(8),    /* INDEX FOR MRB                */ 05204400
   SMPCRBI  FIXED(8) CONSTANT(9),    /* INDEX FOR CRB                */ 05244400
   SMPLDE   FIXED(8) CONSTANT(10),   /* INDEX FOR LDE            @L2A*/ 05284400
   SMPLSCB  FIXED(8) CONSTANT(11),   /* INDEX FOR LSCB           @L2A*/ 05324400
   SMPHWKAI FIXED(8) CONSTANT(12),   /* INDEX FOR HUGE WORK AREA        05364400
                                                                 @L4C*/ 05404400
   SMPTWKAI FIXED(8) CONSTANT(13);   /* INDEX FOR TINY WORK AREA @L4C*/ 05444400
 @SPACE(3);                                                             05484400
 /********************************************************************/ 05534400
 /*                                                                  */ 05584400
 /*   THE FOLLOWING CONSTANTS ARE SIZES FOR EACH TYPE OF             */ 05634400
 /*   WORKAREA THAT GRS STORAGE MANAGER PROCESSES.                   */ 05684400
 /*                                                                  */ 05734400
 /********************************************************************/ 05784400
 DECLARE                                                                05834400
   SMPTWKAS FIXED(16) CONSTANT(504),/* SIZE OF A TINY WORK AREA  @L1C*/ 05884400
   SMPHWKAS FIXED(16) CONSTANT(4000), /* SIZE OF A HUGE WORK AREA    */ 05934400
   SMPMAXSZ FIXED(16) CONSTANT(4032); /* Maximum size block that can    05984400
                                       be requested of the storage      06034400
                                       manager                   @L4A*/ 06084400
