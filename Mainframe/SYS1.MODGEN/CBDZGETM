*%GOTO GETM00;                      /* Bilingual mapping of GETM        00028601
       MACRO                                                            00029001
         CBDZGETM ,                                                  */ 00030001
*%GETM00: ;                                                             00040001
*/*** START OF SPECIFICATIONS ****************************************/ 00041001
*/*                                                                  */ 00042001
*/*  ACRONYM:  CBDZGETM                                              */ 00043001
*/*  EXTERNAL CLASSIFICATION:  PSPI                                  */ 00044001
*/*  END OF EXTERNAL CLASSIFICATION                                  */ 00045001
*/*  MACRO NAME:  CBDZGETM                                           */ 00046001
*/*  DSECT NAME:  GETM                                               */ 00047001
*/*  DESCRIPTIVE NAME:  HCD Getmain Storage Routine Parameter List   */ 00048001
*/*                                                                  */ 00049001
*/*  PROPRIETARY STATEMENT:                                          */ 00049101
*/*                                                                  */ 00049201
*/*     LICENSED MATERIALS - PROPERTY OF IBM                         */ 00049301
*/*     THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                  */ 00049401
*/*     5647-A01 (C) COPYRIGHT IBM CORP. 1990, 2000                  */ 00049504
*/*                                                                  */ 00049601
*/*  STATUS:  HCS6091                                                */ 00049704
*/*                                                                  */ 00049801
*/*  COMPONENT:  Hardware Configuration Definition (SC1XL)           */ 00049901
*/*  EYE-CATCHER:  GETM                                              */ 00050001
*/*    OFFSET:   0                                                   */ 00051001
*/*    LENGTH:   4                                                   */ 00052001
*/*  STORAGE ATTRIBUTES:                                             */ 00053001
*/*    MAIN STORAGE:  Obtained by caller                             */ 00054001
*/*    VIRTUAL STORAGE:                                              */ 00055001
*/*    AUXILIARY STORAGE:                                            */ 00056001
*/*    DATA SPACE:                                                   */ 00057001
*/*    SUBPOOL AND KEY:                                              */ 00058001
*/*    SUBPOOL:                                                      */ 00059001
*/*    KEY:                                                          */ 00059101
*/*    RESIDENCY:     Determined by caller                           */ 00059201
*/*  SIZE:  24 bytes                                                 */ 00059301
*/*  CREATED BY:      UIM and other HCD routines                     */ 00059401
*/*  POINTED TO BY:   N/A                                            */ 00059501
*/*  SERIALIZATION:   None                                           */ 00059601
*/*                                                                  */ 00059701
*/*  FUNCTION:  Maps the GETMAIN Parameters for Hardware             */ 00059801
*/*             Configuration Definition (HCD) routines and UIMs     */ 00059901
*/*             requesting storage. This storage is                  */ 00060001
*/*             zeroed by the service routine which                  */ 00061001
*/*             does the getmain.                                    */ 00062001
*/*                                                                  */ 00063001
*/*  MODULE TYPE:  Bilingual MACRO                                   */ 00064001
*/*  DEPENDENCIES: None                                              */ 00065001
*/*  RESTRICTIONS: For HCD and UIM use only                          */ 00066001
*/*  PROCESSOR:    PLX Compiler or Assembler/H                       */ 00067001
*/*                                                                  */ 00068001
*/*  INVOCATION:                                                     */ 00069001
*/*    PLX:                                                          */ 00069101
*/*          %DCL GETMDEF CHAR                                       */ 00069201
*/*          %GETMDEF='value'                                        */ 00069301
*/*              value = 'BDY(WORD)', 'BASED' or                     */ 00069401
*/*                      'BASED(xxxxxxxx)'                           */ 00069501
*/*          %INCLUDE SYSLIB(CBDZGETM)                               */ 00069601
*/*                                                                  */ 00069701
*/*          If GETMDEF is not declared and initialized, the         */ 00069801
*/*          default is 'BDY(WORD)'                                  */ 00069901
*/*                                                                  */ 00070001
*/*    ASSEMBLER:  CBDZGETM                                          */ 00071001
*/*                                                                  */ 00072001
*/*  CHANGE ACTIVITY:                                                */ 00073001
*/*    $L0= HCD,  HCSH101 900420 BOEB: Hardware Configuration Dialog */ 00074001
*/*    $L8= HCD,  HCSH103 910613 BOEB: HOM message support           */ 00075001
*/*    $LZ= HCD,  HCS6051 970318 BBEI: IODF in data space            */ 00075102
*/*               Note: ====>  please make sure  <====                */00075202
*/*                     The new fields defined to the GETM parameter  */00075302
*/*                     list in order to support data spaces          */00075402
*/*                     have been appended at the end of the          */00075502
*/*                     control block. Since the GETM parameter list  */00075602
*/*                     is an externally used control block (used     */00075702
*/*                     by IPL) it must be ensured, that the new      */00075802
*/*                     field definitions in the control block are    */00075902
*/*                     accessed only, when explicitely the data      */00076002
*/*                     space support is requested, i.e. the GETMFDSP */00076102
*/*                     flag is ON. Otherwise, when this version      */00076202
*/*                     of the control block is used under a down-    */00076302
*/*                     level MVS version - e.g. HCD V53 under        */00076402
*/*                     MVS 4.3 - the storage of the caller pointed   */00076502
*/*                     to by the new fields is undetermined, and     */00076602
*/*                     thus the result would be unpredictable.       */00076702
*/*                                                                  */ 00076801
*/*** END OF SPECIFICATIONS ******************************************/ 00077001
*%GOTO GETM01;                                                          00078001
         EJECT                                                          00079001
*********************************************************************** 00079101
*                                                                     * 00079201
*               GETM Parameter List                                   * 00079301
*                                                                     * 00079401
*******************************************************************WS** 00079501
         SPACE 1                                                        00079601
GETM     DS    0F                      Getmain parameters list.         00079701
GETMSD   DS    CL4                     Getmain parameters ID.           00079801
GETMFLG  DS    XL1                     Flag byte.                       00079901
GETMFBLW EQU   X'80'                   .. Storage below the 16-megabyte 00080001
*                                         line is requested.            00081001
GETMFPG  EQU   X'40'                   .. Boundary=Page requested       00082001
GETMFMSG EQU   X'20'                   .. Message request on error @L8A 00083001
GETMFCON EQU   X'10'                   .. Conditional request specified 00084001
GETMFDSP EQU   X'01'                   .. Data Space is to be created   00084102
*                                                                  @LZA 00084202
GETMSPN  DS    XL1                     Subpool number (contains binary  00085001
*                                      zero if not specified)           00086001
         DS    XL1                     Reserved and must be zero.       00087001
         DS    XL1                     Reserved and must be zero.       00088001
GETMLNTH DS    F                       Length of storage requested.     00089001
GETMADDR DS    F                       Address of getmained storage     00089101
*                                      returned here.                   00089201
GETMREAS DS    F                       Reason code                      00089301
GETMRETC DS    F                       Return code                      00089401
GETMBLKS DS    F                       Number of blocks for data space  00089502
*                                                                 @LZA  00089602
GETMSTOK DS    CL8                     Data space token           @LZA  00089702
GETMALET DS    F                       Data space ALET            @LZA  00089802
         DS    CL12                    Reserved and must be zero  @LZA  00089902
GETMLN   EQU   *-GETM                  Length of parameter list         00090001
         SPACE 2                                                        00090101
GETMSDNM DC    C'GETM'                 Constant for GETMSD.             00090201
         MEXIT                                                          00090301
         MEND                                                           00090401
*/*---------------- PLAS version follows ----------------------------*/ 00090501
*%GETM01: ;                                                             00090601
*@EJECT ;                                                               00090701
*/********************************************************************/ 00090801
*/*                                                                  */ 00090901
*/*             GETM Parameter List                                  */ 00091001
*/*                                                                  */ 00091101
*/*****************************************************************WS*/ 00091201
*@SPACE (1);                                                            00091301
 DECLARE                                                                00091401
 %IF GETMDEF='' %THEN                                                   00091501
   %GOTO GETM000;                                                       00091601
  1 GETM GETMDEF,                   /* Getmain parameters list       */ 00091701
   %GOTO GETM010;                                                       00091801
 %GETM000: ;                                                            00091901
  1 GETM BDY(WORD),                 /* Getmain parameters list.      */ 00092001
 %GETM010: ;                                                            00092101
   3 GETMSD   CHAR(4),              /* Getmain parameters ID.        */ 00092201
   3 GETMFLG  BIT(8),               /* Flag byte.                    */ 00092301
     5 GETMFBLW BIT(1),             /* Storage below 16MB line       */ 00092401
     5 GETMFPG  BIT(1),             /* Boundary=Page requested       */ 00092501
     5 GETMFMSG BIT(1),             /* Message request on error  @L8A*/ 00092601
     5 GETMFCON BIT(1),             /* conditional request specified */ 00092701
     5 *        BIT(3),             /* Reserved (see CBDZRELM)   @LZC*/ 00092802
     5 GETMFDSP BIT(1),             /* If 1, create data space   @LZA*/ 00092902
   3 GETMSPN  FIXED(8),             /* Subpool number (contains binary  00093101
                                       if not specified)             */ 00093201
   3 *        BIT(8),               /* Reserved and must be zero.    */ 00093301
   3 *        BIT(8),               /* Reserved and must be zero.    */ 00093401
   3 GETMLNTH FIXED(31),            /* Length of storage requested.  */ 00093501
   3 GETMADDR PTR  (31),            /* Address of getmained storage     00093601
                                       returned here.                */ 00093701
   3 GETMREAS FIXED(31),            /* reason code                   */ 00093801
   3 GETMRETC FIXED(31),            /* return code                   */ 00093901
   3 GETMBLKS FIXED(31),            /* in : number of 4K blocks to be   00094002
                                            allocated for data space    00094102
                                                                 @LZA*/ 00094202
   3 GETMSTOK CHAR(8),              /* out: data space token     @LZA*/ 00094302
   3 GETMALET FIXED(31),            /* out: data space ALET      @LZA*/ 00094402
   3 *        CHAR(12),             /* Reserved                  @LZA*/ 00094502
   3 GETMEND  CHAR(0);              /* End of GETM parameter list    */ 00094601
*@SPACE (2);                                                            00094701
*/********************************************************************/ 00094801
*/*                                                                  */ 00094901
*/*  The following constant is used to place an identifier           */ 00095001
*/*  in the GETM parm list (GETMSD).                                 */ 00095101
*/*                                                                  */ 00095201
*/********************************************************************/ 00095301
*@SPACE (1);                                                            00095401
 DECLARE GETMSDNM CHAR(4) CONSTANT('GETM'); /* Constant for GETMSD.  */ 00095501
*@SPACE (1);                                                            00095601
*/********************************************************************/ 00095701
*/* The following constants define the return code for GETMRETC      */ 00095801
*/********************************************************************/ 00095901
*@SPACE (1);                                                            00096001
* DECLARE                                                               00096101
*   GETMOK     FIXED(31) CONSTANT(00), /* Successful completion      */ 00096201
*   GETMWARN   FIXED(31) CONSTANT(04), /* Warning error occurred     */ 00096301
*   GETMERR    FIXED(31) CONSTANT(08), /* Error occurred             */ 00096401
*   GETMSEV    FIXED(31) CONSTANT(12), /* Severe error occurred      */ 00096501
*   GETMTERM   FIXED(31) CONSTANT(16); /* Terminating error occurred */ 00096601
*@SPACE (1);                                                            00096701
*/********************************************************************/ 00096801
*/* The following constants define the reason code for GETMREAS      */ 00096901
*/********************************************************************/ 00097001
*@SPACE (1);                                                            00097101
* DECLARE                                                               00097201
*   GETMSNAV   FIXED(31) CONSTANT(01), /* Storage not available COND */ 00097301
*   GETMDSNC   FIXED(31) CONSTANT(02), /* Data space could not be       00097402
*                                         created                @LZA*/ 00097502
*   GETMINVF   FIXED(31) CONSTANT(11), /* Invalid function code      */ 00097601
*   GETMINVS   FIXED(31) CONSTANT(12), /* Invalid subpool number     */ 00097701
*   GETMLEN0   FIXED(31) CONSTANT(15); /* Length is zero or less     */ 00097801
*@SPACE (2);                                                            00097901
*%DEACT GETMDEF;                                                        00098001
