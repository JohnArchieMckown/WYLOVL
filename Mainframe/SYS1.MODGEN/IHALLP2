*%GO TO LLP20;                                                          00000100
         MACRO                                                          00000200
         IHALLP2  ,                                                     00000300
*%LLP20:;                                                               00000400
*/********************************************************************/ 00000500
*/*                                                                  */ 00000600
*/* DESCRIPTIVE NAME = Library Lookaside Staging Installation Exit   */ 00000700
*/*                    Parameters (LLP2)                             */ 00000800
*/*                                                                  */ 00000900
*/* MACRO NAME = IHALLP2                                             */ 00001000
*/*                                                                  */ 00001100
*/* START OF SPECIFICATIONS ******************************************/ 00001600
*/*                                                                  */ 00002100
*/* COPYRIGHT =                                                      */ 00002600
*/*                                                                  */ 00003100
*/*    5647-A01                                                      */ 00003600
*/*    THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                   */ 00004100
*/*    (C) COPYRIGHT IBM CORP. 1988,2000                             */ 00004600
*/*    LICENSED MATERIALS - PROPERTY OF IBM                          */ 00005100
*/*                                                                  */ 00005600
*/* STATUS = HBB7703                                                 */ 00006100
*/*                                                                  */ 00006600
*/* EXTERNAL CLASSIFICATION: PSPI                                    */ 00007100
*/* END OF EXTERNAL CLASSIFICATION                                   */ 00007600
*/*                                                                  */ 00008100
*/*                                                                  */ 00008600
*/*01* DESCRIPTIVE NAME:  LLA Staging Installation Exit Parameters   */ 00009100
*/*02*  ACRONYM:  LLP2                                               */ 00009600
*/*                                                                  */ 00010100
*/*01* MACRO NAME:  IHALLP2                                          */ 00010600
*/*                                                                  */ 00011100
*/*01* DSECT NAME: LLP2                                              */ 00011600
*/*                                                                  */ 00012100
*/*01* COMPONENT:  Contents Supervisor (SC1CJ)                       */ 00012600
*/*                                                                  */ 00013100
*/*01* EYE-CATCHER:  LLP2                                            */ 00013600
*/*02*   OFFSET: 0                                                   */ 00014100
*/*02*   LENGTH: 4                                                   */ 00014600
*/*                                                                  */ 00015100
*/*01* STORAGE ATTRIBUTES:                                           */ 00015600
*/*02*  SUBPOOL: 0                                                   */ 00016100
*/*02*  KEY: 0                                                       */ 00016600
*/*02*  RESIDENCY: 24 Bit                                            */ 00017100
*/*                                                                  */ 00017600
*/*01* SIZE:  8 character header.                                    */ 00018100
*/*           Variable number of LLP2X's (length is in LLP2LEN)      */ 00018600
*/*                                                                  */ 00019100
*/*01* CREATED BY: Module CSVLLST2                                   */ 00019600
*/*                                                                  */ 00020100
*/*01* POINTED TO BY:                                                */ 00020600
*/*     LLASX2WA                                                     */ 00021100
*/*                                                                  */ 00021600
*/*01* SERIALIZATION:                                                */ 00022100
*/*     None                                                         */ 00022600
*/*                                                                  */ 00023100
*/*01* FUNCTION: Provides a mapping for the statistics for the       */ 00023600
*/*    staged modules for which recent fetch statistics exist        */ 00024100
*/*    to be passed to LLA exits.                                    */ 00024600
*/*                                                                  */ 00025100
*/*01* METHOD OF ACCESS:                                             */ 00025600
*/*02*  ASM:                                                         */ 00026100
*/*      IHALLP2                                                     */ 00026600
*/*02*  PL/AS:                                                       */ 00027100
*/*      %INCLUDE SYSLIB(IHALLP2)                                    */ 00027600
*/*                                                                  */ 00028100
*/*01* DELETED BY: LLA address space termination                     */ 00028600
*/*                                                                  */ 00029100
*/*01* FREQUENCY:  One in LLA address space                          */ 00029600
*/*                                                                  */ 00030100
*/* FUNCTION =                                                       */ 00030600
*/*     LLA Staging passes the address of the LLP2 in register 1     */ 00031100
*/*     to its installation exit CSVLLIX2. LLA Staging analyzes      */ 00031600
*/*     samples of module fetch statistics and stages chosen         */ 00032100
*/*     modules into virtual storage to avoid program fetch          */ 00032600
*/*     overhead. When LLA Staging runs, it calls CSVLLIX2 once      */ 00033100
*/*     for each staged module and once for each module for          */ 00033600
*/*     which recent fetch statistics exist. CSVLLIX2 is not         */ 00034100
*/*     called for modules which have been deactivated.              */ 00034600
*/*                                                                  */ 00035100
*/*     The LLP2 contains the combined usage statistics for all      */ 00035600
*/*     the entry points in the module and the BLDL format PDS       */ 00036100
*/*     directory entries of all the entry points of the module.     */ 00036600
*/*                                                                  */ 00037100
*/*     The LLP2 also contains LLA's calculated value of staging     */ 00037600
*/*     the module into virtual storage.  CSVLLIX2 can set LLP2      */ 00038100
*/*     fields to modify the weighting factors which LLA Staging     */ 00038600
*/*     applies to the components of the LLA value as well as        */ 00039100
*/*     adding an installation defined component of LLA value.       */ 00039600
*/*                                                                  */ 00040100
*/* Notes:                                                           */ 00040600
*/*  After calling CSVLLIX2, LLA Staging combines four independent   */ 00041100
*/*  components of staging value to determine the net value of       */ 00041600
*/*  staging a copy of the module into virtual storage.              */ 00042100
*/*                                                                  */ 00042600
*/*  LLA Staging multiplies each factor of value (in LLP2VALU) by    */ 00043100
*/*  its weighting factor (in LLP2WGTS) and sums the products to     */ 00043600
*/*  determine the net LLA staging value for this module. The result */ 00044100
*/*  is a number in the range -4,000,000 to +4,000,000. A net value  */ 00044600
*/*  of 0 means there is no benefit to staging.  A net value of      */ 00045100
*/*  -4,000,000 means the module must not be staged or any staged    */ 00045600
*/*  copy must be deactivated unless otherwise directed by the       */ 00046100
*/*  installation staging exit (CSVLLIX2). A net value of +4,000,000 */ 00046600
*/*  means the module must be staged unless otherwise directed by    */ 00047100
*/*  the installation staging exit (CSVLLIX2).                       */ 00047600
*/*                                                                  */ 00048100
*/*  LLA stages and subsequently provides module users with those    */ 00048600
*/*  modules which have the highest LLA value. Modules with low LLA  */ 00049100
*/*  value are provided by program fetch from DASD.                  */ 00049600
*/*    LLA calculates a limit equal to 1/2 of the total size in      */ 00056500
*/*    bytes of the modules which have enough value to size.         */ 00106500
*/*    LLA stages modules until the size of the modules staged       */ 00156500
*/*    exceeds this limit or until VLF fails to successfully         */ 00206500
*/*    process the COFCREAT request.                                 */ 00256500
*/*    LLA deactivates all the modules whose value is below the      */ 00306500
*/*    updated deactivating threshhold.                              */ 00356500
*/*                                                                  */ 00406500
*/*  The response time value (LLP2VRSP) of staging a module is       */ 00456500
*/*  defined as the time that would be saved per sample if the       */ 00506500
*/*  module were to be fetched from virtual storage divided by the   */ 00556500
*/*  time that would have beensaved during the previous sample if    */ 00606500
*/*  all modules had been fetched from virtual storage. Response     */ 00656500
*/*  time values will be positive as long as virtual storage         */ 00706500
*/*  fetching is faster than program fetch.                          */ 00756500
*/*                                                                  */ 00806500
*/*  The contention value (LLP2VCTN) of staging a modules is defined */ 00856500
*/*  as the average difference between the minimum fetch for the     */ 00906500
*/*  module from the provider (LLA or DASD) and the duration of the  */ 00956500
*/*  fetch. The average LLA difference is subtracted from the average*/ 01006500
*/*  DASD difference. The result is multiplied by the number of      */ 01056500
*/*  fetches and is then normalized by dividing by the sum of all    */ 01106500
*/*  the contention deltas from the previous sample.                 */ 01156500
*/*                                                                  */ 01206500
*/*  The storage value (LLP2VSTO) of staging a module is defined     */ 01256500
*/*  as the size of the module, normalized by dividing by            */ 01306500
*/*  the sum of all the module sizes accumulated in the previous     */ 01356500
*/*  sample. Storage is always a negative value since it represents  */ 01406500
*/*  a cost to the system of staging the module.                     */ 01456500
*/*                                                                  */ 01506500
*/*  The threshholds (staging and deactivating) are used by LLA to   */ 01556500
*/*  identify candidate modules for staging or deactivation. The     */ 01606500
*/*  threshholds are used twice during staging processing:           */ 01656500
*/*   1. When LLA is analyzing each module, its value is compared    */ 01706500
*/*      to each threshhold and identified as a candidate if any     */ 01756500
*/*      action needs to be done (i.e. stage or deactivate the       */ 01806500
*/*      load module). CSVLLIX2 is called for each module during     */ 01856500
*/*      this process.                                               */ 01906500
*/*   2. After all the modules are analyzed, the threshholds are     */ 01956500
*/*      updated based on information gathered during the sample.    */ 02006500
*/*      For example, if a significant number of modules were        */ 02056500
*/*      trimmed, the staging threshhold is raised to prevent less   */ 02106500
*/*      valuable modules from getting staged and to ensure that     */ 02156500
*/*      only the most valuable modules use the constrained          */ 02206500
*/*      amount of storage in the data space.                        */ 02256500
*/*      Each candidate module is checked against the updated        */ 02306500
*/*      threshholds to see if action still needs to be performed.   */ 02356500
*/*    Since this updating of the threshholds is done after          */ 02406500
*/*    CSVLLIX2 is called, you must look at the threshhold           */ 02456500
*/*    value passed to CSVLLIX2 during the next sample to find       */ 02506500
*/*    the values used for the final decision about the  action      */ 02556500
*/*    taken in the previous sample.                                 */ 02606500
*/*    Note that the deactivating and staging threshhold values      */ 02656500
*/*    are identical for every module in the library during the      */ 02706500
*/*    same sample.                                                  */ 02756500
*/*    The staging threshhold is always positive and the             */ 02806500
*/*    deactivating threshhold is always negative. They will be      */ 02856500
*/*    different for each library and are a reflection of the        */ 02906500
*/*    library's current fetch activity.                             */ 02956500
*/*    The deactivation threshhold helps LLA maintain a steady       */ 03006500
*/*    state. In other words, if there is a significant variability  */ 03056500
*/*    in the system, the potential exists for LLA values to         */ 03106500
*/*    widely fluctuate. The area between the staging threshhold     */ 03156500
*/*    and the deactivation threshhold represents the area of        */ 03206500
*/*    insignificant changes. If LLA Values fall into this area      */ 03256500
*/*    no action is done to the module, it stays the way it is:      */ 03306500
*/*    either staged or not.                                         */ 03356500
*/*    The goal is to set these 2 lines where LLA stages modules     */ 03406500
*/*    which have significant value and ignores insignificant        */ 03456500
*/*    fluctuations in value. The deactivation threshhold is         */ 03506500
*/*    primarily intended for a PR/SM environment where LPAR         */ 03556500
*/*    time slicing contributes to variability in fetch durations.   */ 03606500
*/*    The staging threshhold is primarily intended for a            */ 03656500
*/*    MAXVIRT constrained environment where more modules have       */ 03706500
*/*    value to stage than will fit in the VLF dataspace.            */ 03756500
*/*                                                                  */ 03806500
*/*    If the following sequence occurs                              */ 03856500
*/*    for a significant amount of modules, the deactivation         */ 04006500
*/*    threshhold is lowered:                                        */ 04056500
*/*    Sample n: LLA Value > staging threshhold -- module staged     */ 04106500
*/*         n+1: LLA Value < deactivating threshhold -- module       */ 04156500
*/*                                                     deactivated  */ 04206500
*/*         n+2: LLA Value > staging threshhold -- module staged     */ 04256500
*/*    After the third sample, LLA notices that the staging value    */ 04306500
*/*    has made 2 state changes and LLA lowers the deactivating      */ 04356500
*/*    threshhold.                                                   */ 04406500
*/*                                                                  */ 04456500
*/* METHOD OF ACCESS                                                 */ 04706500
*/*   PL/AS                                                          */ 04756500
*/*     - Declare a basing pointer (LLP2PTR).                        */ 04806500
*/*     - Assign the address of the LLP2 to LLP2PTR.                 */ 04856500
*/*     - The address of the first entry point section (LLP2EP)      */ 04906500
*/*       is in LLP2EPTR. To access the first entry point section:   */ 04956500
*/*       - Declare a basing pointer (ENTRY_PTR).                    */ 05006500
*/*       - Respecify LLP2EP based on ENTRY_PTR.                     */ 05056500
*/*       - Assign LLP2EPTR to ENTRY_PTR.                            */ 05106500
*/*       - To access the next LLP2EP section, add LLP2EPLN          */ 05156500
*/*         to ENTRY_PTR.                                            */ 05206500
*/*       - There are LLP2EPCT entry point sections.                 */ 05256500
*/*     - The LLP2 extension is based on LLP2XPTR. On entry          */ 05306500
*/*       to CSVLLIX2, LLP2XPTR contains the address of the          */ 05356500
*/*       extension section.                                         */ 05406500
*/*                                                                  */ 05456500
*/*   BAL                                                            */ 05506500
*/*     - Set the address of the area for the LLP2 in a register     */ 05556500
*/*     - USING LLP2,register                                        */ 05606500
*/*     - For the first entry point section for the module:          */ 05656500
*/*       . Move the value in LLP2EPTR to a register                 */ 05706500
*/*       . USING LLP2EP,register                                    */ 05756500
*/*     - For each subsequent entry point (there are LLP2EPCT entry  */ 05806500
*/*       points in the module):                                     */ 05856500
*/*       . Add LLP2EPLN to the LLP2EP base register.                */ 05906500
*/*     - Assign the address of LLP2X to a register.                 */ 05956500
*/*       . On entry to CSVLLIX2, the address of LLP2X is in         */ 06006500
*/*         LLP2XPTR.                                                */ 06056500
*/*     - USING LLP2X,register                                       */ 06106500
*/*                                                                  */ 06156500
*/*   Note: Please use LLP2EPLN to move from LLP2EP section to       */ 06206500
*/*         the next. This field was included to help aid in         */ 06256500
*/*         migration to future levels of the LLP2. If the           */ 06306500
*/*         the length of the LLP2EP is increased, any versions      */ 06356500
*/*         of CSVLLIX2 which use LLP2EPLN to move pointers will     */ 06406500
*/*         not have to be re-assembled whereas if you use           */ 06456500
*/*         LENGTH(LLP2EP) you will have to re-assemble to get       */ 06506500
*/*         the new length.                                          */ 06556500
*/*                                                                  */ 06606500
*/* LENGTH = Length of base section (LLP2) plus the length of        */ 06656500
*/*          an entry point section (LLP2EP) times the number of     */ 06706500
*/*          entry point sections (LLP2EPCT) plus the length of      */ 06756500
*/*          the extension section (LLP2X).                          */ 06806500
*/*          On entry to CSVLLIX2, the length of the all the         */ 06856500
*/*          sections of the LLP2 is in LLP2LEN.                     */ 06906500
*/*                                                                  */ 06956500
*/*                                                                  */ 07006500
*/*    CHANGE ACTIVITY =                                             */ 07056500
*/* $L0=LLF    ,HBB3310,870505,PDCF: LLF support                     */ 07106500
*/* $L1=PBUF   ,JBB3311,880229,PDAX: PBUF support                    */ 07156500
*/* $P1=PCG0220,JBB3311,880717,PDBS: Fix prolog and comment text     */ 07206500
*/* $L2=LLAPERF,JBB3313,890407,PDBS: LLA performance                 */ 07256500
*/* $01=OW28518,HBB5520,970805,PD00IZ: Change LLP2LEN from Fixed(15) */ 07273100
*/*                                    to Fixed(16)                  */ 07289700
*/* $P2=PWA0361,JBB6604,980819,PD00KC: Fix classification and make   */ 07295300
*/*                                    prolog changes for SHOWHDR    */ 07300900
*/*     OW40222,JBB6607,990721,PD00IZ: Fix comment delimiter in      */ 07301800
*/*                                    prolog                        */ 07302700
*/*$L3=64BITCSV HBB7703 990616 PD00XB: Move comment from col 72      */ 07303700
*/*                                                                  */ 07306500
*/****END OF SPECIFICATIONS*******************************************/ 07356500
*%GOTO LLP22;   /*                                                      07406500
LLP2     DSECT                        LLA Staging exit parameters.      07456500
*-------------------Header------------------------------------------    07506500
LLP2ID   DS    CL4                    LLP2 id = "LLP2".                 07556500
LLP2LEVL DS    FL1                    LLP2 level = 2.             @L1C  07606500
LLP2RSV1 DS    CL1                    Reserved.                         07656500
LLP2LEN  DS    FL2                    Length of the LLP2 including      07706500
*                                     all its entry point sections      07756500
*                                     (LLP2EP) and its extension        07806500
*                                     LLP2X. There are LLP2EPCT         07856500
*                                     entry point sections.             07906500
*-------------------Inputs and outputs to control LLA Staging-------    07956500
LLP2USER DS    F                      Contains a 31-bit address pointer 08006500
*                                     to a four byte user data area     08056500
*                                     which is reserved for CSVLLIX2 to 08106500
*                                     use. The four byte user data is   08156500
*                                     aligned on a full word boundary.  08206500
*                                     It is initially zero and          08256500
*                                     subsequently contains any value   08306500
*                                     stored in it by CSVLLIX2.         08356500
*                                     CSVLLIX2 can optionally use the   08406500
*                                     four byte user data area to pass  08456500
*                                     a parameter (or the address of a  08506500
*                                     parameter list) to itself on      08556500
*                                     subsequent invocations. The four  08606500
*                                     byte field will be reset to zero  08656500
*                                     when LLA is restarted.            08706500
*                                                                       08756500
LLP2VALU DS    4F                     Factors of value, each in the     08806500
*                                     range of -10,000 to +10,000,      08856500
*                                     which indicate the relative value 08906500
*                                     to the system of LLA providing    08956500
*                                     this module to users. See also    09006500
*                                     LLP2WGTS.                         09056500
         ORG   LLP2VALU                                                 09106500
LLP2VRSP DS    F                      Response time value (input).      09156500
*                                     Derived from observed fetch       09206500
*                                     durations and relative activity.  09256500
LLP2VCTN DS    F                      Contention value (input).         09306500
*                                     Derived from the degree of        09356500
*                                     variability in response times     09406500
*                                     for program fetch and LLA fetch   09456500
LLP2VSTO DS    F                      Processor storage value (input).  09506500
*                                     Derived from module size and      09556500
*                                     response time savings if staged.  09606500
LLP2VUSR DS    F                      User defined value (output).      09656500
*                                     Default is zero.                  09706500
*                                                                       09756500
LLP2WGTS DS    4F                     Weighting factors in the range    09806500
*                                     0-100 used by LLA Staging to      09856500
*                                     determine the relative importance 09906500
*                                     to the installation of LLA        09956500
*                                     providing this module (input and  10006500
*                                     output). See also LLP2VALU.       10056500
         ORG   LLP2WGTS                                                 10106500
LLP2WRSP DS    F                      Response time weighting factor.   10156500
LLP2WCTN DS    F                      Contention weighting factor.      10206500
LLP2WSTO DS    F                      Storage weighting factor.         10256500
LLP2WUSR DS    F                      User defined weighting factor.    10306500
*-------------------Historical data---------------------------------    10356500
LLP2AVUC DS    F                      System high real storage          10406500
*                                     unreferenced interval count(UIC). 10456500
*                                     Units of UIC are in seconds.      10506500
LLP2AVMG DS    F                      Expanded storage migration age    10556500
*                                     in seconds.                       10606500
LLP2AVCT DS    F                      10,000 times the average number   10656500
*                                     of fetches of this module in      10706500
*                                     recent statistics samples.        10756500
LLP2NTVL DS    2F                     Average length of recent          10806500
*                                     statistics samples in CPU TOD     10856500
*                                     clock units.                      10906500
LLP2PEMN DS    2F                     Minimum program fetch elapsed     10956500
*                                     time in CPU TOD clock units.      11006500
*                                     '7FFFFFFF'X if never program      11056500
*                                     fetched. (e.g. if staged via      11106500
*                                     a deleted alias)                  11156500
LLP2LEMN DS    2F                     Minimum LLA fetch elapsed time    11206500
*                                     in CPU TOD clock units.           11256500
*                                     '7FFFFFFF'X if never LLA fetched. 11306500
LLP2EPCT DS    F                      Count of entry point names for    11356500
*                                     this module. There are LLP2EPCT   11406500
*                                     LLP2EP sections for this LLP2.    11456500
LLP2EPTR DS    F                      Pointer to the first entry in     11506500
*                                     the entry point section    @L2A   11556500
LLP2EPLN DS    F                      Length of each entry point        11606500
*                                     section.                   @L2A   11656500
LLP2XPTR DS    F                      Pointer to the extension          11706500
*                                     section, LLP2X.            @L2A   11756500
LLP2X1US DS    F                      Contains a 31-bit address pointer 11806500
*                                     to a four byte user data area     11856500
*                                     which is reserved for CSVLLIX1 to 11906500
*                                     use. The four byte user data is   11956500
*                                     aligned on a full word boundary.  12006500
*                                     It is initially zero and          12056500
*                                     subsequently contains any value   12106500
*                                     stored in it by CSVLLIX1.         12156500
*                                     CSVLLIX1 can optionally use the   12206500
*                                     four byte user data area to pass  12256500
*                                     a parameter (or the address of a  12306500
*                                     parameter list) to itself on      12356500
*                                     subsequent invocations. The four  12406500
*                                     byte field will be reset to zero  12456500
*                                     when LLA is restarted.            12506500
*                                     It is passed to CSVLLIX2 to       12556500
*                                     allow the exits to pass           12606500
*                                     information to each other. @L2A   12656500
LLP2END1 EQU   *                      End+1 of LLP2 base section.       12706500
*-------------------Entry point section-----------------------------    12756500
LLP2EP   DSECT                        Data for this entry point from    12806500
*                                     the most recent statistics        12856500
*                                     sample. There is one of these     12906500
*                                     sections for each entry point in  12956500
*                                     the module. There are LLP2EPCT    13006500
*                                     entry points in this module. The  13056500
*                                     LLP2EP sections follow the LLP2   13106500
*                                     section.                          13156500
LLP2PFCT DS    F                      Program fetch count.              13206500
LLP2LFCT DS    F                      LLA fetch count.                  13256500
LLP2PEMX DS    2F                     Maximum program fetch elapsed     13306500
*                                     time in CPU TOD clock units.      13356500
*                                     '00000000'X if no data exists.    13406500
LLP2LEMX DS    2F                     Maximum LLA fetch elapsed         13456500
*                                     time in CPU TOD clock units.      13506500
*                                     '00000000'X if no data exists.    13556500
LLP2IPDV DS    2F                     Sum of deltas for the sample of   13606500
*                                     program fetch duration minus      13656500
*                                     minimum program fetch, in         13706500
*                                     TOD units.                   @L2A 13756500
LLP2ILDV DS    2F                     Sum of deltas for the sample of   13806500
*                                     LLA fetch duration minus          13856500
*                                     minimum LLA fetch, in             13906500
*                                     TOD units.                   @L2A 13956500
LLP2HPCD DS    2F                     PGMF contention delta for         14006500
*                                     the name. The contention delta    14056500
*                                     is the rolling average of         14106500
*                                     LLP2IPDV divided by LLP2PFCT @L2A 14156500
LLP2HLCD DS    2F                     LLAF contention delta for         14206500
*                                     the name. The contention delta    14256500
*                                     is the rolling average of         14306500
*                                     LLP2ILDV divided by LLP2LFCT @L2A 14356500
LLP2PDS2 DS    CL76                   BLDL format PDS directory entry   14406500
*                                     for this entry point. (Mapped     14456500
*                                     by IHAPDS.)                       14506500
*-------------------Extension section-------------------------------    14556500
LLP2X    DSECT                        The extension to the LLP2         14606500
*                                     parameter list. The LLP2X is      14656500
*                                     located in contiguous storage     14706500
*                                     following the last entry of       14756500
*                                     the LLP2EP array. On entry to     14806500
*                                     CSVLLIX2, its address is in       14856500
*                                     LLP2XPTR.                   @L1A  14906500
LLP2XDSN DS     CL44                  The data set name for the entry   14956500
*                                     points in the LLP2EP array.       15006500
*                                     (Padded on the right with blanks) 15056500
*                                                                 @L1A  15106500
LLP2VSTA DS     F                     The staging threshhold for this   15156500
*                                     library. Modules whose value is   15206500
*                                     above this threshhold are added   15256500
*                                     to the staging candidate list.    15306500
*                                     See prolog for more information   15356500
*                                     about this threshhold.     @L2A   15406500
LLP2VDES DS     F                     The deactivating threshhold for   15456500
*                                     this library. Modules whose       15506500
*                                     value is below this threshhold    15556500
*                                     and are currently staged are      15606500
*                                     deactivated.                      15656500
*                                     See prolog for more information   15706500
*                                     about this threshhold.     @L2A   15756500
LLP2LPCD DS     2F                    Average PGM contention delta for  15806500
*                                     the library in TOD units per      15856500
*                                     byte                        @L2A  15906500
LLP2LLCD DS     2F                    Average LLA contention delta for  15956500
*                                     the library in TOD units per      16006500
*                                     byte                        @L2A  16056500
*-------------------Level number------------------------------------    16106500
LLP2LNUM  EQU   2                     Value for LLP2LEVL.         @L2C  16156500
*-------------------Return and reason codes-------------------------    16206500
#RCIX2_EVALUATE EQU 0                 CSVLLIX2 return code in register  16256500
*                                     15 which directs LLA Staging to   16306500
*                                     use the calculated LLA value of   16356500
*                                     this module to decide whether or  16406500
*                                     not to stage the module.          16456500
#RCIX2_OVERRIDE EQU 4                 CSVLLIX2 return code in register  16506500
*                                     15 which directs LLA Staging to   16556500
*                                     stage or unstage the module       16606500
*                                     according to the reason code in   16656500
*                                     register 0.                       16706500
#RSIX2_EVALUATE EQU 0                 CSVLLIX2 reason code in register  16756500
*                                     0 when the return code is         16806500
*                                     RCIX2_EVALUATE meaning that LLA   16856500
*                                     Staging must use the calculated   16906500
*                                     LLA value of this module to       16956500
*                                     decide whether or not to stage    17006500
*                                     the module.                       17056500
#RSIX2_MUSTSTAGE EQU 1                CSVLLIX2 reason code in register  17106500
*                                     0 when the return code is         17156500
*                                     RCIX2_OVERRIDE meaning that LLA   17206500
*                                     Staging must stage this module.   17256500
#RSIX2_MUSTNTSTAGE EQU 2              CSVLLIX2 reason code in register  17306500
*                                     0 when the return code is         17356500
*                                     RCIX2_OVERRIDE meaning that LLA   17406500
*                                     Staging must not use a staged     17456500
*                                     copy of the module.               17506500
         MEND  ,                                                     */ 17556500
*%LLP22: ;                                                              17606500
*DCL 1 LLP2 BASED(LLP2PTR) BDY(WORD),       /* LLA Staging exit         17656500
*                                     parameters.                    */ 17706500
* /*----------------Header-------------------------------------------*/ 17756500
*      3 LLP2ID CHAR(4),           /* LLP2 id = LLP2TEXT.            */ 17806500
*      3 LLP2LEVL FIXED(8),        /* LLP2 level number = LLP2LNUM.  */ 17856500
*      3 LLP2RSV1 BIT(8),          /* Reserved.                      */ 17906500
*      3 LLP2LEN FIXED(16),        /* Length of the LLP2 including      17956500
*                                     all its entry point sections      18006500
*                                     (LLP2EP) and its extension        18056500
*                                     LLP2X. There are LLP2EPCT         18106500
*                                     entry point sections.      @01C*/ 18156500
* /*----------------Inputs and outputs to control LLA Staging-------*/  18206500
*      3 LLP2USER FIXED(31),       /* Pointer to a four byte user data  18256500
*                                     area which is reserved for        18306500
*                                     CSVLLIX2 to use. The four byte    18356500
*                                     user data area is aligned on a    18406500
*                                     full word boundary.  It is        18456500
*                                     initially zero and subsequently   18506500
*                                     contains any value stored in it   18556500
*                                     by CSVLLIX2.  CSVLLIX2 can        18606500
*                                     optionally use the four byte user 18656500
*                                     data area to pass a parameter (or 18706500
*                                     the address of a parameter list)  18756500
*                                     to itself on subsequent           18806500
*                                     invocations.  The four byte field 18856500
*                                     will be reset to zero when LLA is 18906500
*                                     restarted.                     */ 18956500
*                                                                       19006500
*      3 LLP2VALU ,                /* Factors of value, each in the     19056500
*                                     range -10,000 to +10,000, which   19106500
*                                     indicate the relative value to    19156500
*                                     the system of LLA providing this  19206500
*                                     module to users. See also         19256500
*                                     LLP2WGTS.                      */ 19306500
*        5 LLP2VRSP FIXED(31),     /* Response time value  (input).     19356500
*                                     Derived from observed fetch       19406500
*                                     durations and relative activity.  19456500
*                                                                    */ 19506500
*        5 LLP2VCTN FIXED(31),     /* Contention value  (input).        19556500
*                                     Derived from the degree of        19606500
*                                     variability in response times     19656500
*                                     for program fetch and LLA fetch*/ 19706500
*        5 LLP2VSTO FIXED(31),     /* Processor storage value (input)   19756500
*                                     Derived from module size and      19806500
*                                     response time savings if staged.  19856500
*                                                                    */ 19906500
*        5 LLP2VUSR FIXED(31),     /* User defined value (output).      19956500
*                                     Default is zero.               */ 20006500
*                                                                       20056500
*      3 LLP2WGTS  ,               /* Weighting factors in the range    20106500
*                                     0-100 used by LLA Staging to      20156500
*                                     determine the relative importance 20206500
*                                     to the installation of LLA        20256500
*                                     providing this module (input and  20306500
*                                     output). See also LLP2VALU.    */ 20356500
*        5 LLP2WRSP FIXED(31),     /* Response time weighting factor.*/ 20406500
*        5 LLP2WCTN FIXED(31),     /* Contention weighting factor.   */ 20456500
*        5 LLP2WSTO FIXED(31),     /* Storage weighting factor.      */ 20506500
*        5 LLP2WUSR FIXED(31),     /* User defined weighting factor. */ 20556500
* /*----------------Historical data----------------------------------*/ 20606500
*      3 LLP2AVUC FIXED(31),       /* Time averaged system high real    20656500
*                                     storage unreferenced interval     20706500
*                                     count (UIC). Units of UIC are     20756500
*                                     in seconds.                    */ 20806500
*      3 LLP2AVMG FIXED(31),       /* Time averaged expanded storage    20856500
*                                     migration age in seconds.      */ 20906500
*      3 LLP2AVCT FIXED(31),       /* 10,000 times the average number   20956500
*                                     of fetches of this module in      21006500
*                                     recent statistics samples.     */ 21056500
*      3 LLP2NTVL CHAR(8) BDY(WORD),/* Average length of recent         21106500
*                                     statistics samples in CPU TOD     21156500
*                                     clock units.                   */ 21206500
*      3 LLP2PEMN CHAR(8) BDY(WORD), /* Minimum program fetch elapsed   21256500
*                                     time in CPU TOD clock units.      21306500
*                                     '7FFFFFFF'X if never program      21356500
*                                     fetched. (e.g. if staged via      21406500
*                                     a deleted alias)               */ 21456500
*      3 LLP2LEMN CHAR(8) BDY(WORD), /* Minimum LLA fetch elapsed       21506500
*                                     time in CPU TOD clock units.      21556500
*                                     '7FFFFFFF'X if never LLA fetched. 21606500
*                                                                    */ 21656500
* /*-----------------------------------------------------------------*/ 21706500
*      3 LLP2EPCT FIXED(31),       /* Count of entry point names for    21756500
*                                     this module. There are LLP2EPCT   21806500
*                                     LLP2EP entries.                */ 21856500
*      3 LLP2EPTR PTR(31),         /* Pointer to the 1st entry in the   21906500
*                                     entry point section.       @L2A*/ 21956500
*      3 LLP2EPLN FIXED(31),       /* Length of each entry point        22006500
*                                     section.                   @L2A*/ 22056500
*      3 LLP2XPTR PTR(31),         /* Pointer to the extension          22106500
*                                     section.                   @L2A*/ 22156500
*      3 LLP2X1US PTR(31),         /* Pointer to a four byte user data  22206500
*                                     area which is reserved for        22256500
*                                     CSVLLIX1 to use. The four byte    22306500
*                                     user data area is aligned on a    22356500
*                                     full word boundary.  It is        22406500
*                                     initially zero and subsequently   22456500
*                                     contains any value stored in it   22506500
*                                     by CSVLLIX1.  CSVLLIX1 can        22556500
*                                     optionally use the four byte user 22606500
*                                     data area to pass a parameter (or 22656500
*                                     the address of a parameter list)  22706500
*                                     to itself on subsequent           22756500
*                                     invocations.  The four byte field 22806500
*                                     will be reset to zero when LLA is 22856500
*                                     restarted.                        22906500
*                                     It is passed to CSVLLIX2 to       22956500
*                                     allow the exits to pass           23006500
*                                     information to each other. @L2A*/ 23056500
*      3 LLP2END1 CHAR(0) BDY(WORD); /* End+1 of LLP2 base section.  */ 23106500
* /*----------------Entry point section------------------------------*/ 23156500
*DCL 1 LLP2EP BASED BDY(WORD),     /* Data for each entry               23206500
*                                     point from the most recent        23256500
*                                     statistics sample. There are      23306500
*                                     LLP2EPCT entry points.         */ 23356500
*        5 LLP2PFCT FIXED(31),     /* Program fetch count.           */ 23406500
*        5 LLP2LFCT FIXED(31),     /* LLA fetch count.               */ 23456500
*        5 LLP2PEMX CHAR(8) BDY(WORD), /* Maximum program fetch elapsed 23506500
*                                     time in CPU TOD clock units.      23556500
*                                     '00000000'X if no data exists. */ 23606500
*        5 LLP2LEMX CHAR(8) BDY(WORD), /* Maximum LLA fetch elapsed     23656500
*                                     time in CPU TOD clock units.      23706500
*                                     '00000000'X if no data exists. */ 23756500
*        5 LLP2IPDV CHAR(8) BDY(WORD), /* Sum of deltas for the sample  23806500
*                                      of program fetch duration        23856500
*                                      minus minimum program fetch, in  23906500
*                                      TOD units.                @L2A*/ 23956500
*        5 LLP2ILDV CHAR(8) BDY(WORD), /* Sum of deltas for the sample  24006500
*                                      of LLA fetch duration minus      24056500
*                                      minimum LLA fetch, in TOD        24106500
*                                      units.                    @L2A*/ 24156500
*        5 LLP2HPCD CHAR(8) BDY(WORD), /* PGMF contention delta for  /  24206500
*                                     the name. The contention delta    24256500
*                                     is the rolling average of         24306500
*                                     LLP2IPDV divided by LLP2PFCT      24356500
*                                                                @L2A*/ 24406500
*        5 LLP2HLCD CHAR(8) BDY(WORD), /* PGMF contention delta for  /  24456500
*                                     the name. The contention delta    24506500
*                                     is the rolling average of         24556500
*                                     LLP2ILDV divided by LLP2LFCT      24606500
*                                                                @L2A*/ 24656500
*        5 LLP2PDS2 CHAR(76);      /* BLDL format PDS directory entry   24706500
*                                     for this entry point. (Mapped     24756500
*                                     by IHAPDS.)                    */ 24806500
* /*----------------Extension section--------------------------------*/ 24856500
*DCL 1 LLP2X BASED (LLP2XPTR) BDY(WORD), /* The extension to the LLP2   24906500
*                                     parameter list. The LLP2X is      24956500
*                                     located in contiguous storage     25006500
*                                     following the last entry of       25056500
*                                     the LLP2EP array.          @L1A*/ 25106500
*        3 LLP2XDSN CHAR(44) BDY(WORD), /* The data set name for the    25156500
*                                     entry points in the LLP2EP array. 25206500
*                                     (Padded on the right with blanks) 25256500
*                                                                @L1A*/ 25306500
*        3 LLP2VSTA FIXED(31),        /*The staging threshhold for this 25356500
*                                     library. Modules whose value is   25406500
*                                     above this threshhold are added   25456500
*                                     to the staging candidate list.    25506500
*                                     See prolog for more information   25556500
*                                     about this threshhold.     @L2A*/ 25606500
*        3 LLP2VDES FIXED(31),        /*The deactivating threshhold for 25656500
*                                     this library. Modules whose       25706500
*                                     value is below this threshhold    25756500
*                                     and are currently staged are      25806500
*                                     deactivated.                      25856500
*                                     See prolog for more information   25906500
*                                     about this threshhold.     @L2A*/ 25956500
*        3 LLP2LPCD CHAR(8),          /* Average PGM contention delta   26006500
*                                     for the library in TOD units per  26056500
*                                     byte                       @L2A*/ 26106500
*        3 LLP2LLCD CHAR(8);          /* Average LLA contention delta   26156500
*                                     for the library in TOD units per  26206500
*                                     byte                       @L2A*/ 26256500
* /*----------------Declarations needed by CSVLLIX2------------------*/ 26306500
*DCL LLP2TEXT CHAR(4) CONSTANT('LLP2'), /* Value for LLP2ID.         */ 26356500
*    LLP2LNUM FIXED(8) CONSTANT(2); /* Value for LLP2LEVL.       @L1C*/ 26406500
*DCL #RCIX2_EVALUATE FIXED(31) CONSTANT(0); /* CSVLLIX2 return code in  26456500
*                                     register 15 which directs LLA     26506500
*                                     Staging to use the calculated LLA 26556500
*                                     value of this module to decide    26606500
*                                     whether or not to stage the       26656500
*                                     module.                        */ 26706500
*DCL #RCIX2_OVERRIDE FIXED(31) CONSTANT(4); /* CSVLLIX2 return code in  26756500
*                                     register 15 which directs LLA     26806500
*                                     Staging to stage or unstage the   26856500
*                                     module according to the reason    26906500
*                                     code in register 0.            */ 26956500
*DCL #RSIX2_EVALUATE FIXED(31) CONSTANT(0); /* CSVLLIX2 reason code in  27006500
*                                     register 0 when the return code   27056500
*                                     is RCIX2_EVALUATE meaning that    27106500
*                                     LLA Staging must use the          27156500
*                                     calculated LLA value of this      27206500
*                                     module to decide whether or not   27256500
*                                     to stage the module.           */ 27306500
*DCL #RSIX2_MUSTSTAGE FIXED(31) CONSTANT(1); /* CSVLLIX2 reason code in 27356500
*                                     register 0 when the return code   27406500
*                                     is RCIX2_OVERRIDE meaning that    27456500
*                                     LLA Staging must stage this       27506500
*                                     module.                        */ 27556500
*DCL #RSIX2_MUSTNTSTAGE FIXED(31) CONSTANT(2); /* CSVLLIX2 reason code  27606500
*                                     in register 0 when the return     27656500
*                                     code is RCIX2_OVERRIDE meaning    27706500
*                                     that LLA Staging must not use a   27756500
*                                     staged copy of this module.    */ 27806500
