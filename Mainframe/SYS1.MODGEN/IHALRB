*         %GOTO  LRB0;           /*  BILINGUAL LRB MACRO                00050000
        MACRO                                                           00100000
        IHALRB &LIST=NO                                                 00150000
              PUSH PRINT                                                00200000
*            */                                                         00250000
*%LRB0: ;                                                               00300000
*/* START OF SPECIFICATIONS ******************************************* 00350000
*                                                                       00400000
*01* ACRONYM: LRB                                                       00450000
*01* EXTERNAL CLASSIFICATION: DMTI                                      00500000
*01* END OF EXTERNAL CLASSIFICATION:                                    00550000
*01* PROPRIETARY STATEMENT:                                             00600000
*                                                                       00650000
*   COPYRIGHT:                                                          00675000
*      5647-A01                                                         00712500
*      THIS MODULE IS "RESTRICTED MATERIALS OF IBM"                     00750000
*      (C) COPYRIGHT IBM CORP. 1981, 2000                               00800000
*      LICENSED MATERIALS - PROPERTY OF IBM                             00850000
*                                                                       01000000
*   STATUS - HBB7703                                                    01050000
*                                                                       01100000
*01* DESCRIPTIVE NAME:  LOGREC Buffer                                   01105700
*01* MACRO NAME:  IHALRB                                                01111400
*01* DSECT NAME:  LRB                                                   01117100
*01* COMPONENT:  Machine Check Handler (BB1CT)                          01122800
*01* EYE-CATCHER:  None                                                 01128500
*01* STORAGE ATTRIBUTES:                                                01134200
*02*   SUBPOOL:                                                         01139900
*            239  when created by Machine Check Handler,                01145600
*            245  when created by MIH or DDR                            01151300
*02*   KEY:   0                                                         01157000
*02*   RESIDENCY:  Above 16M line                                       01162700
*01* SIZE: Variable                                                     01168400
*01* CREATED BY:  MCH - modules IGFRIM00, IGFPBUCR                      01174100
*01* POINTED TO BY:                                                     01179800
*   PCCALRBR field of the PCCA data area                                01185500
*   PCCALRBV field of the PCCA data area                                01191200
*   RVTLRBPT field of the RVT data area                                 01196900
*01* SERIALIZATION:  MIH and DDR serialize dynamic storage              01202600
*   subpool 245.                                                        01208300
*01* FUNCTION:  Holds log record information that is put on             01214000
*   SYS1.LOGREC.                                                        01219700
*01* METHOD OF ACCESS:                                                  01225400
*                                                                       01233200
*      PL/S  - THE LRB HEADER IS ALWAYS PROVIDED.                       01250000
*              IT IS BASED ON LRBPTR. EITHER DECLARE LRBPTR             01300000
*              OR %LRBPTR = 'XYZPTR' TO SPECIFY ANOTHER                 01350000
*              POINTER.                                        @G860P2O 01400000
*                                                                       01450000
*              SEE THE MCHMCIC SECTION FOR THE DESCRIPTION              01500000
*              OF THE MCIC AND HOW TO SET ITS DECLARATION               01550000
*              ATTRIBUTES.                                     @G860P2O 01600000
*                                                                       01650000
*              IF ONLY THE LRB HEADER IS WANTED, CODE THE               01700000
*              FOLLOWING BEFORE INCLUDING IHALRB:                       01750000
*                  %IHALRBHEADER = 'ONLY'                      @G860P2O 01800000
*                                                                       01850000
*      BAL   - IHALRB  (MACRO CALL)                                     01900000
*              USING     LRB,REGA                                       01950000
*              LOAD REGA WITH LRB ADDRESS                               02000000
*              IF CHANNEL CHECK HANDLER SECTION IS TO BE USED           02050000
*              THE FOLLOWING MUST BE DONE BY THE USER                   02100000
*                                                                       02150000
*              LA  REGB,LRBCCLOG      OBTAIN ADDRESS OF LRBCCLOG        02200000
*              LH  REGC,LRBCLOGL      OBTAIN LENGTH OF LOGOUT           02250000
*              AR  REGB,REGC          ADD LENGTH TO STARTING ADDRESS    02300000
*              USING  LRBCFT,REGB                                       02350000
*                                                                       02400000
*              WHERE REGA AND REGB ARE ANY REGISTER OTHER THAN 0,       02450000
*                                                                       02450500
*01* NOTES:                                                             02451000
*               LRB                                                     02451500
*               ----------------------------------                      02452000
*          +00 | Header                           |                     02452500
*              |      LRBHTYPE                    |                     02453000
*              |----------------------------------|                     02453500
*              |      LRBHREL                     |                     02454000
*              |----------------------------------|                     02454500
*              |      LRBHSW0                     |                     02455000
*              |----------------------------------|                     02455500
*              |      LRBHSW1                     |                     02456000
*              |----------------------------------|                     02456500
*              |      LRBHSW2                     |                     02457000
*              |----------------------------------|                     02457500
*              |      LRBHSW3                     |                     02458000
*              |----------------------------------|                     02458500
*              |      LRBHCNT                     |                     02459000
*              |----------------------------------|                     02459500
*              |      LRBHDT                      |                     02460000
*              |----------------------------------|                     02460500
*              |      LRBHCPID                    |                     02461000
*              |============================------|                     02461500
*          +18 | LRBMMCH                          |                     02462000
*              |      LRBMLNH                     |                     02462500
*              |----------------------------------|                     02463000
*              |      LRBMWSC                     |                     02463500
*              |----------------------------------|                     02464000
*              |      LRBMCEIA                    |                     02464500
*              |----------------------------------|                     02465000
*              |      LRBMPDAR                    |                     02465500
*              |----------------------------------|                     02466000
*              |      LRBMRSRS                    |                     02466500
*              |----------------------------------|                     02467000
*              |      LRBMPWL                     |                     02467500
*              |----------------------------------|                     02468000
*              |      LRBMMOSW                    |                     02468500
*              |----------------------------------|                     02469000
*              |      LRBMFLO                     |                     02469500
*              |          LRBMCIC                 |                     02470000
*              |----------------------------------|                     02470500
*              |   char(4)                        |                     02471000
*              |----------------------------------|                     02471500
*              |          LRBMEDCD                |                     02472000
*              |----------------------------------|                     02472500
*              |          LRBMFSAE/LRBMFSA        |                     02473000
*              |            LRBMFSAH              |                     02473500
*              |            LRBMFSAL              |                     02474000
*              |----------------------------------|                     02474500
*              |          LRBFLA                  |                     02475000
*              |            LRBSSPSW              |                     02475500
*              |            LRBADRSI              |                     02476000
*              |----------------------------------|                     02476500
*              |          LRBMFLOR                |                     02477000
*              |----------------------------------|                     02477500
*              |          LRBAREGS                |                     02478000
*              |----------------------------------|                     02478500
*              |          LRBFREGS                |                     02479000
*              |----------------------------------|                     02479500
*              |          LRBGREGS                |                     02480000
*              |----------------------------------|                     02480500
*              |          LRBCREGS                |                     02481000
*              |----------------------------------|                     02481500
*              |      LRBMEVIA                    |                     02482000
*              |----------------------------------|                     02482500
*              |      LRBMMFLG                    |                     02483000
*              |----------------------------------|                     02483500
*              |   char(2)                        |                     02484000
*              |----------------------------------|                     02484500
*              |      LRBAFPR                     |                     02485000
*              |          LRBFPR1                 |                     02485500
*              |            .                     |                     02486000
*              |            .                     |                     02486500
*              |          LRBFPR15                |                     02487000
*              |          LRBFPCR                 |                     02487500
*              |----------------------------------|                     02488000
*              |   char(8))                       |                     02488500
*              |----------------------------------|                     02489000
*              |      LRBG64H                     |                     02489500
*              |----------------------------------|                     02490000
*              |      LRBC64S                     |                     02490500
*              |----------------------------------|                     02491000
*              |   char(4)                LRBEND  |                     02491500
*               ----------------------------------                      02492000
*                                                                       02500000
*                                                                       02543400
* DISTRIBUTION LIBRARY: AMODGEN                                         02545600
*                                                                       02547800
*   F.E.'S                                                              02550000
*      MICROFICHE LISTINGS - IHALRB                                     02600000
*                                                                       02650000
*   CHANGE-ACTIVITY                                                     02700000
*      C033100-033000,066000,141500,152000,181300,184800       @ZA34554 02750000
*      C206500,229600,245100-245300,310000,323000,345300       @ZA34554 02800000
*      C350300,363000                                          @ZA34554 02850000
*      A141680-142310,310100-310200                            @ZA34554 02900000
*      C315570,315830,149600,149770                            @ZA34554 02950000
*      C066000,151500,181300,206700                            @ZA36587 03000000
*      OS/VS2 HBB2102                                          @G860P2O 03050000
*      @ZA57795   SERVICE PROCESSOR DAMAGE MACHINE CHECK       @ZA57795 03100000
*      $H1=PGDALLOC JBB2133 821015 PD11: FRAME DEALLOCATION        @H1A 03150000
*      $D1=DCRR0059 JBB2133 840827 PD11: EXTENDED STORAGE AND      @D1A 03200000
*                                        DELAYED ACCESS SUPPORT.   @D1A 03250000
*      $H2=VF       JBB2214 840912 PD11: VECTOR FEATURE SUPPORT.   @H2A 03300000
*      @ZA90423   NO LOG TO SYS1.LOGREC INDICATION.            @ZA90423 03312500
*      $L1=AR       HBB3310 860115 PD11: ACCESS REGISTER SUPPORT.  @L1A 03325000
*      $01=OZ97887  JBB2133 860717 PD22: FLAG FOR RECOVERED ERRORS @01A 03337500
*      $P1=PC40820  HBB3310 870406 PD1V: STORE-STATUS FOR FAILING  @P1A 03341600
*                                        PROCESSOR AFTER MFA.      @P1A 03345700
*                                        RESULTED IN APAR OY03300  @P1A 03346600
*      $P2=PC41065  HBB3310 870603 PDAF: USE NEXT BIT FOR LRBMFA.  @P2A 03347500
*      $L2=MACLIB   JBB3313 881028 PDAF: MACRO LIBRARY RESTRUCTURE @L2A 03347700
*                                        SUPPORT. AMODGEN/MODGEN.  @L2A 03347900
*      $L3=CLOCK    HBB4410 880104 PDAF: ETR SUPPORT.              @L3A 03348100
*      $T1=OY11020  JBB2133 880229 PDAF: PR/SM (BFY) SUPPORT.      @T1A 03348500
*      $H3=CNITG    HBB4410 890501 PDAF: CONSOLE INTEGRATION.      @H3A 03349200
*      $D2=DCRR1033 HBB4410 890918 PDHC: SUPPORT FOR NEW SIDE ID        03349400
*                                        CHANGE MACHINE CHECK.     @D2A 03349600
*      $P3=PEO3931  HBB4410 900330 PDHC: ADD LRBMEDEC BIT.         @P3A 03349700
*      $P4=PEO3844  HBB4410 900330 PDHC: DOCUMENTATION.                 03349800
*      $T2=OY37121  HBB3310 910419 PDHC: ALTERNATE PROCESSOR RETRY @T2A 03349900
*      $P5=PIG2891  HBB5510 931109 PDIW: DEFINE LRBEND             @P5A 03361000
*      $P6=PIG3758  HBB5510 931119 PDHC: PROLOG CHANGES            @P6A 03372100
*      $02=OW04285  HBB4410 940513 PDHC: FLAG TO ABEND THE IUOW AT      03374900
*                                        REQUEST OF TIMER SLIH     @02A 03377700
*      $P7=PN70771  HBB5520 940908 PDHC: Make SHOWHDR compliant    @P7A 03380500
*      $L4=IEEEMCH  HBB6606 970807 PDXB: Additional FPRs                03381900
*      $L5=64BITMCH HBB7703 971101 PDXB: 64-bit GPRs                    03382300
*      $P8=PXD0038  HBB7703 990331 PDHC: DOCUMENTATION.            @P8A 03382700
*                                                                       03383300
* END OF SPECIFICATIONS ********************************************/   03416600
*%GOTO LRB1;   /*                                                       03450000
LRB      DSECT                                                          03500000
*                                                                       03550000
*******************************************************************     03600000
*                                                                 *     03650000
*                 COMMON HEADER SECTION                           *     03700000
*                                                                 *     03750000
*******************************************************************     03800000
*                                                                       03850000
LRBHTYPE DS    X'0'          TYPE OF RECORD                             03900000
*     RECORD TYPE EQUATES                                               03950000
LRBHSLH  EQU   X'23'               SUBCHANNEL LOGOUT RECORD    @G860P2O 04000000
LRBHCRW  EQU   X'25'               CHANNEL REPORT WORD RECORD  @G860P2O 04050000
LRBHREC  EQU   X'60'               DDR RECORD                           04100000
LRBHMDR  EQU   X'90'               MDR RECORD                           04150000
LRBHMIH  EQU   X'71'               MIH RECORD                  @G860P2O 04200000
LRBHMCH  EQU   X'13'               MCH RECORD                           04250000
LRBHTER  EQU   X'81'         SYSTEM TERMINATION RECORD                  04300000
LRBHSRS  EQU   X'84'               SYSTEM RESTARTABLE WAIT     @ZA34554 04350000
LRBHMCF  EQU   X'A0'               MCH FRAME RECORD            @ZA34554 04400000
LRBHCCF  EQU   X'B0'               CCH FRAME RECORD            @ZA34554 04450000
LRBHSFW  EQU   X'40'               4X TYPE RECORDS ARE SOFTWARE TYPE    04500000
*                                  MAPPED BY IHAHDR            @ZA34554 04550000
LRBHSFR  EQU   X'4F'               "                         " @ZA34554 04600000
*                                                                       04650000
LRBHREL  DS    X'0'          RELEASE NUMBER                             04700000
LRBHSYS  EQU   LRBHREL                 SYSTEM TYPE                      04750000
*     EQUATES FOR LRBHSYS                                               04800000
LRBHVS2   EQU   X'80'                OS/VS2 SYSTEM                      05050000
*                                                                       05100000
LRBHSW0  DS    X'0'          INDEPENDENT SWITCH BYTE                    05150000
*     EQUATES FOR LRBHSW0                                               05200000
LRBHMORE EQU   X'80'               MULTIPLE RECORDS                     05250000
LRBHNS   EQU   X'40'               STCK USED / NS MACHINE          @H3C 05300000
LRBNOLOG EQU   X'20'               NO LOG RECORD FLAG.        @ZA90423  05325000
LRBHEAB  EQU   X'10'               EXTENDED ADDRESSING        @G860P2O  05350000
LRBHTMC  EQU   X'08'               TIME MACRO USED                      05400000
*                                                                       05450000
LRBHSW1  DS    X'0'          DEPENDENT SWITCH BYTE 0                    05500000
*  DDR EQUATES FOR LRBHSW1                                              05550000
LRBRPRIM EQU   X'80'         DDR PRIMARY STORAGE RECONFIG               05600000
LRBRSEC  EQU   X'40'         DDR SEC STORAGE RECONFIG                   05650000
LRBROPER EQU   X'20'         DDR OPERATOR REQUEST RECONFIG              05700000
LRBRSYSI EQU   X'10'         DDR PERMANENT ERROR REQUEST                05750000
*   MCH EQUATES FOR LRBHSW1                                             05800000
LRBMNOIO EQU   X'80'         1: IOSRMCH TELLING IGFPTSIG NOT TO         05850000
*                            PERFORM ANY I/O                   @G860P2O 05900000
LRBMNVF  EQU   X'40'         LRB MAY NOT BE VALID              @ZA34554 05950000
LRBMSYST EQU   X'20'         SYSTEM TERMINATED                          06000000
LRBTRACE EQU   X'10'         SET TO 1 BY IGFPMCIH BEFORE ALTRTRC        06050000
*                            SUSPEND AND SET TO 0 AFTER                 06100000
LRBDAT   EQU   X'08'         SET TO 1 BY IGFPMCIH BEFORE LOADING        06150000
*                            THE DATON PSW TO GOTO IGFPMAIN             06200000
LRBMRECV EQU   X'04'         SET TO 1 WHEN AN ERROR IS COMPLETELY       06216600
*                            RECOVERED                             @01A 06233200
LRBMDEG  EQU   X'02'         SET TO 1 WHEN A RESOURCE IS TAKEN          06236000
*                            OFFLINE BUT NO WORK IS ABENDED        @T2A 06238800
LRBMFA   EQU   X'01'         SET TO 1 AFTER A MALFUNCTION               06241600
*                            ALERT                            @P1A @P2C 06245800
*                                                                       06250000
LRBHSW2  DS    X'0'          DEPENDENT SWITCH BYTE 1                    06300000
LRBMACT  EQU   LRBHSW2       MCH BUFFER ACTIVE FLAG                     06350000
*                                                                       06400000
LRBHSW3  DS    X'0'          DEPENDENT SWITCH BYTE 2                    07000000
LRBMCLB  EQU   LRBHSW3       LOGREC CLOBBER FLAG (INDICATES LOGREC      07050000
*                            BUFFER OVERLAYED)                          07100000
*                                                                       07150000
LRBHCNT  DS    X'0'          PHYSICAL RECORDS PER LOGICAL REC CNT       07200000
         DS    X'0'          RESERVED                                   07250000
LRBHDATE DS    X'00000000'   DATE                                       07300000
LRBHTIME DS    X'00000000'   TIME                                       07350000
*                                                                       07400000
         DS    0D                                                       07450000
LRBHCPID DS    0XL8 .        STIDP OPERAND FIELD                        07500000
         DS    XL1 .         RESERVED                                   07550000
LRBHCSER DS    XL3 .         CPU SERIAL NUMBER                          07600000
LRBHMDL  DS    XL2 .         CPU MODEL NUMBER                           07650000
         DS    XL2 .         RESERVED                              @H3C 07700000
*                                                                       07750000
LRBBASE  DS    0C  .         END OF HEADER                     @ZA36587 07800000
*                                                                       07850000
*******************************************************************     07900000
*                                                                 *     07950000
*                 MACHINE CHECK HANDLER RECORD                    *     08000000
*                                                                 *     08050000
*******************************************************************     08100000
*                                                                       08150000
LRBMMCH  ORG   LRBBASE                                                  08200000
LRBMLNH  DS    F .           LENGTH OF LOGREC RECORD                    08250000
LRBMWSC  DS    XL4 .         WAIT STATE CODE                            08300000
*                                                                       08350000
LRBMCEIA DS    0XL4 .        MACHINE CHECK ERROR INDICATOR AREA         08400000
*                                                                       08450000
LRBMTERM DS    XL1 .         TERMINAL ERROR FLAGS                       08500000
*                                                                       08550000
LRBMTTHR EQU   X'20'         HARD ERROR THRESHOLD FLAG         @G55CP2P 08700000
LRBMTSEC EQU   X'10' .       SECONDARY ERROR FLAG                       08750000
LRBMTCKS EQU   X'08' .       CHECK STOP FLAG                            08800000
LRBMTINV EQU   X'01' .       INVALID LOGOUT FLAG (SET WHEN LRBMCIC=0    08925000
*                            OR WHEN A STORE-STATUS-AT-ADDRESS HAS @P1C 08950000
*                            FAILED AFTER A MALFUNCTION ALERT)     @P1C 08975000
*                                                                       09000000
LRBMHARD DS    XL1 .         HARD MACHINE ERROR FLAGS                   09050000
*                                                                       09100000
LRBMHHRD EQU   X'80' .       ASSUMED HARD ERROR FLAG                    09150000
LRBMHVS  EQU   X'20' .       VECTOR SOURCE FLAG                    @H2A 09350000
LRBMHSD  EQU   X'10' .       SYSTEM DAMAGE FLAG                @G555P2M 09400000
LRBMHINV EQU   X'08' .       REGISTER OR PSW INVALID FLAG               09450000
LRBMHSTO EQU   X'04' .       HARD STORAGE FAILURE FLAG                  09500000
LRBMHSPF EQU   X'02' .       HARD PROTECTION KEY ERROR FLAG             09550000
LRBMHIPD EQU   X'01' .       INSTRUCTION PROCESSING DAMAGE FLAG         09600000
*                                                                       09650000
LRBMINTM DS    XL1 .         INTERMEDIATE ERROR FLAGS                   09700000
*                                                                       09750000
LRBMIPSD EQU   X'80'         PRIMARY SYNC DAMAGE                   @L3A 09800000
LRBMIAFD EQU   X'40'         ETR ATTACHMENT DAMAGE                 @L3A 09850000
LRBMISWL EQU   X'20'         SWITCH TO LOCAL                       @L3A 09900000
LRBMISYC EQU   X'10'         ETR SYNC CHECK                        @L3A 09950000
LRBMITOD EQU   X'08' .       TOD CLOCK ERROR FLAG                       10000000
LRBMICKC EQU   X'04' .       CLOCK COMPARATOR ERROR FLAG                10050000
LRBMICTM EQU   X'02' .       CPU TIMER ERROR FLAG                       10100000
LRBMIVTE EQU   X'01' .       VECTOR THRESHOLD EXCEEDED FLAG.       @H2A 10150000
*                                                                       10200000
LRBMSOFT DS    XL1 .         SOFT MACHINE ERROR FLAGS                   10250000
*                                                                       10300000
LRBMSSFT EQU   X'80' .       ASSUMED SOFT ERROR FLAG                    10350000
LRBMSSPD EQU   X'40'         SERVICE PROCESSOR DAMAGE         @ZA57795  10400000
LRBMSVF  EQU   X'20'         VECTOR FAILURE FLAG.                  @H2A 10450000
LRBMDBSE EQU   X'10'         DOUBLE BIT STORAGE ERROR FLAG        @H1A  10500000
LRBMSTSL EQU   X'08' .       SYNC CHECK THRESHOLD EXCEEDED         @L3A 10550000
LRBMSECC EQU   X'04' .       ECC CORRECTED STORAGE ERROR FLAG           10600000
LRBMSHIR EQU   X'02' .       HIR CORRECTED PROCESSOR ERROR FLAG         10650000
LRBMSDG EQU    X'01' .       DG MACHINE CHECK OCCURRED        @G860P2O  10700000
*                                                                       10750000
LRBMPDAR DS    XL1 .         PDAR DATA (SUPPLIED BY RTM)                10800000
*                                                                       10850000
LRBMINVP EQU   X'10' .       STORAGE RECONFIGURED - PAGE INVALIDATED    11050000
LRBMRSRC EQU   X'08' .       STORAGE RECONFIGURATION STATUS AVAILABLE   11100000
*                              (FOLLOWING TWO BYTES ARE MEANINGFUL)     11150000
LRBMRSRF EQU   X'04' .       STORAGE RECONFIGURATION NOT ATTEMPTED      11200000
*                                                                       11350000
LRBMRSRS DS    XL2 .         STORAGE RECONFIGURATION STATUS    @G860P2O 11400000
*                                                                       11450000
LRBMPWL  DS    XL1 .         PHYSICAL WORD LENGTH (CHECKING BLOCK SIZE) 11500000
LRBMMOSW DS    XL8 .         MACHINE CHECK OLD PSW (FROM STORAGE        11550000
*                              LOCATIONS 48-55 PRE-ESAME or 352-367     11583300
*                              ESAME)                                   11616600
*                                                                       11650000
LRBMFLO  DS    0XL280 .      MACHINE CHECK FIXED LOGOUT AREA (MOVED     11700000
*                            FROM STORAGE LOCATIONS 232-511 PRE-ESAME   11733300
*                            or 232-255 and 4608-5119 partial ESAME)    11766600
*                                                                       11800000
LRBMCIC  DS    0XL8 .        MACHINE CHECK INTERRUPT CODE (MOVED FROM   11850000
*                              STORAGE LOCATIONS 232-239)               11900000
*                                                                       11950000
         DS    XL1 .         1ST BYTE OF LRBMCIC                        12000000
*                                                                       12050000
LRBMFSD  EQU   X'80' .       SYSTEM DAMAGE                              12100000
LRBMFPD  EQU   X'40' .       PROCESSING DAMAGE                          12150000
LRBMFSR  EQU   X'20' .       SYSTEM RECOVERY                            12200000
LRBMFCD  EQU   X'08' .       CLOCK DAMAGE                               12300000
LRBMFED  EQU   X'04' .       EXTERNAL DAMAGE                       @D1C 12350000
LRBMFVF  EQU   X'02' .       VECTOR FAILURE                        @H2C 12400000
LRBMFDG  EQU   X'01' .       DEGRADATION                                12450000
*                                                                       12500000
         DS    XL1 .         2ND BYTE OF LRBMCIC                        12550000
*                                                                       12600000
LRBMFWN  EQU   X'80' .       POWER WARNING                              12650000
LRBMFCP  EQU   X'40'         AN AVAILABLE CRW IS PENDING       @G860P2O 12700000
LRBMFSPD EQU   X'20'         SERVICE PROCESSOR DAMAGE          @ZA57795 12750000
LRBMFCK  EQU   X'10'         CHANNEL SUBSYSTEM DAMAGE          @G860P2O 12800000
LRBMFVS  EQU   X'04'         VECTOR SOURCE                         @H2A 12900000
LRBMIBU  EQU   X'02' .       BACK UP INDICATOR                          12950000
*                                                                       13050000
         DS    XL1 .         3RD BYTE OF LRBMCIC                        13100000
*                                                                       13150000
LRBMFSE  EQU   X'80' .       STORAGE ERROR                              13200000
LRBMFSC  EQU   X'40' .       STORAGE ERROR CORRECTED                    13250000
LRBMFKE  EQU   X'20' .       KEY ERROR                                  13300000
LRBMFDS  EQU   X'10'         DOUBLE BIT STORAGE ERROR              @H1A 13350000
LRBMVWP  EQU   X'08' .       PSW EMWP VALIDITY                          13400000
LRBMVMS  EQU   X'04' .       PSW MASKS AND KEY VALIDITY                 13450000
LRBMVPM  EQU   X'02' .       PROGRAM MASKS AND CONDITION CODE VALIDITY  13500000
LRBMVIA  EQU   X'01' .       INSTRUCTION ADDRESS VALIDITY               13550000
*                                                                       13600000
         DS    XL1 .         4TH BYTE OF LRBMCIC                        13650000
*                                                                       13700000
LRBMVFA  EQU   X'80' .       FAILING STORAGE ADDR VALIDITY              13750000
LRBMVED  EQU   X'20' .       EXTERNAL DAMAGE CODE VALIDITY         @D1C 13850000
LRBMVFP  EQU   X'10' .       FLOATING POINT REG VALIDITY                13900000
LRBMVGR  EQU   X'08' .       GENERAL PURPOSE REG VALIDITY               13950000
LRBMVCR  EQU   X'04' .       CONTROL REG VALIDITY                       14000000
LRBMVST  EQU   X'01' .       STORAGE LOGICAL VALIDITY                   14100000
*                                                                       14150000
         DS    XL1 .         5TH BYTE OF LRBMCIC               @ZA34554 14200000
*                                                                       14250000
LRBMARV  EQU   X'40' .       ACCESS REGISTER VALIDITY.             @L1A 14350000
LRBMDAE  EQU   X'20'         DELAYED ACCESS EXCEPTION              @D1A 14400000
LRBMCSLO EQU   X'10'         CSLO OCCURRED                         @T2A 14450000
LRBMSYC  EQU   X'01'         ETR SYNC CHECK                        @L3A 14650000
*                                                                       14700000
         DS    XL1 .         6TH BYTE OF LRBMCIC                        14750000
*                                                                       14800000
LRBMVAFP EQU   X'01'         Additional FP reg validity            @L4A 14850000
LRBMVAP  EQU   X'08'         ANCILLARY REPORT CONDITION  BIT 44    @T1A 15050000
LRBMVPT  EQU   X'02' .       PROCESSOR TIMER VALIDITY                   15150000
LRBMVCC  EQU   X'01' .       CLOCK COMPARATOR VALIDITY                  15200000
*                                                                       15250000
         DS    XL2 .         RESERVED                              @H3C 15300000
         DS    XL4 .         DATA FROM 240-243                 @ZMC2173 15450000
LRBMEDCD DS    0XL4 .        DATA FROM 244-247,                    @D1A 15500000
*                            EXTERNAL DAMAGE CODE                  @D1A 15550000
LRBMEDC  DS    XL1 .         DATA FROM 244  BITS 0:7               @D1A 15600000
LRBMEDC1 DS    XL1 .         DATA FROM 245  BITS 8:15              @D1C 16050000
LRBMEDXN EQU   X'80' .       EXTENDED STORAGE NOT OPERATIONAL      @D1A 16100000
LRBMEDXF EQU   X'40' .       EXTENDED STORAGE CONTROL FAILURE      @D1A 16150000
LRBMEDC2 DS    XL1 .         DATA FROM 246  BITS 16:23             @L3A 16459000
LRBMEDPS EQU   X'80' .       PRIMARY-SYNC DAMAGE.                  @L3A 16468000
LRBMEDAD EQU   X'40' .       ATTACHMENT FACILITY DAMAGE.           @L3A 16477000
LRBMEDSL EQU   X'20' .       SWITCH TO LOCAL.                      @L3A 16486000
LRBMEDSC EQU   X'10' .       ETR SYNC CHECK.                       @L3A 16495000
LRBMEDEC EQU   X'08' .       SIDE CONTROL ELEMENT/SIDE ID CHANGE   @P3A 16517500
         DS    XL1 .         RESERVED ALWAYS ZERO                  @L3C 16540000
LRBMFSA  DS    A .           FAILING STORAGE ADDRESS (MOVED FROM        16550000
*                              STORAGE LOCATIONS 248-251)               16600000
*                              (PRE-ESAME)                         @L5C 16625000
         DS    XL4 .         DATA FROM 252:255                 @G381P2O 16650000
*                              (PRE-ESAME)                         @L5C 16652700
         ORG   LRBMFSA .                                           @L5A 16655400
LRBMFSAE DS    0C  .         FSA moved from 248-255 (ESAME)        @P8C 16658100
LRBMFSAH DS    A   .         FSA high half                         @L5A 16660800
LRBMFSAL DS    A   .         FSA low half                          @L5A 16663500
LRBFLA   DS    0C  .         "FIXED LOGOUT AREA" from 256-271 (PRE-     16666200
*                            ESAME) or 4864-4879 (ESAME)           @P8A 16668900
LRBSSPSW DS    XL8 .         STORE STATUS PSW, DATA FROM 256:263   @P1A 16672200
         DS    XL7 .         DATA FROM 264:270                     @T1C 16683300
LRBADRSI DS    XL1 .         DATA FROM 271,CPU ADDRESS & SITE CODE @T1C 16694400
LRBMFLOR DS    XL16 .        DATA FROM 272:287                     @L5A 16705500
LRBAREGS DS    XL64 .        DATA FROM 288:351, ACCESS REGISTERS   @L1A 16716600
LRBFREGS DS    XL32 .        DATA FROM 352:383, FLOATING POINT          16744400
*                                               REGS 0,2,4,6       @T2C 16772200
LRBGREGS DS    XL64 .        DATA FROM 384:447, GENERAL PURPOSE         16800000
*                                               REGISTERS      @G381P2O 16850000
LRBCREGS DS    XL64 .        DATA FROM 448:511, CONTROL                 16900000
*                                               REGISTERS      @G381P2O 16950000
LRBMEVIA DS    XL1 .         EVENT INDICATOR AREA                  @D2A 17000000
*                                                                       17050000
LRBMISEC EQU   X'80' .       SIDE CONTROL ELEMENT/SIDE ID CHANGED  @D2A 17100000
LRBMETRA EQU   X'40' .       MCH TIMER SLIH REQUESTED ABEND OF          17116600
*                            THE EXTERNAL TIMER SLIH.              @02A 17133200
*                                                                       17150000
LRBMMFLG DS    XL1 .         MISCELLANEOUS FLAGS                   @T2A 17200000
*                                                                       17250000
LRBMAPR  EQU   X'80' .       APR IS POSSIBLE                       @T2A 17300000
*                                                                       17350000
LRBAFPV  EQU   X'01' .       Software has determined that              *17350800
                             AFPRs are valid. This is either           *17351600
                             because they were not being               *17352400
                             used at the time of the machine           *17353200
                             check or because they were                *17354000
                             being simulated                       @L4A 17354800
         DS    XL2  .        RESERVED                              @L4C 17355800
LRBAFPR  DS    0CL100        Save area for FPRs 1,3,5,7-15, FPCR   @L4A 17361600
LRBFPR1  DS    CL8           FPR 1                                 @L4A 17367400
LRBFPR3  DS    CL8           FPR 3                                 @L4A 17373200
LRBFPR5  DS    CL8           FPR 5                                 @L4A 17379000
LRBFPR7  DS    CL8           FPR 7                                 @L4A 17384800
LRBFPR8  DS    CL8           FPR 8                                 @L4A 17390600
LRBFPR9  DS    CL8           FPR 9                                 @L4A 17396400
LRBFPR10 DS    CL8           FPR 10                                @L4A 17402200
LRBFPR11 DS    CL8           FPR 11                                @L4A 17408000
LRBFPR12 DS    CL8           FPR 12                                @L4A 17413800
LRBFPR13 DS    CL8           FPR 13                                @L4A 17419600
LRBFPR14 DS    CL8           FPR 14                                @L4A 17425400
LRBFPR15 DS    CL8           FPR 15                                @L4A 17431200
LRBFPCR  DS    F             FPCR                                  @L4A 17437000
         DS    XL8  .        Reserved                              @L5C 17439600
LRBG64H  DS    CL64          Save area for bits 0-31 of GPRs       @L5A 17442200
LRBC64S  DS    CL128         Save area for ESAME CRs               @L5A 17444800
         DS    XL4  .        Reserved                              @L5A 17447400
LRBEND   DS    0C            END OF HEADER + MCH SECTION           @P5A 17450000
*******************************************************************     17500000
*                                                                 *     17550000
*                     RECONFIGURATION (DDR) RECORD                *     17600000
*                                                                 *     17650000
*******************************************************************     17700000
*                                                                       17750000
LRBRDDR   ORG  LRBBASE      RECONFIGURATION RECORD                      17800000
LRBRJOB   DS   CL8          'FROM' DEVICE USER'S JOB NAME               17850000
LRBRVOL1  DS   CL6           VOLUME MOUNTED ON 'FROM' DEVICE            17900000
LRBRVOL2  DS   CL6           VOLUME MOUNTED ON 'TO' DEVICE              17950000
LRBRPH1   DS   CL1          PHYSICAL ID OF DEVICE                       18000000
LRBRCUA1  DS   CL3          PRIMARY CUA OF 'FROM' DEVICE                18050000
LRBRDEV1  DS   CL4          'FROM' DEVICE TYPE                          18100000
LRBRPH2   DS   CL1          PHYSICAL ID OF 'TO' DEVICE                  18150000
LRBRCUA2  DS   CL3          PRIMARY CUA OF 'TO' DEVICE                  18200000
LRBRDEV2  DS   CL4          'TO' DEVICE TYPE                            18250000
*                                                                       18300000
****************************************************************        18900000
*                                                              *        18950000
*             SYSTEM TERMINATION RECORD                        *        19000000
*                                                              *        19050000
****************************************************************        19100000
*                                                                       19150000
LRBTTER  ORG   LRBBASE                                                  19200000
LRBTLNH  DS    F           LOGREC RECORD LENGTH                         19250000
LRBTWSC  DS    XL4         WAIT STATE CODE                              19300000
LRBTUSR  DS    0X          USER DATA FIELD-NOTE THE VALUE IN LRBTLNH    19350000
*                          IS THE TOTAL LENGTH INCLUDING THE LRBTUSR,   19400000
*                          EXCLUDING THE HEADER.               @ZA36587 19450000
*                                                                       19500000
      POP  PRINT                                                        19550000
        MEND                                                            19600000
        EJECT                                                           19650000
          */                                                            19700000
 %LRB1:  ;                                                              19750000
 @EJECT;                                                                19800000
       /* COMMON  HEADER  SECTION        */                             19850000
     DCL 1 LRB BASED (LRBPTR) BDY (DWORD),                              19900000
           2 LRBHTYPE CHAR(1),     /*TYPE OF RECORD               */    19950000
           2 LRBHREL FIXED(8),      /* RELEASE NUMBER   */              20000000
             3 LRBHSYS CHAR(1),      /*  SYSTEM TYPE  */                20050000
               4 LRBHSYSB BIT(3),     /* ACTUAL SYSTEM BITS */          20100000
               4   *      BIT(5),     /* ACTUAL RELEASE BITS */         20150000
           2 LRBHSW0 CHAR(1),      /*INDEPENDENT SWITCH BYTE      */    20200000
             3 LRBHMORE BIT(1),           /* MULTIPLE RECORDS */        20250000
             3 LRBHNS BIT(1),      /* STCK USED / NS MACHINE     @H3C*/ 20300000
             3 LRBNOLOG BIT(1),    /* NO LOG RECORD FLAG.   @ZA90423*/  20350000
             3 LRBHEAB BIT(1),     /* EXTENDED ADDRESSING               20400000
                                      HARDWARE              @G860P2O */ 20450000
             3 LRBHTMC BIT(1),           /* TIME MACRO USED */          20500000
             3 *      BIT(3),           /* RESERVED */                  20550000
           2 LRBHSW1 CHAR(1),      /*DEPENDENT SWITCH BYTE 0      */    20600000
           2 LRBHSW2 CHAR (1),     /* DEPENDENT SWITCH BYTE 1       */  20650000
             3 LRBMACT CHAR(1),     /* MCH BUFFER ACTIVE FLAG     */    20700000
           2 LRBHSW3 CHAR(1),      /* DEPENDENT SWITCH BYTE 2   */      20750000
             3 LRBMCLB CHAR(1),    /* LOGREC CLOBBER FLAG (INDICATES    20800000
                                      LOGREC BUFFER OVERLAYED) */       20850000
           2 LRBHCNT  CHAR(1), /*PHYSICAL RECORDS PER LOGICAL REC CNT*/ 20900000
           2   *      CHAR(1),                                          20950000
           2 LRBHDT   CHAR(8) BDY(DWORD), /*                @G860P2O */ 21000000
             3 LRBHDATE CHAR (4),    /* DATE                @G860P2O */ 21050000
             3 LRBHTIME CHAR (4),    /* TIME                @G860P2O */ 21100000
           2 LRBHCPID CHAR(8) BDY(DWORD), /* STIDP OPERAND FIELD */     21150000
             3    *     CHAR(1),      /* RESERVED */                    21200000
             3 LRBHCSER CHAR(3),      /* CPU SERIAL NUMBER */           21250000
             3 LRBHMDL  CHAR(2),      /* CPU MODEL NUMBER  */           21300000
             3    *     FIXED (16) ,  /* RESERVED                @H3C*/ 21350000
           2 LRBBASE  CHAR(0) BDY(WORD); /* DEPENDENT SECTION STARTS    21400000
                                                             @ZA34554*/ 21450000
 @EJECT;                                                                21500000
*/*                                                                  */ 21550000
*/*   A DESCRIPTION OF LRBHSW1                                       */ 21600000
*/*                                                                  */ 21650000
   DCL 1  LRBHRSW1  DEF(LRBHSW1),                                       21700000
          2 LRBRPRIM BIT(1),  /* DDR PRIMARY STORAGE RECONFIG  */       21750000
          2 LRBRSEC BIT(1),   /* DDR SEC STORAGE RECONFIG      */       21800000
          2 LRBROPER BIT(1),  /* DDR OPERATOR REQUEST RECONFIG */       21850000
          2 LRBRSYSI BIT(1),  /* DDR PERMANENT ERROR REQUEST   */       21900000
          2 *        BIT(4);  /*   RESERVED                    */       21950000
   DCL 1  LRBHMSW1 DEF(LRBHSW1),                                        22000000
          2 LRBMNOIO BIT(1),         /* 1: IOS (IOSRMCH)             */ 22050000
                                     /* TELLING IGFPTSIG NOT         */ 22100000
                                     /* TO PERFORM ANY I/O  @G860P2O */ 22150000
          2 LRBMNVF  BIT(1),         /* LRB MAY NOT BE VALID @ZA34554*/ 22200000
          2 LRBMSYST BIT(1),         /* SYSTEM TERMINATED            */ 22250000
          2 LRBTRACE BIT(1),         /* SET TO 1 BY IGFPMCIH BEFORE     22300000
                                        ALTRTRC SUSPEND AND SET TO      22350000
                                        0 AFTER             @G860P2O */ 22400000
          2 LRBDAT   BIT(1),         /* SET TO 1 BY IGFPMCIH BEFORE     22450000
                                        LOADING A DATON PSW TO GOTO     22500000
                                        IGFPMAIN. IGFPMAIN RESETS IT    22550000
                                        TO ZERO             @G860P20 */ 22600000
          2 LRBMRECV BIT(1),         /* SET TO 1 WHEN AN ERROR IS       22650000
                                        COMPLETELY RECOVERED     @01A*/ 22700000
          2 LRBMDEG  BIT(1),         /* SET TO 1 WHEN A RESOURCE IS     22717700
                                        TAKEN OFFLINE BUT NO WORK       22735400
                                        IS ABENDED.              @T2A*/ 22753100
          2 LRBMFA   BIT(1);         /* SET TO 1 AFTER A MALFUNCTION    22771000
                                        ALERT.              @P1A @P2C*/ 22785200
 @EJECT;                                                                22800000
   DCL LRBHSLH BIT (8) CONSTANT('23'X) ; /* SUBCHANNEL LOGOUT RECORD    22850000
                                                            @G860P2O */ 22900000
   DCL LRBHCRW BIT (8) CONSTANT('25'X) ; /* CHANNEL REPORT WORD RECORD  22950000
                                                            @G860P2O */ 23000000
   DCL LRBHREC BIT (8) CONSTANT('60'X) ; /* DDR RECORD               */ 23050000
   DCL LRBHMIH BIT (8) CONSTANT('71'X) ; /* MIH RECORD       @G860P2O*/ 23100000
   DCL LRBHMDR BIT (8) CONSTANT('90'X) ; /* MDR RECORD               */ 23150000
   DCL LRBHMCH BIT (8) CONSTANT('13'X) ; /* MCH RECORD               */ 23200000
   DCL LRBHTER BIT (8) CONSTANT('81'X) ; /* SYSTEM TERMINATION RECORD*/ 23250000
   DCL LRBHSFW BIT (8) CONSTANT('40'X) ; /* 4X TYPE RECORDS ARE SOFT-   23300000
                                            WARE TYPE MAPPED BY IHAHDR  23350000
                                                             @ZA34554*/ 23400000
   DCL LRBHSFR BIT (8) CONSTANT('4F'X) ; /* LOST SOFT RECORD @ZA34554*/ 23450000
   DCL LRBHSRS BIT (8) CONSTANT('84'X) ; /* SYSTEM RESTARTABLE WAIT     23500000
                                                             @ZA34554*/ 23550000
   DCL LRBHMCF BIT (8) CONSTANT('A0'X) ; /* MCH FRAME RECORD @ZA34554*/ 23600000
                                    /* LRBHSYS = ...                 */ 23650000
    DCL  LRBHVS2 BIT(3) CONSTANT('100'B) ;  /* OS/VS2 SYSTEM         */ 23950000
 % IF IHALRBHEADER = 'ONLY'         /*                      @G860P2O */ 24500000
 % THEN %GOTO IHALRBEND;            /*                      @G860P2O */ 24550000
 @EJECT;                                                                24600000
        /* MACHINE CHECK HANDLER RECORD   */                            24650000
    DCL 1 LRBMMCH DEF(LRBBASE) BDY(WORD),                               24700000
         2 LRBMLNH  FIXED(31),      /* LENGTH OF LOGREC RECORD       */ 24750000
         2 LRBMWSC  CHAR(4),        /* WAIT STATE CODE               */ 24800000
           3 LRBMAMOD BIT(1),       /* IF THE REMAINING BITS IN THIS    24850000
                                       BYTE ARE NON ZERO THEN THIS      24900000
                                       BIT MUST BE ZERO,                24950000
                                       OTHERWISE A PROGRAM CHECK        25000000
                                       WILL RESULT WHEN A PSW           25050000
                                       CONTAINING THIS IN ITS           25100000
                                       ADDRESS PART IS LOADED           25150000
                                                            @G860P2O */ 25200000
         2 LRBMCEIA CHAR(4),        /* MACHINE CHECK ERROR INDICATOR    25250000
                                       AREA                          */ 25300000
          3 LRBMTERM CHAR(1),       /* TERMINAL ERROR FLAGS          */ 25350000
           4 *        BIT(2),       /* RESERVED                  @H3C*/ 25400000
           4 LRBMTTHR BIT(1),       /* HARD ERROR                       25600000
                                       THRESHOLD FLAG        @G55CP2P*/ 25650000
           4 LRBMTSEC BIT(1),       /* SECONDARY ERROR FLAG          */ 25700000
           4 LRBMTCKS BIT(1),       /* CHECK STOP FLAG               */ 25750000
           4 *        BIT(2),       /* RESERVED                  @H3C*/ 25800000
           4 LRBMTINV BIT(1),       /* INVALID LOGOUT FLAG (SET WHEN    25900000
                                       LRBMCIC = 0 OR STORE-STATUS-AT   25925000
                                       ADDRESS HAS FAILED AFTER A       25950000
                                       MALFUNCTION ALERT)        @P1C*/ 25975000
          3 LRBMHARD CHAR(1),       /* HARD MACHINE ERROR FLAGS      */ 26000000
           4 LRBMHHRD BIT(1),       /* ASSUMED HARD ERROR FLAG       */ 26050000
           4 *        BIT(1),       /* RESERVED                  @H3C*/ 26100000
           4 LRBMHVS  BIT(1),       /* VECTOR SOURCE FLAG.       @H2A*/ 26250000
           4 LRBMHSD BIT(1),        /* SYSTEM DAMAGE FLAG    @G555P2M*/ 26300000
           4 LRBMHINV BIT(1),       /* REGISTER OR PSW INVALID FLAG  */ 26350000
           4 LRBMHSTO BIT(1),       /* HARD STORAGE FAILURE FLAG     */ 26400000
           4 LRBMHSPF BIT(1),       /* HARD PROTECTION KEY ERROR FLAG*/ 26450000
           4 LRBMHIPD BIT(1),       /* INSTRUCTION PROCESSING DAMAGE    26500000
                                       FLAG                          */ 26550000
          3 LRBMINTM CHAR(1),       /* INTERMEDIATE ERROR FLAGS      */ 26600000
           4 LRBMIPSD BIT(1),       /* DAMAGE OCCURRED TO THE PRIMARY   26611100
                                       CLOCK SYNC FACILITY.      @L3A*/ 26622200
           4 LRBMIAFD BIT(1),       /* DAMAGE OCCURRED TO THE ETR       26633300
                                       ATTACHMENT FACILITY.      @L3A*/ 26644400
           4 LRBMISWL BIT(1),       /* MACHINE HAS SWITCHED TO LOCAL    26655500
                                       SYNCHRONISM.              @L3A*/ 26666600
           4 LRBMISYC BIT(1),       /* ETR SYNC CHECK CONDITION HAS     26677700
                                       OCCURRED.                 @L3A*/ 26688800
           4 LRBMITOD BIT(1),       /* TOD CLOCK ERROR FLAG          */ 26700000
           4 LRBMICKC BIT(1),       /* CLOCK COMPARATOR ERROR FLAG   */ 26750000
           4 LRBMICTM BIT(1),       /* CPU TIMER ERROR FLAG          */ 26800000
           4 LRBMIVTE BIT(1),       /* VECTOR THRESHOLD EXCEEDED @H2A*/ 26850000
          3 LRBMSOFT CHAR(1),       /* SOFT MACHINE ERROR FLAGS      */ 26900000
           4 LRBMSSFT BIT(1),       /* ASSUMED SOFT ERROR FLAG       */ 26950000
           4 LRBMSSPD BIT(1),       /* SERVICE PROCESSOR DAMAGE         27000000
                                                            @ZA57795 */ 27050000
           4 LRBMSVF  BIT(1),       /* VECTOR FAILURE FLAG.      @H2C*/ 27100000
           4 LRBMDBSE BIT(1),       /* DOUBLE BIT STORAGE ERROR         27150000
                                       FLAG                      @H1C*/ 27200000
           4 LRBMSTSL BIT(1),       /* ETR SYNC CHECK THRESHOLD         27233300
                                       EXCEEDED.                 @L3A*/ 27266600
           4 LRBMSECC BIT(1),       /* ECC CORRECTED STORAGE ERROR      27300000
                                       FLAG                          */ 27350000
           4 LRBMSHIR BIT(1),       /* HIR CORRECTED PROCESSOR          27400000
                                       ERROR FLAG                    */ 27450000
           4 LRBMSDG BIT(1),        /* DG MACHINE CHECK     @G860P2O */ 27500000
         2 LRBMPDAR CHAR(1),        /* PDAR DATA (SUPPLIED BY RTM)   */ 27550000
          3 *        BIT(3),        /* RESERVED                      */ 27600000
          3 LRBMINVP BIT(1),        /* STORAGE RECONFIGURED - PAGE      27650000
                                       INVALIDATED                   */ 27700000
          3 LRBMRSRC BIT(1),        /* STORAGE RECONFIGURATION STATUS   27750000
                                       AVAILABLE (FOLLOWING TWO BYTES   27800000
                                       ARE MEANINGFUL)               */ 27850000
          3 LRBMRSRF BIT(1),        /* STORAGE RECONFIGURATION NOT      27900000
                                       ATTEMPTED                     */ 27950000
          3 *        BIT(2),        /* RESERVED                      */ 28000000
         2 LRBMRSRS CHAR(2),        /* STATUS RETURNED TO IGFPMRTH BY   28050000
                                       IARXMCKS, THE STORAGE AND KEY    28100000
                                       ERROR RECOVERY ROUTINE.          28150000
                                       THE DETAILS OF THE BITS ARE      28200000
                                       DESCRIBED BY IEERSRRB            28250000
                                                            @G860P2O */ 28300000
         2 LRBMPWL  FIXED(8) UNSIGNED, /* PHYSICAL WORD LENGTH          28350000
                                          (CHECKING BLOCK SIZE)      */ 28400000
         2 LRBMMOSW CHAR(8),        /* MACHINE CHECK OLD PSW (FROM      28450000
                                       STORAGE LOCATIONS 48-55 PRE-     28483300
                                       ESAME OR 352-367 ESAME)   @L5C*/ 28516600
         2 LRBMFLO  CHAR(280) BDY(WORD), /* MACHINE CHECK FIXED LOGOUT  28550000
                                            AREA (MOVED FROM STORAGE    28600000
                                            LOCATIONS 232-511 PRE-ESAME 28625000
                                            and 232-287,4608-5119       28650000
                                            partial ESAME)       @L5C*/ 28675000
          3 LRBMCIC  CHAR(8) BDY(WORD), /* MACHINE CHECK INTERRUPT      28700000
                                           CODE (MOVED FROM STORAGE     28750000
                                           LOCATIONS 232-239)        */ 28800000
          3 *        CHAR(4),       /* DATA FROM 240-243     @ZMC2173*/ 28850000
          3 LRBMEDCD   CHAR(4),     /* DATA FROM 244-247,               28900000
                                       EXTERNAL DAMAGE CODE      @D1A*/ 28950000
            4 LRBMEDC  BIT(8),      /* DATA FROM 244, BITS 0:7   @D1A*/ 29000000
            4 LRBMEDC1 BIT(8),      /* DATA FROM 245, BITS 8:15  @D1A*/ 29050000
              5 LRBMEDXN BIT(1),    /* EXTENDED STORAGE NOT             29100000
                                       OPERATIONAL.              @D1A*/ 29150000
              5 LRBMEDXF BIT(1),    /* EXTENDED STORAGE CONTROL         29200000
                                       FAILURE.                  @D1A*/ 29250000
              5 *        BIT(6),    /* RESERVED                  @D1A*/ 29300000
            4 LRBMEDC2 BIT(8),      /* DATA FROM 246, BITS 16:23 @L3A*/ 29312500
              5 LRBMEDPS BIT(1),    /* PRIMARY-SYNC DAMAGE.      @L3A*/ 29325000
              5 LRBMEDAD BIT(1),    /* ETR-ATTACHMENT DAMAGE.    @L3A*/ 29337500
              5 LRBMEDSL BIT(1),    /* SWITCH TO LOCAL.          @L3A*/ 29350000
              5 LRBMEDSC BIT(1),    /* ETR SYNC CHECK.           @L3A*/ 29362500
              5 LRBMEDEC BIT(1),    /* SIDE CONTROL ELEMENT/SIDE        29368700
                                       ID CHANGE                 @D2A*/ 29374900
              5 *        BIT(3),    /* RESERVED                  @D2C*/ 29381100
            4 *        CHAR(1),     /* RESERVED       BITS 24:31 @L3C*/ 29387500
          3 LRBMFSAE CHAR(8) BDY(WORD),  /* Absolute failing storage    29396400
                                       moved from location 248-255      29405300
                                       (ESAME)                   @L5A*/ 29414200
           5 LRBMFSAH PTR(31),      /* High half of FSA                 29423100
                                       (ESAME)                   @L5A*/ 29432000
            7 LRBMFSA PTR(31),      /* THE ABSOLUTE FAILING STORAGE     29440900
                                       MOVED FROM LOCATION 248-251      29450000
                                       (Pre-ESAME)          @G860P2O */ 29462400
           5 LRBMFSAL PTR(31),      /* Low half of FSA                  29474800
                                       (ESAME)                   @L5A*/ 29487200
          3 LRBFLA   CHAR(16),      /* DATA FROM "FIXED LOGOUT          29499600
                                       AREA" 256-271 PRE-ESAME or       29512000
                                       4864-4879 ESAME.          @P8A*/ 29524400
           5 LRBSSPSW CHAR(8),      /* STORE STATUS PSW 256:263  @P1A*/ 29536800
           5 *        CHAR(7),      /* DATA FROM 264:270         @T1C*/ 29549200
           5 LRBADRSI CHAR(1),      /* DATA FROM 271, THE CPU           29561600
                                       ADDRESS AND SITE CODE     @T1C*/ 29574200
                                    /*                               */ 29577200
          3 LRBMFLOR CHAR(16),      /* UNDEF. DATA FROM 272:287  @T1C*/ 29580200
          3 LRBAREGS CHAR(64)                                           29583200
                     BDY(WORD),     /* ACCESS REGS 4160-4223     @L1A*/ 29599800
            4 LRBAREG(0:15) PTR(31),/* SUBSCRIPT = REG #         @L1A*/ 29616400
                                                          @SPACE(1);    29633000
          3 LRBFREGS CHAR(32),      /* DATA FROM 352:383, FLOATING      29655300
                                       POINT REGS 0, 2, 4, 6     @T2C*/ 29677600
                                                          @SPACE(1);    29700000
          3 LRBGREGS CHAR(64)                                           29750000
                     BDY(WORD),     /* DATA FROM 384:447, THE           29800000
                                       GENERAL PURPOSE REGS @G381P2O */ 29850000
            4 LRBGREG(0:15) PTR(31),/* SUBSCRIPT = REG #    @G381P2O */ 29900000
                                                          @SPACE(1);    29950000
          3 LRBCREGS CHAR(64)                                           30000000
                     BDY(WORD),     /* DATA FROM 448:511, THE           30050000
                                       CONTROL REGISTERS    @G381P2O */ 30100000
            4 LRBCREG(0:15) PTR(31),/* SUBSCRIPT = REG #    @G381P2O */ 30150000
                                                          @SPACE(1);    30200000
        2 LRBMEVIA  CHAR(1),        /* EVENT INDICATOR AREA      @D2A*/ 30250000
         3 LRBMISEC  BIT(1),        /* SIDE CONTROL ELEMENT/SIDE        30300000
                                       ID CHANGED                @D2A*/ 30350000
         3 LRBMETRA  BIT(1),        /* MCH TIMER SLIH REQUESTED ABEND   30375000
                                       OF EXTERNAL TIMER SLIH    @02A*/ 30400000
         3 *         BIT(6),        /* RESERVED                  @D2A*/ 30425000
        2 LRBMMFLG  CHAR(1),        /* MISCELLANEOUS FLAGS       @T2A*/ 30450000
         3 LRBMAPR   BIT(1),        /* APR IS POSSIBLE           @T2A*/ 30500000
         3 *         BIT(6),        /* RESERVED                  @L4C*/ 30506700
         3 LRBAFPV   BIT(1),        /* Software has determined that     30513400
                                       AFPRs are valid. This is either  30520100
                                       because they were not being      30526800
                                       used at the time of the machine  30533500
                                       check or because they were       30540200
                                       being simulated           @L4A*/ 30546900
        2 *         CHAR(2),        /* Reserved                  @L4C*/ 30554300
        2 LRBAFPR CHAR(100) BDY(WORD), /* FPRs 1,3,5,7-15,FPCR          30560300
                                    (moved from area pointed to by      30566300
                                    FLCESAR/LCCAESAV or FLCX and        30570800
                                    manipulated into this sequence      30575300
                                                                 @L4A*/ 30579800
          4 LRBFPR1  CHAR(8),       /* FPR1                      @L4A*/ 30584400
          4 LRBFPR3  CHAR(8),       /* FPR3                      @L4A*/ 30588700
          4 LRBFPR5  CHAR(8),       /* FPR5                      @L4A*/ 30593000
          4 LRBFPR7F,               /* FPR 7 - X'F'              @L4A*/ 30597300
            5 LRBFPR7 CHAR(8),      /* FPR7                      @L4A*/ 30601600
            5 LRBFPR8 CHAR(8),      /* FPR8                      @L4A*/ 30605900
            5 LRBFPR9 CHAR(8),      /* FPR9                      @L4A*/ 30610200
            5 LRBFPR10 CHAR(8),     /* FPR10                     @L4A*/ 30614500
            5 LRBFPR11 CHAR(8),     /* FPR11                     @L4A*/ 30618800
            5 LRBFPR12 CHAR(8),     /* FPR12                     @L4A*/ 30623100
            5 LRBFPR13 CHAR(8),     /* FPR13                     @L4A*/ 30627400
            5 LRBFPR14 CHAR(8),     /* FPR14                     @L4A*/ 30631700
            5 LRBFPR15 CHAR(8),     /* FPR15                     @L4A*/ 30636000
          4 LRBFPCR CHAR(4),        /* FPCR                      @L4C*/ 30640300
        2 *         CHAR(8),        /* Reserved                  @L5C*/ 30641600
        2 LRBG64H  CHAR(64) BDY(WORD), /* Bits 0-31 of GPRs      @L5A*/ 30642900
          3 LRBG64HR(0:15) CHAR(4),    /* Bits 0-31 of GPRs      @L5A*/ 30644200
        2 LRBC64S  CHAR(128) BDY(WORD), /* ESAME 64-bit CRS      @L5A*/ 30645500
          3 LRBC64 (0:15) CHAR(8),    /* ESAME CR                @L5A*/ 30646800
        2 *         CHAR(4),        /* Reserved                  @L5C*/ 30648100
        2 LRBEND    CHAR(0),        /*                           @P5A*/ 30650000
   LRBMCHLN CONSTANT(               /* THE LENGTH OF THE MCH LRB     */ 30950000
              LENGTH(LRB) +         /* EQUALS THE HEADER PLUS        */ 31000000
              LENGTH(LRBMMCH)       /* THE MCH SECTION               */ 31050000
                    ),              /*                           @H3C*/ 31100000
 %DEACTIVATE MCHMCICATTRS;                                              31200000
 @EJECT;                                                                31250000
 /********************************************************************/ 31300000
 /*                                                                  */ 31350000
 /*DEFINE-                                                           */ 31400000
 /*       THE MACHINE CHECK INTERRUPT CODE (MCIC)                    */ 31450000
 /*                                                                  */ 31500000
 /*CREATED-                                                          */ 31550000
 /*       BY THE HARDWARE, STORED IN FLCMCIC OF THE PROCESSOR        */ 31600000
 /*       THAT RECEIVED THE MACHINE CHECK.                           */ 31650000
 /*       IT IS COPIED TO THE LRB ASSOCIATED WITH THAT PROCESSOR.    */ 31700000
 /*                                                                  */ 31750000
 /*PL/S USAGE-                                                       */ 31800000
 /*     'MCHMCICATTRS' IS A MACRO PHASE VARIABLE.                    */ 31850000
 /*     IT IS USED TO INDICATE THE BASING EXPRESSION, IF ANY.        */ 31900000
 /*     TO OVERRIDE ITS DEFAULT VALUE IT MUST BE SET BEFORE THE      */ 31950000
 /*     OF IHALRB:                                                   */ 32000000
 /*       %MCHMCICATTRS = 'BASED'  OR                                */ 32050000
 /*       %MCHMCICATTRS = 'BASED(...)'  OR                           */ 32100000
 /*       %MCHMCICATTRS = 'DEFINED(...)'  ETC.                       */ 32150000
 /*                                                                  */ 32200000
 /*  DEFAULT VALUE-                                                  */ 32250000
 /*       %MCHMCICATTRS = 'DEFINED(LRBMCIC)'                         */ 32300000
 /*                                                                  */ 32350000
 /********************************************************************/ 32400000
                                                          @SPACE(1);    32450000
 % ACTIVATE MCHMCICATTRS;                                               32500000
 % IF MCHMCICATTRS = ''              /* NOTHING SPECIFIED   @G860P2O */ 32550000
 % THEN                              /* USE THE DEFAULT     @G860P2O */ 32600000
   % MCHMCICATTRS = 'DEFINED(LRBMCIC)';  /*                 @G860P2O */ 32650000
                                                          @SPACE(1);    32700000
   1 MCHMCIC  MCHMCICATTRS           /*                     @G860P2O */ 32750000
              BDY(BYTE)                                                 32800000
              CHAR(LENGTH(LRBMCIC)),                                    32850000
           4 *        CHAR(1),      /* BITS 0:7                      */ 32900000
            5 LRBMFSD  BIT(1),      /* SYSTEM DAMAGE                 */ 32950000
            5 LRBMFPD  BIT(1),      /* PROCESSING DAMAGE             */ 33000000
            5 LRBMFSR  BIT(1),      /* SYSTEM RECOVERY               */ 33050000
            5 *        BIT(1),      /* RESERVED             @G860P2O */ 33100000
            5 LRBMFCD  BIT(1),      /* CLOCK DAMAGE                  */ 33150000
            5 LRBMFED  BIT(1),      /* EXTERNAL DAMAGE           @D1A*/ 33200000
            5 LRBMFVF  BIT(1),      /* VECTOR FAILURE.           @H2C*/ 33250000
            5 LRBMFDG  BIT(1),      /* DEGRADATION                   */ 33300000
           4 *        CHAR(1),      /* BITS 8:15                     */ 33350000
            5 LRBMFWN  BIT(1),      /* POWER WARNING                 */ 33400000
            5 LRBMFCP  BIT(1),      /* AN AVAILABLE CRW IS           */ 33450000
                                    /* PENDING              @G860P2O */ 33500000
            5 LRBMFSPD BIT(1),      /* SERVICE PROCESSOR DAMAGE         33550000
                                                            @ZA57795 */ 33600000
            5 LRBMFCK  BIT(1),      /* CHANNEL SUBSYSTEM DAMAGE         33650000
                                                            @G860P2O */ 33700000
            5 *        BIT(1),      /* RESERVED                  @H2C*/ 33750000
            5 LRBMFVS  BIT(1),      /* VECTOR SOURCE.            @H2A*/ 33800000
            5 LRBMIBU  BIT(1),      /* BACK UP INDICATOR             */ 33850000
            5 *        BIT(1),      /* RESERVED                  @H3C*/ 33900000
           4 *        CHAR(1),      /* BITS 16:23                    */ 33950000
            5 LRBMFSE  BIT(1),      /* STORAGE ERROR                 */ 34000000
            5 LRBMFSC  BIT(1),      /* STORAGE ERROR CORRECTED       */ 34050000
            5 LRBMFKE  BIT(1),      /* KEY ERROR                     */ 34100000
            5 LRBMFDS  BIT(1),      /* DOUBLE BIT STORAGE ERROR  @H1A*/ 34150000
            5 LRBMVWP  BIT(1),      /* PSW EMWP VALIDITY             */ 34200000
            5 LRBMVMS  BIT(1),      /* PSW MASKS AND KEY VALIDITY    */ 34250000
            5 LRBMVPM  BIT(1),      /* PROGRAM MASKS AND CONDITION      34300000
                                       CODE VALIDITY                 */ 34350000
            5 LRBMVIA  BIT(1),      /* INSTRUCTION ADDRESS VALIDITY  */ 34400000
           4 *        CHAR(1),      /* BITS 24:31                    */ 34450000
            5 LRBMVFA  BIT(1),      /* FAILING STORAGE ADDR VALIDITY */ 34500000
            5 *        BIT(1),      /* RESERVED             @G860P2O */ 34550000
            5 LRBMVED  BIT(1),      /* EXTERNAL DAMAGE                  34600000
                                       CODE VALIDITY             @D1A*/ 34650000
            5 LRBMVFP  BIT(1),      /* FLOATING POINT REG VALIDITY   */ 34700000
            5 LRBMVGR  BIT(1),      /* GENERAL PURPOSE REG VALIDITY  */ 34750000
            5 LRBMVCR  BIT(1),      /* CONTROL REG VALIDITY          */ 34800000
            5 *        BIT(1),      /* RESERVED                  @H3C*/ 34850000
            5 LRBMVST  BIT(1),      /* STORAGE LOGICAL VALIDITY      */ 34900000
           4 *        CHAR(1),      /* BITS 32:39                @D1C*/ 34950000
            5 *        BIT(1),      /* RESERVED                  @D1A*/ 34983300
            5 LRBMARV  BIT(1),      /* ACCESS REGISTER VALIDITY. @L1A*/ 35016600
            5 LRBMDAE  BIT(1),      /* DELAYED ACCESS EXCEPTION  @D1A*/ 35050000
            5 LRBMCSLO BIT(1),      /* CSLO OCCURRED             @T2A*/ 35072200
            5 *        BIT(3),      /* RESERVED                  @T2C*/ 35094400
            5 LRBMSYC  BIT(1),      /* ETR SYNC CHECK            @L3A*/ 35116600
           4 *        CHAR(1),      /* BITS 40:47                    */ 35150000
            5 *        BIT(3),      /* RESERVED                  @L4C*/ 35166600
            5 LRBMVAFP BIT(1),      /* Additional floating point reg    35183200
                                       validity                  @L4A*/ 35199900
            5 LRBMVAP  BIT(1),      /*ANCILLARY REPORT CONDITION @T1A*/ 35216600
            5 *        BIT(1),      /* RESERVED                      */ 35250000
            5 LRBMVPT  BIT(1),      /* PROCESSOR TIMER VALIDITY      */ 35300000
            5 LRBMVCC  BIT(1),      /* CLOCK COMPARATOR VALIDITY     */ 35350000
           4 *        CHAR(2);      /* RESERVED BITS 48-63       @H3C*/ 35400000
 @EJECT;                                                                35700000
       /* RECONFIGURATION (DDR) RECORD  */                              35750000
    DCL 1 LRBRDDR DEF(LRBBASE) BDY (WORD),                              35800000
          2 LRBRJOB CHAR(8),       /* 'FROM' DEVICE USER'S JOB NAME  */ 35850000
          2 LRBRVOL1 CHAR (6),   /* VOLUME MOUNTED ON 'FROM' DEVICE  */ 35900000
          2 LRBRVOL2 CHAR (6),   /* VOLUME MOUNTED ON 'TO' DEVICE */    35950000
          2 LRBRPH1 CHAR(1),     /* PHYSICAL ID OF DEVICE  */           36000000
          2 LRBRCUA1 CHAR(3),    /* PRIMARY CUA OF 'FROM'DEVICE */      36050000
          2 LRBRDEV1 CHAR(4),    /* 'FROM' DEVICE TYPE   */             36100000
          2 LRBRPH2 CHAR(1),     /* PHYSICAL ID OF 'TO' DEVICE */       36150000
          2 LRBRCUA2 CHAR(3),    /* PRIMARY CUA OF 'TO' DEVICE */       36200000
          2 LRBRDEV2 CHAR(4);    /* 'TO' DEVICE TYPE   */               36250000
 @EJECT;                                                                36550000
      /* SYSTEM TERMINATION RECORD */                                   36600000
    DCL 1 LRBTTER DEF(LRBBASE) BDY (WORD),                              36650000
          2 LRBTLNH FIXED(31),    /* LOGREC RECORD LENGTH */            36700000
          2 LRBTWSC CHAR(4),      /* WAIT STATE CODE */                 36750000
            3 LRBTRSN  CHAR(2),   /* REASON CODE            @G860P2O */ 36800000
              4 LRBTAMOD BIT(1),  /* IF THE REMAINING BITS IN THIS      36850000
                                     BYTE ARE NON ZERO THEN THIS        36900000
                                     BIT MUST BE ZERO,                  36950000
                                     OTHERWISE A PROGRAM CHECK          37000000
                                     WILL RESULT WHEN A PSW             37050000
                                     CONTAINING THIS IN ITS             37100000
                                     ADDRESS PART IS LOADED             37150000
                                                            @G860P2O */ 37200000
            3 LRBTCODE CHAR(2),   /* WAIT STATE CODE        @G860P2O */ 37250000
          2 LRBTUSRF CHAR(0),     /* USER DATA FIELD    @ZA34554 @L3C*/ 37300000
       LRBTUSR CHAR(*) DEFINED(LRBTUSRF); /* USER DATA FIELD-THE VALUE  37350000
                                     IN LRBTLNH IS THE TOTAL LENGTH     37400000
                                     INCLUDING THE LRBTUSR FIELD AND    37450000
                                     THE HEADER (LRB)   @ZA34554 @L3C*/ 37500000
 %IHALRBEND:;                     /*                        @G860P2O */ 37550000
