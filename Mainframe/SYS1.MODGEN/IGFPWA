*        %GOTO PWA1;             /*  BILINGUAL MAPPING MACRO            00050000
         MACRO                                                          00100000
         IGFPWA                                                         00150000
*                                */                                     00200000
*%PWA1: ;                                                               00250000
*/* START OF SPECIFICATIONS ******************************************* 00300000
*                                                                       00350000
* MACRO-NAME:  IGFPWA                                                   00400000
*                                                                       00450000
* DESCRIPTIVE-NAME:  MACHINE CHECK HANDLER PROCESSOR WORK AREA          00500000
*                                                                       00550000
* COMPONENT: BB1CT (MCH)                                                00585700
*                                                                       00621400
* COPYRIGHT:                                                            00657100
*       5647-A01                                                        00692800
*       THIS MODULE IS "RESTRICTED MATERIALS OF IBM"                    00728500
*       (C) COPYRIGHT IBM CORP. 1981, 2000                              00764200
*       LICENSED MATERIALS - PROPERTY OF IBM                            00800000
*                                                                       00950000
* STATUS:  HBB7703                                                      00970000
*                                                                       00990000
*01*  EXTERNAL CLASSIFICATION: NONE                                     01010000
*01*  END OF EXTERNAL CLASSIFICATION:                                   01030000
*                                                                       01050000
* FUNCTION:                                                             01100000
*       THE PWA CONTAINS AND POINTS TO MACHINE CHECK HANDLER RECOVERY   01150000
*       INFORMATION, CONTAINS SAVE AREAS FOR HARDWARE GENERATED MACHINE 01200000
*       CHECK INFORMATION, AND CONTAINS THRESHOLD BLOCKS (THBS) FOR     01250000
*       EACH MACHINE CHECK TYPE WHICH IS THRESHOLDED.                   01300000
*                                                                       01350000
* METHOD-OF-ACCESS:                                                     01400000
*       BAL:                                                            01450000
*             USING RXX,PWA - DSECT ONLY                                01500000
*       PLS:                                                            01550000
*             %INCLUDE SYSLIB(IGFPWA)                                   01600000
*             DCL PWAPTR PTR(31)                                        01650000
*                                                                       01700000
* POINTED-TO-BY:                                                        01750000
*       PCCAPWAV FIELD OF THE PCCA DATA AREA (VIRTUAL ADDRESS)          01800000
*       PCCAPWAR FIELD OF THE PCCA DATA AREA (REAL ADDRESS)             01850000
*                                                                       01900000
* CREATED-BY:  IGFPBUCR AT NIP TIME AND WHEN A CPU IS BROUGHT ONLINE    01950000
*                                                                       02000000
* DELETED-BY:  IGFPBUCR WHEN A CPU IS TAKEN OFFLINE                     02050000
*                                                                       02100000
* SUBPOOL-AND-KEY:  239 AND KEY 0                                       02150000
*                                                                       02200000
* STORAGE-ESTIMATE:  ONE PER CPU                                        02250000
*                                                                       02300000
* SERIALIZATION:  NONE.  THERE IS ONE PWA FOR EACH CPU.                 02350000
*                                                                       02400000
* DISTRIBUTION LIBRARY:  APVTMACS                                       02416600
*                                                                       02433200
* CHANGE-ACTIVITY:                                                      02450000
*      PWASIGPS                                                @ZA43228 02500000
*      @G860P2O OS/VS2 HBB2102                                 @G860P2O 02550000
*      $H1=VF       JBB2214 840912 PD11: VECTOR FEATURE.           @H1A 02600000
*      $L1=CLOCK    HBB4410 880104 PDAF: ETR SUPPORT.              @L1A 02616600
*      $H2=CNITG    HBB4410 890501 PDAF: CONSOLE INTEGRATION.      @H2A 02633200
*      $P1=PEO3844  HBB4410 900330 PDHC: DOCUMENTATION.                 02639500
*      $T1=OY25576  HBB4410 900330 PDHC: KEY RECOVERY ENHANCEMENT. @T1A 02645800
*      $P2=PEO4056  HBB4410 900330 PDHC: ADD 1-BYTE WORK AREA.     @P2A 02647900
*      $P3=PEO4322  HBB4410 900504 PDHC: ADD CODEREG SAVE AREA.    @P3A 02648900
*      $01=OY42068  HBB3310 910612 PDHC: SPIN LOOP TIMEOUT         @01A 02649200
*      $02=OY51778  HBB4410 920331 PDHC: THRESHOLD ARITHMETIC AREA @02A 02649500
*      $P4=PKB1671  HBB4430 920430 PDHC: ROLL UP OY51778.               02649700
*      $P5=PKB2474  HBB4430 920624 PD22: PROVIDE DYNAMIC PARM AREA FOR  02662400
*                                        BLWPTERM'S WTO            @P5A 02674900
*      $P6=PKB2419  HBB4430 920630 PD22: CORRECT PWA14MSK TO CLEAR      02679000
*                                        CR14 BITS 3 - 7           @P6A 02683100
*      $03=OY56914  HBB4410 920918 PDHC: MESSAGE AREA FOR IGFPMHCA @03A 02685200
*      $L2=64BITMCH HBB7703 981204 PD00XB: ESAME                   @L2A 02685900
*      $P7=PXD0038  HBB7703 990331 PDHC: DOCUMENTATION.            @P7A 02686600
*                                                                       02687400
* END OF SPECIFICATIONS **********************************************/ 02700000
*%GOTO PWA2; /*                                                         02750000
         SPACE 1                                                        02800000
PWA      DSECT                                                          02850000
PWAID    DS    CL4'PWA' .          ID FOR DUMPS                @G860P2O 02900000
PWATRACV DS    F .                 VIRTUAL ADDRESS OF MCHTRACE @G860P2O 02950000
PWATRACR DS    F .                 REAL ADDRESS OF MCHTRACE    @G860P2O 03000000
PWAWORK1 DS    F .                 WORK WORD FOR COMPARE & SWAP    @H1A 03050000
PWAVSTHB DS    XL16 .              THRESHOLD BLOCK FOR             @H1A 03100000
*                                  VECTOR SOURCE EVENTS            @H1A 03150000
PWASCTHB DS    XL16 .              THRESHOLD BLOCK FOR ETR         @L1A 03200000
*                                  SYNC CHECK EVENTS               @L1A 03250000
PWALDWT  DS    XL24 .              BLWPTERM LDWT PARAMETER LIST    @H2C 03300000
PWASA2   DS    XL72 .              STANDARD REGISTER SAVE AREA 2        03400000
*                                    IGFPMHCA MKTA MSCA XMFA       @01C 03425000
PWASA3   DS    XL72 .              STANDARD REGISTER SAVE AREA 3        03450000
*                                    IGFPKREF IGFPMTHA                  03475000
PWASA4   DS    XL72 .              STANDARD REGISTER SAVE AREA 4        03500000
*                                    IGFPMRTH                           03525000
PWASA1   DS    XL72 .              STANDARD REG SAVE AREA 1, IGFPMAIN   03550000
*                                    IGFPMCIH IGFPMRTM             @H2C 03600000
PWASRTHB DS    D .                 THRESHOLD BLOCK FOR SYSTEM RECOVERY  03650000
*                                    (SR) EVENTS                        03700000
PWADGTHB DS    D .                 THRESHOLD BLOCK FOR DEGRADATION      03750000
*                                    (DG) EVENTS                        03800000
PWAFRRCD DS    F .                 FRR ERROR CODE FIELD                 03850000
PWAFRRCT DS    F .                 FRR STACK INDEX                      03900000
*                                                                       03950000
PWAFRR1  DS    0XL16 .             FRR STACK ENTRY 1                    04000000
PWAFRR12 DS    F .                 FRR STACK REGISTER 12 FIELD          04050000
PWAFRR13 DS    F .                 FRR STACK REGISTER 13 FIELD          04100000
PWAFRR15 DS    F .                 FRR STACK REGISTER 15 FIELD          04150000
PWAFRR10 DS    F .                 FRR STACK REGISTER 0 FIELD           04200000
*                                                                       04250000
PWAFRR2  DS    0XL16 .             FRR STACK ENTRY 2                    04300000
PWAFRR22 DS    F .                 FRR STACK REGISTER 12 FIELD          04350000
PWAFRR23 DS    F .                 FRR STACK REGISTER 13 FIELD          04400000
PWAFRR25 DS    F .                 FRR STACK REGISTER 15 FIELD          04450000
PWAFRR20 DS    F .                 FRR STACK REGISTER 0 FIELD           04500000
*                                                                       04550000
PWAFRR3  DS    0XL16 .             FRR STACK ENTRY 3                    04600000
PWAFRR32 DS    F .                 FRR STACK REGISTER 12 FIELD          04650000
PWAFRR33 DS    F .                 FRR STACK REGISTER 13 FIELD          04700000
PWAFRR35 DS    F .                 FRR STACK REGISTER 15 FIELD          04750000
PWAFRR30 DS    F .                 FRR STACK REGISTER 0 FIELD           04800000
*                                                                       04850000
PWAFRR4  DS    0XL16 .             FRR STACK ENTRY 4                    04900000
PWAFRR42 DS    F .                 FRR STACK REGISTER 12 FIELD          04950000
PWAFRR43 DS    F .                 FRR STACK REGISTER 13 FIELD          05000000
PWAFRR45 DS    F .                 FRR STACK REGISTER 15 FIELD          05050000
PWAFRR40 DS    F .                 FRR STACK REGISTER 0 FIELD           05100000
*                                                                       05150000
PWASOSW  DS    XL8 .               AREA TO SAVE RECURSIVE OLD PSW IF    05200000
*                                    MACHINE CHECK, PROGRAM CHECK, OR   05250000
*                                    RESTART INTERRUPTION OCCURS IN MCH 05300000
PWAINTC  DS    XL8 .               AREA TO SAVE INTERRUPT CODE FROM     05350000
*                                    RECURSIVE MACHINE CHECK OR PROGRAM 05400000
*                                    CHECK IN MCH                       05450000
PWAPMHCA DS    XL162 .             MESSAGE AREA FOR IGFPMHCA       @L2M 05500000
         DS    XL70  .             RESERVED                        @L2C 05550000
PWACR14  DS    F .                 CONTROL REGISTER 14, CONTROLS        05700000
*                                    ENABLE/DISABLE OF REPRESSIBLE      05750000
*                                    MACHINE CHECKS                @H2C 05800000
         DS    F .                 RESERVED                        @H2C 05850000
PWATERM  DS    XL64 .              REGISTER SAVA AREA FOR BLWPTERM      05900000
*                                                              @G860P2O 05950000
         DS    XL8 .               RESERVED                 @G860P2O    06200000
PWAMFAFL DS    XL1 .               MALFUNCTION ALERT RECEIVED FLAGS     06250000
PWAINIT  DS    XL1 .               INDICATES BEING INVOKED DURING IPL   06300000
*                                  OR CONFIG CPU(),ONLINE          @L1C 06350000
PWAFLAGS DS    XL1 .               PROCESSOR FLAGS                      06450000
*                                                                       06500000
PWAREST  EQU   X'80' .             RESTART INTERRUPTION QUEUED          06550000
PWAVRIV  EQU   X'40' .             INDICATES VECTOR REGISTERS ARE  @H1C 06600000
*                                  UNPREDICTABLE                   @H1C 06650000
PWARSMA  EQU X'20' .               IARXMCKS IS ACTIVE              @T1A 06700000
*        EQU X'10' .               RESERVED                             06750000
PWACPUL  EQU X'08' .               MCH HAS THE CPU LOCK        @ZMC2606 06800000
*                                                                       06850000
PWARECUR EQU X'04' .               SET TO 1 BY IGFPMCIH IF A            06900000
*                                  MACHINE CHECK OCCURS WITHIN THE      06950000
*                                  MACHINE CHECK HANDLER ITSELF.        07000000
*                                  SET TO 0 BY IGFPEXIT                 07050000
*                                  BITS 6 AND 7 RESERVED       @G860P2O 07100000
*                                                                       07150000
PWASFRR  EQU X'02' .               SET TO 1 & 0 BY IGFPKREF             07200000
*                                  1: IGFPKREF IS EXECUTING ON THE      07250000
*                                  MCH PATH AND SETFRR HAS BEEN         07300000
*                                  ISSUED. THEREFORE THE SETFRR         07350000
*                                  PARM AREA MAY HAVE SOME USEFUL       07400000
*                                  DATA IN IT                  @G860P2O 07433300
         DS    XL1 .               RESERVED                    @G860P2O 07500000
PWACNTR  DS    XL1 .               RECURSIVE MACHINE CHK COUNT @G551P2M 07550000
PWAWBYTE DS    XL1 .               ONE-BYTE WORK AREA              @P2A 07600000
PWACPUAD DS    H .                 AREA FOR BLWPTERM TO SAVE CPU ADDR   07650000
*                                    OF SIGNALLED CPU DURING PROCESSOR  07700000
*                                    TERMINATION                        07750000
         DS    0F                                                       07800000
PWAENV   DS    A .                 VIRTUAL ADDRESS OF AN ENV   @G381P2O 07850000
PWAR12SA DS    F .                 BLWPTERM CODEREG SAVE AREA      @P3A 07900000
         DS    0D                                                  @H2C 07950000
PWAWRK   DS    XL8 .               WORK AREA /THRESHOLD PROCESSING @H2C 08000000
PWAWRKA  DS    XL16 .              WORK AREA FOR IEEUSTCK          @01A 08025000
PWAPLIST DS    XL16 .              PLIST FOR CALL TO IEEUSTCK      @01A 08050000
         DS    XL8 .               RESERVED                        @H2C 08075000
PWASA7   DS    XL72 .              REGISTER SAVE AREA PASSED TO         08125000
*                                  ROUTINES CALLED BY MCH. USED BY      08166600
*                                  IGFPMHCA AND IGFPMKTA       @ZMC1080 08208200
         DS    0D   .                                          @G55CP2P 08250000
PWAPDTHB DS    XL16 .              THRESHOLD BLOCK FOR         @G55CP2P 08300000
*                                  INSTRUCTION PROCESSING      @G55CP2P 08350000
*                                  DAMAGE   EVENTS             @G55CP2P 08400000
PWASDTHB DS    XL16 .              THRESHOLD BLOCK FOR         @G55CP2P 08450000
*                                  SYSTEM DAMAGE               @G55CP2P 08500000
*                                           EVENTS             @G55CP2P 08550000
PWAIVTHB DS    XL16 .              THRESHOLD BLOCK FOR         @G55CP2P 08600000
*                                  INVALID REGISTER OR PSW     @G55CP2P 08650000
*                                           EVENTS             @G55CP2P 08700000
PWATCTHB DS    XL16 .              THRESHOLD BLOCK FOR         @G55CP2P 08750000
*                                  TOD CLOCK DAMAGE EVENTS     @G55CP2P 08800000
PWAPTTHB DS    XL16 .              THRESHOLD BLOCK FOR         @G55CP2P 08850000
*                                  CPU TIMER DAMAGE EVENTS     @G55CP2P 08900000
PWACCTHB DS    XL16 .              THRESHOLD BLOCK FOR         @G55CP2P 08950000
*                                  CLOCK COMPARATOR DMG        @G55CP2P 09000000
*                                           EVENTS             @G55CP2P 09050000
PWASA5   DS    XL72 .              A SAVEAREA USED BY IOSRMCH           09100000
*                                  WHEN IT CALLS OTHER PROC    @G860P2O 09150000
PWASA6   DS    XL72 .              A SAVEAREA USED BY THE               09200000
*                                  RECURSIVE MACHINE CHECK PATH OF      09250000
*                                  IGFPMAIN SO THAT IT CAN CALL         09300000
*                                  IOSRMCH. PWASA1 MAY                  09350000
*                                  ALREADY BE IN USE.          @G860P2O 09400000
PWASIGPS DS    XL4 .               AREA FOR IGFPXMFA TO SAVE   @ZA43228 09450000
*                                    SIGP SENSE DATA           @ZA43228 09500000
         DS    XL4 .               RESERVED                        @L1A 09506200
PWAPSTHB DS    XL16 .              THRESHOLD BLOCK FOR PRIMARY-SYNC     09512400
*                                  DAMAGE EVENTS                   @L1A 09518600
PWAADTHB DS    XL16 .              THRESHOLD BLOCK FOR ETR-ATTACHMENT   09524800
*                                  DAMAGE EVENTS                   @L1A 09531000
PWASLTHB DS    XL16 .              THRESHOLD BLOCK FOR ETR SWITCH-TO-   09537200
*                                  LOCAL SYNC EVENTS               @L1A 09543400
PWAVAR1  DS    XL4 .               THRESHOLD ARITHMETIC AREA       @02A 09544700
PWAVAR2  DS    XL4 .               THRESHOLD ARITHMETIC AREA       @02A 09546000
PWAPMTHA DS    XL68 .              IGFPMTHA MESSAGE BUILDING AREA  @02A 09546900
PWAMSG06 DS    XL112 .             DYNAMIC WTO PARM AREA FOR BLWPTERM   09547900
*                                  MESSAGE BLW006W                 @P5A 09548500
PWASFLC  DS    XL512 .             AREA TO SAVE BYTES 0-511             09548800
*                                    FROM THE ORIGINAL                  09549100
*                                    (NOT RECURSIVE) MACHINE CHECK      09549400
*                                    INTERRUPTION                  @L2C 09549700
*                                                                     * 09550000
*    END OF MCH PROCESSOR WORK AREA                                   * 09600000
*                                                                     * 09650000
         MEND                                                           09700000
*        */                                                             09750000
*%PWA2: ;                                                               09800000
*                                                                       09850000
* DECLARE                                                               09900000
*  1 PWA BASED(PWAPTR) BDY(DWORD),                                      09950000
*   2 PWAID    CHAR(4),            /* = 'PWA', IT WILL SHOW UP IN       10000000
*                                     A DUMP                @G860P2O */ 10050000
*   2 PWATRACV PTR(31),            /* A VIRTUAL POINTER TO THE TRACE    10100000
*                                     MAP FOR THE MACHINE CHECK         10150000
*                                     HANDLER               @G860P2O */ 10200000
*   2 PWATRACR PTR(31),            /* A REAL POINTER TO THE TRACE       10250000
*                                     MAP FOR THE MACHINE CHECK         10300000
*                                     HANDLER               @G860P2O */ 10350000
*   2 PWAWORK1 FIXED(31),          /* WORK WORD FOR COMPARE &           10400000
*                                     SWAP.                      @H1A*/ 10450000
*   2 PWAVSTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR VECTOR        10500000
*                                     SOURCE EVENTS              @H1A*/ 10550000
*   2 PWASCTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR ETR SYNC      10600000
*                                     CHECK EVENTS               @L1A*/ 10650000
*   2 PWALDWT  CHAR(24),           /* BLWPTERM LDWT PARAMETER LIST      10700000
*                                                                @H2C*/ 10750000
                                                          @SPACE(1);    10800000
*   2 PWASA2 (18) FIXED(31),       /* REGISTER SAVE AREA, IGFPXMFA      10830000
*                                     IGFPMHCA IGFPMKTA IGFPMSCA @01C*/ 10860000
*   2 PWASA3 (18) FIXED(31),       /* STANDARD REGISTER SAVE AREA 3     10890000
*                                     IGFPKREF IGFPMTHA              */ 10913300
*   2 PWASA4 (18) FIXED(31),       /* STANDARD REGISTER SAVE AREA 4     10936600
                                      IGFPMRTH                       */ 10959900
*   2 PWASA1 (18) FIXED(31),       /* STANDARD REGISTER SAVE AREA 1     10983300
*                                     IGFPMAIN IGFPMCIH IGFPMRTM @H2C*/ 11016600
                                                          @SPACE(1);    11050000
*   2 PWASRTHB CHAR(8) BDY(DWORD), /* THRESHOLD BLOCK FOR SYSTEM        11100000
*                                     RECOVERY (SR) EVENTS           */ 11150000
*   2 PWADGTHB CHAR(8) BDY(DWORD), /* THRESHOLD BLOCK FOR DEGRADATION   11200000
*                                     (DG) EVENTS                    */ 11250000
                                                          @EJECT;       11300000
*   2 PWAFRRCD FIXED(31),          /* FRR ERROR CODE FIELD           */ 11350000
*   2 PWAFRRCT FIXED(31),          /* FRR STACK INDEX                */ 11400000
*   2 PWAFRR (4),                  /* FRR STACK ENTRIES              */ 11450000
*    3 PWAFRR12 FIXED(31),         /* FRR STACK REGISTER FIELD 12    */ 11500000
*    3 PWAFRR13 FIXED(31),         /* FRR STACK REGISTER FIELD 13    */ 11550000
*    3 PWAFRR15 FIXED(31),         /* FRR STACK REGISTER FIELD 15    */ 11600000
*    3 PWAFRR00 FIXED(31),         /* FRR STACK REGISTER FIELD 0     */ 11650000
*   2 PWASOSW CHAR(8) BDY(WORD),   /* AREA TO SAVE RECURSIVE OLD PSW IF 11750000
*                                     MACHINE CHECK, PROGRAM CHECH, OR  11800000
*                                     RESTART INTERRUPTION OCCURS IN    11850000
*                                     MCH                            */ 11900000
*   2 PWAINTC CHAR(8) BDY(WORD),   /* AREA TO SAVE INTERRUPT CODE FROM  11950000
*                                     RECURSIVE MACHINE CHECK OR        12000000
*                                     PROGRAM CHECK IN MCH           */ 12050000
*   2 PWAPMHCA CHAR(162),          /* MESSAGE AREA FOR IGFPMHCA  @LZM*/ 12100000
*   2 *       CHAR(70),            /* RESERVED                   @L2C*/ 12150000
*   2 PWACR14 BIT(32) BDY(WORD),   /* CONTROL REGISTER 14, CONTROLS     12300000
*                                     ENABLE/DISABLE OF REPRESSIBLE     12350000
*                                     MACHINE CHECKS.            @H2C*/ 12400000
*   2 *       BIT(32) BDY(WORD),   /* RESERVED                   @H2C*/ 12450000
*   2 PWATERM   CHAR(64) BDY(WORD), /* REGISTER SAVE AREA FOR BLWPTERM  12500000
*                                                            @G860P2O*/ 12550000
*     3 PWATERMR(0:15) PTR(31),    /* SAME AS ABOVE        @G860P2O  */ 12950000
*   2 * CHAR(8),                   /*                      @G860P2O  */ 13050000
*   2 PWAMFAFL CHAR(1),            /* MALFUNCTION ALERT RECEIVED        13100000
*                                     FLAGS                          */ 13150000
*   2 PWAINIT CHAR(1),             /* INDICATES BEING INVOKED DURING    13200000
*                                     IPL OR CONFIG CPU(),ONLINE @L1C*/ 13250000
                                                             @EJECT;    13350000
*   2 PWAFLAGS BIT(8),             /* PROCESSOR FLAGS                */ 13400000
*    3 PWAREST BIT(1),             /* RESTART INTERRUPTION QUEUED    */ 13450000
*    3 PWAVRIV BIT(1),             /* INDICATES VECTOR REGISTERS ARE    13500000
*                                     UNPREDICTABLE.             @H1C*/ 13550000
*    3 PWARSMA  BIT(1),            /* IARXMCKS IS ACTIVE         @T1A*/ 13600000
*    3 *        BIT(1),            /* RESERVED                       */ 13650000
*    3 PWACPUL  BIT(1),            /* 1: BY IGFPMAIN AFTER IT GETS      13700000
*                                        THE CPU LOCK.                  13750000
*                                     0: BY IGFPEXIT AFTER RELEASING    13800000
*                                        THE CPU LOCK DURING NORMAL     13850000
*                                        MCH CLEANUP.                   13900000
*                                     0: BY IGFPMFRS(IGFPMSUP) WHEN     13950000
*                                        ENTERED BECAUSE OF SOME        14000000
*                                        ERROR DURING IGFPMRTH          14050000
*                                        PROCESSING.                    14100000
*                                     BY GETTING THE CPU LOCK BEFORE    14150000
*                                     CALLING IARXMCKS FROM IGFPMRTH    14200000
*                                     THIS PREVENTS IARXMCKS FROM       14250000
*                                     ENABLING I/O AND EXTERNAL         14300000
*                                     INTERRUPTS WHEN IT RELEASES       14350000
*                                     THE CPU LOCK BEFORE RETURNING     14400000
*                                     TO IGFPMRTH.          @ZMC2606 */ 14450000
*    3 PWARECUR BIT(1),            /* SET TO 1 BY IGFPMCIH IF A         14500000
*                                     MACHINE CHECK OCCURS WITHIN       14550000
*                                     THE MACHINE CHECK HANDLER         14600000
*                                     ITSELF.                           14650000
*                                     SET TO 0 BY IGFPEXIT  @G860P2O */ 14700000
*    3 PWASFRR BIT(1),             /* SET TO 1 & 0 BY IGFPKREF          14750000
*                                     1: IGFPKREF IS EXECUTING ON       14800000
*                                     THE MCH PATH. SETFRR HAS BEEN     14850000
*                                     ISSUED THEREFORE THE FRR PARM     14900000
*                                     AREA SUPPLIED BY SETFRR MAY       14950000
*                                     HAVE SOME USEFUL DATA IN IT.      15000000
*                                                           @G860P2O */ 15050000
*   2 *        CHAR(1),            /* RESERVED              @G860P2O */ 15100000
*   2 PWACNTR BIT(8),              /* RECURSIVE MACHINE-CHECK COUNT     15133300
*                                                            @G551P2M*/ 15166600
*   2 PWAWBYTE CHAR(1),            /* ONE-BYTE WORK AREA         @P2A*/ 15200000
*   2 PWACPUAD CHAR(2) BDY(HWORD), /* AREA FOR BLWPTERM TO SAVE CPU     15250000
*                                     ADDR OF SIGNALLED CPU DURING      15300000
*                                     PROCESSOR TERMINATION          */ 15350000
*   2 PWAENV   PTR(31)  BDY(WORD), /* VIRTUAL ADDRESS OF THE ENV.       15450000
*                                     IT IS SET BY IGFPBUCR  @G381P2O*/ 15500000
*   2 PWAR12SA FIXED(31),          /* BLWPTERM CODEREG SAVE AREA @P3A*/ 15550000
                                                             @EJECT;    15566600
*   2 PWAWRK CHAR (8) BDY(DWORD),  /* WORK AREA FOR THRESHOLD           15583300
*                                     PROCESSING                 @H2C*/ 15616600
                                                          @SPACE(1);    15650000
*   2 PWAWRKA  CHAR(16) BDY(DWORD),/* WORK AREA FOR IEEUSTCK     @01A*/ 15675000
*   2 PWAPLIST CHAR(16),           /* PLIST FOR CALL TO IEEUSTCK @01A*/ 15700000
*   2 *        CHAR(8),            /* RESERVED                   @H2C*/ 15725000
                                                          @SPACE(1);    15750000
*   2 PWASA7   CHAR(72),           /* REGISTER SAVE AREA PASSED TO      15800000
*                                     ROUTINES CALLED BY MCH. USED BY   15850000
*                                     IGFPMHCA AND IGFPMKTA  @ZMC1080*/ 15900000
*   2 PWAPDTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR INSTRUCTION   16000000
*                                     PROCESSING      EVENTS @G55CP2P*/ 16050000
*   2 PWASDTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR SYSTEM        16100000
*                                     DAMAGE     EVENTS      @G55CP2P*/ 16150000
*   2 PWAIVTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK INVALID PSW OR    16200000
*                                     REGISTER       EVENTS  @G55CP2P*/ 16250000
*   2 PWATCTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR TOD CLOCK     16300000
*                                     DAMAGE EVENTS          @G55CP2P*/ 16350000
*   2 PWAPTTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR CPU TIMER     16400000
*                                     DAMAGE EVENTS          @G55CP2P*/ 16450000
*   2 PWACCTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK CLOCK COM-        16500000
*                                     PARATOR DMG EVENTS     @G55CP2P*/ 16550000
*   2 PWASA5 (18) FIXED(31),       /* SAVEAREA USED BY IOSRMCH WHEN     16600000
*                                     IT CALLS OTHER PROCEDURES         16650000
*                                                           @G860P2O */ 16700000
*   2 PWASA6 (18) FIXED(31),       /* A SAVEAREA USED BY THE            16750000
*                                     RECURSIVE MACHINE CHECK PATH      16800000
*                                     OF IGFPMAIN SO THAT IT CAN        16850000
*                                     CALL IOSRMCH. PWASA1 MAY          16900000
*                                     ALREADY BE IN USE.    @G860P2O */ 16950000
*   2 PWASIGPS CHAR(4) BDY(WORD),  /* AREA FOR IGFPXMFA TO SAVE         17000000
*                                      SIGP SENSE DATA      @ZA43228 */ 17050000
*   2 *        CHAR(4),            /* RESERVED                   @L1A*/ 17056200
*   2 PWAPSTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR PRIMARY-SYNC  17062400
*                                     DAMAGE EVENTS              @L1A*/ 17068600
*   2 PWAADTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR ETR-          17074800
*                                     ATTACHMENT DAMAGE EVENTS   @L1A*/ 17081000
*   2 PWASLTHB CHAR(16) BDY(DWORD),/* THRESHOLD BLOCK FOR ETR SWITCH-   17087200
*                                     TO-LOCAL SYNC EVENTS       @L1A*/ 17093400
*   2 PWAVAR1  CHAR(4),            /* THRESHOLD ARITHMETIC AREA  @02A*/ 17094700
*   2 PWAVAR2  CHAR(4),            /* THRESHOLD ARITHMETIC AREA  @02A*/ 17096000
*   2 PWAPMTHA CHAR(68),           /* IGFPMTHA MSG BUILDING AREA @02A*/ 17097300
*   2 PWAMSG06 CHAR(112),          /* DYNAMIC WTO PARM AREA FOR         17097900
*                                     BLWPTERM MESSAGE BLW006W   @P5A*/ 17098500
*   2 PWASFLC CHAR(512) BDY(WORD); /* AREA TO SAVE FIXED LOGOUT AREA    17098800
*                                     (FLC LOCATIONS 0-511) FROM THE    17099100
*                                     ORIGINAL (NOT RECURSIVE) MACHINE  17099400
*                                     CHECK INTERRUPTION         @L2C*/ 17099700
 @EJECT;                                                                17100000
 /********************************************************************/ 17150000
 /*                                                                  */ 17200000
 /*DEFINE-                                                           */ 17250000
 /*          PWA CONSTANTS                                           */ 17300000
 /*                                                                  */ 17350000
 /********************************************************************/ 17400000
                                                             @SPACE(2); 17450000
 DECLARE                                                                17500000
   PWA14MSK  CONSTANT('E0FFFFFF'X) BIT(32); /* MASK TO ZERO CR14 BITS   17550000
                                        3-7 (WHICH CONTROL REPRESSIBLE  17600000
                                        MACHINE CHECKS)          @P6C*/ 17650000
 @EJECT;                                                                18150000
 /********************************************************************/ 18200000
 /*                                                                  */ 18250000
 /*DEFINE-                                                           */ 18300000
 /*          MCHTRACE                                                */ 18350000
 /*                                                                  */ 18400000
 /*PURPOSE-                                                          */ 18450000
 /*          DESCRIBE THE EXECUTION PATH TRACE OF THE MACHINE        */ 18500000
 /*          CHECK HANDLER.                                          */ 18550000
 /*                                                                  */ 18600000
 /*TRACE DESCRIPTION-                                                */ 18650000
 /*          EACH 4-CHARACTER ID IS COMPRISED OF THE LAST FOUR       */ 18700000
 /*          CHARACTERS OF A MCH MODULE NAME.                        */ 18750000
 /*          THE RIGHT-MOST ID IN THE AREA REPRESENTS THE            */ 18800000
 /*          MOST RECENT MODULE THAT WAS EXECUTING.                  */ 18850000
 /*          EACH MODULE SHIFTS THE EXISTING IDS TO THE LEFT         */ 18900000
 /*          BEFORE ADDING ITS OWN ID TO THE TRACE.                  */ 18950000
 /*                                                                  */ 19000000
 /*CREATED BY-                                                       */ 19050000
 /*          IGFPBUCR DURING MCH RIM PROCESSING AND VARY CPU ONLINE  */ 19100000
 /*          PROCESSING. THERE IS A TRACE AREA FOR EVERY PROCESSOR.  */ 19150000
 /*                                                                  */ 19200000
 /*POINTED TO BY-                                                    */ 19250000
 /*          THE PWA CONTAINS THE REAL AND VIRTUAL ADDRESSES OF THE  */ 19300000
 /*          TRACE AREA.                                             */ 19350000
 /*                                                                  */ 19400000
 /*OPERATION-                                                        */ 19441600
 /*          IGFPMCIH ZEROES OUT THE TRACE AREA AND ADDS ITS ID TO   */ 19483200
 /*          IT JUST BEFORE IT INVOKES IGFPMAIN.  THE IGFPMCIH ID    */ 19524800
 /*          WILL APPEAR TWICE IF THERE IS A RECURSIVE MACHINE       */ 19566400
 /*          CHECK.                                                  */ 19608000
 /*                                                                  */ 19650000
 /*          MOST MCH MODULES ADD THEIR IDS.                         */ 19700000
 /*                                                                  */ 19750000
 /*          WHEN MCH PROCESSING IS COMPLETED THE TRACE AREA IS      */ 19800000
 /*          LEFT INTACT (RATHER THAN BEING ZEROED).  IT WILL NOT    */ 19850000
 /*          BE CLEARED UNTIL THE BEGINNING OF A NEW MACHINE CHECK.  */ 19900000
 /*                                                                  */ 20000000
 /*          A TRACE ENTRY IS NOT MADE BY IGF2603D BECAUSE IT IS     */ 20050000
 /*          NOT PART OF MACHINE CHECK INTERRUPT PROCESSING.         */ 20100000
 /*                                                                  */ 20200000
 /*          IGFPMFRS DOES NOT MAKE A TRACE ENTRY BECAUSE IT IS      */ 20250000
 /*          INVOKED SO OFTEN DURING MCH PROCESSING.                 */ 20300000
 /*                                                                  */ 20350000
 /*          BLWPTERM, IGPFTSIG, IGFPTAIM, AND IGFPWAIT BELONG TO    */ 20362500
 /*          LOADWAIT (LDWT) COMPONENT, AND ARE NOT TRACED.      @H2C*/ 20375000
 /*                                                                  */ 20387500
 /*TRACE AREA SIZE-                                                  */ 20400000
 /*          TO CHANGE THE SIZE OF THE TRACE DO THE FOLLOWING:       */ 20450000
 /*          - CHANGE MCH#IDS WHICH IS THE NUMBER OF IDS THAT        */ 20500000
 /*            WILL FIT IN THE AREA.                                 */ 20550000
 /*          - RECOMPILE ALL MCH MODULES THAT USE THE TRACE AREA.    */ 20600000
 /*          - RECOMPILE IGFPBUCR THAT ALLOCATES THE TRACE AREA.     */ 20650000
 /*                                                                  */ 20700000
 /*ID SIZE-                                                          */ 20750000
 /*          TO CHANGE THE SIZE OF THE ID IN THE AREA DO             */ 20800000
 /*          THE FOLLOWING:                                          */ 20850000
 /*          - CHANGE MCHIDLEN WHICH IS THE NUMBER OF CHARACTERS     */ 20900000
 /*            IN EACH ID IN THE AREA.                               */ 20950000
 /*          - RECOMPILE ALL MCH MODULES THAT USE THE TRACE AREA.    */ 21000000
 /*          - RECOMPILE IGFPBUCR THAT ALLOCATES THE TRACE AREA.     */ 21050000
 /*                                                                  */ 21100000
 /*                                                                  */ 21125000
 /********************************************************************/ 21150000
 @EJECT;                                                                21200000
 /********************************************************************/ 21250000
 /*                                                                  */ 21300000
 /*DEFINE-                                                           */ 21350000
 /*          MCHTRACE CONTINUED                                      */ 21400000
 /*                                                                  */ 21450000
 /*UPDATING IT-                                                      */ 21500000
 /*          MVC(MCHTROLD,MCHTRCUR)                                  */ 21550000
 /*                                                                  */ 21600000
 /*          MCHID='ABCD'                                            */ 21650000
 /*                                                                  */ 21700000
 /********************************************************************/ 21750000
                                                          @SPACE(2);    21800000
 DECLARE                                                                21850000
                                                          @SPACE(1);    21900000
   MCHIDLEN   CONSTANT(4),           /* LENGTH OF A TRACE ID@G860P2O */ 21950000
                                                          @SPACE(1);    22000000
   MCH#IDS    CONSTANT(8),           /* THE NUMBER OF IDS THAT       */ 22050000
                                     /* THE TRACE AREA CAN           */ 22100000
                                     /* ACCOMODATE          @G860P2O */ 22150000
                                                          @SPACE(3);    22200000
   1 MCHTRACE BDY(WORD)              /* MCH MODULE TRACE    @G860P2O */ 22250000
              BASED(MCHTRPTR),                                          22300000
                                                          @SPACE(1);    22350000
     2 MCHTILEN  CHAR(1),            /* LENGTH OF TRACE ID  @G860P2O */ 22400000
     2 MCHTLEN   CHAR(2),            /* LENGTH OF THE TRACE          */ 22450000
                                     /* AREA                @G860P2O */ 22500000
                                                          @SPACE(1);    22550000
     2 MCHTAREA  CHAR(MCH#IDS *      /* THE TRACE AREA      @G860P2O */ 22600000
                      MCHIDLEN),                                        22650000
                                                          @SPACE(1);    22700000
       3 MCHTROLD  CHAR(             /* HISTORY, NOT CURRENT MODULE  */ 22750000
                   LENGTH(MCHTAREA)- /* IDENTIFIER          @G860P2O */ 22800000
                          MCHIDLEN),                                    22850000
                                                          @SPACE(1);    22900000
       3 MCHID    CHAR(MCHIDLEN),    /* THE CURRENT ID      @G860P2O */ 22950000
                                                          @SPACE(3);    23000000
   1 * DEFINED(MCHTAREA)             /* ANOTHER WAY TO LOOK AT THE   */ 23050000
       CHAR(LENGTH(MCHTAREA)),       /* TRACE AREA          @G860P2O */ 23100000
                                                          @SPACE(1);    23150000
     2 *         CHAR(MCHIDLEN),                                        23200000
                                                          @SPACE(1);    23250000
     2 MCHTRCUR  CHAR(               /* INCLUDES ALL IDS EXCEPT FOR  */ 23300000
                 LENGTH(MCHTROLD));  /* THE OLDEST          @G860P2O */ 23350000
