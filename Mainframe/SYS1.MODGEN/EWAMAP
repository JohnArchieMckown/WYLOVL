*% GOTO  EWAX1;                   /* BILINGUAL MAPPING         @G860PLS 00050000
         MACRO                                                          00100000
         EWAMAP ,                 */                                    00150000
*%EWAX1: ;                                                              00200000
*/** START OF SPECIFICATIONS *****************************************/ 00226100
*/*                                                                  */ 00252200
*/*01* MACRO NAME= EWAMAP                                            */ 00278300
*/*                                                                  */ 00304400
*/*01* DESCRIPTIVE NAME= EWA - Error Recovery Procedure Work Area    */ 00330500
*/*02*  Acronym: EWA                                                 */ 00356600
*/*                                                                  */ 00382700
*/*01* PROPRIETARY STATEMENT =                                       */ 00408800
*/******START OF PROPRIETARY STATEMENT********************************/ 00434900
*/*                                                                  */ 00461000
*/*   LICENSED MATERIALS - PROPERTY OF IBM                           */ 00487100
*/*   THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                    */ 00513200
*/*   5655-068 (C) COPYRIGHT IBM CORP. 1981, 1993                    */ 00539300
*/*   SEE COPYRIGHT INSTRUCTIONS                                     */ 00565400
*/*                                                                  */ 00591500
*/*  STATUS = HBB5510                                                */ 00617600
*/*                                                                  */ 00643700
*/*****END OF PROPRIETARY STATEMENT***********************************/ 00669800
*/*                                                                  */ 00695900
*/*01* STATUS: HBB5510                                               */ 00722000
*/*                                                                  */ 00748100
*/*01* DSECT Name: EWA                                               */ 00774200
*/*                                                                  */ 00800300
*/*01* Component: IOS (SC1C3)                                        */ 00826400
*/*                                                                  */ 00852500
*/*01* Eye-Catcher: None                                             */ 00878600
*/*02* Offset: n/a                                                   */ 00904700
*/*02* Length: n/a                                                   */ 00930800
*/*                                                                  */ 00956900
*/*01* Storage Attributes:                                           */ 00983000
*/*02* Subpool: 226                                                  */ 01009100
*/*02* Key: 0                                                        */ 01035200
*/*02* Residency: Below 16MB line                                    */ 01061300
*/*02* Main Storage: YES                                             */ 01087400
*/*02* Auxiliary Storage: n/a                                        */ 01113500
*/*02* Virtual Storage: n/a                                          */ 01139600
*/*                                                                  */ 01165700
*/*01* Size: See assembler listing.                                  */ 01191800
*/*                                                                  */ 01217900
*/*01* METHOD OF ACCESS:                                             */ 01244000
*/*                                                                  */ 01270100
*/*02*   ASM: EWAMAP                                                 */ 01296200
*/*02*   PL/X: %INCLUDE SYSLIB(EWAMAP)                               */ 01322300
*/*                                                                  */ 01348400
*/*01* Created by: IOS IRB analysis or IOS Post Status modules.      */ 01374500
*/*                                                                  */ 01400600
*/*01* Deleted by: IOS Post Status and IOS IRB analysis              */ 01426700
*/*                                                                  */ 01452800
*/*01* Pointed to by: IOSERP                                         */ 01478900
*/*                                                                  */ 01505000
*/*01*  FUNCTION - This control block describes the Error Recovery   */ 01531100
*/*                Procedure work area common section:               */ 01557200
*/*                - the common section consists of                  */ 01583300
*/*                  indicators, counters and sense information      */ 01609400
*/*                - the ERP dependent sections are available        */ 01635500
*/*                  for ERP use as needed                           */ 01661600
*/*                                                                  */ 01687700
*/* PROCESSOR = PL/S-3 Compiler/PLAS Compiler/Assembler-H            */ 01713800
*/*                                                                  */ 01739900
*/* ACCESSED VIA: BASED(IOSERP)                                      */ 01766000
*/*                                                                  */ 01792100
*/* ANCHORED VIA: IOSERP                                             */ 01818200
*/*                                                                  */ 01844300
*/* FREED BY:     IOS                                                */ 01870400
*/*                                                                  */ 01896500
*/*01* EXTERNAL CLASSIFICATION: DMTI                             @P4C*/ 01922600
*/*01* END OF EXTERNAL CLASSIFICATION:                               */ 01948700
*/*                                                                  */ 01974800
*/*01* SERIALIZATION: None                                           */ 02000900
*/*                                                                  */ 02027000
*/*01* Change Activity:                                              */ 02035700
*/*                                                                  */ 02044400
*/* $MAC(EWAMAP),COMP(SC1C3): ERP Work Area                         */  02053100
*/* $D1=DCR068,JBB2125,830404,PDLM: SECONDARY ERROR INDICATION   @D1A*/ 02079200
*/* $D2=DCR082,JBB2125,830404,PDLM: DEVICE STATUS CHECK          @D2A*/ 02105300
*/* $H1=3430  ,JBB2125,830404,PDLT: 3430 SUPPORT                 @H1A*/ 02131400
*/* $L1=VERS   ,HBB3310,860416,PDLE: Versioning macro into product   */ 02157500
*/* $P1=PIG1524,HBB5510,930520,PDLZ: IOS area for saving IRB         */ 02183600
*/*                                  during sense processing     @P1A*/ 02209700
*/* $P2=PIG1830,HBB5510,930603,PDLZ: Delete saving of IRB        @P2A*/ 02222700
*/* $P3=PIG2270 HBB5510 930823 PDLU: Prolog updates              @P3A*/ 02229200
*/* $P4=PIG3270 HBB5510 931104 PDLU: Prolog updates, CDPI        @P4A*/ 02232500
*/* $01=OZ86742,JBB2220,850814,PDLJ: Define ERP return flag      @01A*/ 02235800
*/*                                                              @L1A*/ 02261900
*/* $02=OZ97996,JBB2133,860901,PDLE: Provide SLH classifications     */ 02288000
*/*                                                              @02A*/ 02314100
*/* $03=OY04181,HBB3310,871001,PDLE: Define IAE timeout bit      @03A*/ 02340200
*/* $04=OY21399,JBB2220,880201,PDLK: CUIR support                @04A*/ 02366300
*/* $05=OY38424,HBB3310,910301,PDLK: I/O Timing SPE              @05A*/ 02392400
*/* $06=OY50719,HBB3310,920214,PDLU: Added number of sense bytes     */ 02418500
*/*                                  read field.                 @06A*/ 02444600
*/* $07=OW38541 HBB6603 990430 PDLE: FICON Support               @07A*/ 02453300
*/*                                                                  */ 02462000
*/*                                                                  */ 02470700
*/*                                                                  */ 02496800
*/** END OF SPECIFICATIONS *******************************************/ 02522900
*% GOTO  EWAX2;                    /*                          @G860PLS 02550000
EWA      DSECT                                                          02600000
         SPACE 1                                                        02650000
EWAHDR   DS    0F                                                       02700000
EWAEXT   DS    A                   ADDRESS OF WORKAREA EXTENSION        02750000
*                                  THIS FIELD MUST BE ZERO OR           02800000
*                                  POINT TO A BLOCK OBTAINED            02850000
*                                  FROM THE IOS STORAGE                 02900000
*                                  MANAGER                     @G860PLS 02950000
EWAFLG1  DS    XL1                 FLAG BYTE 1                          03000000
EWASLIS  EQU   X'80'               IF ON, INDICATES SKIP SENSE          03050000
*                                  PROCESSING ACTIVE           @G860PLS 03100000
EWAAPR   EQU   X'40'               IF ON, ALTERNATE PATH RETRY NEEDED   03150000
*                                                              @G81APLN 03200000
EWAREPET EQU   X'20'               REPEAT USAGE OF THIS EWA FOR         03250000
*                                  A REQUEST. (ZERO ONLY ON             03300000
*                                  FIRST ENTRY.)               @G860PLS 03350000
EWAXTRCD EQU   X'10'               ERROR RECORDED BY EXIT ROUTINE.      03400000
*                                  CAN BE USED TO COMMUNICATE BETWEEN   03450000
*                                  A DEVICE DEPENDENT EXIT ROUTINE      03500000
*                                  WHICH IS RECORDING AN ERROR AND THE  03550000
*                                  ERP, SO THE ERP DOES NOT RECORD THE  03600000
*                                  SAME ERROR.                          03650000
*                                  SET TO 0 BY IOS ONLY WHEN THE EWA    03700000
*                                  IS OBTAINED. IT IS THE               03750000
*                                  RESPONSIBILITY OF THE ERP OR         03800000
*                                  DEVICE DEPENDENT EXIT TO RESET THIS  03850000
*                                  FIELD ONCE IT HAS BEEN SET ON. @H1C  03900000
EWASCCD  EQU   X'0C'               START SUBCHANNEL DEFERRED            03950000
*                                  CONDITION CODE ON SENSE              04000000
*                                  OPERATION IF THIS IS A UNIT          04050000
*                                  CHECK. (ONLY 0,1 AND 3 ARE           04100000
*                                  VALID).                     @G860PLS 04150000
EWASCC3  EQU   X'0C'               DEFERRED CONDITION CODE 3            04200000
*        EQU   X'08'               RESERVED                    @G860PLS 04250000
EWASCC1  EQU   X'04'               DEFERRED CONDITION CODE 1            04300000
EWASCC0  EQU   X'00'               DEFERRED CONDITION CODE 0            04350000
EWADDMSG EQU   X'02'               ERP DEPENDENT DATA TO BE             04400000
*                                  INCLUDED IN I/O ERROR MESSAGE        04450000
EWABDSNS EQU   X'01'               IF ON, INDICATES SENSE DATA          04500000
*                                  INVALID                     @G860PLS 04550000
EWAFLG2  DS    XL1                 FLAG BYTE 2                          04600000
EWAMDR   EQU   X'80'               IF ON, MDR REQUEST.                  04650000
*                                  IF OFF, OBR REQUEST.                 04700000
EWAWTEMP EQU   X'40'               ON - TEMPORARY WRITE ERROR           04750000
*                                  COUNTER TO BE UPDATED IF             04800000
*                                  DATA CHECK CONDITION.                04850000
*                                  OFF - TEMPORARY READ ERROR           04900000
*                                  COUNTER TO BE UPDATED.               04950000
EWACOVF  EQU   X'20'               COUNTER OVERFLOW INDICATOR           05000000
*                                  FOR STATISTICS UPDATE                05050000
EWAERPRT EQU   X'10'               ON - THE ERP REQUESTS THAT IOSB      05100000
*                                       COMPLETION CODES X'41' TO X'5F' 05150000
*                                       BE RETURNED TO ERP WITH THE     05200000
*                                       IOSERR BIT SET IN THE IOSB @01C 05250000
EWARCBLT EQU   X'08'               OBR RECORD BUILT BY CALLER  @G64SPLK 05300000
EWALBUSY EQU   X'04'               IF ON, LONG BUSY UNIT CHECK     @04A 05350000
*        EQU   X'03'               RESERVED                        @04C 05400000
EWAFLG3  DS    XL1                 FOR DEVICE DEPENDENT ERP USAGE       05450000
EWAJAM   EQU   X'80'               3800 PAPER JAM              @Y40MPLG 05500000
*        EQU   X'7F'               RESERVED                    @G860PLS 05550000
EWASNSCT DS    XL1                 LOOP COUNT FOR SENSE FAILURE         05600000
EWASCTMX EQU   X'FF'               MAX NUMBER  OF SENSES TRIED @ZA25026 05650000
EWASSTAT DS    XL2                 CSW STATUS ON SENSE OPERATION        05700000
*                                  IF THIS IS A UNIT CHECK              05750000
EWACNTRS DS    0XL4                COUNTERS FOR ERP USE        @G860PLS 05800000
EWACNTR1 DS    XL1                 COUNTER 1                            05850000
EWACNTR2 DS    XL1                 COUNTER 2                            05900000
EWACNTR3 DS    XL1                 COUNTER 3                            05950000
EWACNTR4 DS    XL1                 COUNTER 4                            06000000
EWASTUP  DS    XL2                 STATISTICS INFORMATION FOR           06050000
*                                  UPDATING STATISTICS                  06100000
EWAERPIB DS    XL8                 ERPIB BUILT BY SLH FOR CHANNEL       06150000
*                                  ERRORS. INFORMATION FOR ERP USE.     06200000
*                                  VALID WHENEVER THERE IS A CCC,       06250000
*                                  CDC, ICC, OR MEASUREMENT-BLOCK       06300000
*                                  CHECK (L BIT=1 IN IOSB). WHEN A      06350000
*                                  UNIT CHECK OR INTERCEPT CONDITION    06400000
*                                  HAS OCCURRED, THE LPUM FIELD WILL    06450000
*                                  BE VALID AND ALL OTHER FIELDS OF     06500000
*                                  THE ERPIB WILL BE ZERO. IN ALL       06550000
*                                  OTHER CASES, THE ERPIB WILL BE       06600000
*                                  ZERO.                       @G860PLS 06650000
         ORG   EWAERPIB                                                 06700000
EWACFSTB DS    XL1                 FIRST BYTE OF THE EXTENDED           06750000
*                                  STATUS WORD (SEE IHAESW)    @G860PLS 06800000
*        EQU   X'80'               RESERVED                    @G860PLS 06850000
EWACECF  EQU   X'7F'               ERROR CHECK FLAGS           @G860PLS 06900000
EWACKEY  EQU   X'40'               IF ON, INDICATES CBC ERROR           06950000
*                                  ON KEY VS STORAGE.                   07000000
*                                  MEANINGFUL FOR CDC,                  07050000
*                                  MEASUREMENT-BLOCK DATA               07100000
*                                  CHECK OR CCC WITH CCW OR             07150000
*                                  IDAW CHECK.                 @G860PLS 07200000
EWACMBPG EQU   X'20'               IF ON, MEASUREMENT-BLOCK             07250000
*                                  PROGRAM CHECK. MEASUREMENT-          07300000
*                                  BLOCK ENTRY HAS AN INVALID           07350000
*                                  ABSOLUTE ADDRESS.           @G860PLS 07400000
EWACMBDC EQU   X'10'               IF ON, MEASUEMENT-BLOCK              07450000
*                                  DATA CHECK. THE MEASUREMENT-         07500000
*                                  BLOCK PARAMETERS OR THE              07550000
*                                  ASSOCIATED KEY HAVE AN               07600000
*                                  INVALID CBC.                @G860PLS 07650000
EWACMBPT EQU   X'08'               IF ON, MEASUREMENT-BLOCK             07700000
*                                  PROTECTION CHECK. KEY USED           07750000
*                                  BY CHANNEL DOESN'T MATCH             07800000
*                                  MEASUREMENT-BLOCK (STORAGE)          07850000
*                                  KEY.                        @G860PLS 07900000
EWACCCWC EQU   X'04'               IF ON, CBC ERROR WHILE               07950000
*                                  FETCHING A CCW. CHANNEL              08000000
*                                  CONTROL CHECK WILL ALSO BE           08050000
*                                  ON.                         @G860PLS 08100000
EWACIDAW EQU   X'02'               IF ON, CBC ERROR WHILE               08150000
*                                  FETCHING AN IDAW. CHANNEL            08200000
*                                  CONTROL CHECK WILL ALSO BE           08250000
*                                  ON.                         @G860PLS 08300000
EWACALC  EQU   X'01'               IF ON, ADDRESS LIMIT                 08350000
*                                  FAILURE WHILE EXECUTING THE LAST     08400000
*                                  CHANNEL PROGRAM. CHANNEL CONTROL     08450000
*                                  CHECK WILL ALSO BE ON.      @G860PLS 08500000
EWAERWF  DS    XL1                 ERW FLAGS                       @07A 08520000
EWA2CCWV EQU   X'80'               SECONDARY CCW ADDRESS VALID     @07A 08540000
*        EQU   X'7F'               RESERVED                        @07A 08560000
         DS    XL2                 RESERVED                        @07C 08580000
EWARGFG1 DS    XL1                 FLAG BYTE                            08600000
EWACSIO  EQU   X'80'               ALWAYS 0. INDICATES STATUS WAS NOT   08650000
*                                  STORED AFTER A START SUBCHANNEL      08700000
*                                  COMMAND.                    @G860PLS 08750000
EWACINT  EQU   X'40'               ALWAYS 1. INDICATES STATUS STORED    08800000
*                                  FOLLOWING AN I/O INTERRUPT           08850000
*                                  FOR START SUBCHANNEL.       @G860PLS 08900000
EWACTIO  EQU   X'20'               ALWAYS 0. INDICATES STATUS WAS NOT   08950000
*                                  STORED AFTER A TEST SUBCHANNEL       09000000
*                                  COMMAND.                    @G860PLS 09050000
EWACHIO  EQU   X'10'               ALWAYS 0. INDICATES STATUS WAS NOT   09100000
*                                  STORED AFTER A HALT SUBCHANNEL       09150000
*                                  COMMAND.                    @G860PLS 09200000
EWAITO   EQU   X'08'               INTERFACE TIMEOUT DETECTED      @03C 09250000
EWACSNS  EQU   X'04'               SENSE DATA WAS STORED                09300000
EWACCNT  EQU   X'02'               CSW COUNT IS VALID                   09350000
EWANORTY EQU   X'01'               IF ON, OPERATION CANNOT BE           09400000
*                                  RETRIED                     @G860PLS 09450000
EWALPUM  DS    XL1                 LAST PATH USED MASK (LPUM).          09500000
*                                  THIS FIELD IS COPIED FROM            09550000
*                                  THE EXTENDED STATUS WORD IF THE      09600000
*                                  LPUM SETTING IS CONSISTENT WITH THE  09650000
*                                  OTHER LOGOUT INDICATIONS.   @G860PLS 09700000
EWAXCSW1 DS    XL1                 VALIDITY INDICATORS                  09750000
*        EQU   X'80'               RESERVED                    @G860PLS 09800000
EWACFVF  EQU   X'7C'               FIELD VALIDITY FLAGS        @G860PLS 09850000
EWACLPUV EQU   X'40'               LAST PATH USED MASK FIELD IS         09900000
*                                  CONSISTENT WITH THE OTHER LOGOUT     09950000
*                                  INDICATIONS                 @G860PLS 10000000
EWACTCV  EQU   X'20'               TERMINATION CODE IS VALID   @G860PLS 10050000
EWACSQV  EQU   X'10'               SEQUENCE CODE IS VALID               10100000
EWACUNS  EQU   X'08'               DEVICE STATUS IS VALID      @G860PLS 10150000
EWACCMD  EQU   X'04'               CCW ADDRESS IS VALID        @G860PLS 10200000
EWACCHV  EQU   X'02'               ALWAYS 1. INDICATES THE DEVICE       10250000
*                                  NUMBER IS VALID.            @G860PLS 10300000
EWACDAV  EQU   X'01'               ALWAYS 1. INDICATES THE DEVICE       10350000
*                                  NUMBER IS VALID.            @G860PLS 10400000
EWAXCSW2 DS    XL1                 TERMINATION & SEQUENCE CODES         10450000
EWACTEC  EQU   X'C0'               TERMINATION CODE.                    10500000
EWATER0  EQU   X'00'               INTERFACE DISCONNECT                 10550000
EWATER1  EQU   X'40'               STOP, STACK, OR NORMAL TERM          10600000
EWATER2  EQU   X'80'               SELECTIVE RESET                      10650000
EWAD     EQU   X'20'               DEVICE STATUS CHECK             @D2C 10700000
EWAE     EQU   X'10'               SECONDARY ERROR INDICATION      @D1A 10750000
EWACDIN  EQU   X'08'               I/O ERROR ALERT                      10800000
EWACSEQ  EQU   X'07'               SEQUENCE CODES              @G860PLS 10850000
EWASEQ0  EQU   X'00'               RESERVED                             10900000
EWASEQ1  EQU   X'01'               COMMAND SENT BUT STATUS NOT          10950000
*                                  ANALYZED                    @G860PLS 11000000
EWASEQ2  EQU   X'02'               COMMAND ACCEPTED BY DEVICE           11050000
*                                  BUT NO DATA HAS BEEN                 11100000
*                                  TRANSFERRED                 @G860PLS 11150000
EWASEQ3  EQU   X'03'               AT LEAST ONE BYTE OF DATA            11200000
*                                  HAS BEEN TRANSFERRED        @G860PLS 11250000
EWASEQ4  EQU   X'04'               COMMAND NOT SENT OR SENT             11300000
*                                  BUT NOT YET ACCEPTED        @G860PLS 11350000
EWASEQ5  EQU   X'05'               COMMAND ACCEPTED BUT DATA            11400000
*                                  TRANSFER UNPREDICTABLE      @G860PLS 11450000
EWASEQ6  EQU   X'06'               RESERVED                    @G860PLS 11500000
EWASEQ7  EQU   X'07'               RESERVED                    @G860PLS 11550000
         ORG   EWAERPIB+L'EWAERPIB  '                                   11600000
EWACHA   DS    XL2                 DEVICE NUMBER ON WHICH I/O           11650000
*                                  WAS STARTED                 @G860PLS 11700000
EWAFLGA  DS    XL1                 FLAGS FOR IOS INTERNAL USE  @ZA16177 11750000
*        EQU   X'F0'               RESERVED                    @G860PLS 11800000
EWADDE   EQU   X'0F'               BITS RESERVED FOR DEVICE DEPENDENT   11850000
*                                  EXITS                       @G64JPLN 11900000
EWAPATHS DS    XL1                 PATHS TO BE USED FOR RETRY           11950000
*                                  ONLY USED IF EWAAPR IS ON.  @G860PLS 12000000
EWADRCW  DS    0A                  ADDR OF RECORD CONTROL TABLE (VALID  12050000
*                                  ONLY IF EWARCBLT=1)         @G64SPLK 12100000
EWADCNT  DS    XL1                 NUMBER OF BYTES OF OBR INFO          12150000
EWADDISP DS    XL3                 ADDR OF OBR DEVICE DEPENDENT         12200000
*                                  INFO (EWARCBLT=0)           @G64SPLK 12250000
         DS    0D                                                       12300000
EWAIERP  DS    XL184               AREA FOR INDIVIDUAL ERP USE @G860PLS 12350000
EWASMADR DS    A                   ABSOLUTE ADDRESS PASSED TO           12400000
*                                  RSM ON STORAGE OR KEY ERROR          12450000
*                                  DETECTED BY CHANNEL         @G860PLS 12500000
EWASMFLG DS    XL4                 STATUS INFORMATION RETURNED          12550000
*                                  BY RSM                      @G860PLS 12600000
EWASMRC  DS    XL2                 RETURN CODE FROM RSM FOR             12650000
*                                  STORAGE OR KEY ERROR        @G860PLS 12700000
EWAPFCMD DS    XL1                 FAILING PREFIX COMMAND CODE.         12750000
*                                  VALID IF UNIT CHECK OR CHANNEL CHECK 12800000
*                                  (ICC, CCC, CDC) ON PREFIX.           12850000
*                                  OTHERWISE, ZERO.            @G860PLS 12900000
EWAVPATH DS    XL1                 PATH MASK OF CHANNEL PATHS           12950000
*                                  TO BE VARIED OFFLINE BY ERP     @02C 13000000
EWAID    DS    XL4                 EBCDIC ACRONYM FOR EWA      @G860PLS 13050000
EWAESW   DS    XL4                 EXTENDED STATUS WORD        @G860PLS 13100000
EWAQTIME DS    XL2                 IOS TIME VALUE WHEN I/O REQUEST WAS  13120000
*                                  PLACED ON IOQ QUEUE (CONVERTED FROM  13140000
*                                  IOQIOTCT)                       @05A 13160000
EWASNSRD DS    XL1                 LESSER OF THE NUMBER OF SENSE BYTES  13163600
*                                  ACTUALLY READ FROM THE I/O DEVICE    13167200
*                                  AND THE NUMBER OF SENSE BYTES        13170800
*                                  EXPECTED.  THE UCBSNSCT FIELD        13174400
*                                  CONTAINS THE NUMBER OF BYTES         13178000
*                                  THAT IOS EXPECTED THE DEVICE         13181600
*                                  TO RETURN AND IS SET BY THE          13185200
*                                  UIM.  THIS FIELD IS NOT VALID IF     13188800
*                                  EWABDSNS IS SET.                @06A 13192400
         DS    XL1                 RESERVED                        @06C 13196000
EWASLH   DS    AL4                 POINTER TO THE SLH STORAGE      @02C 13200000
EWAERPCR DS    AL4                 ERP CLEANUP ROUTINE ADDRESS     @02C 13250000
EWAEL    EQU   *-EWA               LENGTH OF EWA               @G860PLS 13300000
         ORG   EWAIERP                                                  13350000
         SPACE 1                                                        13400000
*  IOS USAGE OF ERP DEPENDENT AREA FOR READING SENSE DATA  AND          13450000
*  FOR A TEMPORARY STORAGE BEFORE THE ERP IS INITIALLY ENTERED          13500000
*  A 4 byte area following the sense area is being used to save the     13512500
*  2nd CCW translation address translated by IOSRSLH.                   13525000
*  IECVPST will move this translated address to the IEDB           @07C 13537500
EWASNS   EQU   *                   SENSE DATA START                     13550000
         DS    XL64                SENSE INFORMATION                    13600000
         DS    XL12                RESERVED                             13650000
EWA2CSW  DS    XL04                2nd CCW translation address     @07A 13675000
EWAHL    EQU   32                  HEADER LENGTH                        13700000
         MEND                                                           13750000
*        */                                                             13800000
*%EWAX2: ;                         /*                        @G860PLS*/ 13850000
*   DCL 1 EWA  CHAR(248) BDY(DWORD) BASED(EWAPTR),                      13900000
*       2  EWAHDR   PTR(31),       /* EWA HEADER                     */ 13950000
*         3 EWAEXT  PTR(31),       /* ADDRESS OF WA EXTENTION THIS      14000000
*                                     FIELD MUST BE ZERO OR POINT TO A  14050000
*                                     BLOCK OBTAINED FROM THE IOS       14100000
*                                     STORAGE MANAGER        @G860PLS*/ 14150000
*       2  EWAFLAGS CHAR(4),       /* FOUR BYTES OF FLAGS            */ 14200000
*         3 EWAFLG1 BIT(8),        /* FLAG BYTE 1                    */ 14250000
*          4 EWASLIS BIT(1),       /* IF ON, INDICATES SKIP SENSE       14300000
*                                     PROCESSING ACTIVE      @G860PLS*/ 14350000
*          4 EWAAPR   BIT(1),      /* IF ON, ALTERNATE PATH RETRY       14400000
*                                     NEEDED                 @G91APLN*/ 14450000
*          4 EWAREPET BIT(1),      /* REPEAT USAGE OF THIS EWA FOR A    14500000
*                                     REQUEST. (ZERO ONLY ON FIRST      14550000
*                                     ENTRY                  @G860PLS*/ 14600000
*          4 EWAXTRCD BIT(1),   /* ERROR RECORDED BY EXIT ROUTINE.      14650000
*                                  CAN BE USED TO COMMUNICATE BETWEEN   14700000
*                                  A DEVICE DEPENDENT EXIT ROUTINE      14750000
*                                  WHICH IS RECORDING AN ERROR AND THE  14800000
*                                  ERP, SO THE ERP DOES NOT RECORD THE  14850000
*                                  SAME ERROR.                          14900000
*                                  SET TO 0 BY IOS ONLY WHEN THE EWA    14950000
*                                  IS OBTAINED. IT IS THE               15000000
*                                  RESPONSIBILITY OF THE ERP OR         15050000
*                                  DEVICE DEPENDENT EXIT TO RESET THIS  15100000
*                                  FIELD ONCE IT HAS BEEN SET ON.       15150000
*                                                                @H1C*/ 15200000
*          4 EWASCCD  BIT(2),      /* START SUBCHANNEL DEFERRED         15250000
*                                     CONDITION CODE ON SENSE           15300000
*                                     OPERATION IF THIS IS A UNIT       15350000
*                                     CHECK. (ONLY 0,1 AND 3 ARE        15400000
*                                     VALID)                 @G860PLS*/ 15450000
*           5 EWASCC3 BIT(2),      /* DEFERRED CONDITION CODE 3      */ 15500000
*            6 *       BIT(1),     /* RESERVED               @G860PLS*/ 15550000
*            6 EWASCC1 BIT(1),     /* DEFERRED CONDITION CODE 1         15600000
*                                     SEE END OF EWA FOR CC 0        */ 15650000
*          4 EWADDMSG BIT(1),      /* ERP DEPENDENT DATA TO BE INCLUDED 15700000
*                                     IN I/O ERROR MESSAGE           */ 15750000
*          4 EWABDSNS BIT(1),      /* IF ON, INDICATES SENSE DATA       15800000
*                                     INVALID                        */ 15850000
*         3 EWAFLG2 BIT(8),        /* FLAG BYTE 2                    */ 15900000
*          4 EWAMDR BIT(1),        /* IF ON, MDR REQUEST.               15950000
*                                     IF OFF, OBR REQUEST.           */ 16000000
*          4 EWAWTEMP BIT(1),      /* ON - TEMPORARY WRITE ERR COUNTER  16050000
*                                     TO BE UPDATE IF DATA CHECK        16100000
*                                     CONDITION.                        16150000
*                                     OFF - TEMPORARY READ ERR COUNTER  16200000
*                                     TO BE UPDATED.                 */ 16250000
*          4 EWACOVF BIT(1),       /* COUNTER OVERFLOW INDICATOR FOR    16300000
*                                     STATISTICS UPDATE              */ 16350000
*          4 EWAERPRT BIT(1),      /* ON, THE ERP REQUESTS THAT IOSB    16400000
*                                         COMPLETION CODES X'41' TO     16450000
*                                         X'5F' BE RETURNED TO ERP      16500000
*                                         WITH THE IOSERR BIT SET       16550000
*                                         IN THE IOSB            @01C*/ 16600000
*          4 EWARCBLT BIT(1),      /* OBR RECORD BUILT BY CALLER        16650000
*                                                            @G64SPLK*/ 16700000
*          4 EWALBUSY BIT(1),      /* IF ON, LONG BUSY UNIT CHECK       16750000
*                                                                @04A*/ 16800000
*          4 *     BIT(2),         /* RESERVED                   @04C*/ 16850000
*         3 EWAFLG3 BIT(8),        /* FOR DEVICE DEPENDENT ERP USAGE */ 16900000
*          4 EWAJAM BIT(1),        /* 3800 PAPER JAM         @Y40MPLG*/ 16950000
*          4 *      BIT(7),        /* RESERVED               @G860PLS*/ 17000000
*         3 EWASNSCT BIT(8),       /* LOOP COUNT FOR SENSE FAILURE   */ 17050000
*       2  EWASSTAT BIT(16),       /* CSW STATUS ON SENSE OPERATION IF  17100000
*                                     THIS IS A UNIT CHECK           */ 17150000
*       2  EWACNTRS CHAR(4),       /* COUNTERS FOR ERP USE           */ 17200000
*         3 EWACNTR1 PTR(8),       /* COUNTER 1                      */ 17250000
*         3 EWACNTR2 PTR(8),       /* COUNTER 2                      */ 17300000
*         3 EWACNTR3 PTR(8),       /* COUNTER 3                      */ 17350000
*         3 EWACNTR4 PTR(8),       /* COUNTER 4                      */ 17400000
*       2  EWASTUP  CHAR(2),       /* STATISTICS INFORMATION FOR        17450000
*                                     UPDATING STATISTICS            */ 17500000
*       2  EWAERPIB,               /* ERPIB BUILT BY SLH FOR            17550000
*                                     CHANNEL ERRORS. INFORMATION       17600000
*                                     FOR ERP USE.  VALID WHENEVER      17650000
*                                     THERE IS A CCC, CDC, ICC, OR      17700000
*                                     MEASUREMENT-BLOCK CHECK           17750000
*                                     (L BIT =1 IN IOSB).               17800000
*                                     WHEN A UNIT CHECK OR INTERCEPT    17850000
*                                     CONDITION HAS OCCURRED, THE       17900000
*                                     LPUM FIELD WILL BE VALID AND      17950000
*                                     ALL OTHER FIELDS OF THE ERPIB     18000000
*                                     WILL BE ZERO. IN ALL OTHER        18050000
*                                     CASES, THE ERPIB WILL BE ZERO.    18100000
*                                                            @G860PLS*/ 18150000
*         3 EWACFSTB BIT(8),       /* FIRST BYTE OF THE EXTENDED        18200000
*                                     STATUS WORD. (SEE IHAESW)         18250000
*                                                            @G860PLS*/ 18300000
*           4 *        BIT(1),     /* RESERVED               @G860PLS*/ 18350000
*           4 EWACECF  BIT(7),     /* ERROR CHECK FLAGS              */ 18400000
*             5 EWACKEY  BIT(1),   /* IF ON, INDICATES CBC              18450000
*                                     ERROR ON KEY VS STORAGE.          18500000
*                                     MEANINGFUL FOR CDC,               18550000
*                                     MEASUREMENT- BLOCK DATA CHECK,    18600000
*                                     OR CCC WITH CCW OR IDAW           18650000
*                                     CHECK.                 @G860PLS*/ 18700000
*             5 EWACMBPG BIT(1),   /* IF ON, MEASUREMENT-BLOCK          18750000
*                                     PROGRAM CHECK. MEASUREMENT-       18800000
*                                     BLOCK ENTRY HAS AN INVALID        18850000
*                                     ABSOLUTE ADDRESS.      @G860PLS*/ 18900000
*             5 EWACMBDC BIT(1),   /* IF ON, MEASUREMENT-               18950000
*                                     BLOCK DATA CHECK. THE             19000000
*                                     MEASUREMENT-BLOCK PARAMETERS      19050000
*                                     OR THE ASSOCIATED KEY HAVE AN     19100000
*                                     INVALID CBC.           @G860PLS*/ 19150000
*             5 EWACMBPT BIT(1),   /* IF ON, MEASUREMENT-               19200000
*                                     BLOCK PROTECTION CHECK.           19250000
*                                     KEY USED BY CHANNEL DOESN'T       19300000
*                                     MATCH MEASUREMENT-BLOCK           19350000
*                                     (STORAGE) KEY.         @G860PLS*/ 19400000
*             5 EWACCCWC BIT(1),   /* IF ON, CBC ERROR WHILE            19450000
*                                     FETCHING A CCW. CHANNEL           19500000
*                                     CONTROL CHECK WILL ALSO           19550000
*                                     BE ON.                 @G860PLS*/ 19600000
*             5 EWACIDAW BIT(1),   /* IF ON, CBC ERROR WHILE            19650000
*                                     FETCHING AN IDAW. CHANNEL         19700000
*                                     CONTROL CHECK WILL ALSO           19750000
*                                     BE ON.                 @G860PLS*/ 19800000
*             5 EWACALC  BIT(1),   /* IF ON, ADDRESS LIMIT              19850000
*                                     FAILURE WHILE EXECUTING           19900000
*                                     THE LAST CHANNEL PROGRAM. CHANNEL 19950000
*                                     CONTROL CHECK WILL ALSO BE ON.    20000000
*                                                            @G860PLS*/ 20050000
*         3 EWAERWF      BIT(8),   /* ERW FLAGS                  @07A*/ 20066600
*           4 EWA2CCWV   BIT(1),   /* SECONDARY CCW ADDRESS             20083200
*                                     VALID                      @07A*/ 20099800
*           4 *          BIT(7),   /* RESERVED                   @07A*/ 20116400
*         3 * CHAR(2),             /* RESERVED                   @07C*/ 20133000
*         3 EWARGFG1 BIT(8),       /* FLAG BYTE                      */ 20150000
*          4 EWACSIO BIT(1),       /* ALWAYS 0. INDICATES STATUS WAS    20200000
*                                     NOT STORED AFTER A START          20250000
*                                     SUBCHANNEL COMMAND.    @G860PLS*/ 20300000
*          4 EWACINT BIT(1),       /* ALWAYS 1. INDICATES STATUS STORED 20350000
*                                     FOLLOWING AN I/O INTERRUPT FOR    20400000
*                                     START SUBCHANNEL.      @G860PLS*/ 20450000
*          4 EWACTIO BIT(1),       /* ALWAYS 0. INDICATES STATUS WAS    20500000
*                                     NOT STORED AFTER A TEST           20550000
*                                     SUBCHANNEL COMMAND.    @G860PLS*/ 20600000
*          4 EWACHIO BIT(1),       /* ALWAYS 0. INDICATES STATUS WAS    20650000
*                                     NOT STORED AFTER A HALT           20700000
*                                     SUBCHANNEL COMMAND.    @G860PLS*/ 20750000
*          4 EWAITO  BIT(1),       /* INTERFACE TIMEOUT DETECTED @03C*/ 20800000
*          4 EWACSNS BIT(1),       /* SENSE DATA WAS STORED          */ 20850000
*          4 EWACCNT BIT(1),       /* CSW COUNT IS VALID             */ 20900000
*          4 EWANORTY BIT(1),      /* IF ON, OPERATION CANNOT           20950000
*                                     BE RETRIED.            @G860PLS*/ 21000000
*         3 EWALPUM  BIT(8),       /* LAST PATH USED MASK (LPUM).       21050000
*                                     THIS FIELD IS COPIED FROM         21100000
*                                     THE EXTENDED STATUS WORD IF THE   21150000
*                                     LPUM SETTING IS CONSISTENT WITH   21200000
*                                     THE OTHER LOGOUT INDICATIONS.     21250000
*                                                            @G860PLS*/ 21300000
*         3 EWAXCSW1 BIT(8),       /* VALIDITY INDICATORS            */ 21350000
*          4 *       BIT(1),       /* RESERVED               @G860PLS*/ 21400000
*          4 EWACFVF BIT(5),       /* FIELD VALIDITY FLAGS   @G860PLS*/ 21450000
*            5 EWACLPUV BIT(1),    /* LAST PATH USED MASK FIELD IS      21500000
*                                     CONSISTENT WITH THE OTHER LOGOUT  21550000
*                                     INDICATIONS            @G860PLS*/ 21600000
*            5 EWACTCV BIT(1),     /* TERMINATION CODE IS VALID         21650000
*                                                            @G860PLS*/ 21700000
*            5 EWACSQV BIT(1),     /* SEQUENCE CODE IS VALID         */ 21750000
*            5 EWACUNS BIT(1),     /* DEVICE STATUS IS VALID         */ 21800000
*            5 EWACCMD BIT(1),     /* CCW ADDRESS IS VALID           */ 21850000
*          4 EWACCHV BIT(1),       /* ALWAYS 1. INDICATES THE DEVICE    21900000
*                                     NUMBER IS VALID.       @G860PLS*/ 21950000
*          4 EWACDAV BIT(1),       /* ALWAYS 1. INDICATES THE DEVICE    22000000
*                                     NUMBER IS VALID.       @G860PLS*/ 22050000
*         3 EWAXCSW2 BIT(8),       /* TERMINATION AND SEQUENCE CODES */ 22100000
*          4 EWACTEC BIT(2),       /* TERMINATION CODE - SEE BELOW FOR  22150000
*                                     VALUES                         */ 22200000
*          4 EWAD    BIT(1),       /* DEVICE STATUS CHECK        @D2C*/ 22250000
*          4 EWAE    BIT(1),       /* SECONDARY ERROR INDICATION @D1A*/ 22300000
*          4 EWACDIN BIT(1),       /* I/O ERROR ALERT                */ 22350000
*          4 EWACSEQ BIT(3),       /* SEQUENCE CODES - SEE BELOW FOR    22400000
*                                     VALUES                         */ 22450000
*       2  EWACHA   CHAR(2),       /* DEVICE NUMBER ON WHICH I/O WAS    22500000
*                                     STARTED                        */ 22550000
*       2  EWAFLGA  BIT(8),        /* FLAGS FOR IOS INTERNAL USE        22600000
*                                                            @ZA16177*/ 22650000
*         3 *        BIT(4),       /* RESERVED               @G860PLS*/ 22700000
*         3 EWADDE   BIT(4),       /* BITS RESERVED FOR DEVICE          22750000
*                                     DEPENDENT EXITS        @G64JPLN*/ 22800000
*       2  EWAPATHS  BIT(8),       /* PATHS TO BE USED FOR RETRY I/O.   22850000
*                                     ONLY USED IF EWAAPR IS ON.        22900000
*                                                            @G860PLS*/ 22950000
*       2  EWADRCW PTR(31),        /* ADDR OF RECORD CONTROL TABLE      23000000
*                                     (VALID ONLY IF EWARCBLT=1)        23050000
*                                                            @G64SPLK*/ 23100000
*         3  EWADCNT  CHAR(1),     /* NUMBER OF BYTES OF OBR INFO       23150000
*                                                            @G64SPLK*/ 23200000
*         3  EWADDISP PTR(24),     /* ADDR OF OBR DEVICE DEPENDENT      23250000
*                                     INFORMATION (EWARCBLT=0)          23300000
*                                                            @G64SPLK*/ 23350000
*       2  EWAIERP  CHAR(184) BDY(DWORD),/* AREA FOR INDIVIDUAL ERPS */ 23400000
*       2  EWASMADR PTR(31),       /* ABSOLUTE ADDRESS PASSED TO RSM    23450000
*                                     ON STORAGE OR KEY ERROR DETECTED  23500000
*                                     BY CHANNEL             @G860PLS*/ 23550000
*       2  EWASMFLG BIT(32),       /* STATUS INFORMATION RETURNED       23600000
*                                     BY RSM                 @G860PLS*/ 23650000
*       2  EWASMRC FIXED(15),      /* RETURN CODE FROM RSM FOR STORAGE  23700000
*                                     OR KEY ERROR           @G860PLS*/ 23750000
*       2  EWAPFCMD BIT(8),        /* FAILING PREFIX COMMAND CODE.      23800000
*                                     VALID IF UNIT CHECK OR            23850000
*                                     CHANNEL CHECK (ICC, CCC, CDC)     23900000
*                                     ON PREFIX. OTHERWISE,             23950000
*                                     ZERO.                  @G860PLS*/ 24000000
*       2  EWAVPATH BIT(8),        /* PATH MASK OF CHANNEL PATHS        24050000
*                                     TO BE VARIED OFFLINE       @02C*/ 24100000
*       2  EWAID    CHAR(4),       /* EBCDIC ACRONYM FOR EWA @G860PLS*/ 24150000
*       2  EWAESW   CHAR(4),       /* EXTENDED STATUS WORD   @G860PLS*/ 24200000
*       2  EWAQTIME BIT(16),       /* IOS TIME VALUE WHEN I/O REQUEST   24220000
*                                     WAS PLACED ON IOQ QUEUE           24240000
*                                     (CONVERTED FROM IOQIOTCT)  @05A*/ 24260000
*       2  EWASNSRD FIXED(8),      /* Lesser of the number of sense     24263600
*                                     bytes actually read from the      24267200
*                                     device and the number of sense    24270800
*                                     bytes expected.  The UCBSNSCT     24274400
*                                     field contains the number of      24278000
*                                     bytes that IOS expected the       24281600
*                                     device to return and is set by    24285200
*                                     the UIM.  This field is not valid 24288800
*                                     if EWABDSNS is set.        @06A*/ 24292400
*       2  *        CHAR(1),       /* RESERVED                   @06C*/ 24296000
*       2  EWASLH   PTR(31),       /* POINTER TO SLH STORAGE     @02C*/ 24300000
*       2  EWAERPCR PTR(31);       /* ERP CLEANUP ROUTINE ADDRESS       24350000
*                                                                @02C*/ 24400000
* /*                                                                 */ 24450000
* /*  IOS USAGE OF ERP DEPENDENT AREA FOR READING SENSE DATA         */ 24500000
* /*  FOR TEMPORARY STORAGE BEFORE ERP IS INITIALLY ENTERED.         */ 24550000
* /*                                                                 */ 24600000
* /* A 4 byte area following the sense area is being used to save the*/ 24612500
* /* 2nd CCW translation address translated by IOSRSLH.              */ 24625000
* /* IECVPST will move this translated address to the IEDB       @07C*/ 24637500
*  DCL 1 EWADDIOS DEF(EWAIERP) BDY(DWORD),                              24650000
*       2  EWASNS  CHAR(64),       /* SENSE DATA START               */ 24700000
*       2  *       CHAR(12),       /* RESERVED                       */ 24750000
*       2  EWA2CSW CHAR(04),       /*2nd CCW translation address @07A*/ 24775000
*       2  EWAEND  CHAR(0);        /* END OF EWA                     */ 24800000
* /*                                                                 */ 24850000
* /* CONSTANTS FOR EWASCCD                                           */ 24900000
* /*                                                                 */ 24950000
*   DCL EWASCC0 BIT(8) CONSTANT('00'X);/* DEFERRED CONDITION CODE 0  */ 25000000
* /*                                                                 */ 25050000
* /* CONSTANTS FOR EWASNSCT                                          */ 25100000
* /*                                                                 */ 25150000
*   DCL EWASCTMX BIT(8) CONSTANT('FF'X);/* MAXIMUM NUMBER OF SENSES     25200000
*                                     TRIED.                 @G860PLS*/ 25250000
* /*                                                                 */ 25300000
* /* CONSTANTS FOR EWACTEC                                           */ 25350000
* /*                                                                 */ 25400000
*   DCL EWATER0 BIT(2) CONSTANT('00'B);/* INTERFACE DISCONNECT       */ 25450000
*   DCL EWATER1 BIT(2) CONSTANT('01'B);/* STOP, STACK, OR NORMAL TERM*/ 25500000
*   DCL EWATER2 BIT(2) CONSTANT('10'B);/* SELECTIVE RESET            */ 25550000
* /*                                                                 */ 25600000
* /* CONSTANTS FOR EWACSEQ                                           */ 25650000
* /*                                                                 */ 25700000
*   DCL EWACSEQ0 BIT(3) CONSTANT('000'B);/* RESERVED                 */ 25750000
*   DCL EWACSEQ1 BIT(3) CONSTANT('001'B);/* COMMAND SENT BUT STATUS     25800000
*                                     NOT ANALYZED                   */ 25850000
*   DCL EWACSEQ2 BIT(3) CONSTANT('010'B);/* COMMAND ACCEPTED BY DEVICE  25900000
*                                     BUT NO DATA HAS BEEN TRANSFERRED  25950000
*                                                                    */ 26000000
*   DCL EWACSEQ3 BIT(3) CONSTANT('011'B);/* AT LEAST ONE BYTE OF DATA   26050000
*                                     HAS BEEN TRANSFERRED           */ 26100000
*   DCL EWACSEQ4 BIT(3) CONSTANT('100'B);/* COMMAND NOT SENT OR SENT    26150000
*                                     BUT NOT YET ACCEPTED           */ 26200000
*   DCL EWACSEQ5 BIT(3) CONSTANT('101'B);/* COMMAND HAS BEEN ACCEPTED   26250000
*                                     BUT DATA TRANSFER UNPREDICTABLE*/ 26300000
*   DCL EWACSEQ6 BIT(3) CONSTANT('110'B);/* RESERVED                 */ 26350000
*   DCL EWACSEQ7 BIT(3) CONSTANT('111'B);/* RESERVED                 */ 26400000
* /*                                                                 */ 26450000
* /* CONSTANTS FOR CONTROL BLOCK IDENTIFIER                          */ 26500000
* /*                                                                 */ 26550000
*   DCL EWACID  CHAR(4) CONSTANT('EWA ');/* CONTROL BLOCK IDENTIFIER    26600000
*                                                            @G860PLS*/ 26650000
