*                                                                       00050000
* %DCL IXGBRMLT_INCLUDED CHAR EXT;                                      00100000
* %DEACTIVATE IXGBRMLT_INCLUDED;                                        00150000
* %IF IXGBRMLT_INCLUDED = '' %THEN                                      00200000
* %DO;                                                                  00250000
*/* Macro made bi-lingual on 99286. CBGEN compile date 98009         */ 00329980
*% /*                                                                   00350000
         MACRO                                                          00400000
         IXGBRMLT &DSECT=YES,&LIST=YES,&TITLE=YES,&IXGBRMLT=YES         00450000
         GBLC  &IXGBRMLT_INCLUDED                                       00500000
         GBLC  &ZCBPRINT                                                00550000
&IXGBRMLT_INCLUDED SETC 'YES'                                           00600000
         AIF   ('&LIST' EQ 'NONE').P0                                   00650000
         AIF   ('&TITLE' EQ 'NO').P5                                    00700000
 TITLE   'IXGBRMLT  - Browse Multi-block Output Mapping Macro     '     00779980
.P5      ANOP                                                           00800000
**/ IXGBRMLT_1:;                                                        00850000
*/* START OF SPECIFICATIONS ******************************************/ 00900000
*/*                                                                  */ 00950000
*/*01* MACRO NAME: IXGBRMLT                                          */ 01000000
*/*                                                                  */ 01050000
*/*02*   ACRONYM:  IXGBRMLT                                          */ 01100000
*/*                                                                  */ 01150000
*/*01* DESCRIPTIVE NAME:  Browse Multi-block Output Mapping Macro    */ 01200000
*/*                                                                  */ 01250000
*/*01* PROPRIETARY STATEMENT=                                        */ 01300000
*/***PROPRIETARY_STATEMENT********************************************/ 01350000
*/*                                                                  */ 01400000
*/* LICENSED MATERIALS - PROPERTY OF IBM                             */ 01450000
*/* "RESTRICTED MATERIALS OF IBM"                                    */ 01500000
*/* 5647-A01                                                         */ 01550000
*/* (C) COPYRIGHT IBM CORP. 2000                                     */ 01600000
*/*                                                                  */ 01650000
*/* STATUS = HBB7703                                                 */ 01700000
*/*                                                                  */ 01750000
*/***END_OF_PROPRIETARY_STATEMENT*************************************/ 01800000
*/*                                                                  */ 01850000
*/*01* FUNCTION =                                                    */ 01900000
*/*                                                                  */ 01950000
*/*      Maps the data returned in invoker's buffer on a             */ 02000000
*/*      IXGBRWSE READCURSOR request with MULTIBLOCK(YES):           */ 02050000
*/*                                                                  */ 02100000
*/*      BUFFER                                                      */ 02150000
*/*      +---------------------------------------------------------+ */ 02200000
*/*      |                                                         | */ 02250000
*/*      | Ixgbrmhd:  (only 1 in this buffer)                      | */ 02300000
*/*      |   browse service conditions:  rc0                       | */ 02350000
*/*      |                               rc4,rsn416                | */ 02400000
*/*      |                               rc4,rsn417                | */ 02450000
*/*      |                                                         | */ 02500000
*/*   +0 |   NumLogBlocks -  number of log blocks returned in this | */ 02550000
*/*      |                   buffer                                | */ 02600000
*/*      |                                                         | */ 02650000
*/*      |                                                         | */ 02700000
*/*   +4 |   LastBrmltOffset - offset from the beginning of this   | */ 02750000
*/*      |                   buffer to the start of the last       | */ 02800000
*/*      |                   Ixgbrmlt area.                        | */ 02850000
*/*      |                                                         | */ 02900000
*/*      |---------------------------------------------------------| */ 02950000
*/*      |                                                         | */ 03000000
*/*   +8 | Ixgbrmlt for 1st (possibly last) log block in the buffer| */ 03050000
*/*      |   browse service conditions:  rc0                       | */ 03100000
*/*      |                               rc4,rsn416                | */ 03150000
*/*      |                               rc4,rsn417                | */ 03200000
*/*      |                                                         | */ 03250000
*/*      | - - - - - - - - - - - - - - - - - - - - - - - - - - - - | */ 03300000
*/*  +24 |                                                         | */ 03350000
*/*   or | Ixgbrmlt_LogBlock                                       | */ 03400000
*/*  +52 |   data for 1st (possibly last) log block in the buffer  | */ 03450000
*/*      |                                                         | */ 03500000
*/*      |---------------------------------------------------------| */ 03550000
*/*      |                                                         | */ 03600000
*/*      | Ixgbrmlt for possible 2nd log block in this buffer      | */ 03650000
*/*      |   browse service conditions:  rc0                       | */ 03700000
*/*      |                               rc4,rsn416                | */ 03750000
*/*      |                               rc4,rsn417                | */ 03800000
*/*      |                                                         | */ 03850000
*/*      |                                                         | */ 03900000
*/*      | - - - - - - - - - - - - - - - - - - - - - - - - - - - - | */ 03950000
*/*      |                                                         | */ 04000000
*/*      | Ixgbrmlt_LogBlock                                       | */ 04050000
*/*      |   data for possible 2nd log block in this buffer        | */ 04100000
*/*      |                                                         | */ 04150000
*/*      |                                                         | */ 04200000
*/*      |---------------------------------------------------------| */ 04250000
*/*      |                                                         | */ 04300000
*/*      |                                                         | */ 04350000
*/*      |   ...                                                   | */ 04400000
*/*      |                                                         | */ 04450000
*/*      |                                                         | */ 04500000
*/*      |---------------------------------------------------------| */ 04550000
*/*      |                                                         | */ 04600000
*/*      | Ixgbrmlt for last log block in this buffer              | */ 04650000
*/*      |   browse service conditions:  rc0                       | */ 04700000
*/*      |                               rc4,rsn416                | */ 04750000
*/*      |                               rc4,rsn417                | */ 04800000
*/*      |                                                         | */ 04850000
*/*      | - - - - - - - - - - - - - - - - - - - - - - - - - - - - | */ 04900000
*/*      |                                                         | */ 04950000
*/*      | Ixgbrmlt_LogBlock                                       | */ 05000000
*/*      |   data for last log block in this buffer                | */ 05050000
*/*      |                                                         | */ 05100000
*/*      |---------------------------------------------------------| */ 05150000
*/*      |                                                         | */ 05200000
*/*      | Ixgbrmlt to indicate error/environmental condition      | */ 05250000
*/*      |   browse service conditions:  rc4,rsn417                | */ 05300000
*/*      |                                                         | */ 05350000
*/*      |                                                         | */ 05400000
*/*      |---------------------------------------------------------| */ 05450000
*/*      |                                                         | */ 05500000
*/*      | (portion of buffer that might not be used by Logger     | */ 05550000
*/*      |  for output information)                                | */ 05600000
*/*      |                                                         | */ 05650000
*/*      +---------------------------------------------------------+ */ 05700000
*/*                                                                  */ 05750000
*/*                                                                  */ 05800000
*/*                                                                  */ 05850000
*/*01* EXTERNAL CLASSIFICATION:  GUPI                                */ 05900000
*/*01* END OF EXTERNAL CLASSIFICATION:                               */ 05950000
*/*                                                                  */ 06000000
*/*    NOTES =                                                       */ 06050000
*/*                                                                  */ 06100000
*/*      Bilingual Mapping Macro (PL/X and BAL)                      */ 06150000
*/*                                                                  */ 06200000
*/*      Three DSECT (Based) sections are mapped by this member:     */ 06250000
*/*        Ixgbrmhd                                                  */ 06300000
*/*        Ixgbrmlt                                                  */ 06350000
*/*        Ixgbrmlt_LogBlock                                         */ 06400000
*/*                                                                  */ 06450000
*/*                                                                  */ 06500000
*/*      DEPENDENCIES = None                                         */ 06550000
*/*        The area referenced by the IXGBRWSE BUFFER parameter      */ 06600000
*/*        must start on a full-word boundary.                       */ 06650000
*/*                                                                  */ 06700000
*/*                                                                  */ 06750000
*/*      RESTRICTIONS = None                                         */ 06800000
*/*                                                                  */ 06850000
*/**** INVOCATION ****************************************************/ 06900000
*/*                                                                  */ 06950000
*/*    METHOD OF ACCESS =                                            */ 07000000
*/*                                                                  */ 07050000
*/*      PL/X Invocation =                                           */ 07100000
*/*                                                                  */ 07150000
*/*  %DCL BRMLTBASE CHAR                                             */ 07200000
*/*  %BRMLTBASE = '' OR 'BASED' OR 'BASED(pointer)' etc.             */ 07250000
*/*  %INCLUDE SYSLIB(IXGBRMLT)                                       */ 07300000
*/*                                                                  */ 07350000
*/*    PARAMETER DESCRIPTION =                                       */ 07400000
*/*                                                                  */ 07450000
*/*      PARAMETER = BRMLTBASE                                       */ 07500000
*/*                                                                  */ 07550000
*/*        DESCRIPTION = Global variable that determines IXGBRMLT's  */ 07600000
*/*                      attributes                                  */ 07650000
*/*                                                                  */ 07700000
*/*            BRMLTBASE = Null or '' or                             */ 07750000
*/*                        'BASED' OR 'BASED(pointer)' etc.  -       */ 07800000
*/*                        define as based                           */ 07900000
*/*                                                                  */ 07950000
*/*            BRMLTBASE = 'Auto'      - define as auto data         */ 07975000
*/*                                                                  */ 08000000
*/*        TYPE = Specified as global parameter                      */ 08050000
*/*                                                                  */ 08100000
*/*        FORM = Character value                                    */ 08150000
*/*                                                                  */ 08200000
*/*        DEFAULT = Null or '' - define as Based                    */ 08250000
*/*                                                                  */ 08300000
*/*      PARAMETER = IXGBRMLT_LIST                                   */ 08350000
*/*                                                                  */ 08400000
*/*        DESCRIPTION = Global variable that determines if          */ 08450000
*/*                      IXGBRMLT mappings should be included in     */ 08500000
*/*                      the listing.                                */ 08550000
*/*                                                                  */ 08600000
*/*            IXGBRMLT_LIST = Null or '' or any value but 'NO'  -   */ 08650000
*/*                      indicates mappings should be included in    */ 08700000
*/*                      the listing                                 */ 08750000
*/*                                                                  */ 08800000
*/*            IXGBRMLT_LIST = 'NO'  - indicates mappings should not */ 08850000
*/*                      included in the listing                     */ 08900000
*/*                                                                  */ 08950000
*/*        TYPE = Specified as global parameter                      */ 09000000
*/*                                                                  */ 09050000
*/*        FORM = Character value                                    */ 09100000
*/*                                                                  */ 09150000
*/*        DEFAULT = Null or '' - include in listing                 */ 09200000
*/*                                                                  */ 09250000
*/*    PARAMETER INTERDEPENDENCIES = N/A                             */ 09300000
*/*                                                                  */ 09350000
*/*------------------------------------------------------------------*/ 09400000
*/*                                                                  */ 09450000
*/*      BAL Invocation =                                            */ 09500000
*/*                                                                  */ 09550000
*/*      name            name: symbol. Begin name in column 1.       */ 09600000
*/*  b                   one or more blanks (up to nine)             */ 09650000
*/*  IXGBRMLT            should start in column 10                   */ 09700000
*/*  b                   one or more blanks                          */ 09750000
*/*                                                                  */ 09800000
*/*   DSECT=YES|NO,                                                  */ 09850000
*/*   LIST=YES|NO,                                                   */ 09900000
*/*   TITLE=YES|NO,                                                  */ 09950000
*/*   IXGBRMLT=YES|NO                                                */ 10000000
*/*                                                                  */ 10050000
*/*    PARAMETER DESCRIPTION =                                       */ 10100000
*/*                                                                  */ 10150000
*/*      PARAMETER = DSECT                                           */ 10200000
*/*                                                                  */ 10250000
*/*        DESCRIPTION =                                             */ 10300000
*/*                                                                  */ 10350000
*/*            DSECT=YES  - provide DSECT (mapping) for              */ 10400000
*/*                         IXGBRMHD, IXGBRMLT and IXGBRMLT_LOGBLOCK */ 10450000
*/*                         data areas                               */ 10500000
*/*                                                                  */ 10550000
*/*            DSECT=NO or any other value - provide storage         */ 10600000
*/*                         definition for IXGBRMHD, IXGBRMLT and    */ 10650000
*/*                         IXGBRMLT_LOGBLOCK data areas             */ 10700000
*/*                                                                  */ 10750000
*/*        TYPE = Optional keyword                                   */ 10800000
*/*                                                                  */ 10850000
*/*        FORM = Constant                                           */ 10900000
*/*                                                                  */ 10950000
*/*        DEFAULT = 'YES'                                           */ 11000000
*/*                                                                  */ 11050000
*/*      PARAMETER = LIST                                            */ 11100000
*/*                                                                  */ 11150000
*/*        DESCRIPTION =                                             */ 11200000
*/*                                                                  */ 11250000
*/*            LIST=YES   - include mapping in listing               */ 11300000
*/*                                                                  */ 11350000
*/*            LIST=NONE  - do not include mapping in listing        */ 11400000
*/*                                                                  */ 11450000
*/*        TYPE = Optional keyword                                   */ 11500000
*/*                                                                  */ 11550000
*/*        FORM = Constant                                           */ 11600000
*/*                                                                  */ 11650000
*/*        DEFAULT = 'YES'                                           */ 11700000
*/*                                                                  */ 11750000
*/*      PARAMETER = TITLE                                           */ 11800000
*/*                                                                  */ 11850000
*/*        DESCRIPTION =                                             */ 11900000
*/*                                                                  */ 11950000
*/*            TITLE=YES  - include mapping title line               */ 12000000
*/*                                                                  */ 12050000
*/*            TITLE=NO   - do not include mapping title line        */ 12100000
*/*                                                                  */ 12150000
*/*        TYPE = Optional keyword                                   */ 12200000
*/*                                                                  */ 12250000
*/*        FORM = Constant                                           */ 12300000
*/*                                                                  */ 12350000
*/*        DEFAULT = 'YES'                                           */ 12400000
*/*                                                                  */ 12450000
*/*      PARAMETER = IXGBRMLT                                        */ 12500000
*/*                                                                  */ 12550000
*/*        DESCRIPTION =                                             */ 12600000
*/*                                                                  */ 12650000
*/*            IXGBRMLT=YES - include data area mappings             */ 12700000
*/*                                                                  */ 12750000
*/*            IXGBRMLT=NO  - do not include data area mappings      */ 12800000
*/*                                                                  */ 12850000
*/*        TYPE = Optional keyword                                   */ 12900000
*/*                                                                  */ 12950000
*/*        FORM = Constant                                           */ 13000000
*/*                                                                  */ 13050000
*/*        DEFAULT = 'YES'                                           */ 13100000
*/*                                                                  */ 13150000
*/*    PARAMETER INTERDEPENDENCIES = None                            */ 13200000
*/*                                                                  */ 13250000
*/********************************************************************/ 13300000
*/*                                                                  */ 13350000
*/*01* DSECT NAME =                                                  */ 13400000
*/*               IXGBRMHD,                                          */ 13450000
*/*               IXGBRMLT, and                                      */ 13500000
*/*               IXGBRMLT_LOGBLOCK                                  */ 13550000
*/*                                                                  */ 13600000
*/*01* COMPONENT =  System Logger (SCLOG)                            */ 13650000
*/*                                                                  */ 13700000
*/*01* EYE CATCHER: None                                             */ 13750000
*/*02*   OFFSET:    N/A                                              */ 13800000
*/*02*   LENGTH:    N/A                                              */ 13850000
*/*                                                                  */ 13900000
*/*01* CREATED BY =  Caller of Logger browse multiblock service      */ 13950000
*/*                  provides the area and Logger fills it in.       */ 13975000
*/*                                                                  */ 14000000
*/*01* POINTED TO BY =                                               */ 14050000
*/*    IXGBRMHD:                                                     */ 14100000
*/*     - This area is based on the Buffer area address provided     */ 14150000
*/*       on the Ixgbrwse request.                                   */ 14200000
*/*    IXGBRMLT:                                                     */ 14250000
*/*     - The first Ixgbrmlt area is based on the                    */ 14300000
*/*       Addr(Ixgbrmhd_FirstBrmlt)                                  */ 14350000
*/*     - Subsequent Ixgbrmlt area's basing can be established by    */ 14400000
*/*       adding the current Ixgbrmlt's field Ixgbrmlt_NextOffset to */ 14450000
*/*       the beginning of the Buffer area (Buffer parameter).       */ 14500000
*/*     - The last Ixgbrmlt area's basing can be established by      */ 14550000
*/*       adding the field Ixgbrmhd_LastBrmltOffset to               */ 14600000
*/*       the Buffer address.                                        */ 14650000
*/*    IXGBRMLT_LOGBLOCK:                                            */ 14700000
*/*     - When the Ixgbrmlt_DataReturned indicator is on in the      */ 14750000
*/*       current Ixgbrmlt area, then the start of the corresponding */ 14800000
*/*       Ixgbrmlt_LogBlock (log block area) should be calculated by */ 14850000
*/*       using the address of the current Ixgbrmlt area and add in  */ 14900000
*/*       the value from the field Ixgbrmlt_Length.                  */ 14950000
*/*                                                                  */ 15000000
*/*01* DELETED BY =  Caller of Logger browse multiblock service      */ 15050000
*/*                                                                  */ 15100000
*/*01* SERIALIZATION = For IXGBRWSE service rc4,rsn0401 responses,   */ 15150000
*/*                    System Logger maintains latent binds to       */ 15200000
*/*                    the storage location specified by the         */ 15250000
*/*                    BUFFER parameter.                             */ 15300000
*/*                                                                  */ 15350000
*/*01* Storage Attributes =                                          */ 15400000
*/*02*   Allocation Method:  Determined by the browse invoker        */ 15450000
*/*02*   Subpool  :  Determined by browse invoker                    */ 15500000
*/*02*   Key      :  Determined by browse invoker                    */ 15550000
*/*02*   Residency:  ANY                                             */ 15600000
*/*                                                                  */ 15650000
*/*                                                                  */ 15700000
*/*02* Size       =                                                  */ 15750000
*/*               IXGBRMHD:                                          */ 15800000
*/*                  8 bytes ('08'X)                                 */ 15850000
*/*               IXGBRMLT:                                          */ 15900000
*/*                  16 bytes ('10'X) when RETBLOCKINFO=NO           */ 15950000
*/*                  44 bytes ('2C'X) when RETBLOCKINFO=YES          */ 16000000
*/*               IXGBRMLT_LOGBLOCK:                                 */ 16050000
*/*                  determined by Ixgwrite BlockLen value           */ 16100000
*/*                  (contained in field Ixgbrmlt_BlockLen)          */ 16150000
*/*                                                                  */ 16200000
*/*      Frequency:                                                  */ 16250000
*/*               IXGBRMHD:                                          */ 16300000
*/*                  1 in the caller's buffer area                   */ 16350000
*/*               IXGBRMLT:                                          */ 16400000
*/*                  1 per logstream log block returned on a browse  */ 16450000
*/*                  MULTIBLOCK request (rc0 or rc4,rsn416).         */ 16500000
*/*                  However, note that there will be one            */ 16550000
*/*                  additional area at the end of the log blocks    */ 16600000
*/*                  to indicate the final return/reason code        */ 16650000
*/*                  condition for rc4,rsn417.                       */ 16700000
*/*               IXGBRMLT_LOGBLOCK:                                 */ 16750000
*/*                  1 per logstream log block returned              */ 16800000
*/*                                                                  */ 16850000
*/*                                                                  */ 16900000
*/*01* DISTRIBUTION LIBRARY = AMACLIB                                */ 16950000
*/*                                                                  */ 17000000
*/*01* MESSAGES = None                                               */ 17050000
*/*                                                                  */ 17100000
*/*                                                                  */ 17150000
*/*01* CHANGE ACTIVITY =                                             */ 17200000
*/*                                                                  */ 17250000
*/* Flag LineItem FMID    Date   ID     Comment                      */ 17300000
*/*                                                                  */ 17350000
*/*  $L0=BMULT    HBB7703 991120 PDDZ:  Browse Multiblock mapping    */ 17400000
*/*  $P1=PXD0714  HBB7703 991122 PDDZ:  rsn080F cleanup          @PXA*/ 17450000
*/*  $P2=PXD1539  HBB7703 000327 PDDZ:  add fromdasd flag        @P2A*/ 17500000
*/*                                                                  */ 17550000
*/*                                                                  */ 17600000
*/*                                                                  */ 17650000
*/*                                                                  */ 17675000
*/*                                                                  */ 17687500
*/*END OF SPECIFICATIONS *********************************************/ 17700000
*% /*                                                                   17750000
.P0      ANOP                                                           17800000
         AIF   ('&ZCBPRINT' EQ 'NO').P1                                 17850000
         AIF   ('&LIST' EQ 'YES').P2                                    17900000
.P1      ANOP                                                           17950000
         PUSH  PRINT                                                    18000000
         PRINT OFF                                                      18050000
.P2      ANOP                                                           18100000
         AIF   ('&IXGBRMLT' NE 'YES').L0002                             18150000
*                                                                       18200000
*    *****************************************************************  18250000
*    *                                                               *  18300000
*    * Browse Multi-Block Output Mapping                             *  18350000
*    *                                                               *  18400000
*    *****************************************************************  18450000
*                                                                       18500000
*                                                                       18550000
* ********************************************************************  18600000
* *                                                                  *  18650000
* *  Ixgbrmhd - Browse Multiblock Header section                     *  18700000
* *                                                                  *  18750000
* *    This area is based on the Buffer area address provided on the *  18800000
* *    Ixgbrwse request.                                             *  18850000
* *                                                                  *  18900000
* ********************************************************************  18950000
*                                                                       19000000
         AIF   ('&DSECT' EQ 'YES').L0003                                19050000
IXGBRMHD DS    0F        Browse multi-block output area header mapping  19100000
         AGO   .L0004                                                   19150000
.L0003   ANOP                                                           19200000
IXGBRMHD DSECT           Browse multi-block output area header mapping  19250000
.L0004   ANOP                                                           19300000
IXGBRMHD_START DS 0CL0008                                               19350000
IXGBRMHD_NUMLOGBLOCKS DS 1FL4 Contains a count of the number of log    *19400000
                         blocks returned in this buffer.                19450000
IXGBRMHD_LASTBRMLTOFFSET DS 1FL4 Offset within buffer to start of last *19500000
                         Ixgbrmlt in this buffer. - If the Ixgbrwse    *19550000
                         service returns rc4,rsn416, then this offset  *19600000
                         will be to the last Ixgbrmlt that corresponds *19650000
                         to the last returned log block in this        *19700000
                         buffer. - If the Ixgbrwse service returns     *19750000
                         rc4,rsn417, then this offset will be to the   *19800000
                         last Ixgbrmlt in this buffer that contains    *19850000
                         the error information from the service. No    *19900000
                         log block data is returned with this last      19950000
*                        Ixgbrmlt area.                                 20000000
IXGBRMHD_FIRSTBRMLT DS 0C Starting point of first Ixgbrmlt area         20050000
*                                                                       20100000
*                                                                       20150000
* ********************************************************************  20200000
* *                                                                  *  20250000
* *  Ixgbrmlt - Browse Multiblock Output Section Per Log Block       *  20300000
* *                                                                  *  20350000
* *    The first Ixgbrmlt area is based on the                       *  20400000
* *    Addr(Ixgbrmhd_FirstBrmlt)                                     *  20450000
* *                                                                  *  20500000
* *    Subsequent Ixgbrmlt area's basing can be established by       *  20550000
* *    adding the current Ixgbrmlt's field Ixgbrmlt_NextOffset to    *  20600000
* *    the beginning of the Buffer area (Buffer parameter).          *  20650000
* *                                                                  *  20700000
* *    The last Ixgbrmlt area's basing can be established by adding  *  20750000
* *    the field Ixgbrmhd_LastBrmltOffset to the Buffer address.     *  20800000
* *                                                                  *  20850000
* ********************************************************************  20900000
*                                                                       20950000
         AIF   ('&DSECT' EQ 'YES').L0005                                21000000
IXGBRMLT DS    0F        Browse multi-block output area per returned   *21050000
                         log block                                      21100000
         AGO   .L0006                                                   21150000
.L0005   ANOP                                                           21200000
IXGBRMLT DSECT           Browse multi-block output area per returned   *21250000
                         log block                                      21300000
         DS    0F        Word alignment                                 21350000
.L0006   ANOP                                                           21400000
IXGBRMLT_START DS 0CL0044                                               21450000
IXGBRMLT_COMMON DS 0CL0016 Common area                                  21500000
IXGBRMLT_LENGTH DS 1FL2  Length of Ixgbrmlt area                        21550000
IXGBRMLT_VERSION DS 1BL1 Version number                                 21600000
IXGBRMLT_FLAGS DS 0BL1   Flag indicators:                               21650000
IXGBRMLT_DATARETURNED EQU X'80' When OFF, indicates service error      *21700000
                         condition rc4,rsn417. When ON, indicates that *21750000
                         log block data follows this Ixgbrmlt area.     21800000
IXGBRMLT_RETBLOCKINFO EQU X'40' When OFF, indicates return only        *21850000
                         information necessary to navigate the         *21900000
                         caller's buffer to obtain each returned log   *21950000
                         block, see area mapped by Ixgbrmlt_Common     *22000000
                         When ON, indicates that along with the        *22050000
                         information necessary to navigate the         *22100000
                         caller's buffer to obtain each returned log   *22150000
                         block, Logger will also return the            *22200000
                         information mapped by Ixgbrmlt_RetInfo.        22250000
IXGBRMLT_FROMINACTIVE EQU X'20' When OFF, the returned log block came  *22300000
                         from the active portion of the log stream.    *22350000
                         When ON, the returned log block came from the *22400000
                         inactive portion of the log stream.            22450000
IXGBRMLT_FROMDASD     EQU X'10' When OFF, the returned log block was   *22458300
                         read from the logstream interim (structure /  *22466600
                         local buffer) storage.                        *22474900
                         When ON, the returned log block was read from *22483200
                         a logstream DASD offload data set.        @P2A 22491500
         ORG   IXGBRMLT_FLAGS+X'00000001'                               22500000
IXGBRMLT_RETCODE DS 1FL4 Return code. Values are defined in IXGCON      22550000
IXGBRMLT_RSNCODE DS 1FL4 Reason code. Values are defined in IXGCON      22600000
IXGBRMLT_NEXTOFFSET DS 1FL4  Offset within buffer to start of next     *22650000
                         Ixgbrmlt area.  The basing for the next       *22700000
                         Ixgbrmlt area can be established by adding    *22750000
                         this field to the start of the Buffer         *22800000
                         address.  If this field is zero, then there   *22850000
                         are no more Ixgbrmlt areas after this current *22900000
                         Ixgbrmlt area.                                 22950000
IXGBRMLT_COMMONEND DS 0C End of Ixgbrmlt common area                    23000000
*                                                                       23050000
*        *************************************************************  23100000
*        *                                                           *  23150000
*        * Ixgbrmlt_RetInfo - return block info area                 *  23200000
*        *                                                           *  23250000
*        *   This area may or may not be provided.  When the flag    *  23300000
*        *   Ixgbrmlt_RetBlockInfo is set on, this area is included  *  23350000
*        *   along with the Ixgbrmlt_Common area.                    *  23400000
*        *                                                           *  23450000
*        *   The field content in Ixgbrmlt_RetInfo is valid under    *  23500000
*        *   the following conditions (assuming Ixgbrmlt_RetBlockInfo*  23550000
*        *   has been set on):                                       *  23600000
*        *                                                           *  23650000
*        *    - when Ixgbrmlt_DataReturned is also set on            *  23700000
*        *      all the fields in Ixgbrmlt_RetInfo will be set       *  23750000
*        *      with the return data associated with the log block.  *  23800000
*        *                                                           *  23850000
*        *************************************************************  24350000
*                                                                       24400000
IXGBRMLT_RETINFO DS 0CL0028 Return Block Info area                      24450000
IXGBRMLT_BLOCKLEN DS 1FL4 The actual length of the log block as it was *24500000
                         specified on the IXGWRITE request. Same as    *24550000
                         BLOCKSIZE for single IXGBRWSE request.         24600000
IXGBRMLT_BLOCKID DS 1CL0008 Log block identifier                        24650000
IXGBRMLT_TIMESTAMPS DS 0CL0016 Time Stamps for the log block, in STCK  *24700000
                         format                                         24750000
IXGBRMLT_GMT DS 1CL0008  GMT for log block                              24800000
IXGBRMLT_LOCAL DS 1CL0008 Local time for log block                      24850000
IXGBRMLT_RETINFOEND DS 0C End of return info area                       24900000
         ORG   IXGBRMLT_START+X'0000002C'                               24950000
IXGBRMLT_END DS 0C       End of Ixgbrmlt mapping                        25000000
*                                                                       25050000
*                                                                       25100000
*        *************************************************************  25150000
*        *                                                           *  25200000
*        * These constants are used with the IXGBRMLT and IXGBRMHD   *  25250000
*        * mappings.                                                 *  25300000
*        *                                                           *  25350000
*        *************************************************************  25400000
*                                                                       25450000
IXGBRMHD_LEN EQU IXGBRMHD_FIRSTBRMLT-IXGBRMHD Length of header area     25500000
IXGBRMLT_CLEN EQU IXGBRMLT_COMMONEND-IXGBRMLT_COMMON Length of         *25550000
                         Ixgbrmlt common area                           25600000
IXGBRMLT_RLEN EQU IXGBRMLT_RETINFOEND-IXGBRMLT_START Length of         *25650000
                         Ixgbrmlt common area plus return info area     25700000
IXGBRMLT_LEN EQU IXGBRMLT_END-IXGBRMLT Length of entire Ixgbrmlt area   25750000
IXGBRMLT_1ST_VERSION EQU X'01'  First version for Ixgbrmlt              25800000
IXGBRMLT_LATEST_VERSION EQU X'01' Latest version for Ixgbrmlt           25850000
*                                                                       25900000
*                                                                       25950000
* ********************************************************************  26000000
* *                                                                  *  26050000
* *  Declare for start of Log Block data.                            *  26100000
* *                                                                  *  26150000
* *    When the Ixgbrmlt_DataReturned indicator is on in the current *  26200000
* *    Ixgbrmlt area, then the start of the corresponding            *  26250000
* *    Ixgbrmlt_LogBlock (log block area) should be calculated by    *  26300000
* *    using the address of the current Ixgbrmlt area and add in the *  26350000
* *    value from the field Ixgbrmlt_Length.                         *  26400000
* *                                                                  *  26450000
* ********************************************************************  26500000
*                                                                       26550000
         AIF   ('&DSECT' EQ 'YES').L0007                                26600000
IXGBRMLT_LOGBLOCK DS 0XL1 Start of a log block within buffer area       26650000
         AGO   .L0008                                                   26700000
.L0007   ANOP                                                           26750000
IXGBRMLT_LOGBLOCK DSECT  Start of a log block within buffer area        26800000
         DS    0XL1                                                     26850000
.L0008   ANOP                                                           26900000
*                                                                       26950000
*                                                                       27000000
.L0002   ANOP                                                           27050000
         AIF   ('&ZCBPRINT' EQ 'NO').P3                                 27100000
         AIF   ('&LIST' EQ 'YES').P4                                    27150000
.P3      ANOP                                                           27200000
         POP   PRINT                                                    27250000
.P4      ANOP                                                           27300000
.P_EXIT  ANOP                                                           27350000
         MEND                                                           27400000
**/ IXGBRMLT_2:;                                                        27450000
* %IXGBRMLT_INCLUDED = 'YES';                                           27500000
* %DCL ZCBPRINT CHAR EXT;                                               27550000
* %DEACTIVATE ZCBPRINT;                                                 27600000
* %DCL IXGBRMLT_LIST CHAR EXT;                                          27650000
* %DEACTIVATE IXGBRMLT_LIST;                                            27700000
* %IF IXGBRMLT_LIST ^= 'NO' &                                           27750000
*    ZCBPRINT ^= 'NO' %THEN                                             27800000
*   %GOTO IXGBRMLT_3;                                                   27850000
*   @LIST PUSH NOECHO;                                                  27900000
*   @LIST NOASSEMBLE NOECHO;                                            27950000
*   @LIST OFF C NOECHO;                                                 28000000
* %IXGBRMLT_3:;                                                         28050000
*/* Start of PL/X Source                                             */ 28100000
*                                                                       28150000
*    /* Browse Multi-Block Output Mapping */                            28200000
*                                                                       28250000
*                                                                       28300000
* /*******************************************************************/ 28350000
* /*                                                                 */ 28400000
* /* Ixgbrmhd - Browse Multiblock Header section                     */ 28450000
* /*                                                                 */ 28500000
* /*   This area is based on the Buffer area address provided on the */ 28550000
* /*   Ixgbrwse request.                                             */ 28600000
* /*                                                                 */ 28650000
* /*******************************************************************/ 28700000
*                                                                       28750000
* Dcl                                                                   28800000
* 1 IXGBRMHD  Based bdy(Word),     /* Browse multi-block output         28850000
*                                    area header mapping             */ 28900000
*   2 Ixgbrmhd_Start  bdy(Word),                                        28950000
*     3 Ixgbrmhd_NumLogBlocks Fixed(32) bdy(Word), /* Contains a count  29000000
*                                    of the number of log blocks        29050000
*                                    returned in this buffer.        */ 29100000
*     3 Ixgbrmhd_LastBrmltOffset Fixed(32), /* Offset within buffer to  29150000
*                                    start of last Ixgbrmlt in this     29200000
*                                    buffer.                            29250000
*                                    - If the Ixgbrwse service returns  29300000
*                                    rc4,rsn416, then this offset will  29350000
*                                    be to the last Ixgbrmlt that       29400000
*                                    corresponds to the last returned   29450000
*                                    log block in this buffer.          29500000
*                                    - If the Ixgbrwse service returns  29550000
*                                    rc4,rsn417, then this offset will  29600000
*                                    be to the last Ixgbrmlt in this    29650000
*                                    buffer that contains the error     29700000
*                                    information from the service. No   29750000
*                                    log block data is returned with    29800000
*                                    this last Ixgbrmlt area.        */ 29850000
*   2 Ixgbrmhd_FirstBrmlt  Char(0); /* Starting point of first          29900000
*                                    Ixgbrmlt area                   */ 29950000
*                                                                       30000000
*                                                                       30050000
* /*******************************************************************/ 30100000
* /*                                                                 */ 30150000
* /* Ixgbrmlt - Browse Multiblock Output Section Per Log Block       */ 30200000
* /*                                                                 */ 30250000
* /*   The first Ixgbrmlt area is based on the                       */ 30300000
* /*   Addr(Ixgbrmhd_FirstBrmlt)                                     */ 30350000
* /*                                                                 */ 30400000
* /*   Subsequent Ixgbrmlt area's basing can be established by       */ 30450000
* /*   adding the current Ixgbrmlt's field Ixgbrmlt_NextOffset to    */ 30500000
* /*   the beginning of the Buffer area (Buffer parameter).          */ 30550000
* /*                                                                 */ 30600000
* /*   The last Ixgbrmlt area's basing can be established by adding  */ 30650000
* /*   the field Ixgbrmhd_LastBrmltOffset to the Buffer address.     */ 30700000
* /*                                                                 */ 30750000
* /*******************************************************************/ 30800000
*                                                                       30850000
* %IF BRMLTBASE = '' %THEN %BRMLTBASE = 'Based';                        30900000
*                                                                       30950000
* Dcl                                                                   31000000
* 1 IXGBRMLT  BRMLTBASE  bdy(Word), /* Browse multi-block output        31050000
*                                    area per returned log block     */ 31100000
*   2 Ixgbrmlt_Start  bdy(Word),                                        31150000
*     3 Ixgbrmlt_Common bdy(Word),  ! Common area                       31200000
*       5 Ixgbrmlt_Length Fixed(16), ! Length of Ixgbrmlt area          31250000
*       5 Ixgbrmlt_Version  Bit(8),  ! Version number                   31300000
*       5 Ixgbrmlt_Flags    Bit(8),  ! Flag indicators:                 31350000
*         7 Ixgbrmlt_DataReturned  Bit(1), /*                           31400000
*                                    When OFF,                          31450000
*                                     indicates service error condition 31500000
*                                     rc4,rsn417.                       31550000
*                                    When ON,                           31600000
*                                     indicates that log block data     31650000
*                                     follows this Ixgbrmlt area.    */ 31700000
*         7 Ixgbrmlt_RetBlockInfo  Bit(1), /*                           31750000
*                                    When OFF,                          31800000
*                                     indicates return only information 31850000
*                                     necessary to navigate the         31900000
*                                     caller's buffer to obtain each    31950000
*                                     returned log block, see area      32000000
*                                     mapped by Ixgbrmlt_Common         32050000
*                                    When ON,                           32100000
*                                     indicates that along with the     32150000
*                                     information necessary to navigate 32200000
*                                     the caller's buffer to obtain     32250000
*                                     each returned log block, Logger   32300000
*                                     will also return the information  32350000
*                                     mapped by Ixgbrmlt_RetInfo.    */ 32400000
*         7 Ixgbrmlt_FromInactive  Bit(1), /*                           32450000
*                                    When OFF,                          32500000
*                                     the returned log block            32550000
*                                     came from the active portion of   32600000
*                                     the log stream.                   32650000
*                                    When ON,                           32700000
*                                     the returned log block came from  32750000
*                                     the inactive portion of the       32800000
*                                     log stream.                    */ 32850000
*         7 Ixgbrmlt_FromDasd      Bit(1), /*                           32855000
*                                    When OFF,                          32860000
*                                     the returned log block was read   32865000
*                                     from the logstream interim        32870000
*                                     (structure/local buffer) storage. 32875000
*                                    When ON,                           32880000
*                                     the returned log block was read   32885000
*                                     from a logstream DASD offload     32890000
*                                     data set.                  @P2A*/ 32895000
*       5 Ixgbrmlt_RetCode  Fixed(32), /* Return code. Values are       32900000
*                                    defined in IXGCON               */ 32950000
*       5 Ixgbrmlt_RsnCode  Fixed(32), /* Reason code. Values are       33000000
*                                    defined in IXGCON               */ 33050000
*       5 Ixgbrmlt_NextOffset Fixed(32), /* Offset within buffer to     33100000
*                                    start of next Ixgbrmlt area.       33150000
*                                    The basing for the next Ixgbrmlt   33200000
*                                    area can be established by         33250000
*                                    adding this field to the start     33300000
*                                    of the Buffer address.  If this    33350000
*                                    field is zero, then there are no   33400000
*                                    more Ixgbrmlt areas after this     33450000
*                                    current Ixgbrmlt area.          */ 33500000
*       5 Ixgbrmlt_CommonEnd Char(0), ! End of Ixgbrmlt common area     33600000
*     3 * UNION,                                                        33650000
*                                                                       33700000
*       /*************************************************************/ 33750000
*       /*                                                           */ 33800000
*       /* Ixgbrmlt_RetInfo - return block info area                 */ 33850000
*       /*                                                           */ 33900000
*       /*   This area may or may not be provided.  When the flag    */ 33950000
*       /*   Ixgbrmlt_RetBlockInfo is set on, this area is included  */ 34000000
*       /*   along with the Ixgbrmlt_Common area.                    */ 34050000
*       /*                                                           */ 34100000
*       /*   The field content in Ixgbrmlt_RetInfo is valid under    */ 34150000
*       /*   the following conditions (assuming Ixgbrmlt_RetBlockInfo*/ 34200000
*       /*   has been set on):                                       */ 34250000
*       /*                                                           */ 34300000
*       /*    - when Ixgbrmlt_DataReturned is also set on            */ 34350000
*       /*      all the fields in Ixgbrmlt_RetInfo will be set       */ 34400000
*       /*      with the return data associated with the log block.  */ 34450000
*       /*                                                           */ 34500000
*       /*************************************************************/ 35000000
*                                                                       35050000
*       5 Ixgbrmlt_RetInfo bdy(Word), ! Return Block Info area          35100000
*         7 Ixgbrmlt_BlockLen Fixed(32), /* The actual length of the    35150000
*                                    log block as it was specified on   35200000
*                                    the IXGWRITE request.              35250000
*                                    Same as BLOCKSIZE for single       35300000
*                                    IXGBRWSE request.               */ 35350000
*         7 Ixgbrmlt_Blockid   Char(8), ! Log block identifier          35400000
*         7 Ixgbrmlt_TimeStamps  Char(16), /* Time Stamps for the       35450000
*                                    log block, in STCK format       */ 35500000
*           9 Ixgbrmlt_GMT       Char(8), ! GMT for log block           35550000
*           9 Ixgbrmlt_Local     Char(8), ! Local time for log block    35600000
*         7 Ixgbrmlt_RetInfoEnd Char(0), ! End of return info area      35650000
*       5 *  Char(0),               ! Dummy Union section               35700000
*   2 Ixgbrmlt_End  Char(0);        ! End of Ixgbrmlt mapping           35750000
*                                                                       35800000
*                                                                       35850000
*       /*************************************************************/ 35900000
*       /*                                                           */ 35950000
*       /* These constants are used with the IXGBRMLT and IXGBRMHD   */ 36000000
*       /* mappings.                                                 */ 36050000
*       /*                                                           */ 36100000
*       /*************************************************************/ 36150000
*                                                                       36200000
* Dcl                                                                   36250000
*     Ixgbrmhd_Len  Fixed(16)                                           36280000
*                   constant(length(IXGBRMHD)) ! Length of header area  36310000
*    ,Ixgbrmlt_CLen Fixed(16)                                           36340000
*                   constant(length(IXGBRMLT_Common))  /* Length of     36370000
*                                    Ixgbrmlt common area            */ 36400000
*    ,Ixgbrmlt_RLen Fixed(16)                                           36433300
*                   constant(length(Ixgbrmlt_Start)) /* Length of       36466600
*                                    common area plus return info       36500000
*                                    area                            */ 36550000
*    ,Ixgbrmlt_Len  Fixed(16)                                           36583300
*                   constant(length(IXGBRMLT))  /* Length of entire     36616600
*                                    Ixgbrmlt area                   */ 36650000
*    ,Ixgbrmlt_1st_version     BIT(8)    CONSTANT('01'X) /* First       36700000
*                                    version for Ixgbrmlt            */ 36750000
*    ,Ixgbrmlt_latest_version  BIT(8)    CONSTANT('01'X) /* Latest      36800000
*                                    version for Ixgbrmlt            */ 36850000
*                                                                       36900000
*     ;                             ! End of constants                  36950000
*                                                                       37000000
*                                                                       37050000
* /*******************************************************************/ 37100000
* /*                                                                 */ 37150000
* /* Declare for start of Log Block data.                            */ 37200000
* /*                                                                 */ 37250000
* /*   When the Ixgbrmlt_DataReturned indicator is on in the current */ 37300000
* /*   Ixgbrmlt area, then the start of the corresponding            */ 37350000
* /*   Ixgbrmlt_LogBlock (log block area) should be calculated by    */ 37400000
* /*   using the address of the current Ixgbrmlt area and add in the */ 37450000
* /*   value from the field Ixgbrmlt_Length.                         */ 37500000
* /*                                                                 */ 37550000
* /*******************************************************************/ 37600000
*                                                                       37650000
* Dcl                                                                   37700000
*   Ixgbrmlt_LogBlock Char(*) Based; /* Start of a log block within     37750000
*                                    Buffer area                     */ 37800000
*                                                                       37850000
*/* End of PL/X Source                                               */ 37900000
* %IF IXGBRMLT_LIST ^= 'NO' &                                           37950000
*    ZCBPRINT ^= 'NO' %THEN                                             38000000
*   %GOTO IXGBRMLT_4;                                                   38050000
*   @LIST POP NOECHO;                                                   38100000
* %IXGBRMLT_4:;                                                         38150000
* %END;                                                                 38200000
