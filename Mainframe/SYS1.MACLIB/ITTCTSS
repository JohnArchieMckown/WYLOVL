*   %GOTO ITTCTSS1;                                                     00002200
*                                                                       00004400
*/*                                                                     00006600
         MACRO                                                          00009900
         ITTCTSS                                                        00013200
         GBLC  &ITTCTSS                                                 00016500
         GBLC  &ZPRINT                                                  00019800
         AIF   (K'&ITTCTSS NE 0).WCBX                                   00023100
&ITTCTSS SETC  'YES'                                                    00026400
         AIF   ('&ZPRINT' NE 'NO').WCB2                                 00029700
         PUSH  PRINT                                                    00033000
         PRINT OFF                                                      00036300
         AGO   .WCB3                                                    00039600
.*                                                                      00042900
.WCB2    ANOP                                                           00046200
 TITLE '&SYSECT ITTCTSS -Component Trace Start/Stop Par -90/06/07-'     00049500
.WCB3    ANOP  ,                                                        00052300
         AGO   .WCB4                                                    00055100
*                                                                    */ 00058100
*                                                                       00060100
*%ITTCTSS1:                                                             00062100
*   ;                                                                   00064100
*   %DECLARE                                                            00066100
*     ITTCTSS  CHAR EXT;                                                00068100
*   %DEACTIVATE ITTCTSS;                                                00070100
*   %IF ITTCTSS = 'YES' %THEN                                           00072100
*     %GOTO ITTCTSSX;                                                   00074100
*   %ITTCTSS = 'YES';                                                   00076100
*   %DECLARE                                                            00078100
*     ZPRINT   CHAR EXT;                                                00080100
*   %DEACTIVATE ZPRINT;                                                 00082100
*   %IF ZPRINT ^= 'NO' %THEN                                            00084100
*     %GOTO ITTCTSS2;                                                   00086100
*@LIST PUSH;                                                            00089100
*@LIST OFF;                                                             00092400
*   %GOTO ITTCTSS3;                                                     00105300
*%ITTCTSS2:                                                             00118200
*   ;                                                                   00131100
*%ITTCTSS3:                                                             00144000
*   ;                                                                   00156900
*   %GOTO ITTCTSS4;                                                     00169800
*                                                                       00182700
*/*                                                                     00196000
.WCB4    ANOP  ,                                                        00210400
*                                                                    */ 00224800
*                                                                       00290300
*%ITTCTSS4:                                                             00292800
*   ;                                                                   00295300
*                                                                       00297800
*/**** Start of Specifications for ITTCTSS **************************** 00300300
*                                                                       00302800
* $MAC(ITTCTSS) COMP(SCTRC) PROD(HBB6606):                              00305300
*01* MACRO NAME:  ITTCTSS                                               00307800
*                                                                       00325300
*01* DESCRIPTIVE NAME:  Component Trace Start/Stop Parmlist             00342800
*02*  ACRONYM:  CTSS                                                    00392800
*                                                                       00482800
*01* COMPONENT NAME: Component Trace (SCTRC)                            00500300
*                                                                       00517800
*01* EXTERNAL CLASSIFICATION: GUPI                                      00541100
*01* END OF EXTERNAL CLASSIFICATION:                                    00564400
*                                                                       00587800
*01* PROPRIETARY STATEMENT:                                             00605300
*                                                                       00622800
*      LICENSED MATERIALS - PROPERTY OF IBM                             00692800
*      THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                      00697100
*      5647-A01 (C) COPYRIGHT IBM CORP. 1988, 1998                      00703700
*                                                                       00710300
*01* STATUS: HBB6606                                                    00727800
*                                                                       00745300
*01* FUNCTION:                                                          00780300
*      Parameter list passed to a component trace                       00830300
*      start/stop routine by the TRACE CT operator command              00880300
*      processor or CTRACE DEFINE processing with a Parmlib             00930300
*      member that specified to turn a component trace on.              00980300
*                                                                       01130300
*      Parameter list passed to a component trace display               01133800
*      exit routine by the D TRACE operator command                     01137300
*      processor.                                                       01140800
*                                                                       01144300
*01* METHOD OF ACCESS:                                                  01147800
*02*   ASM:                                                             01184700
*       -   ITTCTSS                                                     01203100
*       -   USING CTSS,3      * CTSS address in reg. 3                  01221600
*       -   L     4,CTSSOPTP  * get opt. string address                 01258500
*       -   USING CTSSOPTL,4  * map with options string                 01295400
*       -   L     5,CTSSASIP  * get ASID table address                  01332300
*       -   USING CTSSASIT,5  * map ASID table                          01369200
*       -   L     6,CTSSJOBP  * get JOBNAME table                       01406100
*       -   USING CTSSJOBT,6  * map JOBNAME table                       01443000
*                                                                       01480300
*02*   PLAS:                                                            01483200
*        %INCLUDE SYSLIB(ITTCTSS)                                       01486100
*        Unbased structure CTSS is produced unless the macro            01489000
*        variable %CTSSBASE is set to the                               01491900
*        desired basing pointer/expression.                             01494800
*                                                                       01497800
*        Based structures CTSSOPTL, CTSSASIT and CTSSJOBT are           01547800
*        produced unless the macro variable for each structure          01597800
*        is set to 'NONE'.                                              01647800
*                                                                       01812800
*        Macro          Based            Default                        01836800
*        variable       structure        pointer                        01860800
*        =========  ===================  ========                       01884800
*        %CTSSBASE       CTSS            none                           01908800
*        %CTSSBOPT       CTSSOPTL        CTSSOPTP                       01932800
*        %CTSSBASI       CTSSASIT        CTSSASIP                       01956800
*        %CTSSBJOB       CTSSJOBT        CTSSJOBP                       01980800
*                                                                       02005300
*        When %CTSSBOPT is set to 'BASESIZE' or defaulted,              02005700
*        CTSSOPTS will have a fixed length of 1024.                     02006100
*        When %CTSSBOPT is set to any other basing expression,          02006500
*        CTSSOPTS will have a variable length.                          02006900
*                                                                       02007300
*02*   DSECT NAME:                                                      02007700
*        CTSS                                                           02008100
*        CTSSASIT                                                       02008500
*        CTSSJOBT                                                       02008900
*        CTSSOPTL                                                       02009300
*                                                                       02009700
*02*   EYE CATCHER: CTSS                                                02010100
*03*     OFFSET: 0                                                      02010500
*03*     LENGTH: 4                                                      02010900
*                                                                       02011300
*01* CREATED BY:  ITTCTSER entry point of ITTCT                         02011700
*                 ITTOCT entry point of ITTOC                           02012100
*                 ITTOA                                                 02012300
*                                                                       02012500
*02*   INITIALIZED BY:  ITTOCT, ITTCTSER, ITTOA                         02012900
*                                                                       02013300
*      ITTOA initializes the following fields when this                 02013400
*      parameter list is passed to a component trace display            02013500
*      exit routine by the D TRACE operator command                     02013600
*      processor: CTSSID, CTSSVER, CTSSLEN, CTSSUCMP, CTSSCART,         02013700
*      CTSSDISP, CTSSUSRD.  If the component has trace                  02013800
*      options in effect, then ITTOA initializes CTSSOPTP and           02013900
*      structure CTSSOPTL.                                              02014000
*                                                                       02014100
*01* DELETED BY:      ITTOCT, ITTCTSER, ITTOA                           02014200
*                                                                       02014300
*01* POINTED TO BY:   Fullword  at  the address contained in register   02014500
*                     one when routine  is  invoked.                    02014900
*                                                                       02015300
*01* SERIALIZATION: None                                                02015700
*                                                                       02016100
*01* STORAGE ATTRIBUTES:                                                02016500
*                                                                       02016900
*02*   SUBPOOL  : 253                                                   02017300
*02*   KEY      : 0                                                     02017700
*02*   SIZE     : 84 bytes                                              02018100
*02*   FREQUENCY: One per Ctrace Define or CTRACE operator command      02018500
*02*   LOCATION : Private Extended LSQA Fixed                           02018900
*02*   ATTRIBUTES: Fixed                                                02019300
*                                                                       02019700
*01* DISTRIBUTION LIBRARY: AMACLIB                                      02020100
*                                                                       02022800
*01* CHANGE ACTIVITY:                                                   02040300
*                                                                       02057800
* FLAG LINE_ITEM   FMID    DATE   PGMR_ID  COMMENT                      02075300
*                                                                       02092800
* $L0= DATASPAC  HBB3310  870909  PDAC:     Data Spaces.                02115900
* $L1= TSOOP     HBB4410  880307  PDCA: Support CART and 4 byte ID      02139000
* $L2= CTRCENH   HBB4410  900226  PD34CA: CTRACE Enhancements           02162100
* $P1= PEO2878   HBB4410  891023  PD34EX: Update CTSSRNSS comment       02185200
* $L3= CTWTR015  HBB4420  900712  PD34IL: CTrace Writer Support         02208300
* $P2= PH31695   HBB4420  901022  PD34EY: Update SNTP/USRD comments     02231400
*    = PH32058   HBB4420  910104  PD34EY: SHOWHDR format complete       02254500
*    = PQC0266   HBB6603  960201  PDXM:  CDPI and comment updates.      02277600
* $L4= LOGGR     HBB6603  960201  PDXM:  Restore order of setting of    02300700
*      macro variables that was changed with PQC0266.                   02323800
* $D1= DCR27     HBB6603  960905  PDXM:  Support Display exit.          02346900
*    = PSY0290   JBB6604  970303  PDE1:  Restore ability to assemble    02370000
*      with this macro                                                  02393100
*    = OW30074   HBB6603  971023  PDE1:  Fix the assembler bit          02399000
*      definitions to agree with PL/X                                   02404900
* $P3= PVT0115   HBB6606  971023  PDE1:  Fix FIN APAR OW30074           02410800
*                                                                       02416900
****** END OF SPECIFICATIONS *****************************************/ 02442400
*                                                                       02452000
*   %GOTO ITTCTSS5;                                                     02461600
*                                                                       02471200
*/*                                                                     02480800
CTSS     DSECT                                                          02509600
CTSSID   DS    CL4                * 'CTSS' control block id             02538400
CTSSIDC  EQU   C'CTSS'            * 'CTSS' parameter list id string     02557600
CTSSVER  DS    CL2                * 'CTSS' version                      02576800
CTSSVERC EQU   CTSSVER2           * 'CTSS' current version         @L2C 02596000
CTSSVER1 EQU   C'01'              * 'CTSS' version HBB3310              02615200
CTSSVER2 EQU   C'02'              * 'CTSS' version HBB4410         @L2A 02624800
CTSSLEN  DS    H                  * 'CTSS' length                       02634400
CTSSFLGS DS    BL4                * Request flags.                      02635000
CTSSSTRT EQU   X'80000000'        * Request is to turn on a             02635600
*                                   component trace.  This bit is       02636200
*                                   set when a TRACE CT ON command      02636800
*                                   is issued and the component         02637400
*                                   trace state is OFF or MIN.          02638000
CTSSSTOP EQU   X'40000000'        * Request is to turn off a            02638600
*                                   component trace.                    02639200
CTSSLKHD EQU   X'20000000'        * Request is to make a component      02639800
*                                   trace LIKEHEAD, ie, modify          02640400
*                                   the trace so that it has the        02641000
*                                   same status and attributes as       02641600
*                                   its head level trace.               02642200
*                                   This bit applies to SUB level       02642800
*                                   traces only.                        02643400
*                                   See CTSSHDST.                  @L2A 02644000
CTSSSUBD EQU   X'10000000'        * Request is to delete a component    02644600
*                                   trace (CTRACE DELETE macro was      02645200
*                                   issued by the component).           02645800
*                                   This bit applies to SUB level       02646400
*                                   and HEAD level traces and           02647000
*                                   differentiates an off               02647600
*                                   request from a delete request.      02648200
*                                   When this bit is on, a              02648800
*                                   start/stop routine can              02649400
*                                   delete its buffers.            @L2A 02650000
CTSSRNSS EQU   X'08000000'        * This bit can be set by a HEAD       02650600
*                                   start/stop routine to request       02651200
*                                   that CTRACE pass control to the     02651800
*                                   SUB start/stop routines.            02652400
*                                   For CTRACE DELETE processing only,  02653000
*                                   this bit is set by CTRACE before    02653600
*                                   the HEAD start/stop routine is      02654200
*                                   called, and if the component does   02654800
*                                   not want SUB level trace            02655400
*                                   start/stop routines to receive      02656000
*                                   control, the component must         02656600
*                                   turn this bit off.  For CTRACE      02657200
*                                   DELETE processing and TRACE CT      02657800
*                                   OFF commands, this bit applies      02658400
*                                   to all SUB level traces.  For       02659000
*                                   TRACE CT ON commands, this bit      02659600
*                                   applies to SUB level traces in the  02660200
*                                   LIKEHEAD state.                @P1C 02660800
CTSSCOPT EQU   X'04000000'        * Request is to trace with            02661400
*                                   component options, OPTIONS=()       02662000
*                                   was specified.  If no options       02662600
*                                   were specified in the               02663200
*                                   parenthesis (CTSSOPTP=0)            02663800
*                                   then this is a request to           02664400
*                                   turn off all component trace        02665000
*                                   options.  A component trace         02665600
*                                   that supports minimum options       02666200
*                                   (CTRACE DEFINE MINOPS=options       02666800
*                                   was specified), must revert to      02667400
*                                   the those minimum options. This     02667700
*                                   bit applies to component options    02668000
*                                   only and does not effect            02668300
*                                   buffer size.                   @L2A 02668600
CTSSCASI EQU   X'02000000'        * Request is to trace by ASID,        02669200
*                                   ASID=() was specified.              02669800
*                                   This bit applies when the           02670400
*                                   component trace supports            02671000
*                                   filtering by ASID (CTRACE           02671600
*                                   DEFINE ASIDS=YES was                02672200
*                                   specified).                    @L2A 02672800
CTSSCJOB EQU   X'01000000'        * Request is to trace by JOBNAME,     02673400
*                                   JOBNAME=() was specified.           02674000
*                                   This bit applies when the           02674600
*                                   component trace support             02675200
*                                   filtering by jobname (CTRACE        02675800
*                                   DEFINE JOBS=YES was                 02676400
*                                   specified).                    @L2A 02677000
CTSSCBUF EQU   X'00800000'        * Request specified buffer size.      02677600
*                                   nnnK, nnnM, or BUFSIZE(nnnnK|M)     02678200
*                                   was specified.                      02678800
*                                   This bit applies when the           02679400
*                                   component trace supports buffer     02680000
*                                   size specification (CTRACE          02680600
*                                   DEFINE BUFFER=YES was               02681200
*                                   specified).                    @L2A 02681800
CTSSHDST EQU   X'00400000'        * State of HEAD (valid when           02682400
*                                   CTSSLKHD is on), ='1'B HEAD is      02683000
*                                   ON, ='0'B HEAD is OFF          @L2A 02683600
CTSSMOD  EQU   X'00200000'        * Request is to modify an active      02684200
*                                   component trace.  This bit is       02684800
*                                   set when a TRACE CT ON command      02685400
*                                   is issued and the component         02686000
*                                   trace state is ON and the           02686600
*                                   component trace can be modified     02687200
*                                   (CTRACE DEFINE MOD=YES was          02687800
*                                   specified).                    @L2A 02688400
CTSSWCON EQU   X'00100000'        * Request was made to connect a       02689000
*                                   trace to an external writer,        02689600
*                                   TRACE CT,ON....WTR=jobname was      02690200
*                                   specified. CTSSWTKN is set.         02690800
*                                   This bit applies when the           02691400
*                                   component trace supports the        02692000
*                                   external writer (CTRACE             02692600
*                                   DEFINE WTR=YES was specified).      02693200
*                                                                  @P3C 02693800
CTSSWDIS EQU   X'00080000'        * Request was made to disconnect a    02694400
*                                   trace from an external writer.      02695000
*                                   One of the following was            02695600
*                                   specified:                          02696200
*                                   TRACE CT,ON....WTR=DISCONNECT       02696800
*                                   operator command or                 02697400
*                                   TRACE CT,ON....WTR(DISCONNECT)      02698000
*                                   in a parmlib member or              02698600
*                                   TRACE CT,OFF...                     02699200
*                                   operator command or                 02699800
*                                   CTRACE DELETE macro.                02700400
*                                   This bit applies when the           02701000
*                                   component trace supports the        02701600
*                                   external writer (CTRACE             02702200
*                                   DEFINE WTR=YES was specified).      02702800
*                                                                  @P3C 02703200
CTSSDSPI EQU   X'00000008'        * Request is to provide display       02703600
*                                   information.                        02704000
*                                   Display exit must                   02704300
*                                   set one of: CTSSDON or              02704600
*                                   CTSSDOFF or CTSSDMIN.               02704900
*                                   Display exit may set CTSSBUFS       02705200
*                                   and CTSSOPTL.                       02705500
*                                   Any other fields                    02705800
*                                   in the CTSS should be ignored       02706100
*                                   by the display exit and will        02706400
*                                   be ignored by CTRACE                02706700
*                                   processing.                    @P3C 02707000
CTSSDON  EQU   X'00000004'        * Display status.  If on, the         02707300
*                                   component trace display will        02707600
*                                   indicate that the component         02707900
*                                   trace mode is on.              @P3C 02708200
CTSSDOFF EQU   X'00000002'        * Display status.  If on, the         02708500
*                                   component trace display will        02708800
*                                   indicate that the component         02709100
*                                   trace mode is off.             @D1A 02709400
CTSSDMIN EQU   X'00000001'        * Display status.  If on, the         02709700
*                                   component trace display will        02710000
*                                   indicate that the component         02710300
*                                   trace mode is min.             @D1A 02710600
         ORG   CTSSFLGS           * Request flags.                      02710700
         IEZBITS ,                * Define BIT0-BIT7               @P3A 02710800
CTSS1FLGS DS   B                  * Request flags - byte 1         @P3A 02710900
CTSS1STRT EQU  BIT0               * Request is to turn on a             02711000
*                                   component trace.  This bit is       02711100
*                                   set when a TRACE CT ON command      02711200
*                                   is issued and the component         02711300
*                                   trace state is OFF or MIN.     @P3A 02711400
CTSS1STOP EQU  BIT1               * Request is to turn off a            02711500
*                                   component trace.               @P3A 02711600
CTSS1LKHD EQU  BIT2               * Request is to make a component      02711700
*                                   trace LIKEHEAD, ie, modify          02711800
*                                   the trace so that it has the        02711900
*                                   same status and attributes as       02712000
*                                   its head level trace.               02712100
*                                   This bit applies to SUB level       02712200
*                                   traces only.                        02712300
*                                   See CTSSHDST.                  @P3A 02712400
CTSS1SUBD EQU  BIT3               * Request is to delete a component    02712500
*                                   trace (CTRACE DELETE macro was      02712600
*                                   issued by the component).           02712700
*                                   This bit applies to SUB level       02712800
*                                   and HEAD level traces and           02712900
*                                   differentiates an off               02713000
*                                   request from a delete request.      02713100
*                                   When this bit is on, a              02713200
*                                   start/stop routine can              02713300
*                                   delete its buffers.            @P3A 02713400
CTSS1RNSS EQU  BIT4               * This bit can be set by a HEAD       02713500
*                                   start/stop routine to request       02713600
*                                   that CTRACE pass control to the     02713700
*                                   SUB start/stop routines.            02713800
*                                   For CTRACE DELETE processing only,  02713900
*                                   this bit is set by CTRACE before    02714000
*                                   the HEAD start/stop routine is      02714100
*                                   called, and if the component does   02714200
*                                   not want SUB level trace            02714300
*                                   start/stop routines to receive      02714400
*                                   control, the component must         02714500
*                                   turn this bit off.  For CTRACE      02714600
*                                   DELETE processing and TRACE CT      02714700
*                                   OFF commands, this bit applies      02714800
*                                   to all SUB level traces.  For       02714900
*                                   TRACE CT ON commands, this bit      02715000
*                                   applies to SUB level traces in the  02715100
*                                   LIKEHEAD state.                @P3A 02715200
CTSS1COPT EQU  BIT5               * Request is to trace with            02715300
*                                   component options, OPTIONS=()       02715400
*                                   was specified.  If no options       02715500
*                                   were specified in the               02715600
*                                   parenthesis (CTSSOPTP=0)            02715700
*                                   then this is a request to           02715800
*                                   turn off all component trace        02715900
*                                   options.  A component trace         02716000
*                                   that supports minimum options       02716100
*                                   (CTRACE DEFINE MINOPS=options       02716200
*                                   was specified), must revert to      02716300
*                                   the those minimum options. This     02716400
*                                   bit applies to component options    02716500
*                                   only and does not effect            02716600
*                                   buffer size.                   @P3A 02716700
CTSS1CASI EQU  BIT6               * Request is to trace by ASID,        02716800
*                                   ASID=() was specified.              02716900
*                                   This bit applies when the           02717000
*                                   component trace supports            02717100
*                                   filtering by ASID (CTRACE           02717200
*                                   DEFINE ASIDS=YES was                02717300
*                                   specified).                    @P3A 02717400
CTSS1CJOB EQU  BIT7               * Request is to trace by JOBNAME,     02717500
*                                   JOBNAME=() was specified.           02717600
*                                   This bit applies when the           02717700
*                                   component trace support             02717800
*                                   filtering by jobname (CTRACE        02717900
*                                   DEFINE JOBS=YES was                 02718000
*                                   specified).                    @P3A 02718100
CTSS2FLGS DS   B                  * Request flags - byte 2         @P3A 02718200
CTSS2CBUF EQU  BIT0               * Request specified buffer size.      02718300
*                                   nnnK, nnnM, or BUFSIZE(nnnnK|M)     02718400
*                                   was specified.                      02718500
*                                   This bit applies when the           02718600
*                                   component trace supports buffer     02718700
*                                   size specification (CTRACE          02718800
*                                   DEFINE BUFFER=YES was               02718900
*                                   specified).                    @P3A 02719000
CTSS2HDST EQU  BIT1               * State of HEAD (valid when           02719100
*                                   CTSSLKHD is on), ='1'B HEAD is      02719200
*                                   ON, ='0'B HEAD is OFF          @P3A 02719300
CTSS2MOD EQU   BIT2               * Request is to modify an active      02719400
*                                   component trace.  This bit is       02719500
*                                   set when a TRACE CT ON command      02719600
*                                   is issued and the component         02719700
*                                   trace state is ON and the           02719800
*                                   component trace can be modified     02719900
*                                   (CTRACE DEFINE MOD=YES was          02720000
*                                   specified).                    @P3A 02720100
CTSS2WCON EQU  BIT3               * Request was made to connect a       02720200
*                                   trace to an external writer,        02720300
*                                   TRACE CT,ON....WTR=jobname was      02720400
*                                   specified. CTSSWTKN is set.         02720500
*                                   This bit applies when the           02720600
*                                   component trace supports the        02720700
*                                   external writer (CTRACE             02720800
*                                   DEFINE WTR=YES was specified). @P3A 02720900
CTSS2WDIS EQU  BIT4               * Request was made to disconnect a    02721000
*                                   trace from an external writer.      02721100
*                                   One of the following was            02721200
*                                   specified:                          02721300
*                                   TRACE CT,ON....WTR=DISCONNECT       02721400
*                                   operator command or                 02721500
*                                   TRACE CT,ON....WTR(DISCONNECT)      02721600
*                                   in a parmlib member or              02721700
*                                   TRACE CT,OFF...                     02721800
*                                   operator command or                 02721900
*                                   CTRACE DELETE macro.                02722000
*                                   This bit applies when the           02722100
*                                   component trace supports the        02722200
*                                   external writer (CTRACE             02722300
*                                   DEFINE WTR=YES was specified). @P3A 02722400
CTSS3FLGS DS   B                  * Request flags - byte 3         @P3A 02722500
CTSS4FLGS DS   B                  * Request flags - byte 4         @P3A 02722600
CTSS4DSPI EQU  BIT4               * Request is to provide display       02722700
*                                   information.                        02722800
*                                   Display exit must                   02722900
*                                   set one of: CTSSDON or              02723000
*                                   CTSSDOFF or CTSSDMIN.               02723100
*                                   Display exit may set CTSSBUFS       02723200
*                                   and CTSSOPTL.                       02723300
*                                   Any other fields                    02723400
*                                   in the CTSS should be ignored       02723500
*                                   by the display exit and will        02723600
*                                   be ignored by CTRACE                02723700
*                                   processing.                    @P3A 02723800
CTSS4DON EQU   BIT5               * Display status.  If on, the         02723900
*                                   component trace display will        02724000
*                                   indicate that the component         02724100
*                                   trace mode is on.              @P3A 02724200
CTSS4DOFF EQU  BIT6               * Display status.  If on, the         02724300
*                                   component trace display will        02724400
*                                   indicate that the component         02724500
*                                   trace mode is off.             @P3A 02724600
CTSS4DMIN EQU  BIT7               * Display status.  If on, the         02724700
*                                   component trace display will        02724800
*                                   indicate that the component         02724900
*                                   trace mode is min.             @P3A 02725000
CTSSUCMP DS    CL4                * requesting console id               02725100
         ORG   CTSSUCMP                                                 02730400
         DS    CL3                * reserved                            02744900
CTSSUCMP1 DS   CL1                * requesting console id               02759400
CTSSBUFS DS    F                  * Size of buffers in                  02774000
*                                   units of 1K. CTSSBUFS               02779200
*                                   multiplied by 1024 determines       02784400
*                                   the number of bytes requested       02789600
*                                   for trace buffers. This field       02794800
*                                   applies when CTSSCBUF is on         02796100
*                                   and the CTSS is passed to a         02797400
*                                   start/stop routine. When            02798700
*                                   CTSSDSPI is on, a display           02800000
*                                   exit routine can update this        02801300
*                                   field with the size of buffers      02802600
*                                   in units of 1K.                @D1C 02803900
CTSSOPTP DS    F                  * Pointer to component specific       02805200
*                                   options mapped by CTSSOPTL          02810400
*                                   or zero if no options were          02815600
*                                   specified. This field applies       02820800
*                                   when CTSSCOPT is on for a           02822800
*                                   start/stop routine and when         02824800
*                                   CTSSDSPI is on for a display        02826800
*                                   exit routine.                       02828800
CTSSASIP DS    F                  * Pointer to table of ASIDs           02831200
*                                   to filter on mapped by CTSSASTL     02836400
*                                   or zero if no ASIDs were            02841600
*                                   specified. This field applies       02846800
*                                   when CTSSCASI is on.                02852000
CTSSJOBP DS    F                  * Pointer to table of jobnames        02857200
*                                   to filter on mapped by CTSSJOBT     02862400
*                                   or zero if no jobnames were         02867600
*                                   specified.  This field applies      02872800
*                                   when CTSSCJOB is on.                02878000
CTSSCART DS    CL8                * Command & Response Tokan       @L1A 02883200
CTSSSNTP DS    F                  * Pointer to the subname table or     02888400
*                                   zero if not a SUB level trace,      02893600
*                                   mapped by ITTSTAB.             @P2C 02898800
CTSSUSRD DS    CL16               * User data.  Copy of the user data   02904000
*                                   that the component specified on     02909200
*                                   CTRACE DEFINE USERDATA.  This       02914400
*                                   field may be updated by             02919600
*                                   the start/stop routine.        @P2C 02924800
CTSSWTKN DS    CL8                * Writer token.  The component        02930000
*                                   trace specifies this token          02935200
*                                   as an input to the CTRACEWR         02940400
*                                   to write buffers to an external     02945600
*                                   data set.                      @L3A 02950800
CTSSW2GO DS    F                  * Number of buffers that the          02956000
*                                   component trace expects to write    02961200
*                                   to the external dataset before      02966400
*                                   the disconnect completes.           02971600
*                                   This field can be set by a          02976800
*                                   component trace start/stop          02982000
*                                   routine to request that CTRACE      02987200
*                                   processing disconnect the           02992400
*                                   component trace from the            02997600
*                                   external writer only after this     03002800
*                                   number of buffers are written       03008000
*                                   to the external data set by         03013200
*                                   the component trace. This bit       03018400
*                                   applies when CTSSWDIS is on         03023600
*                                   and the start/stop routine          03028800
*                                   is not running on behalf of         03034000
*                                   a SUB level trace.             @L3A 03039200
         DS    CL12               * Reserved.                      @L3C 03044400
CTSSASIT DSECT                    * ASID table                          03049600
CTSSAHDR DS    CL4                * ASID table header                   03056800
         ORG   CTSSAHDR                                                 03076000
CTSSACNT DS    H                  * Number of entries in table          03095200
         DS    H                  * Reserved                            03114400
CTSSASID DS    16H                * ASID entries                        03133600
CTSSJOBT DSECT                    * Jobname table                       03159200
CTSSJHDR DS    CL4                * Jobname table header                03184800
         ORG   CTSSJHDR                                                 03210400
CTSSJCNT DS    H                  * Number of entries in table          03232800
         DS    H                  * Reserved                            03255200
CTSSJOBN DS    16CL8              * Jobname entries                     03277600
CTSSOPTL DSECT                      Options list                        03300000
CTSSOHDR DS    CL4                * Options list header                 03322400
         ORG   CTSSOHDR                                                 03344800
CTSSOLEN DS    H                  * Length of options string            03357600
         DS    H                  * Reserved                            03370400
CTSSOPTS DS    CL1024             * Unparsed options string             03383200
*                                   specified by operator or            03396000
*                                   parmlib member.                     03408800
.*                                                                      03421600
         SPACE 1                                                        03440800
         AIF   ('&ZPRINT' NE 'NO').WCBX                                 03460000
         POP   PRINT                                                    03479200
.WCBX    ANOP                                                           03498400
         MEND                                                           03517600
*                                                                    */ 03528200
*                                                                       03541700
*%ITTCTSS5:                                                             03555200
*   ;                                                                   03568700
*   %IF CTSSBASE = 'NONE' %THEN                                         03582200
*     %CTSSBASE = '';                                                   03595700
*   %IF CTSSBASE ^= '' %THEN                                            03609200
*     %CTSSBASE = 'BASED(' || CTSSBASE || ')';                          03622700
*   DECLARE                                                             03636200
*     1    CTSS     BDY(WORD) CTSSBASE,                                 03649700
*       3    CTSSID   CHAR(4),      /* 'CTSS' control block id       */ 03663200
*       3    CTSSVER  CHAR(2),      /* 'CTSS' version                */ 03676700
*       3    CTSSLEN  FIXED(16),    /* 'CTSS' length                 */ 03690200
*       3    CTSSFLGS FIXED(32),    /* Request flags.                */ 03703700
*        4   CTSS1FLGS BIT(8),      /* Request flags - byte 1    @P3A*/ 03710400
*         5    CTSSSTRT BIT(1),     /* Request is to turn on a          03717200
*                                      component trace. This bit is     03730700
*                                      set when a TRACE CT,ON command   03744200
*                                      is issued and the component      03757700
*                                      trace state is OFF or MIN.    */ 03771200
*          6    CTSS1STRT BIT(1),   /* Same as CTSSSTRT          @P3A*/ 03777900
*         5    CTSSSTOP BIT(1),     /* Request is to turn off a         03784700
*                                      component trace.              */ 03798200
*          6    CTSS1STOP BIT(1),   /* Same as CTSSSTOP          @P3A*/ 03804900
*         5    CTSSLKHD BIT(1),     /* Request is to make a component   03811700
*                                      trace LIKEHEAD, ie, modify the   03825200
*                                      trace so that it has the same    03838700
*                                      status and attributes as its     03852200
*                                      head level trace. This bit       03865700
*                                      applies to SUB level traces      03879200
*                                      only. See CTSSHDST.       @L2A*/ 03892700
*          6    CTSS1LKHD BIT(1),   /* Same as CTSSLKHD          @P3A*/ 03899400
*         5    CTSSSUBD BIT(1),     /* Request is to delete a           03906200
*                                      component trace (CTRACE DELETE   03919700
*                                      macro was issued by the          03933200
*                                      component). This bit applies     03946700
*                                      to SUB level and HEAD level      03960200
*                                      traces and differentiates an     03973700
*                                      off request from a delete        03987200
*                                      request. When this bit is on,    04000700
*                                      a start/stop routine can         04014200
*                                      delete its buffers.       @L2A*/ 04027700
*          6    CTSS1SUBD BIT(1),   /* Same as CTSSSUBD          @P3A*/ 04034400
*         5    CTSSRNSS BIT(1),     /* This bit can be set by a HEAD    04041200
*                                      start/stop routine to request    04054700
*                                      that CTRACE pass control to      04068200
*                                      the SUB start/stop routines.     04081700
*                                      For CTRACE DELETE processing     04095200
*                                      only, this bit is set by         04108700
*                                      CTRACE before the HEAD           04122200
*                                      start/stop routine is called,    04135700
*                                      and if the component does not    04149200
*                                      want SUB level trace             04162700
*                                      start/stop routines to receive   04176200
*                                      control, the component must      04189700
*                                      turn this bit off. For CTRACE    04203200
*                                      DELETE processing and TRACE CT   04216700
*                                      OFF commands, this bit applies   04230200
*                                      to all SUB level traces. For     04243700
*                                      TRACE CT ON commands, this bit   04257200
*                                      applies to SUB level traces in   04270700
*                                      the LIKEHEAD state.       @P1C*/ 04284200
*          6    CTSS1RNSS BIT(1),   /* Same as CTSSRNSS          @P3A*/ 04290900
*         5    CTSSCOPT BIT(1),     /* Request is to trace with         04297700
*                                      component options, OPTIONS=()    04311200
*                                      was specified. If no options     04324700
*                                      were specified in the            04338200
*                                      parenthesis (CTSSOPTP=0) then    04351700
*                                      this is a request to turn off    04365200
*                                      all component trace options. A   04378700
*                                      component trace that supports    04392200
*                                      minimum options (CTRACE DEFINE   04405700
*                                      MINOPS=options was specified),   04419200
*                                      must revert to those minimum     04432700
*                                      options. This bit applies to     04446200
*                                      component options only and       04459700
*                                      does not effect buffer size.     04473200
*                                                                @L2A*/ 04486700
*          6    CTSS1COPT BIT(1),   /* Same as CTSSCOPT          @P3A*/ 04493400
*         5    CTSSCASI BIT(1),     /* Request is to trace by ASID,     04500200
*                                      ASID=() was specified. This      04513700
*                                      bit applies when the component   04527200
*                                      trace supports filtering by      04540700
*                                      ASID (CTRACE DEFINE ASIDS=YES    04554200
*                                      was specified).           @L2A*/ 04567700
*          6    CTSS1CASI BIT(1),   /* Same as CTSSCASI          @P3A*/ 04574400
*         5    CTSSCJOB BIT(1),     /* Request is to trace by           04581200
*                                      JOBNAME, JOBNAME=() was          04594700
*                                      specified. This bit applies      04608200
*                                      when the component trace         04621700
*                                      supports filtering by jobnames   04635200
*                                      (CTRACE DEFINE JOBS=YES was      04648700
*                                      specified).               @L2A*/ 04662200
*          6    CTSS1CJOB BIT(1),   /* Same as CTSSCJOB          @P3A*/ 04666700
*        4   CTSS2FLGS BIT(8),      /* Request flags - byte 2    @P3A*/ 04671200
*         5    CTSSCBUF BIT(1),     /* Request specified buffer size.   04675700
*                                      nnnK, nnnM, or                   04689200
*                                      BUFSIZE(nnnnK|M) was             04702700
*                                      specified. This bit applies      04716200
*                                      when the component trace         04729700
*                                      supports buffer size             04743200
*                                      specification (CTRACE DEFINE     04756700
*                                      BUFFER=YES was specified).       04770200
*                                                                @L2A*/ 04783700
*          6    CTSS2CBUF BIT(1),   /* Same as CTSSCBUF          @P3A*/ 04790400
*         5    CTSSHDST BIT(1),     /* State of HEAD (valid when        04797200
*                                      CTSSLKHD is on), ='1'B HEAD is   04810700
*                                      ON, ='0'B HEAD is OFF     @L2A*/ 04824200
*          6    CTSS2HDST BIT(1),   /* Same as CTSSHDST          @P3A*/ 04830900
*         5    CTSSMOD  BIT(1),     /* Request is to modify an active   04837700
*                                      component trace. This bit is     04851200
*                                      set when a TRACE CT,ON command   04864700
*                                      is issued and the component      04878200
*                                      trace state is ON and the        04891700
*                                      component trace can be           04905200
*                                      modified (CTRACE DEFINE          04918700
*                                      MOD=YES was specified).   @L2A*/ 04932200
*          6    CTSS2MOD  BIT(1),   /* Same as CTSSMOD           @P3A*/ 04938900
*         5    CTSSWCON BIT(1),     /* Request was made to connect a    04945700
*                                      trace to an external writer,     04959200
*                                      TRACE CT,ON....WTR=jobname was   04972700
*                                      specified. CTSSWTKN is set.      04986200
*                                      This bit applies when the        04999700
*                                      component trace supports the     05013200
*                                      external writer (CTRACE DEFINE   05026700
*                                      WTR=YES was specified).   @L3A*/ 05040200
*          6    CTSS2WCON BIT(1),   /* Same as CTSSWCON          @P3A*/ 05046900
*         5    CTSSWDIS BIT(1),     /* Request was made to disconnect   05053700
*                                      a trace from an external         05067200
*                                      writer. One of the following     05080700
*                                      was specified: TRACE             05094200
*                                      CT,ON....WTR=DISCONNECT          05107700
*                                      operator command or TRACE        05121200
*                                      CT,ON....WTR(DISCONNECT) in a    05134700
*                                      parmlib member or TRACE          05148200
*                                      CT,OFF... operator command or    05161700
*                                      CTRACE DELETE macro. This bit    05175200
*                                      applies when the component       05188700
*                                      trace supports the external      05202200
*                                      writer (CTRACE DEFINE WTR=YES    05215700
*                                      was specified).           @L3A*/ 05229200
*          6    CTSS2WDIS BIT(1),   /* Same as CTSSWDIS          @P3A*/ 05233700
*         5    *        BIT(3),     /* Reserved.                 @P3C*/ 05238200
*        4   CTSS3FLGS BIT(8),      /* Request flags - byte 3    @P3A*/ 05242700
*        4   CTSS4FLGS BIT(8),      /* Request flags - byte 4    @P3A*/ 05247200
*         5    *        BIT(4),     /* Reserved.                 @P3C*/ 05251700
*                                                                       05256200
*     /***************************************************************/ 05269700
*     /*                                                             */ 05283200
*     /* The following 4 bits apply only when the component issued a */ 05296700
*     /* CTRACE DEFINE with the DISPNAM keyword.                 @D1A*/ 05310200
*     /*                                                             */ 05323700
*     /***************************************************************/ 05337200
*                                                                       05350700
*         5    CTSSDSPI BIT(1),     /* Request is to provide display    05364200
*                                      information.                     05377700
*                                      Display exit must                05391200
*                                      set one of: CTSSDON or           05404700
*                                      CTSSDOFF or CTSSDMIN.            05418200
*                                      Display exit may set CTSSBUFS    05431700
*                                      and CTSSOPTL.                    05445200
*                                      Any other fields                 05458700
*                                      in the CTSS should be ignored    05472200
*                                      by the display exit and will     05485700
*                                      be ignored by CTRACE             05499200
*                                      processing.               @D1A*/ 05512700
*          6    CTSS4DSPI BIT(1),   /* Same as CTSSDSPI          @P3A*/ 05519400
*         5    CTSSDON  BIT(1),     /* Display status. If on, the       05526200
*                                      component trace display will     05539700
*                                      indicate that the component      05553200
*                                      trace mode is on.         @D1A*/ 05566700
*          6    CTSS4DON  BIT(1),   /* Same as CTSSDON           @P3A*/ 05573400
*         5    CTSSDOFF BIT(1),     /* Display status. If on, the       05580200
*                                      component trace display will     05593700
*                                      indicate that the component      05607200
*                                      trace mode is off.        @D1A*/ 05620700
*          6    CTSS4DOFF BIT(1),   /* Same as CTSSDOFF          @P3A*/ 05627400
*         5    CTSSDMIN BIT(1),     /* Display status. If on, the       05634200
*                                      component trace display will     05647700
*                                      indicate that the component      05661200
*                                      trace mode is min.        @D1A*/ 05674700
*          6    CTSS4DMIN BIT(1),   /* Same as CTSSDMIN          @P3A*/ 05681400
*       3    CTSSUCMP CHAR(4),      /* Requesting console id         */ 05688200
*         5    *        CHAR(3),    /* Reserved                      */ 05701700
*         5    CTSSUCMP1 CHAR(1),   /* Requesting console id         */ 05715200
*       3    CTSSBUFS FIXED(32),    /* Size of buffers in               05728700
*                                      units of 1K. CTSSBUFS            05742200
*                                      multiplied by 1024 determines    05755700
*                                      the number of bytes requested    05769200
*                                      for trace buffers. This field    05782700
*                                      applies when CTSSCBUF is on      05796200
*                                      and the CTSS is passed to a      05809700
*                                      start/stop routine. When         05823200
*                                      CTSSDSPI is on, a display        05836700
*                                      exit routine can update this     05850200
*                                      field with the size of buffers   05863700
*                                      in units of 1K.               */ 05877200
*       3    CTSSOPTP PTR(31),      /* Pointer to component specific    05890700
*                                      options mapped by CTSSOPTL       05904200
*                                      or zero if no options were       05917700
*                                      specified. This field applies    05931200
*                                      when CTSSCOPT is on for a        05944700
*                                      start/stop routine and when      05958200
*                                      CTSSDSPI is on for a display     05971700
*                                      exit routine.                 */ 05985200
*       3    CTSSASIP PTR(31),      /* Pointer to table of ASIDs to     05998700
*                                      filter on mapped by CTSSASTL     06012200
*                                      or zero if no ASIDs were         06025700
*                                      specified. This field applies    06039200
*                                      when CTSSCASI is on.          */ 06052700
*       3    CTSSJOBP PTR(31),      /* Pointer to table of jobnames     06066200
*                                      to filter on mapped by           06079700
*                                      CTSSJOBT or zero if no           06093200
*                                      jobnames were specified. This    06106700
*                                      field applies when CTSSCJOB is   06120200
*                                      on.                           */ 06133700
*       3    CTSSCART CHAR(8),      /* Command & Response Token  @L1A*/ 06147200
*       3    CTSSSNTP PTR(31),      /* Pointer to the subname table     06160700
*                                      or zero if not a SUB level       06174200
*                                      trace, mapped by ITTSTAB. @P2C*/ 06187700
*       3    CTSSUSRD CHAR(16),     /* User data. Copy of the user      06201200
*                                      data that the component          06214700
*                                      specified on the CTRACE DEFINE   06228200
*                                      USERDATA. This field may be      06241700
*                                      updated by the start/stop        06255200
*                                      routine.                  @P2C*/ 06268700
*       3    CTSSWTKN CHAR(8),      /* Writer token. The component      06282200
*                                      trace specifies this token as    06295700
*                                      an input to the CTRACEWR to      06309200
*                                      write buffers to an external     06322700
*                                      data set.                 @L3A*/ 06336200
*       3    CTSSW2GO FIXED(32),    /* Number of buffers that the       06349700
*                                      component trace expects to       06363200
*                                      write to the external dataset    06376700
*                                      before the disconnect            06390200
*                                      completes. This field can be     06403700
*                                      set by a component trace         06417200
*                                      start/stop routine to request    06430700
*                                      that CTRACE processing           06444200
*                                      disconnect the component trace   06457700
*                                      from the external writer only    06471200
*                                      after this number of buffers     06484700
*                                      are written to the external      06498200
*                                      data set by the component        06511700
*                                      trace. This bit applies when     06525200
*                                      CTSSWDIS is on and the           06538700
*                                      start/stop routine is not        06552200
*                                      running on behalf of a SUB       06565700
*                                      level trace.              @L3A*/ 06579200
*       3    *        CHAR(12);     /* Reserved.                 @L3C*/ 06592700
*   %IF CTSSBASI = '' %THEN                                             06606200
*     %CTSSBASI = 'CTSSASIP';                                           06619700
*   %IF CTSSBASI = 'NONE' %THEN                                         06633200
*     %CTSSBASI = '';                                                   06646700
*   %IF CTSSBASI ^= '' %THEN                                            06660200
*     %CTSSBASI = 'BASED(' || CTSSBASI || ')';                          06673700
*   DECLARE                                                             06687200
*     1    CTSSASIT BDY(WORD) CTSSBASI, /* ASID table                */ 06700700
*       3    CTSSAHDR,              /* ASID table header             */ 06714200
*         5    CTSSACNT FIXED(16),  /* Number of entries in table    */ 06727700
*         5    *        FIXED(16),  /* Reserved                      */ 06741200
*       3    CTSSASID(16) FIXED(16); /* ASID entries                 */ 06754700
*   %IF CTSSBJOB = '' %THEN                                             06768200
*     %CTSSBJOB = 'CTSSJOBP';                                           06781700
*   %IF CTSSBJOB = 'NONE' %THEN                                         06795200
*     %CTSSBJOB = '';                                                   06808700
*   %IF CTSSBJOB ^= '' %THEN                                            06822200
*     %CTSSBJOB = 'BASED(' || CTSSBJOB || ')';                          06835700
*   DECLARE                                                             06849200
*     1    CTSSJOBT BDY(WORD) CTSSBJOB, /* Jobname table             */ 06862700
*       3    CTSSJHDR,              /* Jobname table header          */ 06876200
*         5    CTSSJCNT FIXED(16),  /* Number of entries in table    */ 06889700
*         5    *        FIXED(16),  /* Reserved                      */ 06903200
*       3    CTSSJOBN(16) CHAR(8);  /* Jobname entries               */ 06916700
*   %CTSSDOPT = '*';                                                    06930200
*   %IF CTSSBOPT = 'BASESIZE' %THEN                                     06943700
*     %CTSSDOPT = '1024';           /*                           @L2A*/ 06957200
*   %IF CTSSBOPT = 'BASESIZE' %THEN                                     06970700
*     %CTSSBOPT = 'CTSSOPTP';       /*                           @L2A*/ 06984200
*   %IF CTSSBOPT = '' %THEN                                             06997700
*     %CTSSBOPT = 'CTSSOPTP';                                           07011200
*   %IF CTSSBOPT = 'NONE' %THEN                                         07024700
*     %CTSSBOPT = '';                                                   07038200
*   %IF CTSSBOPT ^= '' %THEN                                            07051700
*     %CTSSBOPT = 'BASED(' || CTSSBOPT || ')';                          07065200
*   %IF CTSSBOPT = '' %THEN                                             07078700
*     %CTSSDOPT = '1024';           /*                           @L4M*/ 07092200
*   DECLARE                                                             07105700
*     1    CTSSOPTL BDY(WORD) CTSSBOPT, /* Options list.             */ 07119200
*       3    CTSSOHDR,              /* Options list header           */ 07132700
*         5    CTSSOLEN FIXED(16),  /* Length of options string      */ 07146200
*         5    *        FIXED(16),  /* Reserved                      */ 07159700
*       3    CTSSOPTS CHAR(CTSSDOPT), /* Unparsed options string        07173200
*                                      specified by operator or         07186700
*                                      parmlib member.               */ 07200200
*     CTSSIDC  CHAR(LENGTH(CTSS.CTSSID)) CONSTANT('CTSS'), /* 'CTSS'    07213700
*                                      parameter list id string      */ 07227200
*     CTSSVERC CHAR(LENGTH(CTSS.CTSSVER)) CONSTANT(CTSSVER2), /*        07240700
*                                      'CTSS' current version    @L2C*/ 07254200
*     CTSSVER1 CHAR(LENGTH(CTSSVERC)) CONSTANT('01'), /* 'CTSS'         07267700
*                                      version HBB3310               */ 07281200
*     CTSSVER2 CHAR(LENGTH(CTSSVERC)) CONSTANT('02'); /* 'CTSS'         07294700
*                                      version HBB4410           @L1A*/ 07308200
*   %IF ZPRINT ^= 'NO' %THEN                                            07321700
*     %GOTO ITTCTSSX;                                                   07335200
*@LIST POP;                                                             07350000
*%ITTCTSSX:                                                             07400000
*   ;                                                                   07450000
