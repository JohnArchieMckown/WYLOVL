*                                                                       00007100
* %DCL IFGVPDI_INCLUDED CHAR EXT;                                       00014200
* %DEACTIVATE IFGVPDI_INCLUDED;                                         00021300
* %IF IFGVPDI_INCLUDED = '' %THEN                                       00028400
* %DO;                                                                  00035500
*/* Macro made bi-lingual on 97261. CBGEN compile date 97203         */ 00085500
*% /*                                                                   00350000
         MACRO                                                          00400000
         IFGVPDI &DSECT=YES,&LIST=YES,&TITLE=YES,&VPDI=YES,&VPDII=COND  00450000
         GBLC  &IFGVPDI_INCLUDED                                        00500000
         GBLC  &ZCBPRINT                                                00550000
&IFGVPDI_INCLUDED SETC 'YES'                                            00600000
         AIF   ('&LIST' EQ 'NONE').P0                                   00616600
         AIF   ('&TITLE' EQ 'NO').P5                                    00633200
 TITLE   'IFGVPDI  - Mapping of Problem Determination Data returned '   00650000
.P5      ANOP                                                           00675000
**/ IFGVPDI_1:;                                                         00700000
*/* START OF SPECIFICATIONS ******************************************* 00750000
*    $MAC(IFGVPDI) COMP(DF122):                                       * 00800000
*                                                                     * 00850000
*    ACRONYM:  VSAM Problem Determination Information                 * 00900000
*                                                                     * 00950000
*    DESCRIPTIVE NAME: Mapping of Problem Determination Data returned * 01000000
*                      by VSAM for problems which may be associated   * 01050000
*                      with more than one transaction.                * 01100000
*                                                                     * 01150000
*    MACRO NAME: IFGVPDI                                              * 01200000
*                                                                     * 01250000
*    DSECT NAME: VPDI  - Problem Determination Header                 * 01300000
*                VPDII - Problem Determination Information Element    * 01350000
*                                                                     * 01400000
*    ADDITIONAL INFORMATION: VSAM will always return one VPDI and     * 01450000
*              one or more VPDII,  depending on the request type.     * 01500000
*              The following futher explains what will be returned    * 01550000
*              for each type of error.                                * 01600000
*       Retained Locks:  One VPDII will be returned,  it will         * 01650000
*                        describe the transaction which made the      * 01700000
*                        lock retained.                               * 01750000
*       Lost Locks:      One VPDII will be returned for each          * 01800000
*                        subsystem which owes a IDARECOV for this     * 01850000
*                        sphere.                                      * 01900000
*       Time Out:        A VPDII will be returned which will          * 01950000
*                        describe the transaction which holds the     * 02000000
*                        the lock which was requested.                * 02050000
*                        There will be more than one VPDII when the   * 02100000
*                        resource is held shared                      * 02150000
*       DeadLock:        One VPDII will be returned for each          * 02200000
*                        participant in the deadlock cycle which is   * 02250000
*                        being broken.  Each VPDII will contain       * 02300000
*                        information about the lock which is held and * 02350000
*                        the lock which is be awaited.                * 02400000
*                                                                     * 02450000
*    STATUS: DFSMS/MVS 1.3.0                                          * 02500000
*                                                                     * 02550000
*PROPRIETARY V3 STATEMENT                                             * 02600000
*LICENSED MATERIALS - PROPERTY OF IBM                                 * 02650000
*"RESTRICTED MATERIALS OF IBM"                                        * 02700000
*5695-DF1                                                             * 02750000
*(C) COPYRIGHT 1995  IBM CORP.                                        * 02800000
*END PROPRIETARY V3 STATEMENT                                         * 02850000
*                                                                     * 02950000
*    COMPONENT:  VSAM RLS Server Services (VSS)                       * 03000000
*                                                                     * 03050000
*    EYE-CATCHER:  IFGVPDI                                            * 03100000
*                                                                     * 03150000
*    STORAGE ATTRIBUTES:                                              * 03200000
*      ALLOCATION METHOD:  GETMAIN                                    * 03250000
*      SUBPOOL:  0 in users address space , 229 in VSAM AS.           * 03300000
*      KEY:  User Key                                                 * 03350000
*                                                                     * 03400000
*    SIZE:  Described by header.                                      * 03450000
*                VPDI  -- X'0030' bytes                               * 03500000
*                VPDII -- X'0008' bytes                               * 03550000
*                                                                     * 03600000
*    CREATED BY:  Storage Management Locking Services.                * 03650000
*                                                                     * 03700000
*    POINTED TO BY:                                                   * 03750000
*                                                                     * 03800000
*    SERIALIZATION:  None                                             * 03850000
*                                                                     * 03900000
*    FUNCTION: Maps the information returned on a lock failure caused * 03950000
*      by retained locks, lost locks, time out or deadlock.           * 04000000
*                                                                     * 04050000
*    DISTRIBUTION LIBRARY: AMACLIB                                    * 04100000
*                                                                     * 04150000
*    METHOD OF ACCESS:                                                * 04200000
*      ASM:      using on ENF45                                       * 04250000
*      PL/X-370: %INCLUDE SYSLIB(IFGVPDI)                             * 04300000
*                                                                     * 04350000
*    DELETED BY:  User.                                               * 04400000
*                                                                     * 04450000
*    FREQUENCY: One per error.                                        * 04500000
*                                                                     * 04550000
*    DEPENDENCIES:  None                                              * 04600000
*                                                                     * 04650000
*    NOTES:  none                                                     * 04700000
*                                                                     * 04750000
*    CHANGE ACTIVITY:                                                 * 04800000
*      $L0=VSAMRLS,HDZ11C0,940223,SJPLGMD:                            * 04850000
*                                                                     * 04900000
*END OF SPECIFICATIONS************************************************/ 04950000
*% /*                                                                   04997500
.P0      ANOP                                                           05021200
         AIF   ('&ZCBPRINT' EQ 'NO').P1                                 05045000
         AIF   ('&LIST' EQ 'YES').P2                                    05092500
.P1      ANOP                                                           05140000
         PUSH  PRINT                                                    05187500
         PRINT OFF                                                      05235000
.P2      ANOP                                                           05282500
*                                                                       05330000
*   Start of PL/X Source                                                05380000
*                                                                       05520000
*                                                                       05567500
         AIF   ('&VPDI' EQ 'NO').L0002                                  05615000
         AIF   ('&DSECT' EQ 'YES').L0003                                05662500
         AIF   ('&VPDI' NE 'YES').L0002                                 05710000
VPDI     DS    0D                                                       05757500
         AGO   .L0004                                                   05805000
.L0003   ANOP                                                           05852500
VPDI     DSECT                                                          05900000
.L0004   ANOP                                                           05947500
*                                                                       05995000
*      ***************************************************************  06042500
*      *                                                             *  06090000
*      * Header                                                      *  06137500
*      *                                                             *  06185000
*      ***************************************************************  06232500
*                                                                       06280000
*                                                                       06327500
VPDIHDR  DS    1CL0024                                                  06359100
         ORG   VPDIHDR                                                  06390700
VPDIID   DS    1CL0008                                                  06422500
VPDISIZE DS    1FL4      Size for free main                             06470000
VPDIVER# DS    1FL1                                                     06517500
VPDISP   DS    1FL1      Subpool for freemain                           06565000
VPDILEN  DS    1FL2      Length of the common part of the VPDI, used   *06612500
                         to locate the next section                     06660000
         ORG   VPDIHDR+X'00000018'                                      06707500
VPDICOM  DS    1CL0024                                                  06736000
         ORG   VPDICOM                                                  06764500
VPDIIGONEBYTE DS 1FL1                                                   06793000
         ORG   VPDIIGONEBYTE                                            06821500
VPDIIGONE EQU  X'80'     Internal use, Deadlock does                    06850000
         ORG   VPDIIGONEBYTE+X'00000001'                                06897500
         DS    1FL1                                                     06945000
VPDITYPE DS    1FL2      identification of the type problem which was  *06992500
                         detected by VSAM                               07040000
VPDICNT  DS    1FL4      Number of VPDIIs returned                      07087500
VPDISYSNAME DS 1CL0008   Name of system which recognized the problem,  *07135000
                         could be another system for deadlock           07182500
VPDICLOCK DS   1BL8      System clock at the time of the detection      07230000
*                                                                       07277500
*      ***************************************************************  07325000
*      *                                                             *  07372500
*      * Start of the Problem Determination Items Information Items  *  07420000
*      *                                                             *  07467500
*      ***************************************************************  07515000
*                                                                       07562500
*                                                                       07610000
         DS    0C                                                       07657500
*                                                                       07705000
*    *****************************************************************  07752500
*     Types of records ===VPDIType===                                   07800000
*    *****************************************************************  07847500
*                                                                       07895000
*                                                                       07942500
VPDITYRL EQU   1         Retained lock type information                 07990000
VPDITYLL EQU   2         Lost locks type information                    08037500
VPDITYTO EQU   3         Time Out Type Information                      08085000
VPDITYDL EQU   4         Dead Lock Type Information                     08132500
VPDITYPR EQU   5         Promote Violation Information                  08144300
VPDITYRF EQU   4097      Internal type only record table full, will    *08156100
                         not be returned to invokers of VSAM Services   08167900
VPDI_LEN EQU   *-VPDI                                                   08180000
.L0002   ANOP                                                           08227500
*                                                                       08275000
*    *****************************************************************  08322500
*     Problem Determination Item - Follows the VPDI or another VPDII    08370000
*    *****************************************************************  08417500
*                                                                       08465000
*                                                                       08512500
         AIF   ('&VPDII' EQ 'NO').L0005                                 08560000
         AIF   ('&DSECT' EQ 'YES').L0006                                08607500
         AIF   ('&VPDII' NE 'YES').L0005                                08655000
VPDII    DS    0D                                                       08702500
         AGO   .L0007                                                   08750000
.L0006   ANOP                                                           08797500
VPDII    DSECT                                                          08845000
.L0007   ANOP                                                           08892500
VPDIILEN DS    1FL4      Length of this item, next next item will      *08940000
                         follow it                                      08987500
VPDIIFLAGS DS  1FL1                                                     09019100
         ORG   VPDIIFLAGS                                               09050700
VPDIILAST EQU  X'80'     Last VPDII                                     09082500
         ORG   VPDIIFLAGS+X'00000001'                                   09130000
         DS    1FL3                                                     09177500
VPDIISPECIFIC DS 0C      Type specific information                      09225000
VPDII_LEN EQU  *-VPDII                                                  09272500
*                                                                       09320000
*    ************************************************************       09367500
*     VpdiType = VpdiLL // Lost Locks,      identifies a subsystem      09415000
*     which was accessing the data set when the failure occured.        09462500
*    ************************************************************       09510000
*                                                                       09557500
*                                                                       09605000
         ORG   VPDIISPECIFIC                                            09652500
VPDIILL  DS    0X                                                       09700000
VPDIILLSS DS   1CL0008   Subsystem Name                                 09747500
VPDIILL_LEN EQU *-VPDIILL                                               09795000
         ORG   ,                                                        09842500
*                                                                       09890000
*    ************************************************************       09937500
*     VpdiType = VpdiRL // Retained Locks, identifies the               09985000
*     subsystem and transaction which caused the lock to be             10032500
*     retained.                                                         10080000
*    ************************************************************       10127500
*                                                                       10175000
*                                                                       10222500
         ORG   VPDIISPECIFIC                                            10270000
VPDIIRL  DS    0X                                                       10317500
VPDIIRLHOLDER DS 1CL0020                                                10327000
         ORG   VPDIIRLHOLDER                                            10336500
VPDIIRLHOLDERRLS DS 1CL0016                                             10346000
         ORG   VPDIIRLHOLDERRLS                                         10355500
VPDIIRLSS DS   1CL0008   Subsystem Name                                 10365000
VPDIIRLUOWID DS 1CL0008  Transaction identifier                         10412500
         ORG   VPDIIRLHOLDER                                            10416400
VPDIIRLHOLDERTVS DS 1CL0020                                             10420300
         ORG   VPDIIRLHOLDERTVS                                         10424200
VPDIIRLUR DS   1CL0016   Ur Identifier                                  10428100
VPDIIRLTVSINSTANCE DS 1FL1 Tvs Instance Identifier                      10432000
         DS    1CL0003                                                  10435900
VPDIIRLFLAGS DS 1BL1                                                    10439800
         ORG   VPDIIRLFLAGS                                             10443700
VPDIIRLTVSFORMAT EQU X'80'                                              10447600
         ORG   VPDIIRLFLAGS+X'00000001'                                 10451500
         DS    1CL0003                                                  10455400
VPDIIRL_LEN EQU *-VPDIIRL                                               10460000
         ORG   ,                                                        10507500
*                                                                       10555000
*    ************************************************************       10602500
*     VpdiType = VpdiTO(Time Out) or                                    10631000
*     VpdiType = VpdiPR(Promote Violation                               10659500
*     Presents holder if they                                           10688000
*     exist or an indication that no holder of the                      10716500
*     lock could be found,      this is a serious problem.              10745000
*    ************************************************************       10792500
*                                                                       10840000
*                                                                       10887500
         ORG   VPDIISPECIFIC                                            10935000
VPDIITO  DS    0X                                                       10982500
VPDIITOSYSTEMNAME DS 1CL0008 Name of System                             11030000
VPDIITOJOBNAME DS 1CL0008 Job Name                                      11077500
VPDIITOHOLDER DS 1CL0016                                                11087000
         ORG   VPDIITOHOLDER                                            11096500
VPDIITOHOLDERRLS DS 1CL0016                                             11106000
         ORG   VPDIITOHOLDERRLS                                         11115500
VPDIITOSS DS   1CL0008   Subsystem Name                                 11125000
VPDIITOUOWID DS 1CL0008  Transaction identifier                         11172500
         ORG   VPDIITOHOLDER                                            11186000
VPDIITOHOLDERTVS DS 1CL0016                                             11199500
         ORG   VPDIITOHOLDERTVS                                         11213000
VPDIITOUR DS   1CL0016   Ur Identifier                                  11226500
VPDIITOFLAGS DS 1FL1                                                    11240000
         ORG   VPDIITOFLAGS                                             11253500
VPDIITONOHOLDERFOUND EQU X'80' no current holder found                  11267500
VPDIITONOKEYMISMATCH EQU X'40' false contention because of key hash    *11315000
                         collision                                      11362500
VPDIITOINTERNALLOCK EQU X'20'                                           11386200
VPDIITOPENDINGPROMOTE EQU X'10' Request is being promoted               11398100
VPDIITOTVSFORMAT EQU X'08'                                              11404000
         ORG   VPDIITOFLAGS+X'00000001'                                 11410000
VPDIITOTVSINSTANCE DS 1FL1 Tvs Instance Identifier                      11416700
         DS    1CL0002                                                  11423400
VPDIITOSPECIFIC DS 1CL0004 Internal versus normal locks                 11430100
         ORG   VPDIITOSPECIFIC                                          11436800
VPDIITOINTERNALLOCKTYPE DS 1FL4                                         11443900
         ORG   VPDIITOSPECIFIC                                          11447300
VPDIITOHOLDERSTUFF DS 1CL0004 Normal key stuff                          11450700
         ORG   VPDIITOHOLDERSTUFF                                       11454100
VPDIITOKEYLEN DS 1FL1    Length of Key                                  11457500
VPDIITOSTATE DS 1FL1     State of the holder                            11505000
VPDIITOKEYOFF DS 1FL2    Offset to held key                             11516800
VPDIITOUSERINFORMATION DS 1CL0032 Information passed                    11528600
*                                                                       11540400
*      ***************************************************************  11552200
*      *                                                             *  11564000
*      * Start of the variable length fields                         *  11575800
*      *                                                             *  11587600
*      ***************************************************************  11599400
*                                                                       11611200
*                                                                       11623000
VPDIITOENDFIXEDAREA DS 0C                                               11634800
VPDIITO_LEN EQU *-VPDIITO                                               11647500
         ORG   ,                                                        11695000
*                                                                       11742500
*    ************************************************************       11790000
*     VpdiType = VpdiDL // Dead Lock. Presents on transaction           11837500
*     that is part of the ring which is being broken                    11885000
*    ************************************************************       11932500
*                                                                       11980000
*                                                                       12027500
         ORG   VPDIISPECIFIC                                            12075000
VPDIIDL  DS    0X                                                       12122500
VPDIIDLSYSTEMNAME DS 1CL0008 Name of System                             12170000
VPDIIDLJOBNAME DS 1CL0008 Job Name                                      12217500
VPDIIDLHOLDER DS 1CL0016                                                12227000
         ORG   VPDIIDLHOLDER                                            12236500
VPDIIDLHOLDERRLS DS 1CL0016                                             12246000
         ORG   VPDIIDLHOLDERRLS                                         12255500
VPDIIDLSS DS   1CL0008   Subsystem Name                                 12265000
VPDIIDLUOWID DS 1CL0008  Transaction identifier                         12312500
         ORG   VPDIIDLHOLDER                                            12322000
VPDIIDLHOLDERTVS DS 1CL0016                                             12331500
         ORG   VPDIIDLHOLDERTVS                                         12341000
VPDIIDLUR DS   1CL0016   Ur Identifier                                  12350500
VPDIIDLFLAGS DS 1FL1                                                    12360000
         ORG   VPDIIDLFLAGS                                             12375800
VPDIIDLTVSFORMAT EQU X'80'                                              12391600
         ORG   VPDIIDLFLAGS+X'00000001'                                 12407400
VPDIIDLTVSINSTANCE DS 1FL1 Tvs Instance Identifier                      12423200
         DS    1CL0006                                                  12439000
VPDIIDLUSERINFORMATION DS 1CL0032 Information passed by client in the  *12455000
                         extended UOWID                                 12502500
*                                                                       12550000
*      ***************************************************************  12597500
*      *                                                             *  12645000
*      * **********************************************************  *  12692500
*      * Resource this transaction is holding                        *  12740000
*      * **********************************************************  *  12787500
*      *                                                             *  12835000
*      ***************************************************************  12882500
*                                                                       12930000
*                                                                       12977500
VPDIIDLHOLDINGSPECIFIC DS 1CL0096                                       13009100
         ORG   VPDIIDLHOLDINGSPECIFIC                                   13040700
VPDIIDLHSPHERENAME DS 1CL0044 Name of the sphere                        13072500
VPDIIDLHCLUSTERNAME DS 1CL0044 Name of the cluster                      13120000
VPDIIDLSPECIFICHOLDER DS 1CL0004 Internal versus normal locks           13126700
         ORG   VPDIIDLSPECIFICHOLDER                                    13133400
VPDIIDLHINTERNALLOCKTYPE DS 1FL4                                        13140100
         ORG   VPDIIDLSPECIFICHOLDER                                    13146900
VPDIIDLHOLDERSTUFF DS 1CL0004 Normal key stuff                          13153700
         ORG   VPDIIDLHOLDERSTUFF                                       13160500
VPDIIDLHKEYLEN DS 1FL1   Length of held key                             13167500
VPDIIDLHSTATE DS 1FL1    State of the held key                          13215000
VPDIIDLHKEYOFF DS 1FL2   Offset to held key                             13262500
VPDIIDLHFLAGS DS 1BL1                                                   13278300
         ORG   VPDIIDLHFLAGS                                            13294100
VPDIIDLHINTERNALLOCK EQU X'80'                                          13309900
         ORG   VPDIIDLHFLAGS+X'00000001'                                13325700
         DS    1CL0003                                                  13341500
*                                                                       13357500
*      ***************************************************************  13405000
*      *                                                             *  13452500
*      * **********************************************************  *  13500000
*      * Resource this transaction is waiting for                    *  13547500
*      * **********************************************************  *  13595000
*      *                                                             *  13642500
*      ***************************************************************  13690000
*                                                                       13737500
*                                                                       13785000
VPDIIDLWAITINGSPECIFIC DS 1CL0096                                       13816600
         ORG   VPDIIDLWAITINGSPECIFIC                                   13848200
VPDIIDLWSPHERENAME DS 1CL0044 Name of the sphere                        13880000
VPDIIDLWCLUSTERNAME DS 1CL0044 Name of the cluster                      13927500
VPDIIDLSPECIFICWAITER DS 1CL0004 Internal versus normal locks           13934200
         ORG   VPDIIDLSPECIFICWAITER                                    13940900
VPDIIDLWINTERNALLOCKTYPE DS 1FL4                                        13947600
         ORG   VPDIIDLSPECIFICWAITER                                    13954400
VPDIIDLWAITERSTUFF DS 1CL0004 Normal key stuff                          13961200
         ORG   VPDIIDLWAITERSTUFF                                       13968000
VPDIIDLWKEYLEN DS 1FL1   Length of Key                                  13975000
VPDIIDLWSTATE DS 1FL1    State of the Waiting request                   14022500
VPDIIDLWKEYOFF DS 1FL2   Offset to held key                             14070000
VPDIIDLWFLAGS DS 1BL1                                                   14085800
         ORG   VPDIIDLWFLAGS                                            14101600
VPDIIDLWINTERNALLOCK EQU X'80'                                          14117400
         ORG   VPDIIDLWFLAGS+X'00000001'                                14133200
         DS    1CL0003                                                  14149000
*                                                                       14165000
*      ***************************************************************  14212500
*      *                                                             *  14260000
*      * Start of the variable length fields                         *  14307500
*      *                                                             *  14355000
*      ***************************************************************  14402500
*                                                                       14450000
*                                                                       14497500
VPDIIDLENDFIXEDAREA DS 0C                                               14545000
*                                                                       14592500
*    *****************************************************************  14640000
*     Constants                                                         14687500
*    *****************************************************************  14735000
*                                                                       14782500
*                                                                       14830000
*                                                                       14877500
*    *****************************************************************  14925000
*     State of holding or request for time out or dead lock             14972500
*    *****************************************************************  15020000
*                                                                       15067500
*                                                                       15115000
VPDIISHAREDSTATE EQU 1                                                  15162500
VPDIIEXCLUSIVESTATE EQU 2                                               15210000
*                                                                       15215900
*    *****************************************************************  15221800
*     Internal lock types                                               15227700
*    *****************************************************************  15233600
*                                                                       15239500
*                                                                       15245400
VPDIIADDTOENDLOCK EQU 0                                                 15251300
*                                                                       15257500
*    *****************************************************************  15305000
*     Eyecatcher and version for the main body                          15352500
*    *****************************************************************  15400000
*                                                                       15447500
*                                                                       15495000
VPDIVERSION EQU 1                                                       15542500
VPDIIDL_LEN EQU *-VPDIIDL                                               15590000
         ORG   ,                                                        15637500
.L0005   ANOP                                                           15685000
         AIF   ('&ZCBPRINT' EQ 'NO').P3                                 15732500
         AIF   ('&LIST' EQ 'YES').P4                                    15780000
.P3      ANOP                                                           15827500
         POP   PRINT                                                    15875000
.P4      ANOP                                                           15922500
.P_EXIT  ANOP                                                           15970000
         MEND                                                           16017500
**/ IFGVPDI_2:;                                                         16065000
* %IFGVPDI_INCLUDED = 'YES';                                            16112500
* %DCL ZCBPRINT CHAR EXT;                                               16160000
* %DEACTIVATE ZCBPRINT;                                                 16207500
* %DCL IFGVPDI_LIST CHAR EXT;                                           16255000
* %DEACTIVATE IFGVPDI_LIST;                                             16302500
* %IF IFGVPDI_LIST ^= 'NO' &                                            16350000
*    ZCBPRINT ^= 'NO' %THEN                                             16397500
*   %GOTO IFGVPDI_3;                                                    16445000
*   @LIST PUSH NOECHO;                                                  16492500
*   @LIST NOASSEMBLE NOECHO;                                            16540000
*   @LIST OFF C NOECHO;                                                 16587500
* %IFGVPDI_3:;                                                          16635000
*/* Start of PL/X Source                                             */ 16682500
*/* Start of PL/X Source                                             */ 16716200
*@LOGIC;                                                                16750000
*#PRAGMA TOOL=CBGEN.                                                    16800000
*#DELETE.VPDIIDENTIFIER                                                 16850000
*#DELETE.VPDISToken                                                     16875000
*#EPRAGMA.                                                              16900000
*@ENDLOGIC;                                                             16950000
*@SPACE;                                                                17000000
*Declare                                                                17050000
*  /******************************************************************/ 17100000
*  /* Header for the VSAM Problem Determination Information          */ 17150000
*  /******************************************************************/ 17200000
*  1 VPDI Bdy(DWord) Based,                                             17250000
*    /****************************************************************/ 17300000
*    /* Header                                                       */ 17350000
*    /****************************************************************/ 17400000
*    2 VPDIHDR,                                                         17450000
*      3 VPDIID Char(8),                                                17500000
*      3 VPDISize Fixed(31),        /* Size for free main            */ 17550000
*      3 VPDIVer# Binary(8),                                            17600000
*      3 VPDISP Fixed(8),           /* Subpool for freemain          */ 17650000
*      3 VPDILen Fixed(16),         /* Length of the common part of     17700000
*                                      the VPDI,  used to locate the    17750000
*                                      next section                 */  17800000
*      3 VPDISToken Char(8),        /* Internal for use by              17816600
***                                       VSAM only                  */ 17833300
*    2 VPDICOM,                                                         17850000
*      3 VpdiiGoneByte Fixed(8),                                        17870000
*        4 VpdiiGone Bit(1),        /* Internal use, Deadlock does   */ 17890000
*      3 * Fixed(8),                                                    17910000
*      3 VPDIType Fixed(16),        /* identification of the type       17930000
*                                      problem which was detected by    17950000
*                                      VSAM                         */  18000000
*      3 VPDICnt Fixed(31),         /* Number of VPDIIs returned     */ 18050000
*      3 VPDISysName Char(8),       /* Name of system which             18100000
*                                      recognized the problem,          18150000
*                                      could be another system for      18200000
*                                       deadlock                    */  18250000
*      3 VPDIClock   Bit(64),       /* System clock at the time of the  18300000
*                                       detection                   */  18350000
*    /****************************************************************/ 18400000
*    /* Start of the Problem Determination Items Information Items   */ 18450000
*    /****************************************************************/ 18500000
*    2 * Char(*) Bdy(Dword),                                            18550000
*  /******************************************************************/ 18600000
*  /* Types of records ===VPDIType===                                */ 18650000
*  /******************************************************************/ 18700000
*  VPDITYRL Fixed(16) Constant(1),  /* Retained lock type information*/ 18750000
*  VPDITYLL Fixed(16) Constant(2),  /* Lost locks type information   */ 18800000
*  VPDITYTO Fixed(16) Constant(3),  /* Time Out Type Information     */ 18850000
*  VPDITYDL Fixed(16) Constant(4),  /* Dead Lock Type Information    */ 18900000
*  VPDITYPR Fixed(16) Constant(5),  /* Promote Violation Information */ 18910000
*  VPDITYRF Fixed(16) Constant(4097),/*Internal type only record table  18920000
*                                      full,  will not be returned to   18930000
*                                      invokers of VSAM Services     */ 18940000
*  /******************************************************************/ 18950000
*  /* Problem Determination Item - Follows the VPDI or another VPDII */ 19000000
*  /******************************************************************/ 19050000
*  1 VPDII Based BDY(DWord),                                            19100000
*    2 VpdiiLen Fixed(31),          /* Length of this item,  next       19150000
*                                      next item will follow it     */  19200000
*    2 VpdiiFlags Fixed(8),                                             19250000
*      3 VpdiiLast Bit(1),          /* Last VPDII                    */ 19300000
*    2 * Fixed(24),                                                     19350000
*    2 VpdiiSpecific Char(0) Bdy(Dword),/* Type specific information */ 19400000
*  /*************************************************************    */ 19450000
*  /* VpdiType = VpdiLL // Lost Locks,      identifies a subsystem   */ 19500000
*  /* which was accessing the data set when the failure occured.     */ 19550000
*  /*************************************************************    */ 19600000
*  1 VpdiiLL Bdy(Dword) Defined(Vpdii.VpdiiSpecific),                   19650000
*    4 VpdiiLLSS Char(8),           /* Subsystem Name                */ 19700000
*    4 * Char(0) Bdy(Dword),                                            19750000
*  /*************************************************************    */ 19800000
*  /* VpdiType = VpdiRL // Retained Locks, identifies the            */ 19850000
*  /* subsystem and transaction which caused the lock to be          */ 19900000
*  /* retained.                                                      */ 19950000
*  /*************************************************************    */ 20000000
*  1 VpdiiRL Bdy(Dword) Defined(Vpdii.VpdiiSpecific),                   20050000
*    4 VpdiiRlHolder Union,                                             20062500
*      5 VpdiiRlHolderRLS,                                              20075000
*        6 VpdiiRLSS Char(8),       /* Subsystem Name                */ 20087500
*        6 VpdiiRLUOWID Char(8),    /* Transaction identifier        */ 20100000
*      5 VpdiiRlHolderTVS,                                              20112500
*        6 VpdiiRLUR Char(16),      /* Ur Identifier                 */ 20125000
*        6 VpdiiRLTvsInstance Fixed(8), /* Tvs Instance Identifier   */ 20137500
*        6 * Char(3),                                                   20150000
*    4 VpdiiRlFlags Bit(8),                                             20162500
*      5 VpdiiRlTVSFormat Bit(1),                                       20175000
*    4 * Char(3),                                                       20187500
*    4 * Char(0) Bdy(Dword),                                            20200000
*  /*************************************************************    */ 20250000
*  /* VpdiType = VpdiTO(Time Out) or                                 */ 20280000
*  /* VpdiType = VpdiPR(Promote Violation                            */ 20310000
*  /* Presents holder if they                                        */ 20340000
*  /* exist or an indication that no holder of the                   */ 20370000
*  /* lock could be found,      this is a serious problem.           */ 20400000
*  /*************************************************************    */ 20450000
*  1 VpdiiTO Bdy(Dword) Defined(Vpdii.VpdiiSpecific),                   20500000
*    4 VpdiiTOSystemName Char(8),   /* Name of System                */ 20550000
*    4 VpdiiTOJobName Char(8),      /* Job Name                      */ 20600000
*    4 VpdiiToHolder Union,                                             20621400
*      5 VpdiiToHolderRLS,                                              20642800
*        6 VpdiiTOSS Char(8),       /* Subsystem Name                */ 20664200
*        6 VpdiiTOUOWID Char(8),    /* Transaction identifier        */ 20685600
*      5 VpdiiToHolderTVS,                                              20707000
*        6 VpdiiTOUR Char(16),      /* Ur Identifier                 */ 20728400
*    4 VpdiiTOFlags Fixed(8),                                           20750000
*      5 VpdiiTONoHolderFound Bit(1), /* no current holder found     */ 20800000
*      5 VpdiiTONoKeyMismatch Bit(1), /* false contention because       20850000
*                                  of key hash collision             */ 20900000
*      5 VpdiiToInternalLock Bit(1),                                    20912500
*      5 VpdiiToPendingPromote Bit(1), /* Request is being promoted  */ 20918700
*      5 VpdiiTOTVSFormat Bit(1),                                       20929900
*    4 VpdiiTOTvsInstance Fixed(8), /* Tvs Instance Identifier   */     20941100
*    4 * Char(2),                                                       20952300
*    4 VpdiiTOSpecific Union,       /* Internal versus normal locks  */ 20963500
*      5 VpdiiTOInternalLockType Fixed(31),                             20975000
*      5 VpdiiToHolderStuff,        /* Normal key stuff              */ 21000000
*        6 VpdiiTOKeyLen Fixed(8),  /* Length of Key                 */ 21025000
*        6 VpdiiTOState Fixed(8),   /* State of the holder           */ 21050000
*        6 VpdiiTOKeyOff Fixed(15), /* Offset to held key            */ 21075000
*    4 VpdiiTOUserInformation Char(32),       /* Information passed  */ 21100000
*    /* Start of the variable length fields                          */ 21150000
*    4 VpdiiTOEndFixedArea Char(0) Bdy(Dword),                          21200000
*    VpdiiTOKey Char(*) Varying(VpdiiTO.VpdiiTOKeyLen)                  21250000
*      Based(Addr(VPDII)+VpdiiTO.VpdiiTOKeyOff),                        21300000
*  /*************************************************************    */ 21350000
*  /* VpdiType = VpdiDL // Dead Lock. Presents on transaction        */ 21400000
*  /* that is part of the ring which is being broken                 */ 21450000
*  /*************************************************************    */ 21500000
*  1 VpdiiDL Bdy(Dword)      Defined(Vpdii.VpdiiSpecific),              21550000
*    4 VpdiiDLSystemName Char(8),   /* Name of System                */ 21600000
*    4 VpdiiDLJobName Char(8),      /* Job Name                      */ 21650000
*    4 VpdiiDLHolder Union,                                             21671400
*      5 VpdiiDLHolderRLS,                                              21692800
*        6 VpdiiDLSS Char(8),       /* Subsystem Name                */ 21714200
*        6 VpdiiDLUOWID Char(8),    /* Transaction identifier        */ 21735600
*      5 VpdiiDLHolderTVS,                                              21757000
*        6 VpdiiDLUR Char(16),      /* Ur Identifier                 */ 21778400
*    4 VpdiiDLFlags Fixed(8),                                           21800000
*      5 VpdiiDLTVSFormat Bit(1),                                       21825000
*    4 VpdiiDLTvsInstance Fixed(8), /* Tvs Instance Identifier   */     21850000
*    4 * Char(6),                                                       21875000
*    4 VpdiiDLUserInformation Char(32),       /* Information passed     21900000
*                                   by client in the extended           21950000
*                                   UOWID                            */ 22000000
*    /***********************************************************    */ 22050000
*    /* Resource this transaction is holding                         */ 22100000
*    /***********************************************************    */ 22150000
*    4 VpdiiDLHoldingSpecific Bdy(Dword),                               22200000
*      5 VpdiiDLHSphereName Char(44), /* Name of the sphere          */ 22250000
*      5 VpdiiDLHClusterName Char(44), /* Name of the cluster        */ 22300000
*      5 VpdiiDLSpecificHolder Union,  /* Internal versus               22320000
*                                         normal locks               */ 22340000
*        6 VpdiiDLHInternalLockType Fixed(31),                          22360000
*        6 VpdiiDLHolderStuff,      /* Normal key stuff              */ 22390000
*          7 VpdiiDLHKeyLen Fixed(8), /* Length of held key          */ 22420000
*          7 VpdiiDLHState Fixed(8),/* State of the held key         */ 22450000
*          7 VpdiiDLHKeyOff Fixed(15), /* Offset to held key         */ 22480000
*      5 VpdiiDLHFlags Bit(8),                                          22510000
*        6 VpdiiDLHInternalLock Bit(1),                                 22540000
*      5 * Char(3),                                                     22570000
*    /***********************************************************    */ 22600000
*    /* Resource this transaction is waiting for                     */ 22650000
*    /***********************************************************    */ 22700000
*    4 VpdiiDLWaitingSpecific Bdy(Dword),                               22750000
*      5 VpdiiDLWSphereName Char(44), /* Name of the sphere          */ 22800000
*      5 VpdiiDLWClusterName Char(44), /* Name of the cluster        */ 22850000
*      5 VpdiiDLSpecificWaiter Union,  /* Internal versus               22866000
*                                         normal locks               */ 22882000
*        6 VpdiiDLWInternalLockType Fixed(31),                          22898000
*        6 VpdiiDLWaiterStuff,      /* Normal key stuff              */ 22922000
*          7 VpdiiDLWKeyLen Fixed(8), /* Length of Key               */ 22946000
*          7 VpdiiDLWState Fixed(8),/* State of the Waiting request  */ 22970000
*          7 VpdiiDLWKeyOff Fixed(15), /* Offset to held key         */ 22994000
*      5 VpdiiDLWFlags Bit(8),                                          23018000
*        6 VpdiiDLWInternalLock Bit(1),                                 23042000
*      5 * Char(3),                                                     23066000
*    4 * Char(0) Bdy(Dword),                                            23090000
*    /* Start of the variable length fields                          */ 23114200
*    4 VpdiiDLEndFixedArea Char(0) Bdy(Dword),                          23128400
*    VpdiiDLHKey Char(*) Varying(VpdiiDL.VpdiiDLHKeyLen)                23142600
*      Based(Addr(VPDII)+VpdiiDL.VpdiiDLHKeyOff),                       23156800
*    VpdiiDLWKey Char(*) Varying(VpdiiDL.VpdiiDLWKeyLen)                23171000
*      Based(Addr(VPDII)+VpdiiDL.VpdiiDLWKeyOff),                       23185200
*  /******************************************************************/ 23200000
*  /* Constants                                                      */ 23250000
*  /******************************************************************/ 23300000
*@Space;                                                                23350000
*  /******************************************************************/ 23400000
*  /* State of holding or request for time out or dead lock          */ 23450000
*  /******************************************************************/ 23500000
*  VpdiiSharedState    Fixed(8) Constant(1),                            23550000
*  VpdiiExclusiveState Fixed(8) Constant(2),                            23600000
*  /******************************************************************/ 23650000
*  /* Internal lock types                                            */ 23660000
*  /******************************************************************/ 23670000
*  VpdiiAddToEndLock Fixed(31) Constant(0),                             23680000
*  /******************************************************************/ 23690000
*  /* Eyecatcher and version for the main body                       */ 23700000
*  /******************************************************************/ 23750000
*  VPDIIdentifier Char(8) Constant('IFGVPDI '),                         23800000
*  VPDIVersion FIxed(8) Constant(01x);                                  23850000
*/* End of PL/X Source                                               */ 23900000
* %IF IFGVPDI_LIST ^= 'NO' &                                            23950000
*    ZCBPRINT ^= 'NO' %THEN                                             24000000
*   %GOTO IFGVPDI_4;                                                    24050000
*   @LIST POP NOECHO;                                                   24100000
* %IFGVPDI_4:;                                                          24150000
* %END;                                                                 24200000
