*        %GOTO PSCBPRO ; /* BEGIN COMMENT UNTIL PSCBPRO LABEL                   
         MACRO                                                                  
         IKJPSCB                                                                
.*/ %PSCBPRO: ;                                                                 
*/* Start of Specifications *******************************************         
*                                                                     *         
*01* Descriptive Name: TSO/E Protected Step Control Block             *         
*02*  Acronym: PSCB                                                   *         
*                                                                     *         
*01* PROPRIETARY STATEMENT=                                      @N1C*/         
*/***PROPRIETARY_STATEMENT***************************************@N1C*/         
*/*                                                                  */         
*/* Licensed Materials - Property of IBM                             */         
*/*                                                                  */         
*/* 5645-001                                                         */         
*/*                                                                  */         
*/* (C) Copyright IBM Corp. 1981, 1997                               */         
*/*                                                                  */         
*/* US Government Users Restricted Rights - Use, duplication or      */         
*/* disclosure restricted by GSA ADP Schedule Contract with          */         
*/* IBM Corp.                                                        */         
*/*                                                                  */         
*/* STATUS = HTE26D2                                                 */         
*/*                                                                  */         
*/***END_OF_PROPRIETARY_STATEMENT********************************@N1C*/         
*/*                                                               @N1A*         
*                                                                     *         
*01* Macro Name: IKJPSCB                                              *         
*                                                                     *         
*01* DSECT Name: PSCB                                                 *         
*                                                                     *         
*01* Component:  TSO/E Scheduler (28502)                              *         
*                                                                     *         
*01* Eye-Catcher: none                                                *         
*02*  Offset: n/a                                                     *         
*02*  Length: n/a                                                     *         
*                                                                     *         
*01* Storage Attributes:                                              *         
*02*  Subpool: 230 or 252                                             *         
*02*  Key: 1                                                          *         
*02*  Residency: below 16M                                            *         
*02*  Main Storage:                                                   *         
*02*  Auxiliary Storage:                                              *         
*02*  Virtual Storage:                                                *         
*                                                                     *         
*01* Size: 72 bytes                                                   *         
*                                                                     *         
*01* Created by: IKJEFLA, IKJEFT01, IKJTSOEV or a TMP                 *         
*                                                                     *         
*01* Pointed to by: JSCBPSCB field of JSCB                            *         
*                   LWAPSCB field of LWA                              *         
*                                                                     *         
*01* Serialization: responsibility of a TMP                           *         
*                                                                     *         
*01* Function:                                                        *         
*02*  Used to maintain user attributes and accounting data on a       *         
*     userid basis.                                                   *         
*                                                                     *         
*01* Method of Access:                                                *         
*02*  ASM: USING on PSCB DSECT                                        *         
*                                                                     *         
*02*  PL/AS: %PSCBSTORAGE='xxxxx' to change basing of PSCB            *         
*            %PSCBSTORAGE=''      will base on PSCBPTR                *         
*            %INCLUDE SYSLIB(IKJPSCB)                                 *         
*                                                                     *         
*01* External Classification:                                         *         
*02* DMTI: BASE                                                       *         
*02* GUPI: FIELDS                                                     *         
*          PSCBATR2 PSCBUPT                                           *         
*01* End of External Classification:                                  *         
*                                                                     *         
*01* Change Activity:                                                 *         
*                                                                     *         
*   @PD70423  REMOVE REFERENCES TO UADS SINCE INFORMATION CAN         *         
*             NOW BE OBTAINED FROM RACF.                      @PD70423*         
*                                                                     *         
*   @E1502S5  TSO/E R5 LOGON AUTHORIZED EXITS SUPPORT.        @E1502S5*         
*             ADDED FIELDS AT THE END OF THE PSCB TO HOLD     @E1502S5*         
*             THE USER WORD, IF ANY, RETURNED BY THE LOGON    @E1502S5*         
*             PRE-PROMPT INSTALLATION EXIT.                   @E1502S5*         
*                                                                     *         
*   @PEI0006  RETRANSMIT TO MERGE RELEASE 4 FIXES INTO RELEASE        *         
*             5.                                              @PEI0006*         
*                                                                     *         
*    OY20514 - CHECK FOR PSCBSTOR AND IF SPECIFIED SET PSCBSTORAGE    *         
*              TO THE VALUE SPECIFIED FOR PSCBSTOR SO THAT PROGRAMS   *         
*              THAT CALL THIS MACRO DO NOT HAVE TO CHANGE THEIR       *         
*              CODE.                                          @YA20514*         
*                                                                     *         
*    OY22385 - DOCUMENT THE FACT THAT THE RECOVER/NORECOVER           *         
*              AUTHORITY IS REVERSE LOGIC.                    @YA22385*         
*                                                                     *         
*   @E22D2D3  TSO/E 2.2.0 CONSOLE Support.                    @E22D2D3*         
*                                                                     *         
*    OY43565 - Indicate PSCBATR1 and PSCBATR2 are 16 bits     @YA43565*         
*              and that PSCBATR2 is the userid USERDATA       @YA43565*         
*              field in UADS or RACF data set.                @YA43565*         
*                                                                     *         
*   @PMH0160  Updated prolog for SHOWHDR.                     @PMH0160*         
*                                                                     *         
*   @CLEANUP  Various changes to get rid of warning message   @CLEANUP*         
*                                                                     *         
* FLAG REASON   RELEASE DATE     ORIGIN                           @N1A*         
* ---- ------   ------- -------- ------                           @N1A*         
* $N1= COPYRITE HTE26D2 19970218 VOHS: Insert/Update Copyright    @N1A*         
*                                                                     *         
*** End of Specifications ********************************************/         
*        %GOTO PSCBBSL  ; /*                                                    
.* C 350000,890000                                                M0759         
PSCB     DSECT                                                                  
         DS    0F                                                               
PSCBUSER DS    CL7      USERID PADDED RIGHT WITH BLANKS                         
PSCBUSRL DS    CL1      LENGTH OF USERID                                        
PSCBGPNM DS    CL8      ESOTERIC GROUP NAME INIT BY LOGON      @PD70423         
*                       USED BY DYN ALLOC WHEN UNITNAME NOT SPECIFIED           
*                       BUT IS REQUIRED                                         
PSCBATR1 DS    X        A 16 BIT STRING OF USER ATTRIBUTES     @YA43565         
PSCBCTRL EQU   X'80'    OPERATOR COMMAND USER                                   
PSCBACCT EQU   X'40'    ACCOUNT  COMMAND USER                                   
PSCBJCL  EQU   X'20'    SUBMIT   COMMAND USER                                   
PSCBVMNT EQU   X'10'    CNTL VOL MOUNT AUTH                      Y02669         
PSCBATTN EQU   X'08'    LINE DELETE CHAR IS ATTENTION            Y02669         
PSCBRCVR EQU   X'04'      0 -- EDIT RECOVER CAPABILTY          @YA22385         
**                        1 -- NORECOVER CAPIBILTY             @YA22385         
**     NOTE--  BIT PSCBRCVR IS USED DIFFERENTLY                @YA22385         
**             1 MEANS NO EDIT RECOVERY CAPABILTY FOR THE USER @YA22385         
PSCBRRBA EQU   X'02'    USER RBA CONTAINS INCORRECT ADDRESS OF @PD70423         
*                       USER MAIL DIRECTORY, REPLACE WITH      @E1113KS         
*                       PSCBDRBA AT LOGOFF                     @E1113KS         
PSCBCNAU EQU   X'01'    CONSOLE authority                      @E22D2D3         
* BITS 8 - 15           RESERVED FOR IBM USE                   @E22D2D3         
         DS    X        RESERVED                                                
PSCBATR2 DS    X        A 16 BIT STRING CONTAINING THE USERDATA FIELD           
*                                                              @YA43565         
         DS    X                                                                
PSCBLTIM DS    F        DOUBLEWORD FOR LOGON TIME               Y02669          
PSCBLTI2 DS    F        IN STORE CLOCK UNITS                    Y02669          
PSCBSUBH DS    CL1      SUBMIT HOLD CLASS                      @DZ04005         
PSCBSUBC DS    CL1      SUBMIT CLASS                           @DZ04005         
PSCBSUBM DS    CL1      SUBMIT MSGCLASS                        @DZ04005         
PSCBSOUT DS    CL1      SYSOUT CLASS                           @DZ04005         
         DS    CL1      RESERVED                               @E1113KS         
PSCBDRBA DS    CL3      ADDR OF USERS MAIL DIRECTORY           @E1113KS         
         DS    CL4      RESERVED                               @E1113KS         
PSCBDEST DS    CL8      DEST FOR SYSOUT DATA SETS               Y02669          
PSCBRLGB DS    A        PTR TO RELOGON BUFFER                                   
PSCBUPT  DS    A        PTR TO USER PROFILE TABLE                               
PSCBUPTL DS    H        LENGTH OF UPT                                           
PSCBCHAR DS    CL1      USER'S CHARACTER DELETE CHARACTER       Y02669          
PSCBLINE DS    CL1      USER'S LINE DELETE CHARACTER            Y02669          
PSCBRSZ  DS    A        REGION SIZE REQUESTED IN 2K UNITS                       
PSCBU    DS    CL8      RESERVED FOR INSTALLATION USE                           
PSCBEXWD DS    0F       LOGON INSTALLATION EXIT USER WORD    @E1502S5           
PSCBEXK  DS    F          KEY OF THE USER WORD               @E1502S5           
PSCBEXL  DS    F          LENGTH OF THE USER WORD            @E1502S5           
PSCBEXD  DS    F          THE USER WORD                      @E1502S5           
         DS    5F       RESERVED FOR EXPANSION               @E1502S5           
         DS    0D       FORCE END ON DOUBLE WORD BOUNDARY    @E1502S5           
**/                                                                             
         MEND                                                                   
* %PSCBBSL :  ;                                                                 
* %IF PSCBSTOR^='' %THEN              /* IF PSCBSTOR USED  @YA20514  */         
*   %PSCBSTORAGE=PSCBSTOR;            /* SET PSCBSTORAGE   @YA20514  */         
* %IF PSCBSTORAGE='' %THEN            /*                   @ZA29467  */         
*   %PSCBSTORAGE='BASED(PSCBPTR)';    /*                   @ZA29467  */         
* DECLARE                                                                       
*   1 PSCB PSCBSTORAGE,               /*                   @ZA29467  */         
*    2 PSCBUSER CHAR(7)  BDY(WORD),                                             
*                                    /* USERID PADDED RIGHT WITH                
*                                       BLANKS                       */         
*    2  PSCBUSRL  PTR(8),            /* LENGTH OF USERID             */         
*    2 PSCBGPNM CHAR(8),             /* ESOTERIC GROUP NAME INIT BY             
*                                       LOGON USED BY DYNAMIC ALLOC             
*                                       WHEN UNITNAME NOT SPECIFIED             
*                                       BUT IS REQUIRED      @PD70423*/         
*    2    PSCBATR1 CHAR(2),          /* A 16 BIT  STRING OF USER                
*                                       ATTRIBUTES           @YA43565*/         
*     3 PSCBCTRL BIT(1),             /* OPERATOR COMMAND USER        */         
*     3 PSCBACCT BIT(1),             /* ACCOUNT                      */         
*     3 PSCBJCL  BIT(1),             /* SUBMIT BITS                  */         
*     3 PSCBVMNT BIT(1),             /* CNTL VOL MOUNT AUTH    Y02669*/         
*     3 PSCBATTN BIT(1),           /* LINE DELETE CHAR IS ATTN Y02669*/         
*     3 PSCBRCVR BIT(1),           /*  EDIT RECOVER/NORECOVER@Z40DQKV*/         
*                /* NOTE--  BIT PSCBRCVR IS USED DIFFERENTLY @YA22385*/         
*                /*       1 MEANS NO EDIT RECOVERY CAPABILTY @YA22385*/         
*                /*       0 MEANS EDIT RECOVERY CAPABILITY   @YA22385*/         
*     3 PSCBRRBA BIT(1),             /* REPLACE USER RBA AT  @PD70423*/         
*                                    /*LOGOFF TIME           @E1113KS*/         
*     3 PSCBCNAU BIT(1),             /* CONSOLE authority    @E22D2D3*/         
*     3 *        BIT(8),             /* Not used             @E22D2D3*/         
*    2  PSCBATR2  CHAR(2),           /* A 16 BIT STRING CONTAINING THE          
*                                       USERDATA FIELD       @YA43565*/         
*    2 PSCBLTIM FIXED(32),           /* DOUBLEWORD FOR LOGON   Y02669*/         
*    2 PSCBLTI2 FIXED(32),           /* TIME IN STORE CLOCK    Y02669*/         
*                                    /* UNITS                  Y02669*/         
*    2 PSCBSUBH CHAR(1),             /* SUBMIT HOLD CLASS    @DZ04005*/         
*    2 PSCBSUBC CHAR(1),             /* SUBMIT CLASS         @DZ04005*/         
*    2 PSCBSUBM CHAR(1),             /* SUBMIT MSGCLASS      @DZ04005*/         
*    2 PSCBSOUT CHAR(1),             /* SYSOUT CLASS         @DZ04005*/         
*    2 * CHAR(1),                    /* RESERVED             @E1113KS*/         
*    2 PSCBDRBA CHAR(3),             /* ADDRESS OF USER MAIL @E1113KS*/         
*                                    /* DIRECTORY            @E1113KS*/         
*    2 * FIXED(31),                  /* RESERVED                     */         
*    2 PSCBDEST CHAR(8),             /* DEST FOR SYSOUT        Y02669*/         
*                                    /* DATA SETS              Y02669*/         
*    2 PSCBRLGB PTR(31),             /* PTR TO RELOGON BUFFER        */         
*    2 PSCBUPT  PTR(31),             /* PTR TO USER PROFILE TABLE    */         
*    2 PSCBUPTL FIXED(15),           /* LENGTH OF UPT                */         
*    2 PSCBCHAR CHAR(1),             /*USER'S CHAR DELETE CHAR Y02669*/         
*    2 PSCBLINE CHAR(1),             /*USER'S LINE DELETE CHAR Y02669*/         
*    2 PSCBRSZ POINTER(32),          /* REGION SIZE REQUESTED IN 2K             
*                                       UNITS                        */         
*    2 PSCBU    CHAR(8),             /* RESERVED FOR INSTALLATION               
*                                       USE                          */         
*    2 PSCBEXWD,                     /* LOGON INSTALLATION EXIT USER            
*                                       WORD STRUCTURE       @E1502S5*/         
*     3 PSCBEXK FIXED(32),           /* KEY OF USER WORD     @E1502S5*/         
*     3 PSCBEXL FIXED(32),           /* LENGTH OF USER WORD  @E1502S5*/         
*     3 PSCBEXD PTR(31),             /* THE USER WORD        @E1502S5*/         
*    2 *        FIXED(32),           /* RESERVED             @E1502S5*/         
*    2 *        FIXED(32),           /* RESERVED             @E1502S5*/         
*    2 *        FIXED(32),           /* RESERVED             @E1502S5*/         
*    2 *        FIXED(32),           /* RESERVED             @E1502S5*/         
*    2 *        FIXED(32),           /* RESERVED             @E1502S5*/         
*    2 *        CHAR(4);             /* FORCE DOUBLE WORD BOUNDARY              
*                                                            @CLEANUP*/         
