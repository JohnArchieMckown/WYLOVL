*%GOTO PLAS_ATBXCFMS;                                                   00041600
         MACRO                                                          00083200
         ATBXCFMS                                                       00124800
*/* START OF SPECIFICATIONS ******************************************* 00166400
**                                                                      00208000
**01* MACRO NAME: ATBXCFMS                                              00249600
**                                                                      00291200
**01* DSECT NAME:                                                       00332800
**               XCFMS_SHORT_MESSAGE_HEADER                             00374400
**               XCFMS_INBOUND_FMH5                                     00416000
**               XCFMS_LUM_STATUS_MESSAGE                         @L1A  00436800
**                                                                      00457600
**01* DESCRIPTIVE NAME: APPC/XCF Message mappings                       00499200
**                                                                      00540800
**02*   ACRONYM: XCFMS                                                  00554600
**                                                                      00568400
**01* COMPONENT: APPC Component (SCACB)                                 00582400
**                                                                      00624000
**01* EYE-CATCHER: None                                                 00665600
**                                                                      00707200
**********************************************************************/ 00750000
*/*01* PROPRIETARY STATEMENT=                                        */ 00850000
*/***PROPRIETARY_STATEMENT********************************************/ 00866600
*/*                                                                  */ 00883200
*/*                                                                  */ 00900000
*/* LICENSED MATERIALS - PROPERTY OF IBM                             */ 00950000
*/* THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                      */ 01000000
*/* 5647-A01 (C) COPYRIGHT IBM CORP. 1990, 1998                      */ 01050000
*/*                                                                  */ 01200000
*/* STATUS= HBB6606                                                  */ 01250000
*/*                                                                  */ 01300000
*/***END_OF_PROPRIETARY_STATEMENT*************************************/ 01350000
*/********************************************************************* 01400000
**                                                                      01407100
**01* FUNCTION:                                                         01414200
**                                                                      01421300
**    This mapping macro contains a mapping of each APPC/XCF            01428400
**    message in APPC.  It also contains the constants for the          01435500
**    message types for the APPC/XCF messages.                          01442600
**                                                                      01443600
**    When a transaction scheduler accepts a message longer than        01444600
**    the 32 byte initial message, the buffer that is used to           01445600
**    receive the message must be obtained in the PSW key in            01446600
**    which the transaction scheduler joined the APPC Group in.         01447600
**                                                                      01447800
**                                                                      01448000
**01* EXTERNAL CLASSIFICATION:                                          01448100
**                                                                      01448200
**02*   GUPI: BASE                                                      01448300
**                                                                      01448400
**02*   DMTI: FIELDS                                                    01448500
**             XCFMS_ATTACH_EXIT_DATA                                   01448600
**                                                                      01448700
**01* END OF EXTERNAL CLASSIFICATION                                    01448800
**                                                                      01448900
**                                                                      01449700
**01* METHOD OF ACCESS:                                                 01456800
**                                                                      01463900
**02*   ASM:                                                            01471000
**                                                                      01478100
**       Addressability to the XCFMS_SHORT_MESSAGE_HEADER can be        01485200
**       established via a USING on XCFMS_SHORT_MESSAGE_HEADER          01492300
**                                                                      01499400
**       Addressability to the Allocate TP Request Message can be       01506500
**       established via a USING on XCFMS_INBOUND_FMH5                  01513600
**                                                                      01515300
**       Addressability to the LU Status Message be                     01517000
**       established via a USING on XCFMS_LUM_STATUS_MESSAGE      @Q1A  01518700
**                                                                      01520700
**       Invocation syntax:                                             01527800
**         ATBXCFMS                               Include macro mapping 01534900
**          :   :                                                       01542000
**         USING   XCFMS_SHORT_MESSAGE_HEADER,Rn  Establishes           01549100
**                                                Addressability        01556200
**         USING   XCFMS_INBOUND_FMH5,Rm          Establishes           01563300
**                                                Addressability        01570400
**         USING   XCFMS_LUM_STATUS_MESSAGE,Rx    Establishes           01572700
**                                                Addressability        01575000
**                                                                      01577500
**      ATBXCFMS                                                        01584600
**                                                                      01591700
**02*   PLAS:                                                           01598800
**                                                                      01605900
**      See the individual mapping below for instructions on how to     01613000
**      base the mappings.                                              01620100
**                                                                      01627200
**      To then include the mapping macro, issue the following:         01634300
**        %INCLUDE  SYSLIB(ATBXCFMS)                                    01641400
**                                                                      01648500
**01* POINTED TO BY: User Defined                                       01649200
**                                                                      01649900
**01* CREATED BY:  N/A                                                  01650600
**                                                                      01651300
**01* DELETED BY:  N/A                                                  01652000
**                                                                      01652700
**01* STORAGE ATTRIBUTES:                                               01653400
**                                                                      01654100
**02*   ALLOCATION-METHOD: User Defined                                 01654800
**                                                                      01655500
**02*   SUBPOOL/DATASPACE: User Defined                                 01656200
**                                                                      01656900
**02*   KEY: Any                                                        01657600
**                                                                      01658300
**02*   RESIDENCY: Any                                                  01659000
**                                                                      01659700
**02*   VIRTUAL: Any                                                    01660400
**                                                                      01661100
**01* SIZE:  See Assembler listing                                      01661800
**                                                                      01662700
**01* SERIALIZATION:  None                                              01669800
**                                                                      01676900
**01* DEPENDENCIES: None                                                01684000
**                                                                      01691100
**01* NOTES: None                                                       01698200
**                                                                      01705300
**01* DISTRIBUTION LIBRARY: MACLIB                                      01712400
**                                                                      01719500
** = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =  01726600
**01* CHANGE-ACTIVITY:                                                  01733700
**                                                                      01740800
**    Flag LineItem  FMID    DATE   ID    Comment                       01747900
**                                                                      01755000
**     $L0=APPC1MI   HBB4420 891009 PDF1: Advanced Program-to-Program   01762100
**         Communication for MVS/ESA, initial release                   01769200
**                                                                      01776300
**     $D1=DH30069   HBB4420 891211 PDV7: Add two bytes of padding      01783400
**         after LUWID in the Attach TP message to end on a word        01790500
**         boundary                                                     01797600
**                                                                      01804700
**     $D2=DH30078   HBB4420 890122 PDV7: Add conversation type and     01811800
**         conversation sync level to the Attach TP message             01818900
**                                                                      01826000
**     $L1=APPC1LU   JBB4422 900720 PDB2: Scheduler Recovery            01826700
**         Facilities Enablement                                        01827400
**                                                                      01828100
**     $L2=APPC1MI   JBB4422 900824 PDV7: Add ENVR Object support       01828800
**                                                                      01829500
**     $P1=PH31223   HBB4420 890917 PDB7: Add assembler declarations    01833100
**                                                                      01833500
**     $Q1=PKI0021   JBB4422 900928 PDB7: Add new assembler             01833900
**         declarations                                                 01834300
**                                                                      01834800
**     $P2=PH32107   HBB4420 910204 PDF1: Change size of                01836500
**                   XCFMS_PROFILE_KEY from 100 bytes to 108.           01838200
**                                                                      01838700
**     $D3=DKI0022   JBB4422 910510 PDBC: Changed XRFLU keyword to      01839200
**         ALTLU                                                        01839700
**                                                                      01839800
**     $P3=PKB0148   HBB4430 920617 PDG9: Correct comment on            01839900
**         XCFMS_LU_FLAGS                                               01840000
**                                                                      01840900
**     $L3=XCFCC     HBB5510 930421 PDCO: Add conversation correlator   01841800
**         to the Allocate TP Request Message.                          01842700
**                                                                      01843600
**     $P4=PIG4250   HBB5510 930520 PDCO: Move conversation correlator  01844500
**         related fields to the 'reserved slots'.                      01845400
**                                                                      01846300
**     $01=OW05742   HBB5510 940611 PDI6: OpenMVS Exit Data Support     01846600
**                                                                      01846900
**     $L4=APPCC     HBB6603 950601 PDB7: Add generic resource name     01847700
**         to LU Activation/Deactivation message.                       01848500
**                                                                      01849300
**     $L5=APPCC     HBB6603 950801 PDE4: Add NQN Support indicator.    01850100
**                                                                      01850900
**     $L6=APPCP     HBB6603 951117 PDE6: APPC/MVS PC Support.          01851700
**     $P5=PVT0251   HBB6606 971209 PDB7: Create a flag to              01851900
**        indicate whether the Local LU is NQN Capable.                 01852100
**                                                                      01852500
**** END OF SPECIFICATIONS *******************************************/ 01853300
         EJECT                                                          01854400
**********************************************************************  01861500
** This mapping is mapped over the 32-byte short message buffer      *  01868600
** (XCF Control Area).  This mapping will be common to all short     *  01875700
** messages.  The message type will always be the first 4 bytes,     *  01882800
** with specific information following the message type field.       *  01889900
**                                                               @P1A*  01897000
**********************************************************************  01904100
         SPACE                                                          01911200
XCFMS_SHORT_MESSAGE_HEADER DSECT                                        01918300
                           DS 0F                                        01925400
XCFMS_MESSAGE_TYPE         DS  F                                        01932500
XCFMS_INFORMATION          DS  CL28   another mapping will be           01939600
*                                     mapped over this field.           01946700
*                                     it will be specific to            01953800
*                                     the type of message         @P1A  01960900
XCFMS_HEADER_LENGTH        EQU  *-XCFMS_SHORT_MESSAGE_HEADER            01968000
*                                     Length of short message           01975100
*                                                                       01982200
**********************************************************************  01989300
*                APPC STATUS MESSAGE                                    01996400
*  This mapping will be for the APPC status message.  This mapping      02003500
*  will be defined right on top of the XCFMS_INFORMATION field.         02010600
*  Those using this message need only to refer to the fields            02017700
*  directly.                                                            02024800
*                                                                       02031900
*  The message types are also defined here.  They are:                  02039000
*      APPC initialization message  ->   '00001000'X                    02046100
*      APPC termination/norestart   ->   '00001001'X                    02053200
*      APPC termination/restart     ->   '00001002'X                    02060300
*                                                                 @P1A  02067400
**********************************************************************  02074500
         SPACE                                                          02081600
         ORG  XCFMS_INFORMATION                                         02088700
XCFMS_APPC_STATUS          DS  0F                                       02095800
XCFMS_APPC_VERSION         DS  CL4    The level of the APPC             02102900
*                                     component active on the           02110000
*                                     system                      @P1A  02117100
XCFMS_APPC_TIME_STAMP      DS  CL8    The time stamp, in TOD            02124200
*                                     format, of the time APPC          02131300
*                                     completed initialization          02138400
*                                     or completed termination    @P1A  02145500
XCFMS_APPC_RESERVE         DS  CL16   Reserved                    @P1A  02152600
*                                                                       02159700
         SPACE                                                          02166800
XCFMS_CURRENT_APPC_VERSION DC CL4'0001'                           @P1A  02173900
         SPACE                                                          02181000
XCFMS_APPC_INIT            EQU  4096                              @P1A  02188100
XCFMS_APPC_NORESTART       EQU  4097                              @P1A  02195200
XCFMS_APPC_RESTART         EQU  4098                              @P1A  02202300
         SPACE                                                          02209400
**********************************************************************  02216500
**          LU ACTIVATION/DEACTIVATION MESSAGE                       *  02223600
**                                                                   *  02230700
** This mapping will be for the LU status message.  This mapping     *  02237800
** will be defined right on top of the XCFMS_INFORMATION field.      *  02244900
** Those using this message need only to refer to these fields       *  02252000
** directly.                                                         *  02259100
**                                                                   *  02266200
** The message types are also defined here.  They are:               *  02273300
**     LU activation    ->   '00002000'X                             *  02280400
**     LU deactivation  ->   '00002001'X                             *  02287500
**                                                                   *  02294600
**********************************************************************  02301700
         SPACE                                                          02308800
         ORG  XCFMS_INFORMATION                                         02315900
XCFMS_LUM_STATUS           DS  0F                                       02323000
XCFMS_LU_FLAGS             DS  0XL4    Flags indicating special         02330100
*                                     features of the LU.         @P1A  02337200
                           DS  XL1                                      02344300
XCFMS_BASE_LU              EQU X'80'  BIT   MEANING                     02351400
*                                     0   The LU was specified          02358500
*                                         as the BASE LU for            02365600
*                                         the scheduler           @P1A  02372700
XCFMS_NQN_CAPABLE          EQU X'20'  BIT   MEANING                     02374100
*                                     2   The LU is capable of          02375500
*                                         supporting network-           02376900
*                                         qualified function.     @L5A  02378300
                           DS  XL3    Reserved                    @P3C  02379800
XCFMS_LU_TIME_STAMP        DS  CL8    The time stamp, in TOD            02386900
*                                     format, of the time               02394000
*                                     the LU was activated or           02401100
*                                     deactivated                 @P1A  02408200
XCFMS_LU_NAME              DS  CL8    The local LU name described       02415300
*                                     by the message (it is not         02422400
*                                     fully qualified)            @P1A  02429500
XCFMS_TRANS_SCHED_NAME     DS  CL8    The name of the Transaction       02436600
*                                     Scheduler assigned to the         02443700
*                                     LU name in the APPCPMxx           02450800
*                                     parmlib member              @P1A  02457900
         SPACE                                                          02465000
**********************************************************************  02472100
*   Message type constants                                           *  02479200
**********************************************************************  02486300
XCFMS_LU_ACTIVE            EQU  8192                              @P1A  02493400
XCFMS_LU_NOACTIVE          EQU  8193                              @P1A  02500500
         SPACE                                                          02507600
**********************************************************************  02514700
**              ALLOCATE TP REQUEST MESSAGE HEADER                   *  02521800
**                                                                   *  02528900
** This mapping will be for the Allocate TP Request Message header.  *  02536000
** This message will be accompanied by a longer message representing *  02543100
** an Allocate TP request.  The TPID in this header will represent   *  02550200
** the Transaction Program that this allocate request represents.    *  02557300
** This mapping will be defined right on top of the                  *  02564400
** XCFMS_INFORMATION field. Those using this message need only to    *  02571500
** refer to these fields directly.                                   *  02578600
**                                                                   *  02585700
** The message types are also defined here.  They are:               *  02592800
**     ATTACH TP request ->   '00000001'X                            *  02599900
**                                                                   *  02607000
**********************************************************************  02614100
         SPACE                                                          02621200
         ORG  XCFMS_INFORMATION                                         02628300
XCFMS_ATTACH_HEADER        DS  0F                                 @P1A  02635400
XCFMS_ATTACH_TPID          DS  CL8    The Transaction Program ID which  02642500
*                                     uniquely identifies the TP        02649600
*                                     created allocate TP request @P1A  02656700
XCFMS_ATTACH_EXIT_DATA     DS  A      Exit Data For this Attach         02659500
*                                     Request, used for OpenEdition MVS 02662300
*                                     Allocate_Conversation Exit  @01A  02665100
XCFMS_ATTACH_RESERVED      DS  CL16   RESERVED space              @P1A  02667900
         SPACE                                                          02670900
**********************************************************************  02678000
** Message type constants                                            *  02685100
**********************************************************************  02692200
XCFMS_INBOUND_ATTACH       EQU  1                                 @P1A  02699300
         SPACE                                                          02706400
*********************************************************************   02706700
*                LU STATUS MESSAGE                                      02707000
* This message will represent the status of an LU.  This                02707300
* message will accompany the LU status header.                          02707600
*                                                                       02707900
*********************************************************************   02708200
         SPACE                                                          02708500
XCFMS_LUM_STATUS_MESSAGE DSECT                                          02708800
*                         DS  0F                                   @Q1A 02709100
XCFMS_LU_MSG_TYPE         DS   F      LU message type (same as the      02709400
*                                     XCFMS_MESSAGE_TYPE)               02709700
*                                     '00002000'X -> LU activate        02710000
*                                     '00002001'X -> LU deactivate @Q1A 02710300
XCFMS_LU_USERVAR          DS  CL8     The user variable supplied in     02710600
*                                     the APPCPMxx parmlib member  @Q1A 02710900
XCFMS_ALT_LU              DS  CL8     The ALT_LU value supplied in      02711200
*                                     the APPCPMxx parmlib member  @Q1A 02711500
XCFMS_GENERIC_RESOURCE    DS  CL8     The generic resource name used    02711700
*                                     for the LU.  This value is        02711900
*                                     supplied using the GRNAME keyword 02712100
*                                     on the LUADD statement.           02712300
*                                     (will be zeroes if GRNAME not     02712500
*                                      used)                       @L4A 02712700
XCFMS_XRF_MSG_RESERVED    DS  CL16    Reserved space               @L4C 02712900
         SPACE                                                          02713100
**********************************************************************  02713500
**               APPC Allocate TP Request Message                    *  02720600
** This message will represent an Allocate TP request.  This         *  02727700
** message will accompany the Allocate TP request header.            *  02734800
**                                                                   *  02741900
**********************************************************************  02749000
*                                                                       02756100
XCFMS_INBOUND_FMH5 DSECT                                                02763200
                   DS  0F             Align on a word boundary    @P1A  02770300
XCFMS_ATTACH_MSG           DS  F      Message type                      02777400
*                                      '00000001'X  -> allocate TP      02784500
*                                                      request    @P1A  02791600
XCFMS_ATTACH_FLAGS         DS  0XL4   FMH-5 Attach flags          @P5C  02793900
                           DS  XL1                                @P5A  02796200
XCFMS_LOCALLU_NQN_CAPABLE  EQU X'80'  Indicates that the local lu is    02798500
*                                     NQN Capable                 @P5A  02800800
                           DS  XL3                                @P5A  02803100
XCFMS_ATTACH_TIME_STAMP    DS  CL8    The timestamp, in TOD clock       02805800
*                                     format, of the time the allocate  02812900
*                                     TP request entered the system     02820000
*                                                                 @P1A  02827100
XCFMS_LOCAL_LU             DS  CL8    Name of the Local LU to which the 02834200
*                                     attach request was directed.@P1A  02841300
XCFMS_TP_ID                DS  CL8    The Transaction Program ID which  02848400
*                                     uniquely identifies the TP        02855500
*                                     created by the allocate TP        02862600
*                                     request                     @P1A  02869700
XCFMS_CONV_ID              DS  CL8    The Conversation_ID is a token    02876800
*                                     that uniquely identifies a        02883900
*                                     conversation to MVS.  This token  02891000
*                                     is the resource identifier of     02898100
*                                     the conversation.           @P1A  02905200
XCFMS_MODE_NAME            DS  CL8    The mode name designating the     02912300
*                                     network properties for the        02919400
*                                     session which was allocated for   02926500
*                                     the conversation.           @P1A  02933600
XCFMS_PARTNER_LU           DS  CL17   The fully-qualified name of the   02940700
*                                     partner LU (i.e. the LU where     02947800
*                                     the allocate request)       @P1A  02954900
                           DS  CL1    Reserved - padding          @P1A  02957200
XCFMS_CONV_CORR_LENGTH     DS  H      The length of the Conversation    02959500
*                                     Correlator located by the         02961800
*                                     Conversation Correlator Offset.   02964100
*                                                                 @P4M  02966400
XCFMS_LUWID                DS  CL26   The Logical Unit of Work ID is    02969100
*                                     used to identify the most recent  02976200
*                                     sync point and for accounting     02983300
*                                     purposes.  If an LUW_Identifier   02990400
*                                     was not present in the allocate   02997500
*                                     request this field will be zero.  03004600
*                                                                 @P1A  03011700
XCFMS_CONV_CORR_OFFSET     DS  H      The offset into the message       03013700
*                                     area where the Conversation       03015700
*                                     Correlator is located.            03017700
*                                     This field is zero if the         03019700
*                                     Conversation Correlator is not    03021700
*                                     available on FMH-5 request. @P4A  03023700
XCFMS_SECTOKN_OFFSET       DS  H      The offset into the message       03025900
*                                     area of the security token which  03033000
*                                     identifies the security           03040100
*                                     environment created for the user  03047200
*                                     by RACF.                    @P1A  03054300
XCFMS_SECTOKN_LENGTH       DS  H      The length of the security        03061400
*                                     token located by the              03068500
*                                     Security_token_offset.      @P1A  03075600
XCFMS_PROFILE_OFFSET       DS  H      The offset into the message       03082700
*                                     area where the TP_Profile is      03089800
*                                     located.  This field is 0 if      03096900
*                                     the TP_Profile was optional and   03104000
*                                     was not found.              @P1A  03111100
XCFMS_PROFILE_LENGTH       DS  H      The length of the TP_Profile      03118200
*                                     This field is 0 if the            03125300
*                                     TP_Profile was optional and was   03132400
*                                     not found.                  @P1A  03139500
XCFMS_ENVR_OFFSET          DS  H      The offset into the message       03140900
*                                     area where the ENVR Object is     03142300
*                                     located.  This field is 0 if the  03143700
*                                     level of RACF required to support 03145100
*                                     this is not present.        @Q1A  03146500
XCFMS_ENVR_LENGTH          DS  H      The length of the ENVR Object.    03147900
*                                     This field is 0 if the level of   03149300
*                                     RACF required to support this is  03150700
*                                     not present.                @Q1A  03152100
XCFMS_PROFILE_KEY          DS  CL108  The TP_Profile key used to        03153700
*                                     search the TP_Profile data set    03160800
*                                     for a TP_Profile.           @P2C  03167900
XCFMS_CONV_TYPE            DS  H      The type of conversation          03175000
*                                     for this TP.                @P1A  03182100
XCFMS_CONV_SYNC_LEVEL      DS  H      The sync level associated         03189200
*                                     with this TP.               @P1A  03196300
XCFMS_CONTEXT_TOKEN        DS  CL16   The context token representing    03198600
*                                     the unit of work for the TP @L6A  03200900
XCFMS_END                  DS  0F     End of static message section.    03203400
*                                                                 @P1A  03210500
         SPACE                                                          03217600
**********************************************************************  03224700
*  The Attach Message conversation type constants.                   *  03231800
**********************************************************************  03238900
*                                                                       03246000
XCFMS_BASIC      DC  H'0'             Basic conversation          @P1A  03253100
XCFMS_MAPPED     DC  H'1'             Mapped conversation         @P1A  03260200
*                                                                       03267300
         SPACE                                                          03274400
**********************************************************************  03281500
*  The Attach Message conversation sync level constants.             *  03288600
**********************************************************************  03295700
*                                                                       03302800
XCFMS_NONE       DC  H'0'             Sync Level NONE             @P1A  03309900
XCFMS_CONFIRM    DC  H'1'             Sync Level CONFIRM          @P1A  03317000
XCFMS_SYNCPT     DC  H'2'             Sync Level SYNCPT           @L6A  03320500
*                                                                       03324100
         MEND                                                           03331200
                                                                        03350000
**********************************************************************  03400000
*                                                                    *  03450000
*    End of Assembler mapping                                        *  03500000
*                                                                    *  03550000
**********************************************************************  03600000
                                                                        03650000
 %PLAS_ATBXCFMS: ;                                                      03700000
                                                                        03950000
 /********************************************************************  03952900
 * This mapping is mapped over the 32-byte short message buffer         03955800
 * (XCF Control Area).  This mapping will be common to all short        03958700
 * messages.  The message type will always be the first 4 bytes,        03961600
 * with specific information following the message type field.          03964500
 *                                                                      03967400
 * NOTE: This short message mapping is a maximum of 32 bytes.   @L1A    03970300
 * If you need to add fields that will make the short mapping   @L1A    03973200
 * longer than 32 bytes, you must use either the long message   @L1A    03976100
 * format, or the short and long message formats together.      @L1A    03979000
 *                                                                      03981900
 * To base XCFMS_SHORT_MESSAGE_HEADER , set the following               03984800
 * macro variable as follows:                                           03987700
 *    %XCFMSHEADERBASE = 'optional base'    Default: Automatic          03990600
 *                                                                      03993500
 *********************************************************************/ 03996400
 %IF XCFMSHEADERBASE = '' %THEN                                         04000000
    %XCFMSHEADERBASE = 'AUTOMATIC';                                     04050000
                                                                        04100000
 DECLARE                                                                04150000
     1 XCFMS_SHORT_MESSAGE_HEADER  XCFMSHEADERBASE BDY(WORD),           04200000
      3 XCFMS_MESSAGE_TYPE    FIXED(32),                                04250000
      3 XCFMS_INFORMATION     CHAR(28);     /* another mapping will be  04300000
                                               mapped over this field.  04350000
                                               it will be specific to   04400000
                                               the type of message   */ 04450000
                                                                @SPACE; 04500000
 /********************************************************************  04550000
                 APPC STATUS MESSAGE                                    04600000
   This mapping will be for the APPC status message.  This mapping      04650000
   will be defined right on top of the XCFMS_INFORMATION field.         04700000
   Those using this message need only to refer to the fields            04750000
   directly.                                                            04800000
                                                                        04850000
   The message types are also defined here.  They are:                  04900000
       APPC initialization message  ->   '00001000'X                    04950000
       APPC termination/norestart   ->   '00001001'X                    05000000
       APPC termination/restart     ->   '00001002'X                    05050000
                                                                        05100000
 *********************************************************************/ 05150000
 DECLARE                                                                05200000
     1 XCFMS_APPC_STATUS  DEFINED(XCFMS_INFORMATION),                   05250000
      3 XCFMS_APPC_VERSION    CHAR(4),    /* The level of the APPC      05300000
                                             component active on the    05350000
                                             system                  */ 05400000
      3 XCFMS_APPC_TIME_STAMP CHAR(8),    /* The time stamp, in TOD     05450000
                                             format, of the time APPC   05500000
                                             completed initialization   05550000
                                             or completed termination*/ 05600000
      3 XCFMS_APPC_RESERVE    CHAR(16);   /* Reserved                */ 05650000
                                                                @SPACE; 05700000
 DECLARE                                                                05750000
    XCFMS_CURRENT_APPC_VERSION CHAR(4) CONSTANT('0001');                05800000
                                                                @SPACE; 05850000
 DECLARE                                                                05900000
    XCFMS_APPC_INIT         FIXED(32)  CONSTANT(4096),                  05950000
    XCFMS_APPC_NORESTART    FIXED(32)  CONSTANT(4097),                  06000000
    XCFMS_APPC_RESTART      FIXED(32)  CONSTANT(4098);                  06050000
                                                                @SPACE; 06100000
 /********************************************************************  06150000
 *               LU  STATUS Header Message                              06200000
 * This mapping will be for the LU  status message.  This mapping       06250000
 * will be defined right on top of the XCFMS_INFORMATION field.         06300000
 * Those using this message need only to refer to these fields          06350000
 * directly.                                                            06400000
 *                                                                      06450000
 * The message types are also defined here.  They are:                  06500000
 *     LU  activation    ->   '00002000'X                               06550000
 *     LU  deactivation  ->   '00002001'X                               06600000
 *                                                                      06650000
 ********************************************************************/  06700000
 DECLARE                                                                06750000
     1 XCFMS_LUM_STATUS  DEFINED(XCFMS_INFORMATION),                    06800000
      3 XCFMS_LU_FLAGS        BIT(32),    /* Flags indicating special   06850000
                                             features of the LU.     */ 06900000
        5 XCFMS_BASE_LU       BIT(1),     /*  BIT   MEANING             06950000
                                               0   The LU was specified 07000000
                                                   as the BASE LU for   07050000
                                                   the scheduler     */ 07100000
        5 *                   BIT(1),     /*  BIT   MEANING             07111100
                                               1   reserved for PC   */ 07122200
        5 XCFMS_NQN_CAPABLE   BIT(1),     /*  BIT   MEANING             07133300
                                               2   The LU is capable of 07144400
                                                   supporting network-  07155500
                                                   qualified names      07166600
                                                   function      @L5A*/ 07177700
        5 *                   BIT(29),    /*  3-31 Reserved      @L5C*/ 07188800
      3 XCFMS_LU_TIME_STAMP   CHAR(8),    /* The time stamp, in TOD     07200000
                                             format, of the time        07250000
                                             the LU was activated or    07300000
                                             deactivated             */ 07350000
      3 XCFMS_LU_NAME         CHAR(8),    /* The local LU name described07400000
                                             by the message (it is not  07450000
                                             fully qualified)        */ 07500000
      3 XCFMS_TRANS_SCHED_NAME CHAR(8);   /* The name of the Transaction07550000
                                             Scheduler assigned to the  07600000
                                             LU name in the APPCPMxx    07650000
                                             parmlib member          */ 07700000
                                                                @SPACE; 07750000
 /* Message type constants                                           */ 07800000
 DECLARE                                                                07850000
    XCFMS_LU_ACTIVE         FIXED(32)  CONSTANT(8192),                  07900000
    XCFMS_LU_NOACTIVE       FIXED(32)  CONSTANT(8193);                  07950000
                                                                @SPACE; 07951400
 /********************************************************************  07952800
 *                LU STATUS MESSAGE                              @L1A   07954200
 * This message will represent the status of an LU.  This        @L1A   07955600
 * message will accompany the LU status header.                  @L1A   07957000
 *                                                                      07958400
 * To base XCFMS_LUM_STATUS_MESSAGE, set the following macro     @L1A   07959800
 * variable as follows:                                          @L1A   07961200
 *                                                                      07962600
 *     %XCFMSLUMBASE = 'BASED(POINTER)' - to base the message    @L1A   07964000
 *                                        mapping on a pointer   @L1A   07965400
 *                                                                      07966800
 *     %XCFMSLUMBASE = ''   - the message mapping will not be    @L1A   07968200
 *                            based                              @L1A   07969600
 *                                                                      07971000
 ********************************************************************/  07972400
 %IF XCFMSLUMBASE = '' %THEN              /*                    @L1A */ 07973800
    %XCFMSLUMBASE = ' ';                  /*                    @L1A */ 07975200
                                                                        07976600
 DECLARE                                                                07978000
     1 XCFMS_LUM_STATUS_MESSAGE XCFMSLUMBASE BDY(WORD),  /* @L1A */     07979400
      3 XCFMS_LU_MSG_TYPE  FIXED(32),  /* LU message type (same as the  07980800
                                          XCFMS_MESSAGE_TYPE)           07982200
                                           '00002000'X -> LU activate   07983600
                                           '00002001'X -> LU deactivate 07985000
                                                                @L1A */ 07986400
      3 XCFMS_LU_USERVAR      CHAR(8),    /* The user variable supplied 07987800
                                             in the APPCPMxx parmlib    07989200
                                             member             @L1A */ 07990600
      3 XCFMS_ALT_LU          CHAR(8),    /* The ALT_LU value supplied  07992000
                                             in the APPCPMxx parmlib    07993400
                                             member             @D3C */ 07994800
      3 XCFMS_GENERIC_RESOURCE CHAR(8),   /* The generic resource name  07995300
                                             used for the LU.  This     07995800
                                             value is supplied using    07996300
                                             the GRNAME keyword on the  07996800
                                             LUADD statement.  (will    07997300
                                             be zeroes if GRNAME not    07997800
                                             used)              @L4A */ 07998300
                                                                        07998800
      3 XCFMS_XRF_MSG_RESERVED CHAR(16);  /* Reserved space     @L4C */ 07999300
                                                                @SPACE; 08000000
 /********************************************************************  08050000
 *               INBOUND ATTACH MESSAGE HEADER                          08100000
 * This mapping will be for the Inbound ATTACH message header.          08150000
 * This message will be accompanied by a longer message representing    08200000
 * an Inbound ATTACH request.  The TPID in this header will represnt    08250000
 * the Transaction Program that this ATTACH represents.                 08300000
 * This mapping will be defined right on top of the                     08350000
 * XCFMS_INFORMATION field. Those using this message need only to       08400000
 * refer to these fields directly.                                      08450000
 *                                                                      08500000
 * The message types are also defined here.  They are:                  08550000
 *     ATTACH TP request ->   '00000001'X                               08600000
 *                                                                      08650000
 ********************************************************************/  08700000
 DECLARE                                                                08750000
     1 XCFMS_ATTACH_HEADER DEFINED(XCFMS_INFORMATION),                  08800000
      3 XCFMS_ATTACH_TPID     CHAR(8),    /* The Transaction Program ID 08850000
                                             which uniquely identifies  08900000
                                             the TP created by the      08950000
                                             inbound FMH5 attach        09000000
                                             request                 */ 09050000
      3 XCFMS_ATTACH_EXIT_DATA PTR(31),   /* Exit Data For this Attach  09066600
                                             Request, used for Open     09083200
                                             Edition MVS Alloc_Conv Exit09099800
                                                                 @01A*/ 09116400
      3 XCFMS_ATTACH_RESERVED CHAR(16);   /* RESERVED space          */ 09133000
                                                                @SPACE; 09150000
 /* Message type constants                                           */ 09200000
 DECLARE                                                                09250000
    XCFMS_INBOUND_ATTACH    FIXED(32)  CONSTANT(1);                     09300000
 /********************************************************************* 09350000
 *           APPC Inbound FMH5 Attach Request message                   09400000
 * This message will represent an inbound ATTACH request.  This message 09450000
 *will accompany the inbound ATTACH request header.                     09500000
 *                                                                      09550000
 * To base XCFMS_INBOUND_FMH5 , set the following                       09600000
 * macro variable as follows:                                           09650000
 *    %XCFMSFMH5BASE = 'optional base'    Default: BASED                09700000
 *                                                                      09750000
 *                                                                      09800000
 *********************************************************************/ 09850000
 %IF XCFMSFMH5BASE = '' %THEN                                           09900000
    %XCFMSFMH5BASE = 'BASED';                                           09950000
                                                                        10000000
   DECLARE                                                              10050000
     1 XCFMS_INBOUND_FMH5 XCFMSFMH5BASE BDY(WORD),                      10100000
       3 XCFMS_ATTACH_MSG FIXED(32),/* Message type                     10150000
                                       '00000001'X  -> inbound ATTACH   10200000
                                                                     */ 10250000
       3 XCFMS_ATTACH_FLAGS                                             10300000
                          BIT(32),  /* No flags currently            */ 10350000
         5 XCFMS_LOCALLU_NQN_CAPABLE BIT(1), /* INDICATES THAT THE LOCAL10366600
                                       LU is NQN capable          @P5A*/10383200
       3 XCFMS_ATTACH_TIME_STAMP                                        10400000
                          CHAR(8),  /* The timestamp, in TOD clock      10450000
                                       format, of the time the FMH-5    10500000
                                       ATTACH command entered the       10550000
                                       system                        */ 10600000
       3 XCFMS_LOCAL_LU   CHAR(8),  /* Name of the Local LU to which the10650000
                                       attach request was directed.  */ 10700000
       3 XCFMS_TP_ID      CHAR(8),  /* The Transaction Program ID which 10750000
                                       uniquely identifies the TP       10800000
                                       created by the inbound FMH5      10850000
                                       attach request                */ 10900000
       3 XCFMS_CONV_ID    CHAR(8),  /* The Conversation_ID is a token   10950000
                                       that uniquely identifies a       11000000
                                       conversation to MVS.  This token 11050000
                                       is the resource identifier of    11100000
                                       the conversation.             */ 11150000
       3 XCFMS_MODE_NAME  CHAR(8),  /* The mode name designating the    11200000
                                       network properties for the       11250000
                                       session which was allocated for  11300000
                                       the conversation. */             11350000
       3 XCFMS_PARTNER_LU CHAR(17), /* The fully-qualified name of the  11400000
                                       partner LU (i.e. the LU where    11450000
                                       the FMH5 Attach request          11500000
                                       originated). */                  11550000
       3 *                CHAR(1),  /* Unused - padding */              11566600
       3 XCFMS_CONV_CORR_LENGTH FIXED(16), /* The length of the         11583200
                                       Conversation Correlator          11599800
                                       located by the conversation      11616400
                                       Correlator Offset.        @P4A*/ 11633000
       3 XCFMS_LUWID      CHAR(26), /* The Logical Unit of Work ID is   11650000
                                       used to identify the most recent 11700000
                                       sync point and for accounting    11750000
                                       purposes.  If an LUW_Identifier  11800000
                                       was not present in the FMH5,     11850000
                                       this field will be zero. */      11900000
       3 XCFMS_CONV_CORR_OFFSET FIXED(16), /* The offset into the       11906200
                                       message area where the           11912400
                                       Conversation Correlator is       11918600
                                       located.  This field is zero if  11924800
                                       the Conversation Correlator is   11931000
                                       not available on FMH-5           11937200
                                       request.                  @P4A*/ 11943400
       3 XCFMS_SECTOKN_OFFSET FIXED(16), /* The offset into the message 11950000
                                       area of the security token which 12000000
                                       identifies the security          12050000
                                       environment created for the user 12100000
                                       by RACF. */                      12150000
       3 XCFMS_SECTOKN_LENGTH FIXED(16), /* The length of the security  12200000
                                       token located by the             12250000
                                       Security_token_offset. */        12300000
       3 XCFMS_PROFILE_OFFSET FIXED(16), /* The offset into the message 12350000
                                       area where the TP_Profile is     12400000
                                       located.  This field is 0 if     12450000
                                       the TP_Profile was optional and  12500000
                                       was not found. */                12550000
       3 XCFMS_PROFILE_LENGTH FIXED(16), /* The length of the TP_Profile12600000
                                       This field is 0 if the           12650000
                                       TP_Profile was optional and was  12700000
                                       not found. */                    12750000
       3 XCFMS_ENVR_OFFSET FIXED(16), /* The offset into the message    12760000
                                       area where the ENVR Object is    12770000
                                       located.  This field is 0 if the 12780000
                                       level of RACF required to support12790000
                                       this is not present.      @L2A*/ 12800000
       3 XCFMS_ENVR_LENGTH FIXED(16), /* The length of the ENVR Object. 12810000
                                       This field is 0 if the level of  12820000
                                       RACF required to support this is 12830000
                                       not present.              @L2A*/ 12840000
       3 XCFMS_PROFILE_KEY CHAR(108), /* The TP_Profile key used to     12850000
                                       search the TP_Profile data set   12900000
                                       for a TP_Profile.  Mapped by     12950000
                                       ATBDFTP mapping macro.    @P2C*/ 13000000
       3 XCFMS_CONV_TYPE       FIXED(16), /* The type of conversation   13007100
                                       for this TP.  See constants      13014200
                                       defined below             @D2A*/ 13021300
       3 XCFMS_CONV_SYNC_LEVEL FIXED(16), /* The sync level associated  13028400
                                       with this TP.  See constants     13035500
                                       defined below             @D2A*/ 13042600
       3 XCFMS_CONTEXT_TOKEN   CHAR(16),  /* The context token          13056900
                                       representing the unit of work    13071200
                                       for the TP                @L6A*/ 13085500
       3 XCFMS_END CHAR(0) BDY(WORD); /* End of static message section. 13100000
                                       Security token and TP profile    13150000
                                       contents follow.          @D2C*/ 13200000
 @SPACE;                                                                13250000
    /*****************************************************************/ 13300000
    /* The security token which identifies the security environment  */ 13350000
    /* created for the user by RACF.  This token may be used to      */ 13400000
    /* create a security environment in the program's execution      */ 13450000
    /* address space.                                                */ 13500000
    /*****************************************************************/ 13550000
                                                                        13600000
    DECLARE                         /* Security Token                */ 13650000
      1 XCFMS_SECTOKN  BDY(WORD)                                        13700000
          BASED(ADDR(XCFMS_INBOUND_FMH5)+XCFMS_SECTOKN_OFFSET),         13750000
        3 *           CHAR(*);      /* Security Token                */ 13800000
                                                                        13850000
 @SPACE;                                                                13900000
    /*****************************************************************/ 13950000
    /* The TP_Profile entry contents, if a profile was available.    */ 14000000
    /*****************************************************************/ 14050000
                                                                        14100000
    DECLARE                         /* TP Profile contents           */ 14150000
      1 XCFMS_PROFILE  BDY(WORD)                                        14200000
          BASED(ADDR(XCFMS_INBOUND_FMH5)+XCFMS_PROFILE_OFFSET),         14250000
        3 *           CHAR(*);      /* TP Profile contents          */  14300000
                                                                        14350000
 @SPACE;                                                                14400000
    /****************************************************************/  14405000
    /* The Conversation_Correlator contents, if a conversation      */  14410000
    /* correlator is available.                              @L3A   */  14415000
    /****************************************************************/  14420000
                                                                        14425000
    DECLARE               /* Conversation Correlator contentes @L3A*/   14430000
      1 XCFMS_CONV_CORR BDY(WORD)                                       14435000
          BASED(ADDR(XCFMS_INBOUND_FMH5)+XCFMS_CONV_CORR_OFFSET),       14440000
        3 * CHAR(*);      /* Conversation Correlator contentes @L3A*/   14445000
    /*****************************************************************/ 14450000
    /* The ENVR Object which represents the security environment     */ 14453500
    /* created for the user by RACF.  This ENVR Object may be used   */ 14457000
    /* to quickly re-create the security environment in the program's*/ 14460500
    /* execution address space.                                      */ 14464000
    /*********************************************************** @L2A*/ 14467500
                                                                        14471000
    DECLARE                                                             14474500
      1 XCFMS_ENVR  BDY(WORD)                                           14478000
          BASED(ADDR(XCFMS_INBOUND_FMH5)+XCFMS_ENVR_OFFSET),            14481500
        3 *           CHAR(*);      /* ENVR Object contents      @L2A*/ 14485000
                                                                        14488500
 @SPACE;                                                                14492000
    /*****************************************************************/ 14495500
    /* The Attach Message conversation type constants.               */ 14500000
    /*****************************************************************/ 14550000
                                                                        14600000
    DECLARE                                                             14650000
      XCFMS_BASIC      FIXED(16)                                        14700000
                       CONSTANT(0), /* Basic conversation        @D2A*/ 14750000
      XCFMS_MAPPED     FIXED(16)                                        14800000
                       CONSTANT(1); /* Mapped conversation       @D2A*/ 14850000
                                                                        14900000
 @SPACE;                                                                14950000
    /*****************************************************************/ 15000000
    /* The Attach Message conversation sync level constants.         */ 15050000
    /*****************************************************************/ 15100000
                                                                        15150000
    DECLARE                                                             15200000
      XCFMS_NONE       FIXED(16)                                        15250000
                       CONSTANT(0), /* Sync Level NONE           @D2A*/ 15300000
      XCFMS_CONFIRM    FIXED(16)                                        15350000
                       CONSTANT(1), /* Sync Level CONFIRM        @D2A*/ 15375000
      XCFMS_SYNCPT     FIXED(16)                                        15400000
                       CONSTANT(2); /* Sync Level SYNCPT         @L6A*/ 15425000
                                                                        15450000
