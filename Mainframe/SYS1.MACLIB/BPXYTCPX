*        %GOTO TCPXPRO  ;         /* Bilingual header                   00050000
         MACRO                                                          00100000
         BPXYTCPX  &DSECT=YES,&LIST=YES                                 00150000
         GBLB  &TCPX411                                                 00200000
         AIF   (&TCPX411 EQ 1).E411                                     00250000
&TCPX411 SETB  1                                                        00300000
         AIF   ('&LIST' EQ 'YES').A411                                  00350000
         PUSH  PRINT  BPXYTCPX: Tcp/Ip parameter list                   00400000
         PRINT OFF                                                      00450000
         AGO   .A411                                                    00500000
*                                  */                                   00550000
*%TCPXPRO : ;                                                           00600000
*/****START OF SPECIFICATIONS****************************************** 00650000
*                                                                       00700000
*    $MAC (BPXYTCPX) COMP(SCPX1) PROD(BPX):                             00750000
*                                                                       00800000
*01* MACRO NAME: BPXYTCPX                                               00850000
*                                                                       00900000
*01* DSECT NAME: TcpXParm                                               00950000
*                                                                       01000000
*01* DESCRIPTIVE NAME: TCP Initialization Parameter list                01050000
*                                                                       01100000
*02*   ACRONYM: TcpXParm                                                01150000
**/                                                                     01200000
*/*01* PROPRIETARY STATEMENT=                                        */ 01250000
*/***PROPRIETARY_STATEMENT********************************************/ 01300000
*/*                                                                  */ 01350000
*/*                                                                  */ 01400000
*/* LICENSED MATERIALS - PROPERTY OF IBM                             */ 01450000
*/* THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                      */ 01500000
*/* 5647-A01 (C) COPYRIGHT IBM CORP. 1993,2000                       */ 01550000
*/*                                                                  */ 01650000
*/* STATUS= HBB7703                                                  */ 01700000
*/*                                                                  */ 01750000
*/***END_OF_PROPRIETARY_STATEMENT*************************************/ 01800000
*/*                                                                     01850000
*                                                                       01875000
*01* EXTERNAL CLASSIFICATION:  GUPI                                     01900000
*01* END OF EXTERNAL CLASSIFICATION:                                    01950000
*                                                                       02000000
*01* FUNCTION:                                                          02050000
*                                                                       02100000
*      The TcpXParm maps the parameter list that is passed to Tcp/Ip    02150000
*      for initialization of the Tcp/IP-OE Sockets connection           02200000
*                                                                       02250000
*                                                                       02300000
*01* METHOD OF ACCESS:                                                  02350000
*                                                                       02400000
*02*   PL/X:                                                            02450000
*                                                                       02500000
*        %INCLUDE SYSLIB(BPXYTCPX)                                      02550000
*        By default, the TcpXParm is based on TcpXParmPtr. If           02600000
*        other basing is desired, use %TCPXBASE='BASED(XXXXXX)'.        02650000
*        If %TCPXBASE='BASED(TcpXParmPtr)' is coded, a Declare for      02700000
*        TcpXParmPtr is also generated.                                 02750000
*                                                                       02800000
*02*   ASM:                                                             02850000
*        With DSECT=NO, storage is allocated in line                    02900000
*        and addressability is provided thru that DSECT or CSECT.       02950000
*        With DSECT=YES, a DSECT is produced and "USING TcpXParm,reg"   03000000
*        is required for addressability.  Here "reg" contains the       03050000
*        address of TcpXParm#LEN bytes of storage.                      03100000
*        The default is DSECT=YES.                                      03150000
*                                                                       03200000
*01* SIZE: TcpXParm#Len                                                 03250000
*                                                                       03300000
*01* POINTED TO BY: TcpXParmPtr                                         03350000
*                                                                       03400000
*01* CREATED BY: Tcp/Ip caller (See the BPXXTCP macro)                  03450000
*                                                                       03500000
*01* DELETED BY: Either Tcp/Ip or the caller of Tcp/Ip                  03550000
*                                                                       03600000
*01* STORAGE ATTRIBUTES:                                                03650000
*02*   SUBPOOL: Dataspace                                               03700000
*02*   KEY:0                                                            03750000
*02*   RESIDENCY: Inet Sockets dataspace                                03800000
*                                                                       03850000
*01* FREQUENCY: 1 per invocation of Tcp/Ip                              03900000
*                                                                       03950000
*01* SERIALIZATION: None                                                04000000
*                                                                       04050000
*01* DEPENDENCIES: None                                                 04100000
*                                                                       04150000
*01* NOTES: None                                                        04200000
*                                                                       04250000
*01* COMPONENT:  OpenMVS (SCPX1)                                        04300000
*                                                                       04350000
*01* DISTRIBUTION LIBRARY:  AMACLIB                                     04400000
*                                                                       04450000
*01* EYE-CATCHER: TCPX                                                  04500000
*02*   OFFSET: 0                                                        04550000
*02*   LENGTH: 4                                                        04600000
*                                                                       04650000
*01* CHANGE-ACTIVITY:                                                   04700000
*                                                                       04750000
* $D0=DOAA002,  HOM1120, 931004, PDNU: Dcr A002.03 INET Socket PFS      04800000
* $01=OW07648,  HOM1120, 940825, PDHR: Inet Performance improvement     04850000
* $P1=PPF0104,  HOM1130, 941025, PDHR: Performance improvements         04900000
*                                                                       04950000
****END OF SPECIFICATIONS*********************************************/ 05000000
*        %GOTO TCPXPLS  ;         /* Bilingual header                   05050000
.A411    ANOP  ,                                                        05100000
** BPXYTCPX: Tcp/Ip Initialization Parameter List                       05150000
**  Used By: callers of Tcp/Ip                                          05200000
         AIF   ('&DSECT' EQ 'NO').B411                                  05250000
TCPXPARM             DSECT ,                                            05300000
         AGO   .C411                                                    05350000
.B411    ANOP  ,                                                        05400000
TCPXPARM             DS    0D                                           05450000
.C411    ANOP  ,                                                        05500000
TCPXPARMBEGIN        DS    0D                                           05550000
**********************************************************************  05600000
*                 TcpXParm Assembler Declarations                    *  05650000
**********************************************************************  05700000
*                      TcpXParm Header                               *  05750000
**********************************************************************  05800000
TCPXHEADER        DS    0F              Header                    @01A  05850000
TCPXEYE           DC    C'TCPX'         Eye Catcher                     05900000
TCPXLEN           DC    AL4(TCPXPARM#LEN) Length of the structure       05950000
TCPXBODY          DS    0F              Body                      @01A  06000000
TCPXEXTOKEN       DS    F               Token to be passed back to      06050000
*                                       Tcp/IP in the reg 2 of PC       06100000
TCPXAXNUMBER      DS    H               Ax value for Tcp/Ip AS          06150000
TCPXRESV1         DS    H               RESERVED                        06200000
TCPXLXNUMBER      DS    F               Lx value for Tcp/Ip AS          06250000
TCPXETTOKEN       DS    F               Et Token for Tcp/Ip AS          06300000
TCPXASCBPTR       DS    A(0)            Pointer to Ascb of Tcp/Ip AS    06350000
TCPXECBPTR        DS    A(0)            Miscellaneous Ecb Ptr           06400000
*********************************************************************** 06450000
*               Constants used in the Header                          * 06500000
*********************************************************************** 06550000
TCPXPARM#LEN      EQU *-TCPXPARM         Constant - Length of TcpXParm  06600000
*********************************************************************** 06650000
* TcpXReturn                                                          * 06700000
*********************************************************************** 06750000
                    ORG   TCPXBODY      Follows TcpX Header             06800000
TCPXRETURN          DS    0F            Area returned by OE to Tcp @01A 06850000
TCPXSOCKETSTOKEN    DS    CL8           Dataspace Stoken           @01A 06900000
TCPXTCPPGARBQPTR    DS    F             TcpParm Garbage (Free) Q   @01A 06950000
*                                                                       07000000
TCPXRETURN#LEN      EQU *-TCPXRETURN    Length of TCPXRETURN       @01A 07050000
** BPXYTCPX End                                                         07100000
         SPACE 3                                                        07150000
         AIF   ('&LIST' EQ 'YES').E411                                  07200000
         POP   PRINT                                                    07250000
.E411    ANOP  ,                                                        07300000
         MEND                                                           07350000
  Terminating PL/X comment                                          */  07400000
*                                                                       07450000
 %TCPXPLS : ;                                                           07500000
 /********************************************************************/ 07550000
 /* Tcp/Ip External interface Control Block                          */ 07600000
 /********************************************************************/ 07650000
 %IF TCPXBASE='' %THEN                                                  07700000
   %DO;                                                                 07750000
     %TCPXBASE='Based(TcpXParmPtr)';                                    07800000
   %END;                                                                07850000
 %IF TRANSLATE(TCPXBASE)='BASED(TCPXPARMPTR)'  %THEN                    07900000
   %DO;                                                                 07950000
     DCL TcpXParmPtr Ptr(31);        /* Pointer to the TcpXParm      */ 08000000
   %END;                                                                08050000
 Dcl                                                                    08100000
   1 TcpXParm             Bdy(DWORD) TCPXBASE,                          08150000
     2 TcpXHeader,                   /* Header                   @01A*/ 08200000
       3 TcpXEye          Char ( 4), /* Eye catcher 'TCPX'           */ 08250000
       3 TcpXLen          Fixed(31), /* Len of TcpXParm              */ 08300000
     2 TcpXBody,                     /* Body                     @01A*/ 08350000
       3 TcpXExToken      Fixed(31), /* Token to be passed back to      08400000
                                        Tcp/IP in the reg 2 of PC    */ 08450000
       3 TcpXAxNumber     Fixed(15), /* Ax value for Tcp/Ip AS       */ 08500000
       3 *                Fixed(15), /* RESERVED                     */ 08550000
       3 TcpXLxNumber     Fixed(31), /* Lx value for Tcp/Ip AS       */ 08600000
       3 TcpXEtToken      Fixed(31), /* Et Token for Tcp/Ip AS       */ 08650000
       3 TcpXAscbPtr      Ptr(31),   /* Pointer to Ascb of Tcp/Ip AS */ 08700000
       3 TcpXEcbPtr       Ptr(31);   /* Miscellaneous Ecb            */ 08750000
                                                                        08800000
 Dcl                                                                    08850000
   1 TcpXReturn Defined(TcpxBody),   /* Area Returned by OE to TcpIp    08900000
                                                                 @01A*/ 08950000
     2 TcpxSocketStoken   Char(8),   /* Dataspace Stoken         @01A*/ 09000000
     2 TcpxTcpPGarbQPtr   Ptr(31);   /* TcpParm Garbage (Free) Q @01A*/ 09050000
                                                                        09100000
 Dcl TcpXParm#Len         Fixed(31) Constant(Length(TcpXParm)); /*      09150000
                                        Length of TcpXParm           */ 09200000
 Dcl TcpXParm#Eye  Char(4)   Constant('TCPX'); /* Eye catcher        */ 09250000
