*                                                                       00050000
* %DCL IXLYDEIB_INCLUDED CHAR EXT;                                      00064200
* %DEACTIVATE IXLYDEIB_INCLUDED;                                        00078400
* %IF IXLYDEIB_INCLUDED = '' %THEN                                      00092600
* %DO;                                                                  00106800
*/* Macro made bi-lingual on 97094. CBGEN compile date 96059         */ 00121000
*% /*                                                                   00135200
         MACRO                                                          00150000
         IXLYDEIB &DSECT=YES,&LIST=YES,&TITLE=YES,&DEIB=YES             00168700
         GBLC  &IXLYDEIB_INCLUDED                                       00187400
         GBLC  &ZCBPRINT                                                00206100
&IXLYDEIB_INCLUDED SETC 'YES'                                           00224800
         AIF   ('&LIST' EQ 'NONE').P0                                   00231000
         AIF   ('&TITLE' EQ 'NO').P5                                    00237200
 TITLE   'IXLYDEIB  - Directory Entry Information Block - DEIB        '*00243500
                                                                        00262200
.P5      ANOP                                                           00271500
**/ IXLYDEIB_1:;                                                        00280900
*/* START OF SPECIFICATIONS ******************************************* 00300000
*                                                                       00350000
*01* SECURITY:                                                          00366600
*                                                                       00383200
* ***PROPRIETARY_STATEMENT********************************************* 00400000
***01* PROPRIETARY STATEMENT=                                         * 00450000
*                                                                     * 00500000
*    LICENSED MATERIALS - PROPERTY OF IBM                             * 00550000
*    THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                      * 00600000
*    5645-001 (C) COPYRIGHT IBM CORP. 1993 1997                       * 00650000
*                                                                     * 00800000
*   STATUS = HBB6603                                                  * 00850000
*                                                                     * 00900000
*  **END_OF_PROPRIETARY_STATEMENT************************************** 00950000
*                                                                       01000000
*02* ACRONYM:  DEIB                                                     01025000
*                                                                       01050000
*01* DESCRIPTIVE NAME: Directory Entry Information Block - DEIB         01075000
*                                                                       01100000
*01* MACRO NAME:  IXLYDEIB                                              01150000
*                                                                       01200000
*01* DSECT NAME:  DEIB                                                  01250000
*                                                                       01300000
*01* COMPONENT:  Cross System Extended Services (SCIXL)                 01304100
*                                                                       01308200
*01* EYE-CATCHER:  NONE                                                 01312300
*                                                                       01316400
*01* STORAGE ATTRIBUTES:                                                01320500
*02*  SUBPOOL:  User supplied                                           01326600
*02*  KEY:  User supplied                                               01332700
*02*  RESIDENCY:  User supplied                                         01338800
*                                                                       01345100
*01* SIZE:                                                              01347800
*            DEIB -- X'0080' bytes                                      01350500
*                                                                       01353300
*01* CREATED BY:  - Storage area created by IXLCACHE invoker            01357400
*                 - DEIB data created by IXLCACHE service routine       01361500
*                                                                       01365600
*01* POINTED TO BY:  BUFFER or BUFLIST paramter on IXLCACHE             01369700
*                                                                       01373800
*01* SERIALIZATION:  See BUFFER and BUFLIST parameter requirements      01377900
*                    on the IXLCACHE interface description.             01382000
*                                                                       01386100
*01* FUNCTION:                                                          01390200
*02*  The DEIB maps the information returned for a single cache         01394300
*     structure directory entry returned on some IXLCACHE macro         01400000
*     requests.                                                         01450000
*                                                                       01462500
*01* EXTERNAL CLASSIFICATION: GUPI                                      01475000
*01* END OF EXTERNAL CLASSIFICATION:                                    01487500
*                                                                       01500000
*01* METHOD OF ACCESS:                                                  01550000
*02*  ASM:     USING on DEIB                                            01572200
*                                                                       01594400
*02*  PL/AS:   %DCL DEIB_DCL_ATTR CHAR                                  01616600
*              %DEIB_DCL_ATTR = 'based/defined/via attributes'          01638800
*              %INCLUDE SYSLIB(IXLYDEIB)                                01661000
*                                                                       01683200
*              If DEIB_DCL_ATTR is not set the DEIB will be             01705400
*              declared as BASED.                                       01727600
*                                                                       01750000
*01* DELETED BY:  Invoker of IXLCACHE.                                  01900000
*                                                                       02000000
*01* FREQUENCY:  One per cache structure directory entry returned on    02033300
*                IXLCACHE requests.                                     02066600
*                                                                       02100000
*01* DEPENDENCIES:  See BUFFER and BUFLIST parameter requirements       02109000
*                   on the IXLCACHE interface description.              02118000
*                                                                       02127000
*01* DISTRIBUTION LIBRARY:  AMACLIB                                     02136000
*                                                                       02145000
*01* CHANGE ACTIVITY:                                                   02154000
*     $L0=SYSLKSRQ HBB5510 910311 PD00K1:  XES support                  02167500
*     $D1=DIG0129  HBB5510 930520 PD00FR:  Architecture upgrade         02174200
*     $01=OW28460  HBB6603 970801 PD00GW:  User managed duplexing       02177600
*                                                                       02181000
* NOTES: This control block must start on a word boundary.              02190000
*                                                                       02200000
*     ALLOCATION-METHOD:  Specific to IXLCACHE invoker.                 02250000
*                         See BUFFER and BUFLIST parameter requirements 02300000
*                         on the IXLCACHE interface description.        02350000
*                                                                       03400000
*END OF SPECIFICATIONS ***********************************************/ 03450000
*% /*                                                                   03477500
.P0      ANOP                                                           03491200
         AIF   ('&ZCBPRINT' EQ 'NO').P1                                 03505000
         AIF   ('&LIST' EQ 'YES').P2                                    03532500
.P1      ANOP                                                           03560000
         PUSH  PRINT                                                    03587500
         PRINT OFF                                                      03615000
.P2      ANOP                                                           03642500
         AIF   ('&DEIB' EQ 'NO').L0002                                  03670000
         AIF   ('&DSECT' EQ 'YES').L0003                                03697500
         AIF   ('&DEIB' NE 'YES').L0002                                 03725000
DEIB     DS    0F        Directory Entry Information Block              03752500
         AGO   .L0004                                                   03780000
.L0003   ANOP                                                           03807500
DEIB     DSECT           Directory Entry Information Block              03835000
.L0004   ANOP                                                           03862500
DEIBNAME DS    1CL0016   Name of the structure entry for which this    *03890000
                         Deib contains directory information.           03917500
DEIBUSERDATA DS 1CL0008  Directory entry user data field.               03945000
DEIBSTGCLASS DS 1FL1     Storage class associated with the entry.       03972500
DEIBBYTEA DS   0BL1      Bit level directory entry fields.              04000000
DEIBCHANGED EQU X'80'    Entry changed bit. 1 ==> any cached subsystem *04027500
                         data is changed. 0 ==> any cached subsystem   *04055000
                         data is unchanged.                             04082500
DEIBCACHED EQU X'40'     Data-cached indicator. 1 ==> subsystem data   *04110000
                         is cached for the entry. 0 ==> no subsystem   *04137500
                         data is cached, e.g. only a directory entry   *04165000
                         is allocated for the name.                     04192500
DEIBPARITY EQU X'30'     Parity associated with the entry.              04220000
DEIBCOLOCKSTATE EQU X'0C' Castout lock state. Values are declared      *04247500
                         below.                                         04275000
         ORG   DEIBBYTEA+X'00000001'                                    04302500
DEIBCOCLASS DS 1FL2      Castout class associated with the entry.       04330000
DEIBCOLOCKVAL DS 1CL0002 Contents of the castout lock for the entry.   *04357500
                         (First byte is the connection ID, second byte *04385000
                         is the process ID.)                            04412500
         DS    1CL0001   Reserved                                       04440000
DEIBELEMNUM DS 1FL1      Cache entry size expressed as the number of   *04467500
                         elements in the entry                          04495000
DEIBLCINTEREST DS 1CL0032 Bit string identifying which connected users *04522500
                         have registered interest in the entry. The    *04550000
                         relative position of a bit in the string      *04577500
                         associates it with a connection ID. 1 ==> the *04605000
                         associated connection has registered interest *04632500
                         in the entry. 0 ==> the connection does not   *04660000
                         have registered interest in the entry. Bit 0  *04687500
                         in this string will always be zero.            04715000
         DS    1CL0008   Reserved                                       04724100
DEIBVERSION DS 1CL0008   Cache entry version number. Valid only for    *04733200
                         structures allocated in a CFLEVEL=5 or higher *04742300
                         coupling facility.                             04751400
         DS    1CL0048   Reserved                                       04760500
DEIBEND  DS    0C        End of Deib                                    04770000
*                                                                       04800000
*    Castout lock state values                                          04801700
*    Note: To use these values you should reset all of the bits in      04803400
*          DEIBBYTEA except the DEIBCOLOCKSTATE bits and then compare   04805100
*          the full byte against these values.                          04806800
*                                                                       04808500
*                                                                       04810200
DEIBCOLS_RESET EQU B'00000000' The reset state is entered when the     *04811900
                         name is assigned to the directory entry or    *04813600
                         when the castout lock is reset to zeros.       04815300
DEIBCOLS_READFORCASTOUT EQU B'00000100' The read for castout state is  *04817000
                         entered when the castout lock is obtained by  *04818700
                         a CASTOUT_DATA request.                        04820400
DEIBCOLS_WRITEWITHCASTOUT EQU B'00001000' The write with castout state *04822100
                         is entered when the castout lock is obtained  *04823800
                         by a WRITE_DATA request specifying            *04825500
                         GETCOLOCK=YES.                                 04827200
DEIB_LEN EQU   *-DEIB                                                   04828900
.L0002   ANOP                                                           04830600
         AIF   ('&ZCBPRINT' EQ 'NO').P3                                 04832300
         AIF   ('&LIST' EQ 'YES').P4                                    04834000
.P3      ANOP                                                           04835700
         POP   PRINT                                                    04837400
.P4      ANOP                                                           04839100
.P_EXIT  ANOP                                                           04840800
         MEND                                                           04842500
**/ IXLYDEIB_2:;                                                        04844200
* %IXLYDEIB_INCLUDED = 'YES';                                           04845900
* %DCL ZCBPRINT CHAR EXT;                                               04847600
* %DEACTIVATE ZCBPRINT;                                                 04849300
* %DCL IXLYDEIB_LIST CHAR EXT;                                          04851000
* %DEACTIVATE IXLYDEIB_LIST;                                            04852700
* %IF IXLYDEIB_LIST ^= 'NO' &                                           04854400
*    ZCBPRINT ^= 'NO' %THEN                                             04856100
*   %GOTO IXLYDEIB_3;                                                   04857800
*   @LIST PUSH NOECHO;                                                  04859500
*   @LIST NOASSEMBLE NOECHO;                                            04861200
*   @LIST OFF C NOECHO;                                                 04862900
* %IXLYDEIB_3:;                                                         04864600
*/* Start of PL/X Source                                             */ 04866300
*                                                                       04868000
* %If Deib_Dcl_Attr = '' %Then                                          04870000
*   %Deib_Dcl_Attr = 'Based';                                           04890000
*                                                                       04910000
* Dcl 1 Deib Deib_Dcl_Attr BDY(WORD), /* Directory Entry Information    04930000
*                                         Block                      */ 04950000
*       3 DeibName     Char(16), /* Name of the structure entry for     05000000
*                                   which this Deib contains directory  05050000
*                                   information.                     */ 05100000
*       3 DeibUserData Char(8),  /* Directory entry user data field. */ 05150000
*       3 DeibStgClass Fixed(8), /* Storage class associated with the   05200000
*                                   entry.                           */ 05233300
*       3 DeibByteA    Bit(8),   /* Bit level directory entry fields.*/ 05262300
*        5 DeibChanged   Bit(1), /* Entry changed bit.                  05291300
*                                   1 ==> any cached subsystem data     05320300
*                                         is changed.                   05349300
*                                   0 ==> any cached subsystem data     05378300
*                                         is unchanged.              */ 05407300
*        5 DeibCached    Bit(1), /* Data-cached indicator.              05436300
*                                   1 ==> subsystem data is cached for  05465300
*                                         the entry.                    05494300
*                                   0 ==> no subsystem data is cached,  05523300
*                                         e.g. only a directory entry   05552300
*                                         is allocated for the name. */ 05581300
*        5 DeibParity    Bit(2), /* Parity associated with the entry.   05610300
*                                                                @D1C*/ 05639700
*        5 DeibCoLockState Bit(2), /* Castout lock state.  Values are   05664100
*                                   declared below.              @D1A*/ 05688500
*        5 *             Bit(2), /* Reserved                     @D1C*/ 05713100
*       3 DeibCoClass  Fixed(16),/* Castout class associated with the   05750000
*                                   entry.                           */ 06550000
*       3 DeibCoLockVal Char(2), /* Contents of the castout lock for    06553300
*                                   the entry.  (First byte is the      06556600
*                                   connection ID, second byte is the   06559900
*                                   process ID.)                     */ 06563200
*       3 *            Char(1),  /* Reserved                         */ 06564900
*       3 DeibElemNum  Fixed(8), /* Cache entry size expressed as       06566200
*                                   the number of elements in the       06567500
*                                   entry                            */ 06568800
*       3 DeibLcInterest Char(32),/* Bit string identifying which       06570300
*                                   connected users have registered     06573200
*                                   interest in the entry.  The         06576100
*                                   relative position of a bit in the   06579000
*                                   string associates it with a         06581900
*                                   connection ID.                      06583900
*                                   1 ==> the associated connection has 06585900
*                                   registered interest in the entry.   06587900
*                                   0 ==> the connection does not have  06589900
*                                   registered interest in the entry.   06591900
*                                   Bit 0 in this string will always    06593900
*                                   be zero.                         */ 06595900
*       3 * CHAR(8),             /* Reserved                     @01A*/ 06603300
*       3 DeibVersion CHAR(8),   /* Cache entry version number.         06610700
*                                   Valid only for structures allocated 06618100
*                                   in a CFLEVEL=5 or higher coupling   06625500
*                                   facility.                    @01A*/ 06632900
*       3 * CHAR(48),            /* Reserved                     @01C*/ 06640300
*       3 DeibEnd      Char(0);  /* End of Deib                      */ 06648300
*                                                                       06698300
* /* Castout lock state values                                   @D1A*/ 06748300
* /* Note: To use these values you should reset all of the bits in      06798300
*          DEIBBYTEA except the DEIBCOLOCKSTATE bits and then compare   06848300
*          the full byte against these values.                   @D1A*/ 06898300
*                                                                       06948300
* Dcl DeibCols_Reset            Bit(8) Constant('00000000'B), /* The    06998300
*                          reset state is entered when the name is      07048300
*                          assigned to the directory entry or when the  07098300
*                          castout lock is reset to zeros.       @D1A*/ 07148300
*     DeibCols_ReadForCastout   Bit(8) Constant('00000100'B), /* The    07198300
*                          read for castout state is entered when the   07248300
*                          castout lock is obtained by a CASTOUT_DATA   07298300
*                          request.                              @D1A*/ 07348300
*     DeibCols_WriteWithCastout Bit(8) Constant('00001000'B); /*        07398300
*                          The write with castout state is entered      07448300
*                          when the castout lock is obtained by a       07498300
*                          WRITE_DATA request specifying                07548300
*                          GETCOLOCK=YES.                        @D1A*/ 07598300
*                                                                       07648300
* %Deactivate Deib_Dcl_Attr;                                            07698300
*                                                                       07748300
*/* End of PL/X Source                                               */ 07798300
* %IF IXLYDEIB_LIST ^= 'NO' &                                           07848300
*    ZCBPRINT ^= 'NO' %THEN                                             07898300
*   %GOTO IXLYDEIB_4;                                                   07948300
*   @LIST POP NOECHO;                                                   07998300
* %IXLYDEIB_4:;                                                         08048300
* %END;                                                                 08098300
