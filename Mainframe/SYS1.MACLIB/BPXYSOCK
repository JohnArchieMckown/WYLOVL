*        %GOTO SOCKPRO  ;         /* Bilingual header                   00050000
         MACRO                                                          00100000
         BPXYSOCK  &DSECT=YES,&LIST=YES                                 00150000
         GBLB  &SOCK411                                                 00200000
         AIF   (&SOCK411 EQ 1).E411                                     00250000
&SOCK411 SETB  1                                                        00300000
         AIF   ('&LIST' EQ 'YES').A411                                  00350000
         PUSH  PRINT  BPXYSOCK: OpenMVS Socket Address Structure        00400000
         PRINT OFF                                                      00450000
         AGO   .A411                                                    00500000
*                                  */                                   00550000
*%SOCKPRO : ;                                                           00600000
*/****START OF SPECIFICATIONS****************************************** 00650000
*                                                                       00700000
*    $MAC (BPXYSOCK) COMP(SCPX1) PROD(BPX):                             00750000
*                                                                       00800000
*01* MACRO NAME: BPXYSOCK                                               00850000
*                                                                       00900000
*01* DSECT NAME: N/A                                                    00950000
*                                                                       01000000
*01* DESCRIPTIVE NAME: OpenMVS Socket Address structure control block   01050000
*                                                                       01100000
*02*   ACRONYM: SOCK                                                    01150000
**/                                                                     01200000
*/*01* PROPRIETARY STATEMENT=                                        */ 01250000
*/***PROPRIETARY_STATEMENT********************************************/ 01300000
*/*                                                                  */ 01350000
*/*                                                                  */ 01400000
*/* LICENSED MATERIALS - PROPERTY OF IBM                             */ 01450000
*/* THIS MACRO IS "RESTRICTED MATERIALS OF IBM"                      */ 01500000
*/* 5647-A01 (C) COPYRIGHT IBM CORP. 1993,2000                       */ 01550000
*/*                                                                  */ 01600000
*/* STATUS= JBB6609                                                  */ 01650000
*/*                                                                  */ 01700000
*/***END_OF_PROPRIETARY_STATEMENT*************************************/ 01750000
*/*                                                                     01800000
*01* EXTERNAL CLASSIFICATION:  GUPI                                     01850000
*01* END OF EXTERNAL CLASSIFICATION:                                    01900000
*                                                                       01950000
*01* FUNCTION:                                                          02000000
*                                                                       02050000
*    This file contains the definitions of the socket address           02100000
*    structure control block for the supported address families.        02150000
*                                                                       02200000
*01* METHOD OF ACCESS:                                                  02250000
*                                                                       02300000
*02*   PL/X:                                                            02350000
*                                                                       02400000
*        %INCLUDE SYSLIB(BPXYSOCK)                                      02450000
*        By default, the SOCK is based on SOCKPTR. If                   02500000
*        other basing is desired, use %SOCKBASE='BASED(XXXXXX)'.        02550000
*        If %SOCKBASE='BASED(SOCKPTR)' is coded, a Declare for          02600000
*        SOCKPTR is also generated.                                     02650000
*                                                                       02700000
*        The Sockaddr PL/X data type is defined by this macro.     @P3A 02750000
*        To have only the type defined, and not the instance       @P3A 02800000
*        named "SockAddr", use %SOCKBASE = 'TYPEONLY'.             @P3A 02850000
*                                                                       02900000
*        The socket address is a parameter on the following             02950000
*        syscalls: Accept                                               03000000
*                  Bind                                                 03050000
*                  Connect                                              03100000
*                  GetName                                              03150000
*                  SndtoRcvfrom                                         03200000
*                  SetPeer                                              03250000
*                                                                       03300000
*02*   ASM:                                                             03350000
*                                                                       03400000
*        None                                                           03450000
*                                                                       03500000
*01* SIZE: Release dependent.  Refer to the mapping.                    03550000
*                                                                       03600000
*01* POINTED TO BY: Input parameter                                     03650000
*                                                                       03700000
*01* CREATED BY:    caller                                              03750000
*                                                                       03800000
*01* DELETED BY:    caller                                              03850000
*                                                                       03900000
*01* STORAGE ATTRIBUTES:                                                03950000
*02*   SUBPOOL:                                                         04000000
*02*   KEY:                                                             04050000
*02*   RESIDENCY:                                                       04100000
*                                                                       04150000
*01* FREQUENCY:                                                         04200000
*                                                                       04250000
*01* SERIALIZATION: N/A                                                 04300000
*                                                                       04350000
*01* DEPENDENCIES: None                                                 04400000
*                                                                       04450000
*01* NOTES: None                                                        04500000
*                                                                       04550000
*01* COMPONENT: OpenMVS (SCPX1)                                         04600000
*                                                                       04650000
*01* DISTRIBUTION LIBRARY:  AMACLIB                                     04700000
*                                                                       04750000
*01* EYE-CATCHER: None - this is the interface block from the user.     04800000
*02*   OFFSET:  N/A                                                     04850000
*02*   LENGTH:  N/A                                                     04900000
*                                                                       04950000
*01* CHANGE-ACTIVITY:                                                   05000000
*                                                                       05050000
*  $D0=DOAA002  HOM1120 920316 PDCL: Dcr A002.02 Socket support         05100000
*  $D1=DOAA002  HOM1120 931005 PDJZ: Dcr A002.08 Unix domain sockets    05150000
*  $P0=POA0284  HOM1120 940126 PDXX: Adapt SOCKADDR to BSD 4.4 defines  05200000
*  $P0=PPF0001  HOM1130 940126 PDXX: Adapt SOCKADDR to BSD 4.4 defines  05250000
*  $P1=PPF0038  HOM1130 940531 PDJV: Add define for INADDR_ANY          05300000
*  $D2=DPFA053, HOM1130 940609 PDHR: Add support for converging         05350000
*                                    sockets changes                    05400000
*  $D3=DPFA053  HOM1130 950202 PDJV: DCR A053.09 - Local INET support   05450000
*  $P2=PPF0381  HOM1130 950418 PDJV: Add definitions for Protocol       05500000
*  $P3=PRG0095  HOM1140 951221 PDJV: Make sockaddr a type declare       05550000
*                                    Also correct ASM Sock_Sin_Addr     05600000
*  $D4=DSPA158  HOM1150 960312 PDJT: AF_ESCON                           05650000
*  $D5=DRGA146  HOM1150 960410 PDWE: A146.03 SetIBMSockOpt              05700000
*  $P4=PQC1723  HBB6603 960725 PDWE: Add Tcp_nodelay for TCP/IP 3.3     05750000
*  $P5=PQC2129  HBB6603 960815 PDJV: Add new SOCKBAS2 use               05800000
*  $P6=PQC2529  HBB6603 960925 PDJV: Make constants 4 bytes long        05850000
*  $P7=PUX0159  HBB6605 970509 PDJT: New setibmsockopt's for TCP/IP 3.4 05900000
*  $D6=DVTA265  HBB6606 971009 PDJT: SLA/Multicast setsockopt's         05950000
*  $D7=DWAA274  JBB6607 980309 PDSK: Fast CGI (A274.03)                 06000000
*  $P8=PVT0656  JBB6607 980323 PDJT: Sysplex TCP/IP and IPv6 additions  06050000
*  $P9=PWA0114  JBB6607 980430 PDJT: Change IP_TOS from 10 to 2 OW33172 06100000
*  $PA=PWA0227  JBB6607 980717 PDJV: Add SO_EioIfNewTP for setibmsockop 06150000
*  $PB=PWY0744  JBB6609 990721 PDJT: Add IpV6 Structures                06166600
*  $D8=DXDA400  HBB7703 990818 PDJT: SO_SECINFO Structures              06183300
*  $01=OW48918  HBB7707 010613 PDJT: Fix DSECT=NO for all DSECTs        06191300
*                                                                       06200000
****END OF SPECIFICATIONS*********************************************/ 06250000
*        %GOTO SOCKPLX  ;         /* Bilingual header                   06300000
.A411    ANOP  ,                                                        06350000
*                                                                       06400000
*********************************************************************** 06450000
** BPXYSOCK: OpenMVS Socket Address Structure                         * 06500000
** Used By: Sockets PFS                                               * 06550000
*********************************************************************** 06600000
*                                                                       06650000
         AIF   ('&DSECT' EQ 'NO').B411                                  06700000
SOCKADDR             DSECT ,                                            06750000
         AGO   .C411                                                    06800000
.B411    ANOP  ,                                                        06850000
SOCKADDR             DS    0F                                           06900000
.C411    ANOP  ,                                                        06950000
SOCKBEGIN            DS    0F                                           07000000
*                                                                       07050000
SOCK_LEN             DS    X          Address Length        @P0A        07100000
SOCK_FAMILY          DS    X          Address Family        @P0C        07150000
SOCK_DATA            DS    0C         Protocol specific area            07200000
*                                                                       07250000
SOCK#LEN             EQU   *-SOCKADDR Constant - Fixed length of SOCK   07300000
*                                                                       07350000
*********************************************************************** 07400000
*                                                                     * 07450000
*   AF_Inet Socket Address Structure                                  * 07500000
*                                                                     * 07550000
*********************************************************************** 07600000
*                                                                       07650000
                     ORG  SOCK_DATA   Start of AF_Inet unique area      07700000
SOCK_SIN             DS   0C                                            07750000
SOCK_SIN_PORT        DS   H           Port number used by the appl      07800000
SOCK_SIN_ADDR        DS   CL4         INET address (netid)              07850000
                     DS   CL8         Reserved area not used            07900000
*                                                                       07950000
SOCK_SIN#LEN         EQU  *-SOCK_SIN  Constant - Fixed length of        08000000
*                                     AF_Inet unique area               08050000
*                                                                       08100000
*                                                                       08125000
*********************************************************************** 08150000
*                                                                     * 08200000
*   AF_Unix Socket Address Structure                                  * 08250000
*                                                                     * 08300000
*********************************************************************** 08350000
*                                                                       08400000
                     ORG  SOCK_DATA   Start of AF_Unix unique area      08450000
SOCK_SUN             DS   0C                                            08500000
SOCK_SUN_NAME        DS   CL108       Path name of the socket  @P0C     08550000
*                                     Length 108 matchs RS/6000@P0A     08600000
*                                                                       08650000
SOCK_SUN#LEN         EQU  *-SOCK_SUN  Constant - Fixed length of        08700000
*                                     AF_Unix unique area               08750000
*                                                                       08800000
*********************************************************************** 08850000
*                                                                     * 08900000
*   AF_Inet6 Socket Address Structure                                 * 08903100
*                                                                     * 08906200
*********************************************************************** 08909300
*                                                                       08912400
                     ORG  SOCK_DATA   Start of AF_Inet6 area       @PBA 08915500
SOCK_SIN6            DS   0C                                       @PBA 08918600
SOCK_SIN6_PORT       DS   H           Port number used by the appl @PBA 08921700
SOCK_SIN6_FLOWINFO   DS   CL4         FLOW INFORMATION             @PBA 08924800
SOCK_SIN6_ADDR       DS   CL16        INET address (netid)         @PBA 08927900
SOCK_SIN6_SCOPE_ID   DS   CL4         SCOPE ID                     @PBA 08931000
*                                                                  @PBA 08934100
SOCK_SIN6#LEN        EQU  *-SOCK_SIN6 Length of AF_INET6 area      @PBA 08937200
*                                                                       08940300
*********************************************************************** 08943400
*                                                                     * 08946500
*   Equates for Address Families                                      * 08950000
*                                                                     * 09000000
*********************************************************************** 09050000
*                                                                       09100000
AF_UNSPEC            EQU  0           Unspecified                       09150000
AF_UNIX              EQU  1           Unix Domain                       09200000
AF_INET              EQU  2           Internetwork: UDP TCP             09250000
AF_IMPLINK           EQU  3           Arpanet imp addresses             09300000
AF_PUP               EQU  4           pup protocols: BSP                09350000
AF_CHAOS             EQU  5           mit CHAOS protocols               09400000
AF_NS                EQU  6           XEROX NS protocols                09450000
AF_NBS               EQU  7           nbs protocols                     09500000
AF_ECMA              EQU  8           European computer man.            09550000
AF_DATAKIT           EQU  9           datakit protocols                 09600000
AF_CCITT             EQU  10          CCITT protocols: X.25             09650000
AF_SNA               EQU  11          IBM SNA                           09700000
AF_DECNET            EQU  12          DECNet                            09750000
AF_DLI               EQU  13          Direct data link interface        09800000
AF_LAT               EQU  14          LAT                               09850000
AF_HYLINK            EQU  15          NSC hyperchannel                  09900000
AF_APPLETALK         EQU  16          Apple Talk                        09950000
AF_IUCV              EQU  17          IBM IUCV                          10000000
AF_ESCON             EQU  18          ESCON UDP                  @D4A   10050000
AF_INET6             EQU  19          IPv6                       @P8A   10100000
AF_ROUTE             EQU  20          Routing Sockets            @P8A   10150000
AF_MAX               EQU  21                                     @P8C   10200000
*                                                                       10250000
**********************************************************************/ 10300000
*   Equates for protocol                                         @P2A*/ 10350000
**********************************************************************/ 10400000
*                                                                       10450000
IPPROTO_IP           EQU   0          DEFAULT PROTOCOL                  10500000
IPPROTO_TCP          EQU   6          TCP                               10550000
IPPROTO_UDP          EQU  17          USER DATAGRAM                     10600000
IPPROTO_IPV6         EQU  41          IPv6                        @PBA  10625000
*                                                                       10650000
*********************************************************************** 10700000
*                                                                     * 10750000
*   Equates for setpeer options                                       * 10800000
*                                                                     * 10850000
*********************************************************************** 10900000
*                                                                       10950000
SOCK#SO_SET          DC   X'00000200'                                   11000000
SOCK#SO_UNSET        DC   X'00000400'                                   11050000
*                                                                       11100000
*********************************************************************** 11150000
*                                                                     * 11200000
*   Equates for socket types                                          * 11250000
*                                                                     * 11300000
*********************************************************************** 11350000
*                                                                       11400000
SOCK#_STREAM         EQU  1                                             11450000
SOCK#_DGRAM          EQU  2                                             11500000
SOCK#_RAW            EQU  3                                             11550000
SOCK#_RDM            EQU  4                                             11600000
SOCK#_SEQPACKET      EQU  5                                             11650000
*                                                                       11700000
*********************************************************************** 11750000
*                                                                     * 11800000
*   Equates for Dimension   (socket/socketpair syscall)               * 11850000
*                                                                     * 11900000
*********************************************************************** 11950000
*                                                                       12000000
SOCK#DIM_SOCKET      EQU  1                                             12050000
SOCK#DIM_SOCKETPAIR  EQU  2                                             12100000
*                                                                       12150000
*********************************************************************** 12200000
*                                                                     * 12250000
*   Equates for getname option                                        * 12300000
*                                                                     * 12350000
*********************************************************************** 12400000
*                                                                       12450000
SOCK#GNMOPTGETPEERNAME EQU  1                                           12500000
SOCK#GNMOPTGETSOCKNAME EQU  2                                           12550000
*                                                                       12600000
*********************************************************************** 12650000
*                                                                     * 12700000
*   Equates for sockopt                                               * 12750000
*                                                                     * 12800000
*********************************************************************** 12850000
*                                                                       12900000
SOCK#OPTOPTGETSOCKOPT    EQU  1                                         12950000
SOCK#OPTOPTSETSOCKOPT    EQU  2                                         13000000
SOCK#OPTOPTSETIBMSOCKOPT EQU  3                                   @D5A  13050000
*                                                                       13100000
*********************************************************************** 13150000
*                                                                     * 13200000
*   Equates for Shutdown options                                      * 13250000
*                                                                     * 13300000
*********************************************************************** 13350000
*                                                                       13400000
SOCK#SHUTDOWNREAD      EQU  0                                           13450000
SOCK#SHUTDOWNWRITE     EQU  1                                           13500000
SOCK#SHUTDOWNBOTH      EQU  2                                           13550000
*                                                                       13600000
*                                                                       13650000
*********************************************************************** 13700000
*                                                                     * 13750000
*   Equate for Level Number for socket options                        * 13800000
*                                                                     * 13850000
*********************************************************************** 13900000
*                                                                       13950000
SOCK#SOL_SOCKET      DC   X'0000FFFF'                                   14000000
*                                                                       14050000
*                                                                       14100000
*********************************************************************** 14150000
*                                                                     * 14200000
*   Equate for InAddrAny for bind requests                            * 14250000
*                                                                     * 14300000
*********************************************************************** 14350000
*                                                                       14400000
INADDR_ANY           DC   X'00000000'                                   14450000
*                                                                       14460000
INADDR_LOOPBACK      DC   X'7F000001'                             @PBA  14470000
IN6ADDR_ANY          DC   X'00000000000000000000000000000000'     @PBA  14480000
IN6ADDR_LOOPBACK     DC   X'00000000000000000000000000000001'     @PBA  14490000
*                                                                       14500000
*********************************************************************** 14550000
*                                                                     * 14600000
*   Equates for Socket options                                        * 14650000
*                                                                     * 14700000
*********************************************************************** 14750000
*                                                                       14800000
SOCK#SO_DEBUG        DC   X'00000001'                                   14850000
SOCK#SO_ACCEPTCONN   DC   X'00000002'                                   14900000
SOCK#SO_REUSEADDR    DC   X'00000004'                                   14950000
SOCK#SO_KEEPALIVE    DC   X'00000008'                                   15000000
SOCK#SO_DONTROUTE    DC   X'00000010'                                   15050000
SOCK#SO_BROADCAST    DC   X'00000020'                                   15100000
SOCK#SO_USELOOPBACK  DC   X'00000040'                                   15150000
SOCK#SO_LINGER       DC   X'00000080'                                   15200000
SOCK#SO_OOBINLINE    DC   X'00000100'                                   15250000
*                                                                       15300000
SOCK#SO_SNDBUF       DC   X'00001001'                                   15350000
SOCK#SO_RCVBUF       DC   X'00001002'                                   15400000
SOCK#SO_SNDLOWAT     DC   X'00001003'                                   15450000
SOCK#SO_RCVLOWAT     DC   X'00001004'                                   15500000
SOCK#SO_SNDTIMEO     DC   X'00001005'                                   15550000
SOCK#SO_RCVTIMEO     DC   X'00001006'                                   15600000
SOCK#SO_ERROR        DC   X'00001007'                                   15650000
SOCK#SO_TYPE         DC   X'00001008'                                   15700000
*                                                                       15750000
* Non-standard sockopts                                                 15800000
*                                                                       15850000
SO_PROPAGATEID       DC   X'00004000'                         /*@D7A*/  15900000
SO_CLUSTERCONNTYPE   DC   X'00004001'                           @P8A    15950000
*                                                                       16000000
* SO_CLUSTERCONNTYPE Output Values                                      16050000
*                                                                       16100000
SO_CLUSTERCONNTYPE_NOCONN        EQU  0                         @P8A    16150000
SO_CLUSTERCONNTYPE_NONE          EQU  1                         @P8A    16200000
SO_CLUSTERCONNTYPE_SAME_CLUSTER  EQU  2                         @P8A    16250000
SO_CLUSTERCONNTYPE_SAME_IMAGE    EQU  4                         @P8A    16300000
SO_CLUSTERCONNTYPE_INTERNAL      EQU  8                         @P8A    16350000
*                                                                       16400000
*                                                                       16450000
* IPPROTO_IP Options                                                    16500000
*                                                                       16550000
IP_TOS                    EQU 2                           /*@P9C@D6A*/  16600000
IP_MULTICAST_TTL          EQU 3                               /*@D6A*/  16650000
IP_MULTICAST_LOOP         EQU 4                               /*@D6A*/  16700000
IP_ADD_MEMBERSHIP         EQU 5                               /*@D6A*/  16750000
IP_DROP_MEMBERSHIP        EQU 6                               /*@D6A*/  16800000
IP_MULTICAST_IF           EQU 7                           /*@P9C@D6A*/  16850000
IP_DEFAULT_MULTICAST_TTL  EQU 1                               /*@D6A*/  16900000
IP_DEFAULT_MULTICAST_LOOP EQU 1                               /*@D6A*/  16950000
IP_MAX_MEMBERSHIPS        EQU 20                              /*@D6A*/  17000000
*                                                                       17050000
* setibmsockopt options                                                 17100000
*                                                                       17150000
SOCK#SO_BULKMODE           DC X'00008000'                      @D5A     17200000
SOCK#SO_IGNOREINCOMINGPUSH DC X'00000001'                        @D5A   17250000
SOCK#SO_NONBLOCKLOCAL      DC X'00008001'                        @P7A   17300000
SOCK#SO_IGNORESOURCEVIPA   DC X'00000002'                        @P7A   17350000
*                       Toggles the use of non-VIPA addresses.  When    17400000
*                       enabled, non-VIPA addresses will be used for    17450000
*                       outbound IP packets.                            17500000
SOCK#SO_OPTMSS             DC X'00008003'                        @P7A   17550000
*                Toggles the use of optimal TCP segment size.           17600000
*                When enabled, the TCP segment size may be optimally    17650000
*                increased on outbound data transfers.  This may        17700000
*                reduce the amount of TCP outbound and inbound          17750000
*                acknowledgement packet processing; therefore,          17800000
*                minimizing CPU consumption.                     @P7A   17850000
SOCK#SO_OPTACK             DC X'00008004'   Optimize Acks        @P7A   17900000
SOCK#SO_EIOIFNEWTP         DC X'00000005'   Notify of new tp     @PAA   17950000
*********************************************************************** 18000000
*                                                                     * 18050000
*   Equates for So_   option values                                   * 18100000
*                                                                     * 18150000
*********************************************************************** 18200000
SOCK#SO_SETOPTIONON   DC X'00000001'                             @PAA   18250000
SOCK#SO_SETOPTIONOFF  DC X'00000000'                             @PAA   18300000
*********************************************************************** 18350000
*                                                                     * 18400000
*   Equates for IPPROTO_TCP options                                   * 18450000
*                                                                     * 18500000
*********************************************************************** 18550000
SOCK#TCP_NODELAY      DC X'00000001'                             @P4A   18600000
SOCK#TCP_KEEPALIVE    DC X'00000008'                             @P9A   18650000
*                                                                       18700000
*********************************************************************** 18750000
*                                                                     * 18800000
*   Equates for Socket Port Constant                                  * 18850000
*                                                                     * 18900000
*********************************************************************** 18950000
*                                                                       19000000
SOCK#LASTRESERVEPORT   EQU  1023                                 @D2A   19050000
*                                                                       19100000
*                                                                       19150000
         AIF   ('&DSECT' EQ 'NO').B412                           @01A   19170000
IP_MREQ         DSECT ,                                     @P9M@D6A    19200000
         AGO   .C412                                             @01A   19210000
.B412    ANOP  ,                                                 @01A   19220000
IP_MREQ          DS 0F                                           @01A   19230000
.C412    ANOP  ,                                                 @01A   19240000
IMR_MULTIADDR    DS CL4            IP MULTICAST ADDR OF GROUP   @D6A    19250000
IMR_INTERFACE    DS CL4            LOCAL IP ADDR OF INTERFACE   @D6A    19300000
*                                                                       19350000
*********************************************************************** 19400000
*                                                                     * 19450000
*   Structure for So_Linger                                           * 19500000
*                                                                 @D3A* 19550000
*********************************************************************** 19600000
*                                                                       19650000
         AIF   ('&DSECT' EQ 'NO').B413                           @01A   19670000
SOCK_LINGER_STRUCT DSECT ,                                         @P9A 19700000
         AGO   .C413                                             @01A   19710000
.B413    ANOP  ,                                                 @01A   19720000
SOCK_LINGER_STRUCT   DS   0F                                     @01A   19730000
.C413    ANOP  ,                                                 @01A   19740000
SOCK_L_ONOFF         DS    F          On/Off indicator         @P9M@D3A 19750000
SOCK_L_LINGER        DS    F          Length of time to linger @P9M@D3C 19800000
*                                                                       19850000
** BPXYSOCK End                                                         19900000
         SPACE 3                                                        19950000
         AIF   ('&LIST' EQ 'YES').E411                                  20000000
         POP   PRINT                                                    20050000
.E411    ANOP  ,                                                        20100000
         MEND                                                           20150000
  Terminating PL/X comment                                          */  20200000
*                                                                       20250000
 %SOCKPLX : ;                                                           20300000
  %DCL SOCKBAS2 CHAR EXT;                                     /* @P5A*/ 20350000
  %IF SOCKBAS2 ^='' & SOCKBASE = '' %THEN                     /* @P5A*/ 20400000
    %SOCKBASE = SOCKBAS2;                                     /* @P5A*/ 20450000
  %IF Translate(SOCKBASE) ^= 'TYPEONLY' %THEN                 /* @P3A*/ 20500000
   %DO;                                                       /* @P3A*/ 20550000
    %IF SOCKBASE='' %THEN                                               20600000
     %DO;                                                               20650000
      %SOCKBASE='Based(SockPtr)';                                       20700000
     %END;                                                              20750000
    %IF TRANSLATE(SOCKBASE)='BASED(SOCKPTR)'  %THEN                     20800000
     %DO;                                                               20850000
       DCL SockPtr Ptr(31);          /* Pointer to the SOCK          */ 20900000
     %END;                                                              20950000
    %IF SOCKVBSE='' %THEN                                     /* @P3M*/ 21000000
     %DO;                                                     /* @P3M*/ 21050000
      %SOCKVBSE='Based(ADDR(Sock_data)) Via(Alet(Sock_data))';/* @P3M*/ 21100000
     %END;                                                    /* @P3M*/ 21150000
                                                                        21200000
    /*****************************************************************/ 21250000
    /*                                                               */ 21300000
    /* Declare an instance of a SockAddr Header                  @P3A*/ 21350000
    /*                                                               */ 21400000
    /*****************************************************************/ 21450000
    Dcl SockAddr IsA(Sock_Header) SOCKBASE BDY(WORD);         /* @P3A*/ 21500000
                                                                        21550000
    /*****************************************************************/ 21600000
    /*                                                               */ 21650000
    /* Declare an instance of the Inet Part of the rest of the       */ 21700000
    /* SockAddr.                                                     */ 21750000
    /*                                                           @P3A*/ 21800000
    /*****************************************************************/ 21850000
    DCL Sock_sin IsA(Sock_Inet_Part)  SOCKVBSE;               /* @P3M*/ 21900000
                                                                        21950000
    /*****************************************************************/ 22000000
    /*                                                               */ 22050000
    /* Declare an instance of the Inet6 Part of the rest of the      */ 22055500
    /* SockAddr.                                                     */ 22061000
    /*                                                           @PBA*/ 22066500
    /*****************************************************************/ 22072000
    DCL Sock_sin6 IsA(Sock_Inet6_Part)  SOCKVBSE;             /* @PBA*/ 22077500
                                                                        22083000
    /*****************************************************************/ 22088500
    /*                                                               */ 22094000
    /* Declare an instance of the Unix Part of the rest of the       */ 22100000
    /* SockAddr.                                                     */ 22150000
    /*                                                           @P3A*/ 22200000
    /*****************************************************************/ 22250000
    Dcl Sock_sun IsA(Sock_Unix_Part) SOCKVBSE;                /* @P3M*/ 22300000
                                                                        22350000
   %END;                                                      /* @P3A*/ 22400000
                                                                        22450000
 /********************************************************************/ 22500000
 /*                                                                  */ 22550000
 /* Declare the types for both the Inet and Unix SockAddr's.         */ 22600000
 /* In order to do this, also declare types for each of the          */ 22650000
 /* parts - the Common Header, the Inet specific part and the        */ 22700000
 /* Unix specific part.                                              */ 22750000
 /*                                                              @P3A*/ 22800000
 /********************************************************************/ 22850000
 DCL                                                                    22900000
  1    Sock_Inet_SockAddr   Type,                             /* @P3A*/ 22950000
   3   Sock_Inet_Hdr     IsA(Sock_Header),                    /* @P3A*/ 23000000
   3   Sock_Inet_Rest    IsA(Sock_Inet_Part);                 /* @P3A*/ 23050000
                                                                        23058300
 DCL                                                          /* @PBA*/ 23066600
  1    Sock_Inet6_SockAddr  Type,                             /* @PBA*/ 23074900
   3   Sock_Inet6_Hdr    IsA(Sock_Header),                    /* @PBA*/ 23083200
   3   Sock_Inet6_Rest   IsA(Sock_Inet6_Part);                /* @PBA*/ 23091500
                                                                        23100000
 DCL                                                                    23150000
  1    Sock_Unix_SockAddr   Type,                             /* @P3A*/ 23200000
   3   Sock_Unix_Hdr     IsA(Sock_Header),                    /* @P3A*/ 23250000
   3   Sock_Unix_Rest    IsA(Sock_Unix_Part);                 /* @P3A*/ 23300000
                                                                        23350000
 DCL                                                                    23400000
  1    Sock_Header          Type,                             /* @P3C*/ 23450000
   3   Sock_len     Fixed(8),    /* Address length               @P0A*/ 23500000
   3   Sock_family  Fixed(8),    /* Address family               @P0C*/ 23550000
   3   Sock_data    Char(0);     /* Protocol specific area           */ 23600000
                                                                        23650000
 DCL                                                                    23700000
  SOCKADDR#Len Fixed(24) Constant(Length(Sock_Header));/* len of  @P3C  23750000
                                                       Sockaddr hdr  */ 23800000
 /********************************************************************/ 23850000
 /*                                                                  */ 23900000
 /* Af_Inet Socket Address Structure                                 */ 23950000
 /*                                                                  */ 24000000
 /********************************************************************/ 24050000
                                                                        24100000
 DCL 1 Sock_Inet_Part   Type,       /* Af_Inet specific address         24150000
                                       structure                     */ 24200000
       3 Sock_sin_Port  Fixed(16),  /* Port number used by the appl  */ 24250000
       3 Sock_sin_Addr  Char(4),    /* Inet addr (netid)             */ 24300000
       3 *              Char(8) ;   /* unused                        */ 24350000
                                                                        24400000
 DCL Sock_sin#Len   Fixed(24) Constant(LENGTH(Sock_Inet_Part));/*@P3C*/ 24450000
                                                                        24453300
 /********************************************************************/ 24456600
 /*                                                                  */ 24459900
 /* Af_Inet6 Socket Address Structure                            @PBA*/ 24463200
 /*                                                                  */ 24466500
 /********************************************************************/ 24469800
                                                                        24473100
 DCL 1 Sock_Inet6_Part  Type,       /* Af_Inet6 specific address @PBA*/ 24476400
       3 Sock_sin6_Port     Fixed(16),  /* Port number           @PBA*/ 24479700
       3 Sock_sin6_FlowInfo Char(4),    /* Flow information      @PBA*/ 24483000
       3 Sock_sin6_Addr     Char(16),   /* Inet6 addr (netid)    @PBA*/ 24486300
       3 Sock_sin6_Scope_Id Char(4);    /* Scope id              @PBA*/ 24489600
                                                                        24492900
 DCL Sock_sin6#Len Fixed(24) Constant(LENGTH(Sock_Inet6_Part)); !@PBA   24496200
                                                                        24500000
 /********************************************************************/ 24550000
 /*                                                                  */ 24600000
 /* Af_Unix Socket Address Structure                                 */ 24650000
 /*                                                                  */ 24700000
 /********************************************************************/ 24750000
                                                                        24800000
 Dcl 1 Sock_Unix_Part      Type,     /* Af_Unix specific address        24850000
                                         structure                   */ 24900000
 /*  Deleted field use SOCK_LEN instead  Length of the path name1@P0D*/ 24950000
       3 Sock_sun_Name     Char(108); /* Path name of the socket @P0C*/ 25000000
 /*  Length of 108 matchs RS/6000 maximum selection              @P0A*/ 25050000
                                                                        25100000
 Dcl Sock_sun#Len   Fixed(24) Constant(LENGTH(Sock_Unix_Part));/*@P3C*/ 25150000
                                                                        25200000
 /********************************************************************/ 25250000
 /*                                                                  */ 25300000
 /* Structure for So_Linger                                          */ 25350000
 /*                                                              @D3A*/ 25400000
 /********************************************************************/ 25450000
                                                                        25500000
  Dcl 1 Sock_Linger_Struct Based,                                       25550000
        3 Sock_L_OnOff   Fixed(32),  /* On/Off indicator         @D3A*/ 25600000
        3 Sock_L_Linger  Fixed(32);  /* Length of time to linger @D3C*/ 25650000
                                                                        25700000
  /*******************************************************************/ 25750000
  /* Declares for address families                                   */ 25800000
  /*   Changed from Fixed(32) to Fixed(8) to match Sock_Family 19@P0C*/ 25850000
  /*   and back to Fixed(32) since constants will be truncated 20@P6C*/ 25900000
  /*******************************************************************/ 25950000
                                                                        26000000
  Dcl AF_Unspec     Fixed(32) Constant(0),  /* Unspecified           */ 26050000
      AF_Unix       Fixed(32) Constant(1),  /* Local to host - pipes */ 26100000
      AF_Inet       Fixed(32) Constant(2),  /* Internetwork: UDP, TCP*/ 26150000
      AF_ImpLink    Fixed(32) Constant(3),  /* Arpanet imp addresses */ 26200000
      AF_Pup        Fixed(32) Constant(4),  /* pup protocols: BSP    */ 26250000
      AF_Chaos      Fixed(32) Constant(5),  /* mit CHAOS protocols   */ 26300000
      AF_NS         Fixed(32) Constant(6),  /* Xerox NS protocols    */ 26350000
      AF_NBS        Fixed(32) Constant(7),  /* nbs protocols         */ 26400000
      AF_Ecma       Fixed(32) Constant(8),  /* European computer man.*/ 26450000
      AF_DataKit    Fixed(32) Constant(9),  /* datakit protocols     */ 26500000
      AF_CCITT      Fixed(32) Constant(10), /* CCITT protocols: X.25 */ 26550000
      AF_SNA        Fixed(32) Constant(11), /* IBM SNA               */ 26600000
      AF_DECnet     Fixed(32) Constant(12), /* DECNet                */ 26650000
      AF_DLI        Fixed(32) Constant(13), /* Direct data link int  */ 26700000
      AF_LAT        Fixed(32) Constant(14), /* LAT                   */ 26750000
      AF_Hylink     Fixed(32) Constant(15), /* NSC Hyperchannel      */ 26800000
      AF_AppleTalk  Fixed(32) Constant(16), /* Apple Talk            */ 26850000
      AF_Iucv       Fixed(32) Constant(17), /* IBM IUCV              */ 26900000
      AF_ESCON      Fixed(32) Constant(18), /* ESCON UDP         @D4A*/ 26950000
      AF_Inet6      Fixed(32) Constant(19), /* IPv6              @P8A*/ 27000000
      AF_Route      Fixed(32) Constant(20), /* Routing Sockets   @P8A*/ 27050000
                                                                        27100000
      AF_Max        Fixed(32) Constant(21); /*                   @P8C*/ 27150000
                                                                        27200000
  /*******************************************************************/ 27250000
  /* Declares for protocol                                       @P2A*/ 27300000
  /*******************************************************************/ 27350000
                                                                        27400000
  Dcl IPPROTO_IP     Fixed(32) Constant(0),  /* default protocol @P2A*/ 27450000
      IPPROTO_TCP    Fixed(32) Constant(6),  /* tcp              @P2A*/ 27500000
      IPPROTO_UDP    Fixed(32) Constant(17), /* user datagram    @P2A*/ 27533300
      IPPROTO_IPV6   Fixed(32) Constant(41); /* IPv6             @PBA*/ 27566600
                                                                        27600000
  /*******************************************************************/ 27650000
  /* Declares for setpeer options                                    */ 27700000
  /*******************************************************************/ 27750000
                                                                        27800000
  Dcl Sock#SO_SET        Fixed(32) Constant(200x);                      27850000
  Dcl Sock#SO_UNSET      Fixed(32) Constant(400x);                      27900000
                                                                        27950000
  /*******************************************************************/ 28000000
  /* Declares for socket types                                       */ 28050000
  /*******************************************************************/ 28100000
  Dcl Sock#_Stream    Fixed(32) Constant(1);                            28150000
  Dcl Sock#_Dgram     Fixed(32) Constant(2);                            28200000
  Dcl Sock#_Raw       Fixed(32) Constant(3);                            28250000
  Dcl Sock#_Rdm       Fixed(32) Constant(4);                            28300000
  Dcl Sock#_SeqPacket Fixed(32) Constant(5);                            28350000
                                                                        28400000
  /*******************************************************************/ 28450000
  /* Declares for Dimension   (socket/socketpair syscall)            */ 28500000
  /*******************************************************************/ 28550000
  Dcl Sock#Dim_Socket     Fixed(31) Constant(1);                        28600000
  Dcl Sock#Dim_Socketpair Fixed(31) Constant(2);                        28650000
                                                                        28700000
  /*******************************************************************/ 28750000
  /* Declares for getname option                                     */ 28800000
  /*******************************************************************/ 28850000
  Dcl Sock#GnmOptGetPeerName  Fixed(32) Constant(1);                    28900000
  Dcl Sock#GnmOptGetSockName  Fixed(32) Constant(2);                    28950000
                                                                        29000000
  /*******************************************************************/ 29050000
  /* Declares for Sockopt                                            */ 29100000
  /*******************************************************************/ 29150000
  Dcl Sock#OptOptGetSockOpt    Fixed(32) Constant(1);                   29200000
  Dcl Sock#OptOptSetSockOpt    Fixed(32) Constant(2);                   29250000
  Dcl Sock#OptOptSetIBMSockOpt Fixed(32) Constant(3);        /* @D5A */ 29300000
                                                                        29350000
  /*******************************************************************/ 29400000
  /* Declares for Shutdown options                                   */ 29450000
  /*******************************************************************/ 29500000
  Dcl Sock#ShutdownRead       Fixed(32) Constant(0);                    29550000
  Dcl Sock#ShutdownWrite      Fixed(32) Constant(1);                    29600000
  Dcl Sock#ShutdownBoth       Fixed(32) Constant(2);                    29650000
                                                                        29700000
  /*******************************************************************/ 29750000
  /* Declare for Level Number for Socket Options                     */ 29800000
  /*******************************************************************/ 29850000
  Dcl Sock#Sol_Socket         Fixed(32) Constant('0000FFFF'x);/* @P6C*/ 29900000
                                                                        29950000
  /*******************************************************************/ 30000000
  /* Declare for InAddr_Any for Bind requests                    @P1A*/ 30050000
  /*******************************************************************/ 30100000
  Dcl InAddr_Any              Bit(32) Constant('00000000'x);  /* @P1A*/ 30150000
  Dcl InAddr_Loopback         Bit(32) Constant('7F000001'x);  /* @PBA*/ 30158300
  Dcl In6Addr_Any             Bit(128)                        /* @PBA*/ 30166600
             Constant('00000000000000000000000000000000'x);   /* @PBA*/ 30174900
  Dcl In6Addr_Loopback        Bit(128)                        /* @PBA*/ 30183200
             Constant('00000000000000000000000000000001'x);   /* @PBA*/ 30191500
                                                                        30200000
  /*******************************************************************/ 30250000
  /* Declare Socket options - for setsockopt() and getsockopt()      */ 30300000
  /*******************************************************************/ 30350000
  Dcl Sock#So_Debug           Fixed(32) Constant(1);                    30400000
  Dcl Sock#So_AcceptConn      Fixed(32) Constant(2);                    30450000
  Dcl Sock#So_ReuseAddr       Fixed(32) Constant(4);                    30500000
  Dcl Sock#So_KeepAlive       Fixed(32) Constant(8);                    30550000
  Dcl Sock#So_DontRoute       Fixed(32) Constant(10x);                  30600000
  Dcl Sock#So_Broadcast       Fixed(32) Constant(20x);                  30650000
  Dcl Sock#So_UseLoopBack     Fixed(32) Constant(40x);                  30700000
  Dcl Sock#So_Linger          Fixed(32) Constant(80x);                  30750000
  Dcl Sock#So_OOBInline       Fixed(32) Constant(100x);                 30800000
                                                                        30850000
  Dcl Sock#So_SndBuf          Fixed(32) Constant(1001x);                30900000
  Dcl Sock#So_RcvBuf          Fixed(32) Constant(1002x);                30950000
  Dcl Sock#So_SndLoWat        Fixed(32) Constant(1003x);                31000000
  Dcl Sock#So_RcvLoWat        Fixed(32) Constant(1004x);                31050000
  Dcl Sock#So_SndTimeO        Fixed(32) Constant(1005x);                31100000
  Dcl Sock#So_RcvTimeO        Fixed(32) Constant(1006x);                31150000
  Dcl Sock#So_Error           Fixed(32) Constant(1007x);                31200000
  Dcl Sock#So_Type            Fixed(32) Constant(1008x);                31250000
                                                                        31300000
  /*-----------------------------------------------------------------*/ 31350000
  /* Non-standard sockopts                                           */ 31400000
  /*-----------------------------------------------------------------*/ 31450000
  Dcl SO_PropagateId          Fixed(32) Constant(4000x);      /* @D7A*/ 31500000
  Dcl SO_ClusterConnType      Fixed(32) Constant(4001x);      /* @P8A*/ 31550000
  Dcl SO_SecInfo              Fixed(32) Constant(4002x);      /* @D8A*/ 31575000
                                                                        31600000
  /*-----------------------------------------------------------------*/ 31650000
  /* getsockopt(SO_ClusterConnType) Output values                    */ 31700000
  /*-----------------------------------------------------------------*/ 31750000
  Dcl SO_CLUSTERCONNTYPE_NOCONN        Fixed(32) Constant(0), /* @P8A*/ 31800000
      SO_CLUSTERCONNTYPE_NONE          Fixed(32) Constant(1), /* @P8A*/ 31850000
      SO_CLUSTERCONNTYPE_SAME_CLUSTER  Fixed(32) Constant(2), /* @P8A*/ 31900000
      SO_CLUSTERCONNTYPE_SAME_IMAGE    Fixed(32) Constant(4), /* @P8A*/ 31950000
      SO_CLUSTERCONNTYPE_INTERNAL      Fixed(32) Constant(8); /* @P8A*/ 32000000
                                                                        32050000
  /*-----------------------------------------------------------------*/ 32100000
  /* IPPROTO_IP Options                                              */ 32150000
  /*-----------------------------------------------------------------*/ 32200000
  Declare (                                                             32250000
           IP_MULTICAST_TTL    Constant(3),                    /*@D6A*/ 32300000
           IP_MULTICAST_LOOP   Constant(4),                    /*@D6A*/ 32350000
           IP_ADD_MEMBERSHIP   Constant(5),                    /*@D6A*/ 32400000
           IP_DROP_MEMBERSHIP  Constant(6),                    /*@D6A*/ 32450000
           IP_MULTICAST_IF     Constant(7),                /*@P9C@D6A*/ 32500000
                                                                        32550000
           IP_DEFAULT_MULTICAST_TTL  Constant(1),              /*@D6A*/ 32600000
           IP_DEFAULT_MULTICAST_LOOP Constant(1),              /*@D6A*/ 32650000
           IP_MAX_MEMBERSHIPS  Constant(20),                   /*@D6A*/ 32700000
                                                                        32750000
           IP_TOS              Constant(2) ) Fixed(31);    /*@P9C@D6A*/ 32800000
                                                                        32850000
  Dcl 1 ip_mreq Bdy(Word) Based,                              /*3@D6A*/ 32900000
        2 imr_multiaddr Fixed(32),     /* IP multicast addr of group */ 32950000
        2 imr_interface Fixed(32);     /* local IP addr of interface */ 33000000
                                                                        33050000
  /*******************************************************************/ 33100000
  /* Declare IPPROTO_TCP options                                     */ 33150000
  /*******************************************************************/ 33200000
  Dcl Sock#TCP_Nodelay        Fixed(32) Constant(1),      /*    @P4A */ 33250000
      Sock#TCP_KeepAlive      Fixed(32) Constant(8);           /*@P9A*/ 33300000
                                                                        33350000
  /*-----------------------------------------------------------------*/ 33400000
  /* SetIbmSockOpt options                                           */ 33450000
  /*-----------------------------------------------------------------*/ 33500000
  Dcl Sock#So_Bulkmode        Fixed(32) Constant(8000x);  /*    @D5A */ 33550000
  Dcl Sock#So_IgnoreIncomingPush Fixed(32) Constant(1);   /*    @D5A */ 33600000
  Dcl Sock#So_NonBlockLocal    Fixed(32) Constant(8001x), /* RTL @P7A*/ 33650000
      Sock#So_IgnoreSourceVIPA Fixed(32) Constant(2),          /*@P7A   33700000
                        Toggles the use of non-VIPA addresses.  When    33750000
                        enabled, non-VIPA addresses will be used for    33800000
                        outbound IP packets.                     @P7A*/ 33850000
      Sock#So_OptMSS           Fixed(32) Constant(8003x),      /*@P7A   33900000
                   Toggles the use of optimal TCP segment size.         33950000
                   When enabled, the TCP segment size may be optimally  34000000
                   increased on outbound data transfers.  This may      34050000
                   reduce the amount of TCP outbound and inbound        34100000
                   acknowledgement packet processing, therefore,        34150000
                   minimizing CPU consumption.                   @P7A*/ 34200000
      Sock#So_OptAck           Fixed(32) Constant(8004x),      /*@P7A   34250000
                        Optimize Acknowledgments                 @P7A*/ 34300000
      Sock#So_EioIfNewTP       Fixed(32) Constant(0005x);      /*@PAA   34333300
                        Notify this application of new transports@PAA*/ 34366600
                                                                        34400000
  /*******************************************************************/ 34450000
  /* Declare Constants for on and off when setting options       @PAA*/ 34500000
  /*******************************************************************/ 34550000
  Dcl Sock#So_SetOptionOn     Fixed(32) Constant(1),      /*     @PAA*/ 34600000
      Sock#So_SetOptionOff    Fixed(32) Constant(0);      /*     @PAA*/ 34650000
                                                                        34700000
  /*******************************************************************/ 34750000
  /* Declare Socket Port constant                                    */ 34800000
  /*******************************************************************/ 34850000
  Dcl Sock#LastReservePort    Fixed(16) Constant(1023); /*       @D2A*/ 34900000
                                                                        34950000
  /*-------------------------------------------------------------@D8A*/ 35000000
  /*  SO_SECINFO Sender's Security Info Ancillary Data           @D8A*/ 35050000
  /*-------------------------------------------------------------@D8A*/ 35100000
  DCL                                                                   35150000
     1 SecSInfo  Based Bdy(Word) ,                                      35200000
       2 SecsEUid       Fixed(32), /* POSIX Effective UID            */ 35220800
       2 SecsEGid       Fixed(32), /* POSIX Effective GID            */ 35241600
       2 SecsField1     Char(10),                                       35262400
         3 SecsUserID     Char(8), /* MVS User ID padded with zeros  */ 35283200
         3 SecsNull1      Char(1), /* null terminate Mvs User ID     */ 35304000
         3 *              Char(1), /* reserved                       */ 35324800
       2 SecsField2     Char(10),                                       35345600
         3 SecsJobName    Char(8), /* MVS Job Name padded with blanks*/ 35366400
         3 SecsNull2      Char(1), /* null terminate Mvs Job Name    */ 35387200
         3 *              Char(1), /* reserved                       */ 35408000
       2  *             Char(16);  /* Available for Expansion        */ 35428800
                                                                        35450000
                                                                        35500000
                                                                        35550000
