*                                                                       00050000
* %DCL IRACPMB_INCLUDED CHAR EXT;                                       00100000
* %DEACTIVATE IRACPMB_INCLUDED;                                         00150000
* %IF IRACPMB_INCLUDED = '' %THEN                                       00200000
* %DO;                                                                  00250000
*/* Macro made bi-lingual on 98096. CBGEN compile date 98009         */ 00300000
*% /*                                                                   00350000
         MACRO                                                          00400000
         IRACPMB &DSECT=YES,&LIST=YES,&TITLE=YES,&CPMB=YES,            *00425000
               &CPMB_CHP_ENTRY=COND,&CMC2=COND,&CMC2CMG2=COND,         *00450000
               &CPM2=COND,&CPM2CMG1=COND,&CPM2CMG2=COND                 00475000
         GBLC  &IRACPMB_INCLUDED                                        00500000
         GBLC  &ZCBPRINT                                                00550000
&IRACPMB_INCLUDED SETC 'YES'                                            00600000
         AIF   ('&LIST' EQ 'NONE').P0                                   00630000
         AIF   ('&TITLE' EQ 'NO').P5                                    00660000
 TITLE   'IRACPMB  - Channel Path Measurement Block             '       00690000
.P5      ANOP                                                           00720000
**/ IRACPMB_1:;                                                         00750000
*/* START OF SPECIFICATIONS ******************************************/ 00800000
*/**** PROPRIETARY_STATEMENT******************************************/ 00850000
*/*01* PROPRIETARY STATEMENT=                                        */ 00900000
*/*                                                                  */ 00912500
*/*  EXTERNAL CLASSIFICATION: GUPI                                   */ 00925000
*/*  END OF EXTERNAL CLASSIFICATION:                                 */ 00937500
*/*                                                                  */ 00950000
*/*  COPYRIGHT =                                                     */ 01000000
*/*      LICENSED MATERIALS - PROPERTY OF IBM                        */ 01050000
*/*      "RESTRICTED MATERIALS OF IBM"                               */ 01100000
*/*      5647-A01 (C) COPYRIGHT IBM CORP. 1999                       */ 01150000
*/**** END_OF_PROPRIETARY_STATEMENT***********************************/ 01250000
*/*                                                                  */ 01300000
*/*01* DESCRIPTIVE NAME:  Channel Path Measurement Block             */ 01350000
*/*02*  ACRONYM:   CPMB                                              */ 01400000
*/*02*  ACRONYM:   CPM2                                      @WA38548*/ 01416600
*/*02*  ACRONYM:   CMC2                                      @WA38548*/ 01433200
*/*                                                                  */ 01450000
*/*01* MACRO NAME: IRACPMB                                           */ 01500000
*/*                                                                  */ 01550000
*/*01* DSECT NAME:                                                   */ 01600000
*/*       CPMB - Complete mapping                                    */ 01650000
*/*       CPMB_CHP_ENTRY - mapping for one channel path entry        */ 01700000
*/*                                                                  */ 01750000
*/*01* COMPONENT:  SRM (SC1CX)                                       */ 01800000
*/*                                                                  */ 01850000
*/*01* EYE-CATCHER: None                                             */ 01900000
*/*                                                                  */ 01950000
*/*01* STORAGE ATTRIBUTES:                                           */ 02000000
*/*02*  SUBPOOL:   245                                               */ 02050000
*/*02*  KEY:       Key 0                                             */ 02100000
*/*02*  RESIDENCY: Above 16MB                                        */ 02150000
*/*                                                                  */ 02200000
*/*01* SIZE:                                                         */ 02250000
*/*           CMC2           -- X'2000' bytes                        */ 02258300
*/*           CMC2CMG2       -- X'0014' bytes                        */ 02266600
*/*           CPM2           -- X'2000' bytes                        */ 02274900
*/*           CPM2CMG1       -- X'001C' bytes                        */ 02283200
*/*           CPM2CMG2       -- X'001C' bytes                        */ 02291500
*/*           CPMB           -- X'1000' bytes                        */ 02300000
*/*           CPMB_CHP_ENTRY -- X'0008' bytes                        */ 02350000
*/*                                                                  */ 02400000
*/*01* CREATED BY:                                                   */ 02450000
*/*     IEAVNP1F when the Channel Path Measurement Facility exists.  */ 02500000
*/*     IRASRCHM when switching between Compatability Mode and       */ 02516600
*/*      Extended Measurement Mode (IRARMI14) and vice versa.@WA38548*/ 02533300
*/*                                                                  */ 02550000
*/*01* POINTED TO BY:                                                */ 02600000
*/*                                                                  */ 02609000
*/*     Original Channel Path Measurement Format                     */ 02618000
*/*       CMCTCPMB field of Channel Measurement Control Table (CMCT) */ 02627000
*/*                                                                  */ 02636000
*/*     Channel Measurement Characterisitics Table                   */ 02645000
*/*       CMCTMCM2 field of Channel Measurement Control              */ 02654000
*/*        Table (CMCT)                                      @WA38548*/ 02663000
*/*     Extended Channel Path Measurement Format                     */ 02672000
*/*       CMCTCPM2 field of Channel Measurement Control              */ 02681000
*/*        Table (CMCT)                                      @WA38548*/ 02690500
*/*                                                                  */ 02700000
*/*01* SERIALIZATION: None                                           */ 02750000
*/*                                                                  */ 02800000
*/*01* FUNCTION:                                                     */ 02850000
*/*02*   MVS provides a Channel Path Measurement Facility (CPMF)     */ 02900000
*/*      which allows monitoring programs such as RMF to report      */ 02950000
*/*      channel utilization information. The CPMF presents the      */ 03000000
*/*      information in this control block, called the Channel Path  */ 03050000
*/*      Measurement Block (CPMB).  CPMF can be operating in one of  */ 03064200
*/*      two modes as indicated by the CMCTCpmfMode of the CMCT      */ 03078400
*/*      (IRACMCT).  The two modes of operation are CPMF             */ 03092600
*/*      Compatability Mode and Extended Measurement Mode.           */ 03106800
*/*      The system may switch between the two modes of operation    */ 03121000
*/*      at any time.                                        @WA38548*/ 03135500
*/*                                                                  */ 03150000
*/*02    The following applies to both Compatability Mode            */ 03200000
*/*      and Extended Measurement Mode:                              */ 03250000
*/*                                                                  */ 03500000
*/*      When provided for in  the machine, MVS automatically        */ 03550000
*/*      activates the CPMF at IPL and does not deactivate it        */ 03600000
*/*      unless an internal malfunction occurs. When such a          */ 03650000
*/*      malfunction occurs, MVS may reactivate the CPMF, and        */ 03700000
*/*      indicates this fact to the monitoring program via the       */ 03750000
*/*      CMCTCRCT field of the CMCT.                                 */ 03800000
*/*      The system may switch between the two modes of operation    */ 03816600
*/*      at any time.                                                */ 03833200
*/*                                                                  */ 03850000
*/*      The CPMF updates the CPMB at least once every four          */ 03900000
*/*      seconds with information about the activity of the          */ 03950000
*/*      channel paths configured to the system or to the            */ 04000000
*/*      logical partition.  When updating the CPMB, the CPMF        */ 04050000
*/*      does not update all channel path measurement entries        */ 04100000
*/*      simultaneously.                                             */ 04150000
*/*                                                                  */ 04350000
*/*      NOTE: The CPMF does not provide utilization information for */ 04350800
*/*      byte multiplexer channel paths.                             */ 04351600
*/*                                                          @WA38548*/ 04352400
*/*02    When CPMF is operating in Compatability Mode                */ 04353200
*/*      the following description applies.                          */ 04354000
*/*                                                                  */ 04354800
*/*      When the central electronics complex (CEC) is in BASIC      */ 04355600
*/*      mode, the CPMB contains information about all channels      */ 04356400
*/*      configured in the system.  When MVS runs in a logical       */ 04357200
*/*      partition of the CEC (LPAR mode), the CPMB contains         */ 04358000
*/*      information about the contribution of that logical          */ 04358800
*/*      partition to the total usage of each channel                */ 04359600
*/*      configured to that logical partition.                       */ 04360400
*/*                                                          @WA38548*/ 04361200
*/*02    When CPMF is operating in Extended Measurement Mode         */ 04362000
*/*      the following description applies.                          */ 04362800
*/*                                                                  */ 04363600
*/*      When the central electronics complex (CEC) is in BASIC      */ 04364400
*/*      mode, the CPM2 contains information about all channels      */ 04365200
*/*      configured in the system.  When MVS runs in a logical       */ 04366000
*/*      partition of the CEC (LPAR mode), the CPMB contains         */ 04366800
*/*      information about the contribution of that logical          */ 04367600
*/*      partition to the total usage of each channel                */ 04368400
*/*      configured to that logical partition as well as the         */ 04369200
*/*      total usage of that channel path by all LPARs.              */ 04370000
*/*                                                                  */ 04370800
*/*      A Channel Measurement Characteristics (CMC2) table is       */ 04371600
*/*      built that describes the measurement group that each        */ 04372400
*/*      channel path belongs to.  The Channel Measurement Group     */ 04373200
*/*      determines the contents and format of the channel-          */ 04374000
*/*      utilization-entry for the associated channel path.          */ 04374800
*/*                                                                  */ 04375600
*/*      The Channel Path Measurement Extensions block (CPM2)        */ 04376400
*/*      contains a channel-utilization-entry for each possible      */ 04377200
*/*      channel path in the system.  The contents and format        */ 04378000
*/*      of each channel-utilization-entry are determined by         */ 04378800
*/*      the channel-measurement-group contained in the CMC2         */ 04379600
*/*      entry for the corresponding CHPID.                          */ 04380400
*/*                                                                  */ 04381200
*/*      No sample count is stored by CPMF when running in           */ 04382000
*/*      Extended Mesurement Mode.  The system polls the             */ 04382800
*/*      channel subsystem every 20 seconds to discover if the       */ 04383600
*/*      facility is still active.  If not active, the system        */ 04384400
*/*      will attempt to restart CPMF.                               */ 04385200
*/*                                                          @WA38548*/ 04386300
*/*                                                                  */ 04387500
*/*01* METHOD OF ACCESS:                                             */ 04400000
*/*                                                                  */ 04450000
*/*02*  ASM:                                                         */ 04500000
*/*        DSECT=NO  If DSECT is not to be produced.                 */ 04550000
*/*                                                                  */ 04600000
*/*        USING on CPMB gives addressability to main block          */ 04633300
*/*        for Compatability Mode.                                   */ 04666600
*/*                                                                  */ 04700000
*/*        USING on CPMB_CHP_ENTRY gives addressability to the       */ 04750000
*/*        symbols in the mapping for an individual channel path     */ 04800000
*/*        entry.                                                    */ 04850000
*/*                                                                  */ 04900000
*/*        USING on CPM2 gives addressability to main block          */ 04903500
*/*        for Extended Measurement Mode.                            */ 04907000
*/*                                                                  */ 04910500
*/*        Using on CPM2CMG1 gives addressability to the symbols     */ 04914000
*/*        in the mapping for an individual channel path entry       */ 04917500
*/*        when running in Extended Measurement Mode for channel-    */ 04921000
*/*        measurement-group-1.                                      */ 04924500
*/*                                                                  */ 04928000
*/*        Using on CPM2CMG2 gives addressability to the symbols     */ 04931500
*/*        in the mapping for an individual channel path entry       */ 04935000
*/*        when running in Extended Measurement Mode for channel-    */ 04938500
*/*        measurement-group-2.                                      */ 04942000
*/*                                                          @WA38548*/ 04946000
*/*02*  PL/AS:                                                       */ 04950000
*/*        For Compatability Mode:                                   */ 04966600
*/*                                                                  */ 04983200
*/*        CVTOPCTP->RMCTCMCT->CMCTCPMB, which contains the          */ 05000000
*/*        address of the CPMB.  The CPMB is automatically declared  */ 05050000
*/*        as based on CMCTCPMB.                                     */ 05100000
*/*                                                                  */ 05150000
*/*        To make use of the CPMB_CHP_ENTRY structure, you must     */ 05200000
*/*        declare your own pointer and RESPECIFY the structure as   */ 05250000
*/*        based on it. E.g.                                         */ 05300000
*/*          RFY CPMB_CHP_ENTRY BASED(your_ptr);                     */ 05350000
*/*                                                                  */ 05400000
*/*        For Extended Measurement Mode:                            */ 05403700
*/*                                                                  */ 05407400
*/*        CVTOPCTP->RMCTCMCT->CMCTCPM2, which contains the          */ 05411100
*/*        address of the CPM2.  The CPMB is automatically declared  */ 05414800
*/*        as based on CMCTCPM2.                                     */ 05418500
*/*                                                                  */ 05422200
*/*        CVTOPCTP->RMCTCMCT->CMCTCMC2, which contains the          */ 05425900
*/*        address of the CMC2.  The CMC2 is automatically declared  */ 05429600
*/*        as based on CMCTCMC2.                                     */ 05433300
*/*                                                                  */ 05437000
*/*        To make use of the CMC2CMG2 structure, you must           */ 05440700
*/*        declare your own pointer and RESPECIFY the structure as   */ 05444400
*/*        based on it. E.g.                                         */ 05448100
*/*          RFY CMC2CMG2 BASED(your_ptr)                            */ 05451800
*/*                                                                  */ 05455500
*/*        To make use of the CPM2CMG1 structure, you must           */ 05459200
*/*        declare your own pointer and RESPECIFY the structure as   */ 05462900
*/*        based on it. E.g.                                         */ 05466600
*/*          RFY CPM2CMG1 BASED(your_ptr)                            */ 05470300
*/*                                                                  */ 05474000
*/*        To make use of the CPM2CMG2 structure, you must           */ 05477700
*/*        declare your own pointer and RESPECIFY the structure as   */ 05481400
*/*        based on it. E.g.                                         */ 05485100
*/*          RFY CPM2CMG2 BASED(your_ptr)                            */ 05488800
*/*                                                          @WA38548*/ 05492500
*/*01* STATUS: HBB6608                                               */ 05496200
*/*                                                                  */ 05500000
*/*01* DELETED BY: IEAVNP1F in the event that the CPMF cannot be     */ 05550000
*/*                activated.  Otherwise, once the CPMF is           */ 05600000
*/*                successfully started, the CPMB will remain for    */ 05650000
*/*                the life of the IPL, regardless of whether or not */ 05700000
*/*                the Channel Path Measurement Facility is          */ 05750000
*/*                functional.  Even if the CPMF mode switches       */ 05770000
*/*                between Compatability Mode and Extended Mode,     */ 05790000
*/*                the CPMB, CMC2 and CPM2 remain allocated.         */ 05810000
*/*                                                          @WA38548*/ 05830000
*/*                                                                  */ 05850000
*/*01* FREQUENCY:   One per system image                             */ 05900000
*/*                                                                  */ 05950000
*/*01* DEPENDENCIES: None                                            */ 06000000
*/*                                                                  */ 06050000
*/*01* DISTRIBUTION LIBRARY: AMACLIB                                 */ 06100000
*/*                                                                  */ 06150000
*/*01* CHANGE ACTIVITY:                                              */ 06200000
*/* $H0=PRSMM   HBB4430  920323 PD88MF: PR/SM MIF Support        @H0A*/ 06250000
*/* $D1=DKB0021 HBB4430  920423 PD88MF: Use IRACPMB to document the  */ 06300000
*/*                                     CDPI/GUPI interface and make */ 06350000
*/*                                     IRACPMB bilingual        @D1A*/ 06400000
*/* $D2=DKB0106 HBB4430  920617 PD88MF: Change doc for interval at   */ 06412500
*/*                                     which CPMB is checked to 20  */ 06425000
*/*                                     seconds.                 @D2A*/ 06437500
*/* $P1=PKB4056 HBB4430  920901 PD88MF: Change doc errors        @P1A*/ 06443700
*/* OY58186 HBB4430  921020 PD44XL: Change doc errors in support     */ 06445800
*/*                                 of TRSQ PTM PKB4260.     @YA58186*/ 06447900
*/* $OW38548    HBB6608  980406 PDKN:   FICON Support                */ 06448900
*/*                                                                  */ 06450000
*/* END OF SPECIFICATIONS ********************************************/ 06500000
*% /*                                                                   06550000
.P0      ANOP                                                           06575000
         AIF   ('&ZCBPRINT' EQ 'NO').P1                                 06600000
         AIF   ('&LIST' EQ 'YES').P2                                    06650000
.P1      ANOP                                                           06700000
         PUSH  PRINT                                                    06750000
         PRINT OFF                                                      06800000
.P2      ANOP                                                           06850000
         AIF   ('&CPMB' EQ 'NO').L0002                                  06900000
         AIF   ('&DSECT' EQ 'YES').L0003                                06950000
         AIF   ('&CPMB' NE 'YES').L0002                                 07000000
CPMB     DS    0D        Channel Path Measurement Block                 07050000
         AGO   .L0004                                                   07100000
.L0003   ANOP                                                           07150000
CPMB     DSECT           Channel Path Measurement Block                 07200000
.L0004   ANOP                                                           07250000
         DS    1CL0004   Reserved                                       07300000
CPMB_SAMPLE_COUNT DS 1FL4 CPMF sample count - updated whenever new     *07350000
                         data is stored in the CPMB. The CPMF          *07400000
                         increments this field by one each time it     *07450000
                         updates the CPMB. When the system activates   *07500000
                         or reactivates the CPMF, this field's initial *07550000
                         value is undefined. This field wraps around   *07593300
                         to zero after it reaches 4,294,967,295. No    *07636600
                         alert will be issued if a wrap occurs. If     *07679900
                         this value does not change during a 20-second *07723200
                         interval, the CPMF has stopped. If this field  07766500
*                        changes between two observations, either the  *07809800
                         CPMF operated normally, incrementing this     *07853100
                         field between the observations, or the system *07896400
                         deactivated the CPMF, and then reactivated    *07946400
                         it.                                            07996400
CPMB_CHP_DATA DS 1CL4088 Channel path data, comprised of a list of 256 *08069600
                         channel path measurement entries. Each entry  *08112900
                         (from 0 to 255) is associated with the        *08156200
                         same-numbered channel path.                    08200000
CPMB_LEN EQU   *-CPMB                                                   08250000
.L0002   ANOP                                                           08300000
*                                                                       08301100
* ********************************************************************  08302200
* *                                                                  *  08303300
* * CPMB_CHP_ENTRY                                                   *  08304400
* *   CPMB_CUM_CHP_BUSY - Cumulative channel path busy.              *  08305500
* *            In this field, the CPMF accumulates                   *  08306600
* *            channel-path-busy intervals in 128-microsecond        *  08307700
* *            units.  In Basic mode, the CPMF accumulates all       *  08308800
* *            channel-path-busy intervals.  In LPAR mode, the CPMF  *  08309900
* *            accumulates only that logical partition's             *  08311000
* *            channel-path-busy intervals.  When this field is      *  08312100
* *            negative (bit 0 set to 1), the CPMF has accumulated   *  08313200
* *            no channel-path-busy intervals for this logical       *  08314300
* *            partition.  This field's initial positive value is    *  08315400
* *            unpredictable either when the field changes from      *  08316500
* *            negative to positive or when the system activates or  *  08317600
* *            reactivates the CPMF.  After the value in this field  *  08318700
* *            reaches approximately 76.36 hours, it wraps around    *  08319800
* *            to zero with no alert, and the CPMF continues to      *  08320900
* *            accumulate channel-path-busy intervals.                  08322000
* *   CPMB_CUM_CHP_TIME - Cumulative channel path elapsed time.      *  08323100
* *             In this field, the CPMF accumulates total elapsed    *  08324100
* *             measurement time for this channel path, in           *  08325100
* *             128-microsecond units. The CPMF evaluates and        *  08326100
* *             stores this field and the CPMB_CUM_CHP_BUSY field    *  08327100
* *             concurrently.  The monitoring program can also view  *  08328100
* *             this field as a time stamp that indicates when the   *  08329100
* *             CPMF last evaluated the corresponding                *  08330100
* *             CPMB_CUM_CHP_BUSY field. The monitoring program can  *  08331100
* *             only use this field to calculate time intervals      *  08332100
* *             between measurements for this channel path.          *  08333100
* *             Timestamps for separate entries are independent.     *  08334100
* *             This field's initial value is unpredictable either   *  08335100
* *             when the CPMB_CUM_CHP_BUSY field changes from        *  08336100
* *             negative to positive or when the system activates or *  08337100
* *             reactivates the CPMF.  After the value in this       *  08338100
* *             field reaches approximately 35.79 minutes,              08339100
* *             it wraps around to zero with no alert, and the CPMF  *  08340100
* *             continues to accumulate total elapsed measurement    *  08341100
* *             time for this channel path.                             08342100
* *                                                                  *  08344000
* ********************************************************************  08345100
*                                                                       08346200
*                                                                       08347300
         AIF   ('&CPMB_CHP_ENTRY' EQ 'NO').L0005                        08350000
         AIF   ('&DSECT' EQ 'YES').L0006                                08400000
         AIF   ('&CPMB_CHP_ENTRY' NE 'YES').L0005                       08450000
CPMB_CHP_ENTRY DS 0F     A channel path measurement entry               08500000
         AGO   .L0007                                                   08550000
.L0006   ANOP                                                           08600000
CPMB_CHP_ENTRY DSECT     A channel path measurement entry               08650000
.L0007   ANOP                                                           08700000
CPMB_CUM_CHP_BUSY DS 0FL4 Cumulative channel path busy.                 08716600
CPMB_CHP_ENTRY_NOT_VALID EQU X'80' Validity flag for the CHP entry. 0  *08733200
                         - Entry is valid. 1 - Entry is not valid.      08749800
         DS    1BL.031   CHP busy count data                            08766400
         ORG   CPMB_CUM_CHP_BUSY+X'00000004'                            08783000
CPMB_CHP_FLAGS DS 0BL1   Flags.                                         08833000
CPMB_SHARED_CHANNEL EQU X'80' Shared Channel Indicator. 1 - The        *09700000
                         channel is shared. 0 - The channel is         *09750000
                         unshared.                                      09800000
         ORG   CPMB_CHP_FLAGS+X'00000001'                               09850000
CPMB_CUM_CHP_TIME DS 1FL3 Cumulative channel path elapsed time.         09900000
CPMB_CHP_ENTRY_LEN EQU *-CPMB_CHP_ENTRY                                 11050000
.L0005   ANOP                                                           11100000
*                                                                       11100100
* ********************************************************************  11100200
* *                                                                  *  11100300
* * Channel Measurement Characteristics for Extended CPMF Data       *  11100400
* *                                                                  *  11100500
* *      CMC2CMG                                                     *  11100600
* *        Channel-Measurement Group (CMG):  Byte 3 of word 1        *  11100700
* *        contains a binary value that specifies the                *  11100800
* *        measurement group to which the specified CHPID            *  11100900
* *        belongs.  This value  determines  the  contents  and      *  11101000
* *        format  of  the  CMG-dependent                            *  11101100
* *        channel-measurement-characteristics  area,  and the       *  11101200
* *        format and contents of the channel-utilization entry      *  11101300
* *        for the  associated  channel  path,  in  the              *  11101400
* *        channel-utilization     block.                            *  11101500
* *                                                                     11101600
* ********************************************************************  11101700
*                                                                       11101800
*                                                                       11101900
         AIF   ('&CMC2' EQ 'NO').L0008                                  11102000
         AIF   ('&DSECT' EQ 'YES').L0009                                11102100
         AIF   ('&CMC2' NE 'YES').L0008                                 11102200
CMC2     DS    0D        Channel Measurement Characteristics for CPM2   11102300
         AGO   .L000A                                                   11102400
.L0009   ANOP                                                           11102500
CMC2     DSECT           Channel Measurement Characteristics for CPM2   11102600
.L000A   ANOP                                                           11102700
CMC2CHANMEASUREMENTCHARBLOCK DS 0CL0032 Channel Measurement            *11102800
                         Characterisitics Block                         11102900
CMC2FLAGS DS   0BL1      Channel Measurement Characterisitics Flags     11103000
CMC2NOTVALID EQU X'80'   Not Valid - when 0 indicates that information *11103100
                         is provided in this CMC block                  11103200
CMC2SHAREDCHPID EQU X'40' Shared channel path                           11103300
         ORG   CMC2FLAGS+X'00000001'                                    11103400
         DS    1CL0002   Reserved                                       11103500
CMC2CHPID DS   1FL1      Channel path ID                                11103600
CMC2MASKBYTE DS 0BL1     Mask                                           11103700
CMC2CMCVALIDITYMASK EQU X'F8' CMC Validity mask, bits 0-4 correspond   *11103800
                         to words 3-7 of the channel measurements      *11103900
                         characterisitcs block. When 1, the            *11104000
                         corresponding word has meaning                 11104100
         ORG   CMC2MASKBYTE+X'00000001'                                 11104200
         DS    1CL0002   Reserved                                       11104300
CMC2CMG  DS    1FL1      Channel measurement group for this CHPID       11104400
         DS    1CL0004   Reserved                                       11104500
CMC2DATA DS    1CL0020   Channel measurement characterisitics data      11104600
*                                                                       11104700
* ********************************************************************  11104800
* *                                                                  *  11104900
* * Values for the CMC2CMG field, the channel measurement group      *  11105000
* * types.                                                           *  11105100
* *                                                                     11105200
* ********************************************************************  11105300
*                                                                       11105400
*                                                                       11105500
CMCCMG1  EQU   1         Channel Measurement Group one                  11105600
CMCCMG2  EQU   2         Channel Measurement Group two                  11105700
         ORG   CMC2+X'00002000'                                         11105800
CMC2_LEN EQU   *-CMC2                                                   11105900
.L0008   ANOP                                                           11106000
*                                                                       11106100
* ********************************************************************  11106200
* *                                                                  *  11106300
* * The CMC2DATA field is not valid for any Channel Measurement      *  11106400
* * Group (CMC2CMG) other than 2.                                    *  11106500
* *                                                                     11106600
* ********************************************************************  11106700
* ********************************************************************  11106800
* *                                                                  *  11106900
* * CMC2CMG2 maps the CMC2DATA field when the Channel Measurement    *  11107000
* * Group (CMC2CMG) for this CHPID is 2.                             *  11107100
* *                                                                  *  11107200
* *      CMC2MaxBusyCycles                                           *  11107300
* *        Maximum Bus Cycles:  Word 3 Contains an unsigned          *  11107400
* *        binary integer specifying the  maximum  internal bus      *  11107500
* *        cycles per second, available for I/O operations on        *  11107600
* *        the specified channel path.                               *  11107700
* *                                                                  *  11107800
* *      CMC2MaxChannelWorkUnits                                     *  11107900
* *        Maximum Channel Work Units:  Word 4 contains an           *  11108000
* *        unsigned  binary  integer specifying  the maximum         *  11108100
* *        number of channel work units that can be performed        *  11108200
* *        per second by the specified channel path.                 *  11108300
* *                                                                  *  11108400
* *      CMC2MaxWriteDataUnits                                       *  11108500
* *        Maximum Write Data Units:  Word 5  contains  an           *  11108600
* *        unsigned  binary  integer specifying the maximum          *  11108700
* *        number of data units that can be written per second       *  11108800
* *        using the specified channel path.                         *  11108900
* *                                                                  *  11109000
* *      CMC2MaxReadDataUnits                                        *  11109100
* *        Maximum  Read  Data  Units:   Word  6  contains an        *  11109200
* *        unsigned binary integer specifying the maximum            *  11109300
* *        number of data units that can be  read  per  second       *  11109400
* *        using the specified channel path.                         *  11109500
* *                                                                  *  11109600
* *      CMC2DataUnitSize                                            *  11109700
* *        Data  Unit  Size:   Word  7  contains  an  unsigned       *  11109800
* *        nonzero binary integer specifying the number of           *  11109900
* *        bytes of data that are contained in a  data  unit         *  11110000
* *        for the specified channel path.                           *  11110100
* *                                                                     11110200
* ********************************************************************  11110300
*                                                                       11110400
*                                                                       11110500
         AIF   ('&CMC2CMG2' EQ 'NO').L000B                              11110600
         AIF   ('&DSECT' EQ 'YES').L000C                                11110700
         AIF   ('&CMC2CMG2' NE 'YES').L000B                             11110800
CMC2CMG2 DS    0F        Channel Measurement Characteristics for       *11110900
                         channel measurement group 2                    11111000
         AGO   .L000D                                                   11111100
.L000C   ANOP                                                           11111200
CMC2CMG2 DSECT           Channel Measurement Characteristics for       *11111300
                         channel measurement group 2                    11111400
.L000D   ANOP                                                           11111500
CMC2MAXBUSCYCLES DS 1FL4 Maximum bus cycles per second                  11111600
CMC2MAXCHANNELWORKUNITS DS 1FL4 Maximum channel work units per second   11111700
CMC2MAXWRITEDATAUNITS DS 1FL4 Maximum write data units per second       11111800
CMC2MAXREADDATAUNITS DS 1FL4 Maximum read data units per second         11111900
CMC2DATAUNITSIZE DS 1FL4 Data unit size                                 11112000
CMC2CMG2_LEN EQU *-CMC2CMG2                                             11112100
.L000B   ANOP                                                           11112200
*                                                                       11112300
* ********************************************************************  11112400
* *                                                                  *  11112500
* * Channel Measurement Block Extended (format 2).                   *  11112600
* *                                                                  *  11112700
* *        CPM2ChannelUtilizationEntryInfoValityMask                 *  11112800
* *          Channel-Utilization-Information  Validity  (CUIV):      *  11112900
* *          Byte  0  of  word   0 contains  a  map  that            *  11113000
* *          applies to the contents of the channel-utilization      *  11113100
* *          entry.    The  bits  of  the  CUIV  map  indicate       *  11113200
* *          which  words   of   the channel-utilization entry       *  11113300
* *          contain valid channel-utilization information.  Bits    *  11113400
* *          0-7   of   the   CUIV   field   correspond  to          *  11113500
* *          words  0-7  of  the channel-utilization entry,          *  11113600
* *          respectively. A special  case  is  that  bit  0         *  11113700
* *          corresponds  to  bytes 1-3 of word 0 (the contents      *  11113800
* *          of byte 0 of word 0 are always valid).   When one, a    *  11113900
* *          bit of the  CUIV  field  indicates  that  the           *  11114000
* *          corresponding  word  contains  valid                    *  11114100
* *          channel-utilization information. When zero, a bit of    *  11114200
* *          the CUIV field indicates that the corresponding         *  11114300
* *          word  does not contain valid channel-utilization        *  11114400
* *          information.                                            *  11114500
* *                                                                  *  11114600
* *        CPM2TimeStamp                                             *  11114700
* *          Time-stamp:   Bits  8-31  of  word  0  contain  a       *  11114800
* *          time-stamp  value  that identifies when                 *  11114900
* *          channel-utilization information was last  stored  in    *  11115000
* *          this channel-utilization  entry.    The time-stamp      *  11115100
* *          is based on a 24 bit channel subsystem timer that is    *  11115200
* *          incremented by adding one  to  the  rightmost  bit      *  11115300
* *          position  every 128 microseconds.  The accumulated      *  11115400
* *          value of the time-stamp is approximately modulo         *  11115500
* *          35.79 minutes and the program is not alerted  when      *  11115600
* *          an overflow occurs.  Each   channel-utilization         *  11115700
* *          entry   is  updated  independently  of  other           *  11115800
* *          channel-utilization entries. Therefore, each            *  11115900
* *          time-stamp  applies  only  to the                       *  11116000
* *          channel-utilization entry that contains it.  The        *  11116100
* *          initial value of the time-stamp is unpredictable.       *  11116200
* *                                                                     11116300
* ********************************************************************  11116400
*                                                                       11116500
*                                                                       11116600
         AIF   ('&CPM2' EQ 'NO').L000E                                  11116700
         AIF   ('&DSECT' EQ 'YES').L000F                                11116800
         AIF   ('&CPM2' NE 'YES').L000E                                 11116900
CPM2     DS    0D        Channel Path Measurement Block - format 2      11117000
         AGO   .L0010                                                   11117100
.L000F   ANOP                                                           11117200
CPM2     DSECT           Channel Path Measurement Block - format 2      11117300
.L0010   ANOP                                                           11117400
CPM2CHANNELUTILIZATIONENTRY DS 0CL0032                                  11117500
*                                                                       11117600
*                                      Channel Utilization Entry        11117700
*                                                                       11117800
*                                                                       11117900
CPM2CHANNELUTILINFOVALITYMASK DS 1BL1 Channel utilization info         *11118000
                         validity mask, bit positions 0-7 correspond   *11118100
                         to words 0-7 of this channel utilization      *11118200
                         entry                                          11118300
CPM2TIMESTAMP DS 1FL3    Time stamp indicating when data was last      *11118400
                         stored in this CUE, 128 microsecond           *11118500
                         granularity                                    11118600
CPM2DATA DS    1CL0028   Channel measurement group data                 11118700
         ORG   CPM2+X'00002000'                                         11118800
CPM2_LEN EQU   *-CPM2                                                   11118900
.L000E   ANOP                                                           11119000
*                                                                       11119100
* ********************************************************************  11119200
* *                                                                  *  11119300
* * CMG1 maps the CPM2DATA field when the Channel Measurement Group  *  11119400
* * (CMG) for this CHPID is 1.                                       *  11119500
* *                                                                  *  11119600
* *      CMG1TotalChannelBusyTime                                    *  11119700
* *        Channel-Path-Busy  Time  (CPC):   Bits  0-31  of          *  11119800
* *        word   1   contain   the accumulation   of   all          *  11119900
* *        measured  channel-path-busy  intervals  for  the          *  11120000
* *        associated channel path.  The channel path is busy        *  11120100
* *        when  it  is  actively communicating with an              *  11120200
* *        attached control unit or device.  When  the CPC is        *  11120300
* *        operating in LPAR mode, the CPBT value in word 1          *  11120400
* *        includes the channel-path intervals associated with       *  11120500
* *        all of the  logical  partitions that have access to       *  11120600
* *        the associated channel path.  The  time  intervals        *  11120700
* *        are stored into the channel-utilization entry using       *  11120800
* *        a resolution of 128 microseconds.   The accumulated       *  11120900
* *        value  is  approximately modulo  76.36  hours,  and       *  11121000
* *        the  program  is  not alerted when an overflow            *  11121100
* *        occurs.  The initial value in word 1 is                   *  11121200
* *        unpredictable.                                            *  11121300
* *                                                                  *  11121400
* *      CMG1LparChannelBusyTime                                     *  11121500
* *        Channel-Path-Busy Time:  When the CPC is operating        *  11121600
* *        in LPAR mode, bits 0-31 of word 2 contain the             *  11121700
* *        accumulation of measured channel-path-busy intervals      *  11121800
* *        for the associated channel path.  The accumulation        *  11121900
* *        only includes intervals that are associated with the      *  11122000
* *        logical partition that  has  access  to  this             *  11122100
* *        channel  utilization block.   The channel path is         *  11122200
* *        busy when it is actively communicating with an            *  11122300
* *        attached control unit or device.  When the CPC is         *  11122400
* *        operating in basic mode, the contents of word 2 have      *  11122500
* *        no meaning and bit 2 of the Channel Utilization           *  11122600
* *        Information Validity Mask is zero.                        *  11122700
* *                                                                     11122800
* ********************************************************************  11122900
*                                                                       11123000
*                                                                       11123100
         AIF   ('&CPM2CMG1' EQ 'NO').L0011                              11123200
         AIF   ('&DSECT' EQ 'YES').L0012                                11123300
         AIF   ('&CPM2CMG1' NE 'YES').L0011                             11123400
CPM2CMG1 DS    0F        Channel Measurement Group 1                    11123500
         AGO   .L0013                                                   11123600
.L0012   ANOP                                                           11123700
CPM2CMG1 DSECT           Channel Measurement Group 1                    11123800
.L0013   ANOP                                                           11123900
CMG1TOTALCHANNELBUSYTIME DS 1FL4 Channel Path Busy Time, total for the *11124000
                         CHPID                                          11124100
CMG1LPARCHANNELBUSYTIME DS 1FL4 Channel Path Busy Time, just for this  *11124200
                         LPAR                                           11124300
         DS    1CL0020   Reserved                                       11124400
CPM2CMG1_LEN EQU *-CPM2CMG1                                             11124500
.L0011   ANOP                                                           11124600
*                                                                       11124700
* ********************************************************************  11124800
* *                                                                  *  11124900
* * CMG2 maps the CPM2DATA field when the Channel Measurement Group  *  11125000
* * (CMG) for this CHPID is 2.                                       *  11125100
* *                                                                  *  11125200
* *      CMG2TotalBusCycleCount                                      *  11125300
* *        Count of Bus Cycles (CPC):  Word 1 Contains an            *  11125400
* *        unsigned binary  integer that  is  an accumulated         *  11125500
* *        count of the internal bus cycles that have been           *  11125600
* *        used for I/O operations on the associated channel         *  11125700
* *        path.  When  the  count reaches 2(32)-1 it wraps          *  11125800
* *        back to zero.  When  the  CPC  is operating in LPAR       *  11125900
* *        mode, the count includes the internal bus cycles          *  11126000
* *        that were used for I/O operations for  all  logical       *  11126100
* *        partitions that have access to the associated             *  11126200
* *        channel path.                                             *  11126300
* *                                                                  *  11126400
* *      CMG2TotalChannelWorkUnitCount                               *  11126500
* *        Count  of  Channel  Work  Units (CPC):  Word 2            *  11126600
* *        contains an unsigned binary integer that is an            *  11126700
* *        accumulated count of the number of channel  work          *  11126800
* *        units that  have  been performed by the associated        *  11126900
* *        channel path.  When the count reaches 2(32)-1 it          *  11127000
* *        wraps back to zero.  When the CPC is operating in         *  11127100
* *        LPAR mode, the  count  includes  the  channel work        *  11127200
* *        units that were performed for all logical partitions      *  11127300
* *        that have access to the associated channel path.          *  11127400
* *                                                                  *  11127500
* *      CMG2LparChannelWorkUnitCount                                *  11127600
* *        Count of Channel Work Units:  When the CPC is             *  11127700
* *        operating in LPAR mode, word 3  contains an unsigned      *  11127800
* *        binary integer that is an accumulated count of the        *  11127900
* *        number of channel work units that have been               *  11128000
* *        performed  by  the  associated channel  path.  When       *  11128100
* *        the count reaches 2(32)-1 it wraps back to zero.          *  11128200
* *        The count includes only the channel work units that       *  11128300
* *        were  performed  for  the logical partition that has      *  11128400
* *        access to this channel utilization block.  When  the      *  11128500
* *        CPC  is operating in basic mode, the contents of          *  11128600
* *        word 3 have no meaning and bit 3 of the Channel           *  11128700
* *        Utilization Information Validity Mask is zero.            *  11128800
* *                                                                  *  11128900
* *      CMG2TotalWriteDataUnits                                     *  11129000
* *        Count of Data Units Written (CPC):  Word 4  contains      *  11129100
* *        an  unsigned  binary integer that is an accumulated       *  11129200
* *        count of the number of data units that have been          *  11129300
* *        written  using  the associated channel path.  When        *  11129400
* *        the count reaches 2(32)-1 it wraps back to zero.          *  11129500
* *        The channel-measurement-characteristics block for         *  11129600
* *        the  associated  channel path specifies the number        *  11129700
* *        of bytes contained in a data unit.  When  the CPC is      *  11129800
* *        operating in LPAR mode, the count includes the data       *  11129900
* *        units that were written for all logical  partitions       *  11130000
* *        that  have  access  to  the associated channel path.      *  11130100
* *                                                                  *  11130200
* *      CMG2LparWriteDataUnits                                      *  11130300
* *        Count of Data Units Written:  When the CPC is             *  11130400
* *        operating in LPAR mode, word 5  contains an unsigned      *  11130500
* *        binary integer that is an accumulated count of the        *  11130600
* *        number of data units that have been written using         *  11130700
* *        the  associated  channel path.    When  the count         *  11130800
* *        reaches 2(32)-1 it wraps back to zero.  The count         *  11130900
* *        includes only the data units that were written for        *  11131000
* *        the  logical  partition that has access to this           *  11131100
* *        channel-utilization block.  When  the  CPC  is            *  11131200
* *        operating in basic mode, the contents of word 5 have      *  11131300
* *        no meaning and bit 5 of the Channel Utilization           *  11131400
* *        Information Validity Mask is zero.                        *  11131500
* *                                                                  *  11131600
* *      CMG2TotalReadDataUnits                                      *  11131700
* *        Count of Data Units Read  (CPC):   Word  6  contains      *  11131800
* *        an  unsigned  binary integer that is an accumulated       *  11131900
* *        count of the number of data units that have been          *  11132000
* *        read  using  the  associated  channel path.   When        *  11132100
* *        the count reaches 2(32)-1 it wraps back to zero.          *  11132200
* *        The channel-measurement-characteristics block for         *  11132300
* *        the  associated  channel path specifies the number        *  11132400
* *        of bytes contained in a data unit.  When  the CPC is      *  11132500
* *        operating in LPAR mode, the count includes the data       *  11132600
* *        units that were read  for  all  logical  partitions       *  11132700
* *        that  have  access  to  the associated channel path.      *  11132800
* *                                                                  *  11132900
* *      CMG2LparReadDataUnits                                       *  11133000
* *        Count  of Data Units Read:  When the CPC is               *  11133100
* *        operating in LPAR mode, word 7 contains an unsigned       *  11133200
* *        binary integer that is an accumulated  count  of          *  11133300
* *        the number  of  data  units  that  have been read         *  11133400
* *        using the associated channel path.  When the count        *  11133500
* *        reaches 2(32)-1 it wraps back to zero.    The  count      *  11133600
* *        includes only the data units that were read for the       *  11133700
* *        logical partition that has access to this                 *  11133800
* *        channel-utilization block.  When  the  CPC  is            *  11133900
* *        operating in basic mode, the contents of word 7 have      *  11134000
* *        no meaning and bit 7 of the Channel Utilization           *  11134100
* *        Information Validity Mask is zero.                        *  11134200
* *                                                                  *  11134300
* *                                                                     11134400
* ********************************************************************  11134500
*                                                                       11134600
*                                                                       11134700
         AIF   ('&CPM2CMG2' EQ 'NO').L0014                              11134800
         AIF   ('&DSECT' EQ 'YES').L0015                                11134900
         AIF   ('&CPM2CMG2' NE 'YES').L0014                             11135000
CPM2CMG2 DS    0F        Channel Measurement Group 2                    11135100
         AGO   .L0016                                                   11135200
.L0015   ANOP                                                           11135300
CPM2CMG2 DSECT           Channel Measurement Group 2                    11135400
.L0016   ANOP                                                           11135500
CMG2TOTALBUSCYCLECOUNT DS 1FL4 Count of Bus Cycles, total for the      *11135600
                         CHPID                                          11135700
CMG2TOTALCHANNELWORKUNITCOUNT DS 1FL4 Count of Channel Work Units,     *11135800
                         total for the CHPID                            11135900
CMG2LPARCHANNELWORKUNITCOUNT DS 1FL4 Count of Channel Work Units, just *11136000
                         for this LPAR                                  11136100
CMG2TOTALWRITEDATAUNITS DS 1FL4 Count of Data Units Written, total for *11136200
                         the CHPID                                      11136300
CMG2LPARWRITEDATAUNITS DS 1FL4 Count of Data Units Written, just for   *11136400
                         this LPAR                                      11136500
CMG2TOTALREADDATAUNITS DS 1FL4 Count of Data Units Read, total for the *11136600
                         CHPID                                          11136700
CMG2LPARREADDATAUNITS DS 1FL4 Count of Data Units Read, just for this  *11136800
                         LPAR                                           11136900
CPM2CMG2_LEN EQU *-CPM2CMG2                                             11137000
.L0014   ANOP                                                           11137100
         AIF   ('&ZCBPRINT' EQ 'NO').P3                                 11150000
         AIF   ('&LIST' EQ 'YES').P4                                    11200000
.P3      ANOP                                                           11250000
         POP   PRINT                                                    11300000
.P4      ANOP                                                           11350000
.P_EXIT  ANOP                                                           11400000
         MEND                                                           11450000
**/ IRACPMB_2:;                                                         11500000
* %IRACPMB_INCLUDED = 'YES';                                            11550000
* %DCL ZCBPRINT CHAR EXT;                                               11600000
* %DEACTIVATE ZCBPRINT;                                                 11650000
* %DCL IRACPMB_LIST CHAR EXT;                                           11700000
* %DEACTIVATE IRACPMB_LIST;                                             11750000
* %IF IRACPMB_LIST ^= 'NO' &                                            11800000
*    ZCBPRINT ^= 'NO' %THEN                                             11850000
*   %GOTO IRACPMB_3;                                                    11900000
*   @LIST PUSH NOECHO;                                                  11950000
*   @LIST NOASSEMBLE NOECHO;                                            12000000
*   @LIST OFF C NOECHO;                                                 12050000
* %IRACPMB_3:;                                                          12100000
*/* Start of PL/X Source                                             */ 12150000
*DCL 1 CPMB CHAR(4096) BDY(DWORD) BASED(CMCTCPMB),/* Channel Path       12200000
*                                        Measurement Block       @D1C*/ 12250000
*     5 * CHAR(4),                    /* Reserved                @D1C*/ 12300000
*     5 CPMB_SAMPLE_COUNT FIXED(32),  /* CPMF sample count - updated    12350000
*              whenever new data is stored in the CPMB.  The CPMF       12400000
*              increments this field by one each time it updates        12450000
*              the CPMB.  When the system activates or                  12500000
*              reactivates the CPMF, this field's initial value         12550000
*              is undefined.  This field wraps around to zero after     12593700
*              it reaches 4,294,967,295.  No alert will be issued       12637400
*              if a wrap occurs.  If this value does not change         12681100
*              during a 20-second interval, the CPMF has stopped.       12724800
*              If this field changes between two observations,          12768500
*              either the CPMF operated normally, incrementing this     12812200
*              field between the observations, or the system            12855900
*              deactivated the CPMF, and then reactivated it.    @P1C*/ 12905900
*     5 CPMB_CHP_DATA CHAR(4088);     /* Channel path data, comprised   13500000
*              of a list of 256 channel path measurement entries.       13507900
*              Each entry (from 0 to 255) is associated with the        13515800
*              same-numbered channel path.                       @D1C*/ 13523700
*/********************************************************************/ 13531600
*/*                                                                  */ 13539500
*/* CPMB_CHP_ENTRY                                                   */ 13547400
*/*   CPMB_CUM_CHP_BUSY - Cumulative channel path busy.              */ 13555300
*/*            In this field, the CPMF accumulates                   */ 13563200
*/*            channel-path-busy intervals in 128-microsecond        */ 13571100
*/*            units.  In Basic mode, the CPMF accumulates all       */ 13579000
*/*            channel-path-busy intervals.  In LPAR mode, the CPMF  */ 13586900
*/*            accumulates only that logical partition's             */ 13594800
*/*            channel-path-busy intervals.  When this field is      */ 13602700
*/*            negative (bit 0 set to 1), the CPMF has accumulated   */ 13610600
*/*            no channel-path-busy intervals for this logical       */ 13618500
*/*            partition.  This field's initial positive value is    */ 13626400
*/*            unpredictable either when the field changes from      */ 13634300
*/*            negative to positive or when the system activates or  */ 13642200
*/*            reactivates the CPMF.  After the value in this field  */ 13650100
*/*            reaches approximately 76.36 hours, it wraps around    */ 13658000
*/*            to zero with no alert, and the CPMF continues to      */ 13665900
*/*            accumulate channel-path-busy intervals.           @D1A*/ 13673800
*/*   CPMB_CUM_CHP_TIME - Cumulative channel path elapsed time.      */ 13681700
*/*             In this field, the CPMF accumulates total elapsed    */ 13689200
*/*             measurement time for this channel path, in           */ 13696700
*/*             128-microsecond units. The CPMF evaluates and        */ 13704200
*/*             stores this field and the CPMB_CUM_CHP_BUSY field    */ 13711700
*/*             concurrently.  The monitoring program can also view  */ 13719200
*/*             this field as a time stamp that indicates when the   */ 13726700
*/*             CPMF last evaluated the corresponding                */ 13734200
*/*             CPMB_CUM_CHP_BUSY field. The monitoring program can  */ 13741700
*/*             only use this field to calculate time intervals      */ 13749200
*/*             between measurements for this channel path.          */ 13756700
*/*             Timestamps for separate entries are independent.     */ 13764200
*/*             This field's initial value is unpredictable either   */ 13771700
*/*             when the CPMB_CUM_CHP_BUSY field changes from        */ 13779200
*/*             negative to positive or when the system activates or */ 13786700
*/*             reactivates the CPMF.  After the value in this       */ 13794200
*/*             field reaches approximately 35.79 minutes,   @YA58186*/ 13801700
*/*             it wraps around to zero with no alert, and the CPMF  */ 13809200
*/*             continues to accumulate total elapsed measurement    */ 13816700
*/*             time for this channel path.                      @D1A*/ 13824200
*/*                                                                  */ 13831800
*/********************************************************************/ 13839700
*DCL 1 CPMB_CHP_ENTRY BASED,          /* A channel path measurement     13850000
*                                        entry                   @D1A*/ 13900000
*     3 CPMB_CUM_CHP_BUSY FIXED(31),  /* Cumulative channel path        13950000
*                                        busy.                   @D1A*/ 14000000
*      5 CPMB_CHP_ENTRY_NOT_VALID BIT(1), /* Validity flag for the CHP  14050000
*                                        entry.                         14100000
*                                            0 - Entry is valid.        14150000
*                                            1 - Entry is not valid.    14200000
*                                                                @D1A*/ 15300000
*      5 * BIT(31),                   /* CHP busy count data     @D1A*/ 15333300
*     3 CPMB_CHP_FLAGS BIT(8),        /* Flags.                  @D1A*/ 15366600
*      5 CPMB_SHARED_CHANNEL BIT(1),   /* Shared Channel Indicator.     15400000
*                                          1 - The channel is shared.   15450000
*                                          0 - The channel is unshared. 15500000
*                                                                @D1A*/ 15550000
*      5 * BIT(7),                     /* Reserved               @D1A*/ 15600000
*     3 CPMB_CUM_CHP_TIME FIXED(24);   /* Cumulative channel path       15650000
*                                         elapsed time.          @D1A*/ 15700000
*                                                                       15700100
*/********************************************************************/ 15700200
*/*                                                                  */ 15700300
*/* Channel Measurement Characteristics for Extended CPMF Data       */ 15700400
*/*                                                                  */ 15700500
*/*      CMC2CMG                                                     */ 15700600
*/*        Channel-Measurement Group (CMG):  Byte 3 of word 1        */ 15700700
*/*        contains a binary value that specifies the                */ 15700800
*/*        measurement group to which the specified CHPID            */ 15700900
*/*        belongs.  This value  determines  the  contents  and      */ 15701000
*/*        format  of  the  CMG-dependent                            */ 15701100
*/*        channel-measurement-characteristics  area,  and the       */ 15701200
*/*        format and contents of the channel-utilization entry      */ 15701300
*/*        for the  associated  channel  path,  in  the              */ 15701400
*/*        channel-utilization     block.                            */ 15701500
*/*                                                          @WA38548*/ 15701600
*/********************************************************************/ 15701700
*DCL 1 CMC2 CHAR(8192) BDY(DWORD) BASED(CMCTCMC2),/* Channel            15701800
*                                        Measurement Characteristics    15701900
*                                        for CPM2            @WA38548*/ 15702000
*      3 CMC2ChanMeasurementCharBlock(0:255) CHAR(32),/*                15702100
*                                         Channel Measurement           15702200
*                                         Characterisitics Block        15702300
*                                                            @WA38548*/ 15702400
*        5 CMC2Flags     BIT(8),       /* Channel Measurement           15702500
*                                         Characterisitics Flags        15702600
*                                                            @WA38548*/ 15702700
*          7 CMC2NotValid    BIT(1),   /* Not Valid - when 0 indicates  15702800
*                                         that information is provided  15702900
*                                         in this CMC block  @WA38548*/ 15703000
*          7 CMC2SharedCHPID BIT(1),   /* Shared channel path           15703100
*                                                            @WA38548*/ 15703200
*          7 *           BIT(6),       /* Reserved           @WA38548*/ 15703300
*        5 *             CHAR(2),      /* Reserved           @WA38548*/ 15703400
*        5 CMC2CHPID     FIXED(8),     /* Channel path ID    @WA38548*/ 15703500
*        5 CMC2MaskByte  BIT(8),       /* Mask               @WA38548*/ 15703600
*          7 CMC2CMCValidityMask BIT(5), /* CMC Validity mask,          15703700
*                                         bits 0-4 correspond to words  15703800
*                                         3-7 of the channel            15703900
*                                         measurements characterisitcs  15704000
*                                         block.  When 1, the           15704100
*                                         corresponding word has        15704200
*                                         meaning            @WA38548*/ 15704300
*          7 *           BIT(3),       /* Reserved           @WA38548*/ 15704400
*        5 *             CHAR(2),      /* Reserved           @WA38548*/ 15704500
*        5 CMC2CMG       FIXED(8),     /* Channel measurement group     15704600
*                                         for this CHPID     @WA38548*/ 15704700
*        5 *             CHAR(4),      /* Reserved           @WA38548*/ 15704800
*        5 CMC2DATA      CHAR(20);     /* Channel measurement           15704900
*                                         characterisitics data         15705000
*                                                            @WA38548*/ 15705100
*                                                                       15705200
*/********************************************************************/ 15705300
*/*                                                                  */ 15705400
*/* Values for the CMC2CMG field, the channel measurement group      */ 15705500
*/* types.                                                           */ 15705600
*/*                                                          @WA38548*/ 15705700
*/********************************************************************/ 15705800
*  DCL CMCCMG1 Fixed(8) Constant(1),   /* Channel Measurement Group     15705900
*                                         one                @WA38548*/ 15706000
*      CMCCMG2 Fixed(8) Constant(2);   /* Channel Measurement Group     15706100
*                                         two                @WA38548*/ 15706200
*                                                                       15706300
*                                                                       15706400
*/********************************************************************/ 15706500
*/*                                                                  */ 15706600
*/* The CMC2DATA field is not valid for any Channel Measurement      */ 15706700
*/* Group (CMC2CMG) other than 2.                                    */ 15706800
*/*                                                          @WA38548*/ 15706900
*/********************************************************************/ 15707000
*                                                                       15707100
*/********************************************************************/ 15707200
*/*                                                                  */ 15707300
*/* CMC2CMG2 maps the CMC2DATA field when the Channel Measurement    */ 15707400
*/* Group (CMC2CMG) for this CHPID is 2.                             */ 15707500
*/*                                                                  */ 15707600
*/*      CMC2MaxBusyCycles                                           */ 15707700
*/*        Maximum Bus Cycles:  Word 3 Contains an unsigned          */ 15707800
*/*        binary integer specifying the  maximum  internal bus      */ 15707900
*/*        cycles per second, available for I/O operations on        */ 15708000
*/*        the specified channel path.                               */ 15708100
*/*                                                                  */ 15708200
*/*      CMC2MaxChannelWorkUnits                                     */ 15708300
*/*        Maximum Channel Work Units:  Word 4 contains an           */ 15708400
*/*        unsigned  binary  integer specifying  the maximum         */ 15708500
*/*        number of channel work units that can be performed        */ 15708600
*/*        per second by the specified channel path.                 */ 15708700
*/*                                                                  */ 15708800
*/*      CMC2MaxWriteDataUnits                                       */ 15708900
*/*        Maximum Write Data Units:  Word 5  contains  an           */ 15709000
*/*        unsigned  binary  integer specifying the maximum          */ 15709100
*/*        number of data units that can be written per second       */ 15709200
*/*        using the specified channel path.                         */ 15709300
*/*                                                                  */ 15709400
*/*      CMC2MaxReadDataUnits                                        */ 15709500
*/*        Maximum  Read  Data  Units:   Word  6  contains an        */ 15709600
*/*        unsigned binary integer specifying the maximum            */ 15709700
*/*        number of data units that can be  read  per  second       */ 15709800
*/*        using the specified channel path.                         */ 15709900
*/*                                                                  */ 15710000
*/*      CMC2DataUnitSize                                            */ 15710100
*/*        Data  Unit  Size:   Word  7  contains  an  unsigned       */ 15710200
*/*        nonzero binary integer specifying the number of           */ 15710300
*/*        bytes of data that are contained in a  data  unit         */ 15710400
*/*        for the specified channel path.                           */ 15710500
*/*                                                          @WA38548*/ 15710600
*/********************************************************************/ 15710700
*DCL 1 CMC2CMG2 CHAR(20) BDY(WORD) BASED,/* Channel Measurement         15710800
*                                         Characteristics for channel   15710900
*                                         measurement group 2           15711000
*                                                            @WA38548*/ 15711100
*      3 CMC2MaxBusCycles Fixed(32),       /* Maximum bus cycles        15711200
*                                         per second         @WA38548*/ 15711300
*      3 CMC2MaxChannelWorkUnits Fixed(32),/* Maximum channel work      15711400
*                                             units per second          15711500
*                                                            @WA38548*/ 15711600
*      3 CMC2MaxWriteDataUnits Fixed(32),  /* Maximum write data units  15711700
*                                         per second         @WA38548*/ 15711800
*      3 CMC2MaxReadDataUnits  Fixed(32),  /* Maximum read data units   15711900
*                                         per second         @WA38548*/ 15712000
*      3 CMC2DataUnitSize      Fixed(32);  /* Data unit size @WA38548*/ 15712100
*                                                                       15712200
*                                                                       15712300
*/********************************************************************/ 15712400
*/*                                                                  */ 15712500
*/* Channel Measurement Block Extended (format 2).                   */ 15712600
*/*                                                                  */ 15712700
*/*        CPM2ChannelUtilizationEntryInfoValityMask                 */ 15712800
*/*          Channel-Utilization-Information  Validity  (CUIV):      */ 15712900
*/*          Byte  0  of  word   0 contains  a  map  that            */ 15713000
*/*          applies to the contents of the channel-utilization      */ 15713100
*/*          entry.    The  bits  of  the  CUIV  map  indicate       */ 15713200
*/*          which  words   of   the channel-utilization entry       */ 15713300
*/*          contain valid channel-utilization information.  Bits    */ 15713400
*/*          0-7   of   the   CUIV   field   correspond  to          */ 15713500
*/*          words  0-7  of  the channel-utilization entry,          */ 15713600
*/*          respectively. A special  case  is  that  bit  0         */ 15713700
*/*          corresponds  to  bytes 1-3 of word 0 (the contents      */ 15713800
*/*          of byte 0 of word 0 are always valid).   When one, a    */ 15713900
*/*          bit of the  CUIV  field  indicates  that  the           */ 15714000
*/*          corresponding  word  contains  valid                    */ 15714100
*/*          channel-utilization information. When zero, a bit of    */ 15714200
*/*          the CUIV field indicates that the corresponding         */ 15714300
*/*          word  does not contain valid channel-utilization        */ 15714400
*/*          information.                                            */ 15714500
*/*                                                                  */ 15714600
*/*        CPM2TimeStamp                                             */ 15714700
*/*          Time-stamp:   Bits  8-31  of  word  0  contain  a       */ 15714800
*/*          time-stamp  value  that identifies when                 */ 15714900
*/*          channel-utilization information was last  stored  in    */ 15715000
*/*          this channel-utilization  entry.    The time-stamp      */ 15715100
*/*          is based on a 24 bit channel subsystem timer that is    */ 15715200
*/*          incremented by adding one  to  the  rightmost  bit      */ 15715300
*/*          position  every 128 microseconds.  The accumulated      */ 15715400
*/*          value of the time-stamp is approximately modulo         */ 15715500
*/*          35.79 minutes and the program is not alerted  when      */ 15715600
*/*          an overflow occurs.  Each   channel-utilization         */ 15715700
*/*          entry   is  updated  independently  of  other           */ 15715800
*/*          channel-utilization entries. Therefore, each            */ 15715900
*/*          time-stamp  applies  only  to the                       */ 15716000
*/*          channel-utilization entry that contains it.  The        */ 15716100
*/*          initial value of the time-stamp is unpredictable.       */ 15716200
*/*                                                          @WA38548*/ 15716300
*/********************************************************************/ 15716400
*DCL 1 CPM2 CHAR(8192) BDY(DWORD) BASED(CMCTCPM2),/* Channel Path       15716500
*                                        Measurement Block - format 2   15716600
*                                                            @WA38548*/ 15716700
*      3 CPM2ChannelUtilizationEntry(0:255) Bdy(DWORD) CHAR(32), /*     15716800
*                                         Channel Utilization Entry     15716900
*                                                            @WA38548*/ 15717000
*        5 CPM2ChannelUtilInfoValityMask BIT(8), /*                     15717100
*                                         Channel utilization info      15717200
*                                         validity mask, bit positions  15717300
*                                         0-7 correspond to words 0-7   15717400
*                                         of this channel utilization   15717500
*                                         entry              @WA38548*/ 15717600
*        5 CPM2TimeStamp Fixed(24),    /* Time stamp indicating when    15717700
*                                         data was last stored in this  15717800
*                                         CUE, 128 microsecond          15717900
*                                         granularity        @WA38548*/ 15718000
*        5 CPM2DATA  CHAR(28);         /* Channel measurement group     15718100
*                                         data               @WA38548*/ 15718200
*                                                                       15718300
*/********************************************************************/ 15718400
*/*                                                                  */ 15718500
*/* CMG1 maps the CPM2DATA field when the Channel Measurement Group  */ 15718600
*/* (CMG) for this CHPID is 1.                                       */ 15718700
*/*                                                                  */ 15718800
*/*      CMG1TotalChannelBusyTime                                    */ 15718900
*/*        Channel-Path-Busy  Time  (CPC):   Bits  0-31  of          */ 15719000
*/*        word   1   contain   the accumulation   of   all          */ 15719100
*/*        measured  channel-path-busy  intervals  for  the          */ 15719200
*/*        associated channel path.  The channel path is busy        */ 15719300
*/*        when  it  is  actively communicating with an              */ 15719400
*/*        attached control unit or device.  When  the CPC is        */ 15719500
*/*        operating in LPAR mode, the CPBT value in word 1          */ 15719600
*/*        includes the channel-path intervals associated with       */ 15719700
*/*        all of the  logical  partitions that have access to       */ 15719800
*/*        the associated channel path.  The  time  intervals        */ 15719900
*/*        are stored into the channel-utilization entry using       */ 15720000
*/*        a resolution of 128 microseconds.   The accumulated       */ 15720100
*/*        value  is  approximately modulo  76.36  hours,  and       */ 15720200
*/*        the  program  is  not alerted when an overflow            */ 15720300
*/*        occurs.  The initial value in word 1 is                   */ 15720400
*/*        unpredictable.                                            */ 15720500
*/*                                                                  */ 15720600
*/*      CMG1LparChannelBusyTime                                     */ 15720700
*/*        Channel-Path-Busy Time:  When the CPC is operating        */ 15720800
*/*        in LPAR mode, bits 0-31 of word 2 contain the             */ 15720900
*/*        accumulation of measured channel-path-busy intervals      */ 15721000
*/*        for the associated channel path.  The accumulation        */ 15721100
*/*        only includes intervals that are associated with the      */ 15721200
*/*        logical partition that  has  access  to  this             */ 15721300
*/*        channel  utilization block.   The channel path is         */ 15721400
*/*        busy when it is actively communicating with an            */ 15721500
*/*        attached control unit or device.  When the CPC is         */ 15721600
*/*        operating in basic mode, the contents of word 2 have      */ 15721700
*/*        no meaning and bit 2 of the Channel Utilization           */ 15721800
*/*        Information Validity Mask is zero.                        */ 15721900
*/*                                                          @WA38548*/ 15722000
*/********************************************************************/ 15722100
*DCL 1 CPM2CMG1 CHAR(28) BDY(WORD) BASED,/* Channel Measurement Group 1 15722200
*                                                            @WA38548*/ 15722300
*      3 CMG1TotalChannelBusyTime Fixed(32),/* Channel Path Busy Time,  15722400
*                                         total for the CHPID           15722500
*                                                            @WA38548*/ 15722600
*      3 CMG1LparChannelBusyTime  Fixed(32),/* Channel Path Busy Time,  15722700
*                                         just for this LPAR @WA38548*/ 15722800
*      3 *               CHAR(20);     /* Reserved           @WA38548*/ 15722900
*                                                                       15723000
*/********************************************************************/ 15723100
*/*                                                                  */ 15723200
*/* CMG2 maps the CPM2DATA field when the Channel Measurement Group  */ 15723300
*/* (CMG) for this CHPID is 2.                                       */ 15723400
*/*                                                                  */ 15723500
*/*      CMG2TotalBusCycleCount                                      */ 15723600
*/*        Count of Bus Cycles (CPC):  Word 1 Contains an            */ 15723700
*/*        unsigned binary  integer that  is  an accumulated         */ 15723800
*/*        count of the internal bus cycles that have been           */ 15723900
*/*        used for I/O operations on the associated channel         */ 15724000
*/*        path.  When  the  count reaches 2(32)-1 it wraps          */ 15724100
*/*        back to zero.  When  the  CPC  is operating in LPAR       */ 15724200
*/*        mode, the count includes the internal bus cycles          */ 15724300
*/*        that were used for I/O operations for  all  logical       */ 15724400
*/*        partitions that have access to the associated             */ 15724500
*/*        channel path.                                             */ 15724600
*/*                                                                  */ 15724700
*/*      CMG2TotalChannelWorkUnitCount                               */ 15724800
*/*        Count  of  Channel  Work  Units (CPC):  Word 2            */ 15724900
*/*        contains an unsigned binary integer that is an            */ 15725000
*/*        accumulated count of the number of channel  work          */ 15725100
*/*        units that  have  been performed by the associated        */ 15725200
*/*        channel path.  When the count reaches 2(32)-1 it          */ 15725300
*/*        wraps back to zero.  When the CPC is operating in         */ 15725400
*/*        LPAR mode, the  count  includes  the  channel work        */ 15725500
*/*        units that were performed for all logical partitions      */ 15725600
*/*        that have access to the associated channel path.          */ 15725700
*/*                                                                  */ 15725800
*/*      CMG2LparChannelWorkUnitCount                                */ 15725900
*/*        Count of Channel Work Units:  When the CPC is             */ 15726000
*/*        operating in LPAR mode, word 3  contains an unsigned      */ 15726100
*/*        binary integer that is an accumulated count of the        */ 15726200
*/*        number of channel work units that have been               */ 15726300
*/*        performed  by  the  associated channel  path.  When       */ 15726400
*/*        the count reaches 2(32)-1 it wraps back to zero.          */ 15726500
*/*        The count includes only the channel work units that       */ 15726600
*/*        were  performed  for  the logical partition that has      */ 15726700
*/*        access to this channel utilization block.  When  the      */ 15726800
*/*        CPC  is operating in basic mode, the contents of          */ 15726900
*/*        word 3 have no meaning and bit 3 of the Channel           */ 15727000
*/*        Utilization Information Validity Mask is zero.            */ 15727100
*/*                                                                  */ 15727200
*/*      CMG2TotalWriteDataUnits                                     */ 15727300
*/*        Count of Data Units Written (CPC):  Word 4  contains      */ 15727400
*/*        an  unsigned  binary integer that is an accumulated       */ 15727500
*/*        count of the number of data units that have been          */ 15727600
*/*        written  using  the associated channel path.  When        */ 15727700
*/*        the count reaches 2(32)-1 it wraps back to zero.          */ 15727800
*/*        The channel-measurement-characteristics block for         */ 15727900
*/*        the  associated  channel path specifies the number        */ 15728000
*/*        of bytes contained in a data unit.  When  the CPC is      */ 15728100
*/*        operating in LPAR mode, the count includes the data       */ 15728200
*/*        units that were written for all logical  partitions       */ 15728300
*/*        that  have  access  to  the associated channel path.      */ 15728400
*/*                                                                  */ 15728500
*/*      CMG2LparWriteDataUnits                                      */ 15728600
*/*        Count of Data Units Written:  When the CPC is             */ 15728700
*/*        operating in LPAR mode, word 5  contains an unsigned      */ 15728800
*/*        binary integer that is an accumulated count of the        */ 15728900
*/*        number of data units that have been written using         */ 15729000
*/*        the  associated  channel path.    When  the count         */ 15729100
*/*        reaches 2(32)-1 it wraps back to zero.  The count         */ 15729200
*/*        includes only the data units that were written for        */ 15729300
*/*        the  logical  partition that has access to this           */ 15729400
*/*        channel-utilization block.  When  the  CPC  is            */ 15729500
*/*        operating in basic mode, the contents of word 5 have      */ 15729600
*/*        no meaning and bit 5 of the Channel Utilization           */ 15729700
*/*        Information Validity Mask is zero.                        */ 15729800
*/*                                                                  */ 15729900
*/*      CMG2TotalReadDataUnits                                      */ 15730000
*/*        Count of Data Units Read  (CPC):   Word  6  contains      */ 15730100
*/*        an  unsigned  binary integer that is an accumulated       */ 15730200
*/*        count of the number of data units that have been          */ 15730300
*/*        read  using  the  associated  channel path.   When        */ 15730400
*/*        the count reaches 2(32)-1 it wraps back to zero.          */ 15730500
*/*        The channel-measurement-characteristics block for         */ 15730600
*/*        the  associated  channel path specifies the number        */ 15730700
*/*        of bytes contained in a data unit.  When  the CPC is      */ 15730800
*/*        operating in LPAR mode, the count includes the data       */ 15730900
*/*        units that were read  for  all  logical  partitions       */ 15731000
*/*        that  have  access  to  the associated channel path.      */ 15731100
*/*                                                                  */ 15731200
*/*      CMG2LparReadDataUnits                                       */ 15731300
*/*        Count  of Data Units Read:  When the CPC is               */ 15731400
*/*        operating in LPAR mode, word 7 contains an unsigned       */ 15731500
*/*        binary integer that is an accumulated  count  of          */ 15731600
*/*        the number  of  data  units  that  have been read         */ 15731700
*/*        using the associated channel path.  When the count        */ 15731800
*/*        reaches 2(32)-1 it wraps back to zero.    The  count      */ 15731900
*/*        includes only the data units that were read for the       */ 15732000
*/*        logical partition that has access to this                 */ 15732100
*/*        channel-utilization block.  When  the  CPC  is            */ 15732200
*/*        operating in basic mode, the contents of word 7 have      */ 15732300
*/*        no meaning and bit 7 of the Channel Utilization           */ 15732400
*/*        Information Validity Mask is zero.                        */ 15732500
*/*                                                                  */ 15732600
*/*                                                          @WA38548*/ 15732700
*/********************************************************************/ 15732800
*                                                                       15732900
*DCL 1 CPM2CMG2 CHAR(28) BDY(WORD) BASED,/* Channel Measurement Group 2 15733000
*                                                            @WA38548*/ 15733100
*      3 CMG2TotalBusCycleCount Fixed(32),/* Count of Bus Cycles,       15733200
*                                         total for the CHPID           15733300
*                                                            @WA38548*/ 15733400
*      3 CMG2TotalChannelWorkUnitCount Fixed(32),   /*                  15733500
*                                         Count of Channel Work Units,  15733600
*                                         total for the CHPID           15733700
*                                                            @WA38548*/ 15733800
*      3 CMG2LparChannelWorkUnitCount  Fixed(32),   /*                  15733900
*                                         Count of Channel Work Units,  15734000
*                                         just for this LPAR @WA38548*/ 15734100
*      3 CMG2TotalWriteDataUnits  Fixed(32),        /*                  15734200
*                                         Count of Data Units Written,  15734300
*                                         total for the CHPID           15734400
*                                                            @WA38548*/ 15734500
*      3 CMG2LparWriteDataUnits   Fixed(32),        /*                  15734600
*                                         Count of Data Units Written,  15734700
*                                         just for this LPAR @WA38548*/ 15734800
*      3 CMG2TotalReadDataUnits   Fixed(32),        /*                  15734900
*                                         Count of Data Units Read,     15735000
*                                         total for the CHPID           15735100
*                                                            @WA38548*/ 15735200
*      3 CMG2LparReadDataUnits    Fixed(32);        /*                  15735300
*                                         Count of Data Units Read,     15735400
*                                         just for this LPAR @WA38548*/ 15735500
*                                                                       15735600
*/* End of PL/X Source                                               */ 15750000
* %IF IRACPMB_LIST ^= 'NO' &                                            17700000
*    ZCBPRINT ^= 'NO' %THEN                                             17750000
*   %GOTO IRACPMB_4;                                                    17800000
*   @LIST POP NOECHO;                                                   17850000
* %IRACPMB_4:;                                                          17900000
* %END;                                                                 17950000
