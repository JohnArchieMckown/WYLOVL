*                                                                       00050000
* %DCL IHASDEXI_INCLUDED CHAR EXT;                                      00100000
* %DEACTIVATE IHASDEXI_INCLUDED;                                        00150000
* %IF IHASDEXI_INCLUDED = '' %THEN                                      00200000
* %DO;                                                                  00250000
*/* Macro made bi-lingual on 98324. CBGEN compile date 98009         */ 00300000
*% /*                                                                   00350000
         MACRO                                                          00400000
         IHASDEXI &DSECT=YES,&LIST=YES,&TITLE=YES,&SDEXI=YES,          *00450000
               &SDEXIALST=COND,&SDEXIDRPX=COND                          00500000
         GBLC  &IHASDEXI_INCLUDED                                       00550000
         GBLC  &ZCBPRINT                                                00600000
&IHASDEXI_INCLUDED SETC 'YES'                                           00650000
         AIF   ('&LIST' EQ 'NONE').P0                                   00666600
         AIF   ('&TITLE' EQ 'NO').P5                                    00683200
 TITLE   'IHASDEXI  - SDUMP Exit information                         '  00700000
.P5      ANOP                                                           00725000
**/ IHASDEXI_1:;                                                        00750000
*/* START OF SPECIFICATIONS ******************************************* 00800000
**/                                                                     00850000
*/*01* PROPRIETARY STATEMENT=                                        */ 00900000
*/***PROPRIETARY_STATEMENT********************************************/ 00950000
*/*  Proprietary Statement =                                         */ 01000000
*/*                                                                  */ 01050000
*/*              LICENSED MATERIALS - PROPERTY OF IBM                */ 01100000
*/*              THIS MACRO IS "RESTRICTED MATERIALS OF IBM"         */ 01150000
*/*              5647-A01 (C) COPYRIGHT IBM CORP 1993,2000           */ 01200000
*/*                                                                  */ 01300000
*/*  Status = HBB7703                                                */ 01350000
*/*                                                              @D1C*/ 01400000
*/***END_OF_PROPRIETARY_STATEMENT*************************************/ 01450000
*/*                                                                     01500000
*01* DESCRIPTIVE NAME:  SDUMP Exit information                          01550000
*02*  ACRONYM:  SDEXI                                                   01600000
*                                                                       01650000
*01* MACRO NAME:  IHASDEXI                                              01700000
*                                                                       01750000
*01* EXTERNAL CLASSIFICATION: PI                                        01800000
*01* END OF EXTERNAL CLASSIFICATION:                                    01850000
*                                                                       01900000
*01* DSECT NAME:                                                        01950000
*02*  SDEXI                                                             02000000
*02*  SDEXIALST                                                         02050000
*02*  SDEXIDRPX                                                         02100000
*                                                                       02150000
*01* COMPONENT:  SDUMP (SCDMP)                                     @D1C 02200000
*                                                                       02250000
*01* EYE-CATCHER:  NONE                                                 02300000
*                                                                       02350000
*01* STORAGE ATTRIBUTES:                                                02400000
*02*  SUBPOOL:  231                                                     02450000
*02*  KEY:  0                                                           02500000
*02*  RESIDENCY:  Above 16M                                             02550000
*                                                                       02600000
*01* SIZE:                                                              02650000
*                SDEXI     -- X'0068' bytes                             02700000
*                SDEXIALST -- X'0004' bytes                             02750000
*                SDEXIDRPX -- X'0040' bytes                             02800000
*                                                                       02850000
*01* CREATED BY:                                                        02900000
*     Created by SDUMP, passed to SDUMP local/global exit(s)            02950000
*                                                                       03000000
*01* POINTED TO BY:                                                     03050000
*     R1 on entry to SDUMP local/global exit(s)                         03100000
*                                                                       03150000
*01* SERIALIZATION:                                                     03200000
*     None required                                                     03250000
*                                                                       03300000
*01* FUNCTION:                                                          03350000
*02* Maps the information needed by the SDUMP local/global exit(s)      03400000
*                                                                       03450000
*01* METHOD OF ACCESS:                                                  03500000
*02*  ASM:                                                              03550000
*      IHASDEXI                                                         03600000
*           DSECT=YES|NO  -- Request DSECT definition                   03650000
*           SDEXI=YES|NO|COND -- Request mapping of parameter           03700000
*                            information                                03750000
*                            USING on SDEXI                             03800000
*           SDEXIALST=YES|NO|COND -- Mapping of Asid list               03850000
*           SDEXIDRPX=YES|NO|COND -- Mapping of DRPX                    03900000
*     Default: DSECT=YES,SDEXI=YES,                                     03950000
*              SDEXIALST=COND,                                          04000000
*              SDEXIDRPX=COND                                           04050000
*02*  PL/AS:                                                            04100000
*      %INCLUDE SYSLIB(IHASDEXI)                                        04150000
*                                                                       04200000
*01* DELETED BY:  SDUMP                                                 04250000
*                                                                       04300000
*01* FREQUENCY:  One per call to SDUMP local/global exit                04350000
*                                                                       04400000
*01* DEPENDENCIES:  None                                                04450000
*                                                                       04500000
*01* DISTRIBUTION LIBRARY:  AMACLIB                                     04550000
*                                                                       04600000
*01* CHANGE ACTIVITY:                                                   04650000
*   $L0=SDMPECBG ,HBB5510,921217,PD00XB: Local/Global exit              04700000
*   $L1=SDMPE    ,HBB5510,921217,PD00XB: Local/Global exit              04750000
*   $01=OW01117  ,HBB5510,931217,PDHT:   Update prolog             @01A 04775000
*   $P1=PN71270  ,HBB5520,941006,PDHT:   Update SDATA options      @P1A 04787500
*   $D1=DR20001   HBB6601 950907 PD00KV: Split from SC1CM          @D1A 04793700
*   $L2=TSVCD    ,JBB6607,980413,PDHT:   Tailored SVC Dump         @L2A 04796800
*   $L3=64BITNIP HBB7703 981204 PD00XB: ESAME                      @L3A 04798400
*   $L4=64BITSDU HBB7703 000113 PDHT:   DRPX v2 support            @L4A 04799200
*                                                                       04800000
* END OF SPECIFICATIONS *********************************************/  04850000
*% /*                                                                   04900000
.P0      ANOP                                                           04925000
         AIF   ('&ZCBPRINT' EQ 'NO').P1                                 04950000
         AIF   ('&LIST' EQ 'YES').P2                                    05000000
.P1      ANOP                                                           05050000
         PUSH  PRINT                                                    05100000
         PRINT OFF                                                      05150000
.P2      ANOP                                                           05200000
         AIF   ('&SDEXI' EQ 'NO').L0002                                 05250000
         AIF   ('&DSECT' EQ 'YES').L0003                                05300000
         AIF   ('&SDEXI' NE 'YES').L0002                                05350000
SDEXI    DS    0F        SVC Dump exit parameter list fields for use   *05400000
                         by, or to be filled in by, exit                05450000
         AGO   .L0004                                                   05500000
.L0003   ANOP                                                           05550000
SDEXI    DSECT           SVC Dump exit parameter list fields for use   *05600000
                         by, or to be filled in by, exit                05650000
.L0004   ANOP                                                           05700000
         DS    1CL0012   Contains no information for use by the exit.   05750000
SDEXIBFAD DS   1AL4      Address of data buffer. Set by SVC Dump. For  *05800000
                         use by exit.                                   05850000
SDEXIBFLN DS   1FL4      Length of data buffer (4096 bytes). For use   *05900000
                         by exit.                                       05950000
SDEXIORAD DS   1AL4      Address of output routine. Set by SVC Dump.   *06000000
                         For use by exit. Interface to routine:        *06014200
                         AMODE=31. Any P, Any S, H=DUMPSRV. Task mode. *06028400
                         Enabled, no locks held, no EUT FRRs. Key 0,   *06042600
                         Supervisor State. R1 - address of SDEXI. R13  *06056800
                         - address of 72-byte save area. R14 - return  *06071000
                         address. R15 - entry point address.            06085200
SDEXIKEYS DS   1CL0002   Storage keys for moved data. Must be set by   *06100000
                         exit if bit SdexiDRPS is not set.              06150000
         ORG   SDEXIKEYS                                                06200000
SDEXIFKEY DS   1CL0001   Storage key of first 2K of data (Key must be  *06250000
                         in bits 0-3, not 4-7 of the byte)              06300000
SDEXISKEY DS   1CL0001   Storage key of second 2K of data (Key must be *06350000
                         in bits 0-3, not 4-7 of the byte)              06400000
SDEXIASID DS   1CL0002   ASID of data moved to buffer. Must be set by  *06450000
                         exit if bit SdexiDRPS is not set.              06500000
         DS    1CL0004   Contains no information for use by the exit.   06550000
SDEXICDAD DS   1AL4      Address of data in buffer. Must be set by     *06600000
                         exit if bit SdexiDRPS is not set. This        *06650000
                         address should be on a page boundary, and the *06700000
                         buffer should contain 4096 bytes of data      *06750000
                         representing the contents of the entire page.  06800000
         DS    1CL0008   Contains no information for use by the exit.   06850000
SDEXISVAD DS   1AL4      Address of 72-byte save area. Set by SVC      *06900000
                         Dump. For use by exit.                         06950000
         DS    1CL0004   Contains no information for use by the exit.   07000000
SDEXIWKAD DS   1AL4      Address of work area. Set by SVC Dump. For    *07050000
                         use by exit. Length is in SdexiWKLN (AT LEAST *07100000
                         200 BYTES)                                     07150000
SDEXIWKLN DS   1FL4      Length of work area pointed to by SdexiWKAD    07200000
SDEXIDRPA DS   1AL4      Address of dump record prefix to be filled in *07250000
                         by exit                                        07300000
         ORG   SDEXIDRPA                                                07350000
SDEXIDRPS EQU  X'80'     If on, then the dump record prefix was filled *07400000
                         in by the exit. This bit is set by the exit,  *07450000
                         and checked by SVC Dump. It is initially off   07500000
         ORG   SDEXIDRPA+X'00000004'                                    07550000
SDEXIALP DS    1AL4      Pointer to the ASID list - Set by SVC Dump.   *07600000
                         For use by exit.                               07650000
SDEXISDAO DS   1CL0008   SDATA OPTIONS                                  07700000
         ORG   SDEXISDAO                                                07750000
SDEXISDTA DS   1CL0002   SDATA OPTION FLAGS                             07800000
         ORG   SDEXISDTA                                                07850000
SDEXISDT1 DS   1CL0001   1ST BYTE OF OPTIONS                            07900000
         ORG   SDEXISDT1                                                07950000
SDEXIAPSA EQU  X'80'     DUMP ALL PSA'S                                 08000000
SDEXIPSA EQU   X'40'     DUMP CURRENT PSA                               08050000
SDEXINUC EQU   X'20'     DUMP THE NUCLEUS                               08100000
SDEXISQA EQU   X'10'     DUMP SQA                                       08150000
SDEXILSQA EQU  X'08'     DUMP LSQA                                      08200000
SDEXIRGN EQU   X'04'     DUMP RGN-PRIVATE AREA                          08250000
SDEXILPA EQU   X'02'     DUMP LPA MOD. FOR RGN                          08300000
SDEXITRT EQU   X'01'     DUMP TRACE DATA                                08350000
         ORG   SDEXISDT1+X'00000001'                                    08400000
SDEXISDT2 DS   1CL0001   SECOND BYTE SDATA FLGS                         08450000
         ORG   SDEXISDT2                                                08500000
SDEXICSA EQU   X'80'     DUMP CSA                                       08550000
SDEXISWA EQU   X'40'     DUMP SWA                                       08600000
SDEXISMDM EQU  X'20'     DUMP SUMMARY DUMP DATA                         08650000
SDEXINSMD EQU  X'10'     DON'T DUMP SUMMARY DUMP                        08700000
SDEXINAPS EQU  X'08'     DO NOT DUMP ALL PSA                            08750000
SDEXINASQ EQU  X'04'     DO NOT DUMP SQA                                08800000
SDEXIANUC EQU  X'02'     DUMP ALL NUCLEUS                               08850000
SDEXIDEFS EQU  X'01'     DEFAULTS                                       08900000
         ORG   SDEXISDTA+X'00000002'                                    08950000
SDEXISDA2 DS   1CL0004   EXTENDED SDATA OPTIONS                         09000000
         ORG   SDEXISDA2                                                09050000
SDEXIEXIT1 DS  1BL1      SDATA OPTIONS EXIT ROUTINES                    09100000
         ORG   SDEXIEXIT1                                               09150000
SDEXIGRSQ EQU  X'80'     SDATA=GRSQ                                     09200000
SDEXICOUPLE EQU X'10'    SDATA=COUPLE                                   09250000
SDEXIXESDATA EQU X'08'   SDATA=XESDATA                                  09300000
SDEXIWLMDATA EQU X'02'   SDATA=WLMDATA                                  09325000
         ORG   SDEXIEXIT1+X'00000001'                                   09350000
SDEXIEXIT2 DS  1BL1      SDATA OPTIONS EXIT ROUTINES                    09400000
         ORG   SDEXIEXIT2                                               09450000
SDEXISERVERS EQU X'20'   SDATA=SERVERS                                  09483300
         ORG   SDEXIEXIT2+X'00000001'                                   09516600
SDEXISDT3 DS   1BL1      SDATA OPTIONS                                  09550000
         ORG   SDEXISDT3                                                09600000
SDEXINDEF EQU  X'80'     NODEFAULTS                                     09650000
SDEXIIO  EQU   X'40'     DO I/O AREAS                                   09700000
         ORG   SDEXISDT3+X'00000001'                                    09750000
SDEXISDT4 DS   1BL1      SDATA OPTIONS                                  09800000
         DS    1CL0002   Reserved                                       09850000
SDEXIFLAGS DS  1BL1                                                     09900000
         ORG   SDEXIFLAGS                                               09950000
SDEXIADDRESSRANGE EQU X'80' An address range has been provided,        *10000000
                         instead of placing the data into the provided *10050000
                         buffer. The data must be in the current       *10100000
                         primary space or be addressable by an ALET    *10150000
                         that is currently on the DU-AL or the PASN    *10200000
                         AL. This may only be used if bit SdexiDRPS is *10250000
                         off or (if it is on) if creating an address   *10300000
                         space or data space record. When SdexiDRPS is *10350000
                         off, the storage range must represent the     *10400000
                         primary address space, with start address in   10450000
*                        SdexiCDAD and end address in SdexiRangeEnd.   *10500000
                         When SdexiDRPS is on for address space        *10550000
                         storage, the start address is in              *10600000
                         SdexiDrpxLAD, the end address in              *10650000
                         SdexiRangeEnd, and the ALET is in             *10700000
                         SdexiRangeALET. Use an ALET of 0 for the      *10750000
                         primary address space. When SdexiDRPS is on   *10800000
                         for data space storage, the start address is  *10850000
                         in SdexiDrpxLAD, the end address in           *10900000
                         SdexiRangeEnd, and the ALET is in              10950000
*                        SdexiRangeALET. In all cases, the start       *11000000
                         address will be rounded down to the nearest   *11050000
                         page boundary. The end address will be        *11100000
                         rounded up to the last byte of the page       *11150000
                         containing the input end address.              11200000
         ORG   SDEXIFLAGS+X'00000001'                                   11250000
         DS    1CL0003   RESERVED                                       11300000
SDEXIRANGEEND DS 1AL4    The entire page containing this byte will be  *11350000
                         dumped.                                        11400000
SDEXIRANGEALET DS 1FL4                                                  11450000
SDEXIPROBDESC@ DS 1AL4   Address of ProbDesc area for dump. 0 if no    *11500000
                         such area exists.                              11550000
SDEXIINTOKEN@ DS 1AL4    Address of 32-byte incident token for dump.    11600000
         DS    1CL0008   RESERVED                                       11650000
SDEXI_LEN EQU  *-SDEXI                                                  11700000
.L0002   ANOP                                                           11750000
         AIF   ('&SDEXIALST' EQ 'NO').L0005                             11800000
         AIF   ('&DSECT' EQ 'YES').L0006                                11850000
         AIF   ('&SDEXIALST' NE 'YES').L0005                            11900000
SDEXIALST DS   0H        LIST OF ASID WHICH ARE INCLUDED IN THE DUMP.  *11950000
                         IT IS BUILT BY SDUMP AND USED BY THE EXITS     12000000
         AGO   .L0007                                                   12050000
.L0006   ANOP                                                           12100000
SDEXIALST DSECT          LIST OF ASID WHICH ARE INCLUDED IN THE DUMP.  *12150000
                         IT IS BUILT BY SDUMP AND USED BY THE EXITS     12200000
.L0007   ANOP                                                           12250000
SDEXIALST# DS  1FL2      NUMBER OF ENTRIES                              12300000
SDEXIALST_ARRAY DS 1CL0002 An array of ASIDs, the number of which is   *12350000
                         indicated by SdexiALST#                        12400000
         ORG   SDEXIALST_ARRAY                                          12450000
SDEXIALST_ENTRY DS 1FL2  An ASID within the array.                      12500000
SDEXIMAXA EQU  64        MAXIMUM NUMBER OF ENTRIES IN THE ASID LIST     12550000
SDEXIALST_LEN EQU *-SDEXIALST                                           12600000
.L0005   ANOP                                                           12650000
*                                                                       12700000
*                                                                       12750000
*    The dump record prefix can be set to indicate a data space,        12800000
*    an address space, or a component record.                           12850000
*    Fields that must be set by an exit which turns on bit SdexiDRPS    12900000
*    are:                                                               12950000
*    For a data space record:                                           13000000
*       SdexiDrpxAST set to 'DS',                                       13050000
*       SdexiDrpxAS1 set to the owning ASID                             13100000
*       SdexiDrpxASC set to the data space name                         13150000
*       SdexiDrpxTypd_DS_KEY set to the storage key                     13200000
*       SdexiDrpxLAD set to the logical address                         13250000
*       SdexiDrpxTypd_DS_Stoken set to the data space's STOKEN.         13300000
*       The system will fill in SdexiDrpxTypd_DS_ASTE to the            13350000
*       ASTE real address for the                                       13400000
*       data space, provided that that field is                         13450000
*       not 0 (i.e., was set by the exit).                              13500000
*    For an address space record:                                       13550000
*       SdexiDrpxAST set to 'CV',                                       13600000
*       SdexiDrpxAS1 set to X'FFFFFFFF'                                 13650000
*       SdexiDrpxAS2 set to the ASID                                    13700000
*       SdexiDrpxTypd_CV_KEY set to the storage key                     13750000
*       SdexiDrpxLAD set to the logical address                         13800000
*    For a CompData record:                                             13850000
*       SdexiDrpxAST set to 'SC',                                       13900000
*       SdexiDrpxASC set to the component identifier                    13950000
*       You should make sure that the component records can             14000000
*       be distinguished from each other. The SdexiDrpxLad field        14050000
*       could be used for this purpose, since the "address" is          14100000
*       only to be understood by the component itself, not by           14150000
*       dump processing or IPCS.                                        14200000
*    In all of these cases, the ID, LEN, and SEQ fields are set by      14250000
*    the system and should not be modified by the exit.                 14300000
*                                                                       14350000
*                                                                       14400000
*                                                                       14450000
         AIF   ('&SDEXIDRPX' EQ 'NO').L0008                             14500000
         AIF   ('&DSECT' EQ 'YES').L0009                                14550000
         AIF   ('&SDEXIDRPX' NE 'YES').L0008                            14600000
SDEXIDRPX DS   0F        Dump record prefix to be filled in by the     *14650000
                         exit                                           14700000
         AGO   .L000A                                                   14750000
.L0009   ANOP                                                           14800000
SDEXIDRPX DSECT          Dump record prefix to be filled in by the     *14850000
                         exit                                           14900000
.L000A   ANOP                                                           14950000
SDEXIDRPXID DS 1CL0003   Set by SDUMP. Exit should not change.          15000000
SDEXIDRPXLEN DS 1FL1     Set by SDUMP. Exit should not change.          15050000
SDEXIDRPXAS DS 1CL0016   ASCB information                               15100000
         ORG   SDEXIDRPXAS                                              15150000
SDEXIDRPXAST DS 1CL0002  Address space type code. See Constants        *15200000
                         SdexiDrpxAST_xxx                               15250000
SDEXIDRPXASH DS 1FL2                                                    15300000
SDEXIDRPXAS1 DS 1FL4                                                    15350000
SDEXIDRPXASC DS 1CL0008  Qualifier 2                                    15400000
         ORG   SDEXIDRPXASC                                             15450000
SDEXIDRPXAS2 DS 1FL4                                                    15500000
SDEXIDRPXAS3 DS 1FL4                                                    15550000
SDEXIDRPXLAD DS 1AL4     Logical address. This should be on a page     *15600000
                         boundary.                                      15650000
SDEXIDRPXSEQ DS 1FL4     Set by SDUMP. Exit should not change.          15700000
         DS    1CL0008   Set by SDUMP. Exit should not change.          15750000
SDEXIDRPXTYPD DS 1CL0028 Record type specific data.                     15800000
SDEXIDRPXAST_ADDRSPAC EQU C'CV' Address space                           15850000
SDEXIDRPXAST_DATASPAC EQU C'DS' Data space                              15900000
SDEXIDRPXAST_COMPDATA EQU C'SC' Component data                          15950000
SDEXIDRPX_LEN EQU *-SDEXIDRPX                                           16000000
         ORG   SDEXIDRPXTYPD                                            16050000
SDEXIDRPXTYPD_CV DS 0X                                                  16100000
SDEXIDRPXTYPD_CV_KEY DS 1BL1 Key should be in bits 0-3 of the field,   *16150000
                         not bits 4-7                                   16200000
SDEXIDRPXTYPD_CV_LEN EQU *-SDEXIDRPXTYPD_CV                             16250000
         ORG   SDEXIDRPXTYPD                                            16350000
SDEXIDRPXTYPD_DS DS 0X                                                  16400000
SDEXIDRPXTYPD_DS_KEY DS 1BL1 Key should be in bits 0-3 of the field,   *16450000
                         not bits 4-7                                   16500000
         DS    1CL0005   Reserved                                       16550000
         DS    1CL0002   Reserved                                       16600000
SDEXIDRPXTYPD_DS_ASTE DS 1AL4 Set by SDUMP. Exit should not change.     16650000
SDEXIDRPXTYPD_DS_STOKEN DS 1CL0008 STOKEN                               16700000
SDEXIDRPXTYPD_DS_LEN EQU *-SDEXIDRPXTYPD_DS                             16750000
         ORG   SDEXIDRPXTYPD                                            16850000
SDEXIDRPXTYPD_SC DS 0X                                                  16900000
SDEXIDRPXTYPD_SC_KEY DS 1BL1 Key should be in bits 0-3 of the field,   *16950000
                         not bits 4-7                                   17000000
         DS    1CL0005   Reserved                                       17050000
SDEXIDRPXTYPD_SC_STYP DS 1BL1 Storage Type                              17100000
         ORG   SDEXIDRPXTYPD_SC_STYP                                    17150000
SDEXIDRPXTYPD_SC_COMM EQU X'80' Storage is in common                    17200000
SDEXIDRPXTYPD_SC_AAFLAG EQU X'40' Absolute address supplied in         *17250000
                         SdexiDrpxTypd_SC_AAPtr                         17300000
         ORG   SDEXIDRPXTYPD_SC_STYP+X'00000001'                        17350000
         DS    1CL0001   Reserved                                       17400000
SDEXIDRPXTYPD_SC_AAPTR DS 1AL4 Absolute address                         17450000
SDEXIDRPXTYPD_SC_LEN EQU *-SDEXIDRPXTYPD_SC                             17500000
         ORG   ,                                                        17550000
.L0008   ANOP                                                           17600000
         AIF   ('&ZCBPRINT' EQ 'NO').P3                                 17650000
         AIF   ('&LIST' EQ 'YES').P4                                    17700000
.P3      ANOP                                                           17750000
         POP   PRINT                                                    17800000
.P4      ANOP                                                           17850000
.P_EXIT  ANOP                                                           17900000
         MEND                                                           17950000
**/ IHASDEXI_2:;                                                        18000000
* %IHASDEXI_INCLUDED = 'YES';                                           18050000
* %DCL ZCBPRINT CHAR EXT;                                               18100000
* %DEACTIVATE ZCBPRINT;                                                 18150000
* %DCL IHASDEXI_LIST CHAR EXT;                                          18200000
* %DEACTIVATE IHASDEXI_LIST;                                            18250000
* %IF IHASDEXI_LIST ^= 'NO' &                                           18300000
*    ZCBPRINT ^= 'NO' %THEN                                             18350000
*   %GOTO IHASDEXI_3;                                                   18400000
*   @LIST PUSH NOECHO;                                                  18450000
*   @LIST NOASSEMBLE NOECHO;                                            18500000
*   @LIST OFF C NOECHO;                                                 18550000
* %IHASDEXI_3:;                                                         18600000
*/* Start of PL/X Source                                             */ 18650000
*  DCL 1 SDEXI BASED BDY(WORD),      /* SVC Dump exit parameter list    18700000
*                                      fields for use by, or to be      18750000
*                                      filled in by, exit        @L1A*/ 18800000
*        2 * CHAR(12),               /* Contains no information for     18850000
*                                      use by the exit.          @L1A*/ 18900000
*        2 SdexiBFAD PTR(31),        /* Address of data buffer.         18950000
*                                      Set by SVC Dump.                 19000000
*                                      For use by exit.          @L1A*/ 19050000
*        2 SdexiBFLN FIXED(31),      /* Length of data buffer           19100000
*                                      (4096 bytes).                    19150000
*                                      For use by exit.          @L1A*/ 19200000
*        2 SdexiORAD PTR(31),        /* Address of output routine.      19250000
*                      Set by SVC Dump. For use by exit.                19261500
*                      Interface to routine:                            19273000
*                               AMODE=31.                               19284500
*                               Any P, Any S, H=DUMPSRV.                19296000
*                               Task mode.                              19307500
*                               Enabled, no locks held, no EUT FRRs.    19319000
*                               Key 0, Supervisor State.                19330500
*                               R1  - address of SDEXI.                 19342000
*                               R13 - address of 72-byte save area.     19353500
*                               R14 - return address.                   19365000
*                               R15 - entry point address.              19376500
*                                                                @L1A*/ 19388000
*        2 SdexiKEYS CHAR(2),        /* Storage keys for moved data.    19400000
*                                      Must be set by exit if bit       19450000
*                                      SdexiDRPS is not set.     @L1A*/ 19500000
*          3 SdexiFKEY CHAR(1),      /* Storage key of first 2K of data 19550000
*                  (Key must be in bits 0-3, not 4-7 of the byte)       19600000
*                                                                @L1A*/ 19650000
*          3 SdexiSKEY CHAR(1),      /* Storage key of second 2K of     19700000
*                  data (Key must be in bits 0-3, not 4-7 of the byte)  19750000
*                                                                @L1A*/ 19800000
*        2 SdexiASID CHAR(2),        /* ASID of data moved to buffer.   19850000
*                                      Must be set by exit if bit       19900000
*                                      SdexiDRPS is not set.     @L1A*/ 19950000
*        2 * CHAR(4),                /* Contains no information for     20000000
*                                      use by the exit.          @L1A*/ 20050000
*        2 SdexiCDAD PTR(31),        /* Address of data in buffer.      20100000
*                    Must be set by exit if bit SdexiDRPS is not set.   20150000
*                    This address should be on a page boundary, and     20200000
*                    the buffer should contain 4096 bytes of data       20250000
*                    representing the contents of the entire page.      20300000
*                                                                @L1A*/ 20350000
*        2 * CHAR(8),                /* Contains no information for     20400000
*                                      use by the exit.          @L1A*/ 20450000
*        2 SdexiSVAD PTR(31),        /* Address of 72-byte save area.   20500000
*                                      Set by SVC Dump.                 20550000
*                                      For use by exit.          @L1A*/ 20600000
*        2 * CHAR(4),                /* Contains no information for     20650000
*                                      use by the exit.          @L1A*/ 20700000
*        2 SdexiWKAD PTR(31),        /* Address of work area.           20750000
*                                      Set by SVC Dump.                 20800000
*                                      For use by exit. Length is       20850000
*                                      in SdexiWKLN (AT LEAST 200       20900000
*                                      BYTES)                    @L1A*/ 20950000
*        2 SdexiWKLN FIXED(31),      /* Length of work area pointed     21000000
*                                       to by SdexiWKAD          @L1A*/ 21050000
*        2 SdexiDRPA PTR(31),       /* Address of dump record prefix    21100000
*                                      to be filled in by exit   @L1A*/ 21150000
*          3 SdexiDRPS BIT(1),      /* If on, then the dump record      21200000
*                                      prefix was filled in by the      21250000
*                                      exit. This bit is set by         21300000
*                                      the exit, and checked by SVC     21350000
*                                      Dump. It is initially off @L1a*/ 21400000
*        2 SdexiALP PTR(31),        /* Pointer to the ASID list -       21450000
*                                      Set by SVC Dump.                 21500000
*                                      For use by exit.          @L1A*/ 21550000
*        2 SdexiSDAO  CHAR(8),        /*SDATA OPTIONS            @L1A*/ 21600000
*          4 SdexiSDTA CHAR(2),       /*SDATA OPTION FLAGS       @L1A*/ 21650000
*            6 SdexiSDT1     CHAR(1), /* 1ST BYTE OF OPTIONS     @L1A*/ 21700000
*              7 SdexiAPSA    BIT(1), /* DUMP ALL PSA'S          @L1A*/ 21750000
*              7 SdexiPSA     BIT(1), /* DUMP CURRENT PSA        @L1A*/ 21800000
*              7 SdexiNUC     BIT(1), /* DUMP THE NUCLEUS        @L1A*/ 21850000
*              7 SdexiSQA     BIT(1), /* DUMP SQA                @L1A*/ 21900000
*              7 SdexiLSQA    BIT(1), /* DUMP LSQA               @L1A*/ 21950000
*              7 SdexiRGN     BIT(1), /* DUMP RGN-PRIVATE AREA   @L1A*/ 22000000
*              7 SdexiLPA     BIT(1), /* DUMP LPA MOD. FOR RGN   @L1A*/ 22050000
*              7 SdexiTRT     BIT(1), /* DUMP TRACE DATA         @L1A*/ 22100000
*            6 SdexiSDT2     CHAR(1), /*SECOND BYTE SDATA FLGS   @L1A*/ 22150000
*              7 SdexiCSA     BIT(1), /* DUMP CSA                @L1A*/ 22200000
*              7 SdexiSWA     BIT(1), /* DUMP SWA                @L1A*/ 22250000
*              7 SdexiSMDM    BIT(1), /* DUMP SUMMARY DUMP DATA  @L1A*/ 22300000
*              7 SdexiNSMD    BIT(1), /* DON'T DUMP SUMMARY DUMP @L1A*/ 22350000
*              7 SdexiNAPS    BIT(1), /* DO NOT DUMP ALL PSA     @L1A*/ 22400000
*              7 SdexiNASQ    BIT(1), /* DO NOT DUMP SQA         @L1A*/ 22450000
*              7 SdexiANUC    BIT(1), /* DUMP ALL NUCLEUS        @L1A*/ 22500000
*              7 SdexiDEFS    BIT(1), /* DEFAULTS                @L1A*/ 22550000
*          4 SdexiSDA2 CHAR(4),  /*EXTENDED SDATA OPTIONS        @L1A*/ 22600000
*            6 SdexiEXIT1 BIT(8), /*SDATA OPTIONS EXIT ROUTINES  @L1A*/ 22650000
*              7 SdexiGRSQ BIT(1),   /* SDATA=GRSQ               @L1A*/ 22700000
*              7 * BIT(2),           /* Reserved                 @L1A*/ 22750000
*              7 SdexiCouple BIT(1), /* SDATA=COUPLE             @L1A*/ 22800000
*              7 SdexiXESDATA BIT(1),  /* SDATA=XESDATA          @L1A*/ 22850000
*              7 * BIT(1),           /* Reserved                 @P1C*/ 22875000
*              7 SdexiWLMDATA BIT(1),  /* SDATA=WLMDATA          @P1A*/ 22900000
*              7 * BIT(1),           /* Reserved                 @P1A*/ 22925000
*            6 SdexiEXIT2 BIT(8), /*SDATA OPTIONS EXIT ROUTINES  @L1A*/ 22950000
*              7 * BIT(2),           /* Reserved                 @L2A*/ 22975000
*              7 SdexiSERVERS BIT(1),  /* SDATA=SERVERS          @L2A*/ 23000000
*              7 * BIT(5),           /* Reserved                 @L2C*/ 23025000
*            6 SdexiSDT3   BIT(8),   /* SDATA OPTIONS            @L1A*/ 23050000
*              7 SdexiNDEF BIT(1),   /* NODEFAULTS               @L1A*/ 23100000
*              7 SdexiIO   BIT(1),   /* DO I/O AREAS             @L1A*/ 23150000
*              7 *         BIT(6),   /*RESERVED                  @L1A*/ 23200000
*            6  SdexiSDT4  BIT(8),    /* SDATA OPTIONS           @L1A*/ 23250000
*          4 * CHAR(2),          /*  Reserved                    @L1A*/ 23300000
*          2 SdexiFlags BIT(8),   /*                             @L1A*/ 23350000
*            6 SdexiAddressRange BIT(1),  /* An address range           23400000
*                   has been provided, instead of placing the           23450000
*                   data into the provided buffer. The data must        23500000
*                   be in the current primary space or be               23550000
*                   addressable by an ALET that is currently on the     23600000
*                   DU-AL or the PASN AL. This may only be used if      23650000
*                   bit SdexiDRPS is off or (if it is on) if            23700000
*                   creating an address space or data space             23750000
*                   record. When SdexiDRPS is off, the storage range    23800000
*                   must represent the primary address space,           23850000
*                   with start address in                               23900000
*                   SdexiCDAD and end address in SdexiRangeEnd.         23950000
*                   When SdexiDRPS is on for address space storage,     24000000
*                   the start address is in SdexiDrpxLAD,               24050000
*                   the end address in SdexiRangeEnd, and the ALET      24100000
*                   is in SdexiRangeALET. Use an ALET of 0 for          24150000
*                   the primary address space.                          24200000
*                   When SdexiDRPS is on for data space storage,        24250000
*                   the start address is in SdexiDrpxLAD,               24300000
*                   the end address in SdexiRangeEnd, and the ALET      24350000
*                   is in SdexiRangeALET.                               24400000
*                   In all cases, the start address will be             24450000
*                   rounded down to the nearest page boundary.          24500000
*                   The end address will be rounded up to the last      24550000
*                   byte of the page containing the input end           24600000
*                   address.                                     @L1A*/ 24650000
*            6 SdexiAddress64 BIT(1),  /* A 64-bit address has been     24666600
*                   provided in SdexiCDAD64.                     @L4A*/ 24683200
*          2 * CHAR(3),           /*RESERVED                     @L1A*/ 24700000
*          2 SdexiRangeEnd PTR(31),   /* The entire page containing     24750000
*                   this byte will be dumped.                    @L1A*/ 24800000
*          2 SdexiRangeALET FIXED(32),    /*                     @L1A*/ 24850000
*          2 SdexiProbDesc@ PTR(31),  /* Address of ProbDesc area       24900000
*                 for dump. 0 if no such area exists.            @L1A*/ 24950000
*          2 SdexiIntoken@ PTR(31),   /* Address of 32-byte             25000000
*                 incident token for dump.                       @L1A*/ 25050000
*          2 SdexiCDAD64 Char(8), /* 64-bit address of data in buffer.  25064200
*                    Must be set by exit if bit SdexiDRP2 is set.       25078400
*                    This address should be on a page boundary, and     25092600
*                    the buffer should contain 4096 bytes of data       25106800
*                    representing the contents of the entire page.      25121000
*                                                                @L4A*/ 25135200
*          2 * CHAR(0);           /*RESERVED                     @L1A*/ 25150000
*DCL SdexiSAVE CHAR(72) BASED(SdexiSVAD)                                25200000
*                      BDY(WORD);       /* SAVE AREA USED ONLY BY EXIT  25250000
*                                                                @L1A*/ 25300000
*DCL SdexiWORK CHAR(200) BASED(SdexiWKAD)                               25350000
*                       BDY(WORD);       /* WORK AREA USED ONLY         25400000
*                                               BY EXIT          @L1A*/ 25450000
*DCL 1 SdexiALST BASED(SdexiALP),        /* LIST OF ASID WHICH ARE      25500000
*                                           INCLUDED IN THE DUMP.  IT   25550000
*                                           IS BUILT BY SDUMP AND USED  25600000
*                                           BY THE EXITS         @L1A*/ 25650000
*      3 SdexiALST# FIXED(15),           /* NUMBER OF ENTRIES    @L1A*/ 25700000
*      3 SdexiALST_ARRAY(*),             /* An array of ASIDs, the      25750000
*               number of which is indicated by SdexiALST#       @L1A*/ 25800000
*        5 SdexiALST_ENTRY Fixed(15);    /* An ASID within the          25850000
*               array.                                           @L1A*/ 25900000
*DCL SdexiMAXA FIXED(15) CONSTANT(64);    /* MAXIMUM NUMBER OF ENTRIES  25950000
*                                      IN THE ASID LIST          @L1A*/ 26000000
* /*                                                                    26050000
*    The dump record prefix can be set to indicate a data space,        26100000
*    an address space, or a component record.                           26150000
*    Fields that must be set by an exit which turns on bit SdexiDRPS    26200000
*    are:                                                               26250000
*    For a data space record:                                           26300000
*       SdexiDrpxAST set to 'DS',                                       26350000
*       SdexiDrpxAS1 set to the owning ASID                             26400000
*       SdexiDrpxASC set to the data space name                         26450000
*       SdexiDrpxTypd_DS_KEY set to the storage key                     26500000
*       SdexiDrpxLAD set to the logical address                         26550000
*       SdexiDrpxTypd_DS_Stoken set to the data space's STOKEN.         26600000
*       The system will fill in SdexiDrpxTypd_DS_ASTE to the            26650000
*       ASTE real address for the                                       26700000
*       data space, provided that that field is                         26750000
*       not 0 (i.e., was set by the exit).                              26800000
*    For an address space record:                                       26850000
*       SdexiDrpxAST set to 'CV',                                       26900000
*       SdexiDrpxAS1 set to X'FFFFFFFF'                                 26950000
*       SdexiDrpxAS2 set to the ASID                                    27000000
*       SdexiDrpxTypd_CV_KEY set to the storage key                     27050000
*       SdexiDrpxLAD set to the logical address                         27100000
*    For a CompData record:                                             27150000
*       SdexiDrpxAST set to 'SC',                                       27200000
*       SdexiDrpxASC set to the component identifier                    27250000
*       You should make sure that the component records can             27300000
*       be distinguished from each other. The SdexiDrpxLad field        27350000
*       could be used for this purpose, since the "address" is          27400000
*       only to be understood by the component itself, not by           27450000
*       dump processing or IPCS.                                        27500000
*    In all of these cases, the ID, LEN, and SEQ fields are set by      27550000
*    the system and should not be modified by the exit.                 27600000
*                                        @L1A*/                         27650000
*                                                                       27654100
* /*******************************************************************/ 27658200
* /* 64-bit address DRPX Notes:                                      */ 27662300
* /*******************************************************************/ 27666400
* /* 64-bit addresses can be specified by using a version 2 DRPX, or    27670500
*    by supplying the address in SdexiCDAD64 and setting                27674600
*    SdexiAddress64.                                                    27678700
*                                                                       27682800
*    SdexiDrpxTypd_DS_ASTE and SdexiDrpxTypd_DS_STOKEN should not be    27686900
*    be supplied for 64-bit address DRPX records.                       27691000
*                                                                @L4A*/ 27695100
*DCL 1 SdexiDRPX CHAR(64) BDY(WORD)                                     27700000
*                BASED(SdexiDRPA),       /* Dump record prefix          27750000
*                to be filled in by the exit                     @L1A*/ 27800000
*      2 SdexiDrpxID CHAR(3),            /* Set by SDUMP. Exit should   27850000
*                                           not change.          @L1A*/ 27900000
*        3 *         CHAR(2),            /* DRPX identifier      @L4A*/ 27916600
*        3 SdexiDrpxIDV Char(1),         /* DRPX version         @L4A*/ 27933200
*      2 SdexiDrpxLen FIXED(8),          /* Set by SDUMP. Exit should   27950000
*                                           not change.          @L1A*/ 28000000
*      2 SdexiDrpxAS Char(16) Bdy(Word), /* ASCB information     @L1A*/ 28050000
*        3 SdexiDrpxAST Char(2),         /* Address space type          28100000
*                     code. See Constants SdexiDrpxAST_xxx       @L1A*/ 28150000
*        3 SdexiDrpxASH Fixed(16),       /*                      @L1A*/ 28200000
*        3 SdexiDrpxAS1 Fixed(32),       /*                      @L1A*/ 28250000
*        3 SdexiDrpxASC CHAR(8) BDY(WORD),  /* Qualifier 2       @L1A*/ 28300000
*          4 SdexiDrpxAS2 FIXED(32),     /*                      @L1A*/ 28350000
*          4 SdexiDrpxAS3 FIXED(32),     /*                      @L1A*/ 28400000
*      2 SdexiDrpxLAD PTR(31),           /* Logical address. This       28450000
*              should be on a page boundary.                     @L1A*/ 28500000
*      2 SdexiDrpxSEQ FIXED(32),         /* Set by SDUMP. Exit should   28550000
*                                           not change.          @L1A*/ 28600000
*      2 * CHAR(8),                      /* Set by SDUMP. Exit should   28650000
*                                           not change.          @L1A*/ 28700000
*      2 SdexiDrpxTYPD CHAR(28) Bdy(Word),  /* Record type specific     28750000
*                                           data.                @L1A*/ 28800000
*      2 * CHAR(0);                      /*                      @L1A*/ 28850000
*DCL 1 SdexiDrpx64 CHAR(64) BDY(WORD)                                   28854500
*                BASED(SdexiDRPA),  /* Dump record prefix v2 to be      28859000
*                                      filled in by the exit     @L4A*/ 28863500
*      2 *           CHAR(20),      /*                           @L4A*/ 28868000
*      2 SdexiDrpx64Lad CHAR(8) Bdy(Word), /* Logical address. This     28872500
*                                      should be on a page boundary.    28877000
*                                                                @L4A*/ 28881500
*        3 SdexiDrpx64LadHi PTR(32), /* High-order word of LAD   @L4A*/ 28886000
*        3 SdexiDrpx64LadLo PTR(32), /* Low-order word of LAD    @L4A*/ 28890500
*      2 * CHAR(32);                /*                           @L4A*/ 28895000
*DCL SdexiDrpxAST_AddrSpac CHAR(2) Constant('CV');  /* Address space    28900000
*                                                                @L1A*/ 28950000
*DCL SdexiDrpxAST_DataSpac CHAR(2) Constant('DS');  /* Data space       29000000
*                                                                @L1A*/ 29050000
*DCL SdexiDrpxAST_CompData CHAR(2) Constant('SC');  /* Component        29100000
*                 data                                           @L1A*/ 29150000
*DCL 1 SdexiDRPXTypd_CV CHAR(28) Def(SdexiDrpxTypd),   /* This          29200000
*           maps information to be placed into the SdexiDrpxTypd        29250000
*           field when creating an address space record (CV)     @L1A*/ 29300000
*      2 SdexiDrpxTypd_CV_KEY BIT(8),    /* Key should be in bits       29350000
*                 0-3 of the field, not bits 4-7                 @L1A*/ 29400000
*      2 * CHAR(0);                      /*                      @L1A*/ 29450000
*DCL 1 SdexiDRPXTypd_DS CHAR(28) Def(SdexiDrpxTypd),   /* This          29500000
*           maps information to be placed into the SdexiDrpxTypd        29550000
*           field when creating a data space record (DS)         @L1A*/ 29600000
*      2 SdexiDrpxTypd_DS_KEY BIT(8),    /* Key should be in bits       29650000
*                 0-3 of the field, not bits 4-7                 @L1A*/ 29700000
*      2 * CHAR(5),                      /* Reserved             @L1A*/ 29750000
*      2 * CHAR(2),                      /* Reserved             @L1A*/ 29800000
*      2 SdexiDrpxTypd_DS_ASTE PTR(31),  /* Set by SDUMP. Exit should   29850000
*                                           not change.          @L1A*/ 29900000
*      2 SdexiDrpxTypd_DS_STOKEN CHAR(8),  /* STOKEN             @L1A*/ 29950000
*      2 * CHAR(0);                      /*                      @L1A*/ 30000000
*DCL 1 SdexiDRPXTypd_SC CHAR(28) Def(SdexiDrpxTypd),   /* This          30050000
*           maps information to be placed into the SdexiDrpxTypd        30100000
*           field when creating a component data record (SC)     @L1A*/ 30150000
*      2 SdexiDrpxTypd_SC_KEY BIT(8),    /* Key should be in bits       30200000
*                 0-3 of the field, not bits 4-7                 @L1A*/ 30250000
*      2 * CHAR(5),                      /* Reserved             @L1A*/ 30300000
*      2 SdexiDrpxTypd_SC_Styp BIT(8),   /* Storage Type         @L1A*/ 30350000
*        3 SdexiDrpxTypd_SC_Comm BIT(1), /* Storage is in common        30400000
*                                                                @L1A*/ 30450000
*        3 SdexiDrpxTypd_SC_AAFlag BIT(1), /* Absolute address supplied 30500000
*              in SdexiDrpxTypd_SC_AAPtr                         @L1A*/ 30550000
*      2 * CHAR(1),                      /* Reserved             @L1A*/ 30600000
*      2 SdexiDrpxTypd_SC_AAPtr PTR(31), /* Absolute address     @L1A*/ 30650000
*      2 * CHAR(0);                      /*                      @L1A*/ 30700000
*%                                                                      30750000
* /* The following constant is used by SDUMP in allocating storage      30800000
*    for the parameter list. It has no meaning for the exit. */         30850000
*SdexiTOTL='Length(SDEXI)+Length(SdexDRPX)+Length(SdexSAVE)+            30900000
*Length(SdexWORK)+SdexMAXA*Length(SdexAIDE)+Length(SdexAID#)'           30950000
*                         /*                                     @L1A*/ 31000000
*      ;                                                                31050000
*@LOGIC;                                                                31100000
*#PRAGMA TOOL=CBGEN.                                                    31150000
*#DELETE.SDEXISAVE                                                      31200000
*#DELETE.SDEXIWORK                                                      31250000
*#USEORG.                                                               31300000
*#EPRAGMA.                                                              31350000
*@ENDLOGIC;                                                             31400000
*/* End of PL/X Source                                               */ 31450000
* %IF IHASDEXI_LIST ^= 'NO' &                                           31500000
*    ZCBPRINT ^= 'NO' %THEN                                             31550000
*   %GOTO IHASDEXI_4;                                                   31600000
*   @LIST POP NOECHO;                                                   31650000
* %IHASDEXI_4:;                                                         31700000
* %END;                                                                 31750000
